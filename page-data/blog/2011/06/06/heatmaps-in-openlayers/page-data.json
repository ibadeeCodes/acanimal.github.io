{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2011/06/06/heatmaps-in-openlayers","webpackCompilationHash":"a74464f2a2f58d5242cc","result":{"data":{"markdownRemark":{"html":"<p>Some month ago I found nice post on how to create <a href=\"http://www.patrick-wied.at/static/heatmapjs/\">heatmaps </a>using HTML5 canvas element. Its author, <a href=\"http://www.patrick-wied.at/\">Patrick Wied</a>, created a nice JavaScript code responsible to create a heatmap over an image depending on the mouse click or mouse move events.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 304px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.48684210526315%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADrUlEQVQ4yw2TS0wTBgCGe9hlO+yRuOyyg8my0w5LZuIObpM4A5NEHjoeAXQTYYNNqDB5RZHSKlBglALCoBQoBTrEAYXSYlkLyFpegrZQCgWEvnjqsEPNnMu+cf0P33f5foEtoGXM+QD3sgf7nJexpVke/93AnO8e6+s7TM1usbC4gXt9iyGflYGXXRhtfpyzfzKxN4DzRSsWh5cd3y5evxuB3Csl2axErbGhqF+hSGmlae8sYk8rnb895cxaOdLZYXQjfmq2E2h8eZqEu1Zymp6SPX+b8mex5M60YpheYHV1FUHz0Brxr1IIaSnhy2MVREXUcuR8OWESBSPmFfIsetLVJppnlBj2wri2XE/Ps2Sqd0WEO0dJfZxK/6vPuO4QMWCYRjA9tUCdzcbpSxm89fphPjpcyodvComLjMTnd2AwPqRMcwaX5RO6bDGITVpeuELpXsvl0KkbvJMUzJHMz/kg6BgngqIROJfmCWzuomr6heSkHC5ITJz6SUGdTIWp10Nu2wOKLZ+idx0lxWKgdqEN17/BlJgHOXFUSGJcKt+dzyc+6jKJhQkIZmcW6TFv0dTtoqi3CqU3hB8ffU1qnZy0nhWik2y8FnKWt2/GcOhkGu+9f5yLlSI0ul0KReWI8qu4XC4hr15MmjoWQY/WQ8ZoO1cWM0gY/QL5eCTRHaEkzrxBhlVJV7uT/Os9RMY6iMlqIKLye27K9PT3rWHU28jTtTA+dpwJQwjSXtMB0LSCbOQcVue7RMiz+CqihYSUauJuFXNVUkaVSkGN/gJRt2qJNgqpfvIx5yoKkBbJ0HT0EtWZxpWxUIRiKVrtEAK9cQOZVUPffgxFnWMoKn0UtThIr1uhuek5jRO/sj8YhM7+A1d/t3Ft8yK583IG9F7umV30mzcpHbChnmzFfH8KQZu/DkmvBUmDG2WzC03fEu3dEuyaKGr/UKByZfOfOISxyW9Q9O2QeSD4dqmUstIniOoW6TY3YnIJWfjnJCpLN4KWdSk5Kgs5uXsH3XlYCwSYGy2ASxHsK8LR7iQzMlyI3JOF2C2m3bjM9NRfjJsD1I5Y8HSHs+0I4/ZzIV2jTgTqTh/xkyMkN09RKxukX6slTWZAZUyFn4MZHC9maGafioNkRLuJ1Bjs6JxqdA49WoMfaVMXJZZMClej6Ry9j2Bodhv5wQfvTNjJzshCmJ5BXKwKeX8bgQ0p004dc/Z1Bk1ueoY93LW6WA4c7N42dEOPqCjroKBCyY3mNiYmH/I/D/vvJoMrmP4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"heatmap\" title=\"heatmap\" src=\"/static/c88d04c4bb0f2bc305acfb14591ba220/55a47/heatmap.png\" srcset=\"/static/c88d04c4bb0f2bc305acfb14591ba220/19bd1/heatmap.png 163w,\n/static/c88d04c4bb0f2bc305acfb14591ba220/55a47/heatmap.png 304w\" sizes=\"(max-width: 304px) 100vw, 304px\" loading=\"lazy\">\n    </span></p>\n<p>Instantly, I though to take a look and try to create an OpenLayers heatmap layer. Unfortunately I was very busy and have no time to work on. But... fortunately the project author has enough time to continue improving it and he has created the desired heatmap OpenLayers layer (and also one more for Google Maps), which you can test <a href=\"http://www.patrick-wied.at/static/heatmapjs/demo/maps_heatmap_layer/openlayers.php\">here</a> and looks like:</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 237px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 65.40084388185655%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACz0lEQVQ4y42T21NTVxTGzz/ZF9+cqc5UphO0xVZnHDq21SkBImBqrRSRqZp7kFuMASVCgHIpCIKJIYnkkHNyTs4tATJeWn/uBMZxRh94WLPW7Nn72+v7vrWkoSGV7S2DbEZhdvEFvw5M8G1XgO96wpy7FhY5dJSPF1I04FBI25TlMjXDpF6t4ptYwNUd4Hxf5Ag4dHzAXbmIVlKwNJ19y8HRdWIjFicvJmjpvP/x4nFBpf7IUzoGE+S3ZdSiilI0WF108PtVBiIpzvV8DvSpBJ9+9H2vALzgHeab33zcCCZR0hV6nsl45/MomzVeO1Xujc9zpsMn6Ec/AznMhxqfFXWL24/k9T/mcv8onsF5ZiYdxqbKRMY1puMWcs6gUqpwZSDGqat3cXkCXwRrsPjRG+ZWeBppdf0lpZ1doV2N/MsqmTWT5VmbJwkTTTao6TbJhQ3C8RW67yQ/Ot+kKMLl8eO+Pcmd6DIT02uHHeqlMvVaFX3XYTTiMDRQYyllUS7qlAo6r22L97U6O1mL9ptjtHqCtPWKCegNcubnUS6P+enL9BF/pCLpShlbOGxrlniwx1SsyvamjVY0SW8Y/JMym/XWpsxf4blmV43uWjp9tHmitAce8lWulZ9WbrGVEYA9f082Kc3M5YhPmKwvOWg7Ns9XHIYDB/x+fY+Nfw0Wl15x0ZPk9BW/cDOE516C5Nwz1tMZ7q+m6N/uYC3zAim5mmFHVtnaUEjNlFEKJtNTBvOzGuOxAonHOdafZ3kwtYx7cJKFlTTZdI5SVm3qu2/twcF/YiH+p1JUkL5ectOVekDnn0/5wRvll/4YLvcIF66PiG0J4epqjIOPE+2D3Ag9gTd13u3vob7S2c2XhHFlqpbJ24Mab8S5dKpTCNsVpLU72BS7Ed1341z6Y4Szom5odnt4Ruz5Jrqqc2A7VCsm+7ZN3RGbpVUo5QvYqoohK3wARGYr77y2ZygAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"heatmap ol\" title=\"heatmap-ol\" src=\"/static/05c629034268b613e747a000c703a8bf/a1ad1/heatmap-ol.png\" srcset=\"/static/05c629034268b613e747a000c703a8bf/19bd1/heatmap-ol.png 163w,\n/static/05c629034268b613e747a000c703a8bf/a1ad1/heatmap-ol.png 237w\" sizes=\"(max-width: 237px) 100vw, 237px\" loading=\"lazy\">\n    </span></p>\n<p>The big issue at this moment is the <strong>heatmap isn&apos;t a layer by itself</strong> and it needs a reference to a &quot;real&quot; layer (like a WMS layer) to render it. If we look at code we need three things:</p>\n<ul>\n<li>Some data for the hetmap.</li>\n</ul>\n<pre class=\"brush:js\">var testData={\n\tmax: 46,\n\tdata: [{lat: 33.5363, lon:-117.044, count: 1}, ... ,{lat: 35.8278, lon:-78.6421, count: 1}]\n};</pre>\n<ul>\n<li>A &quot;real&quot; OpenLayers layer.</li>\n</ul>\n<pre class=\"brush:js\">layer = new OpenLayers.Layer.MapServer( &quot;OpenLayers WMS&quot;,\n\t&quot;http://labs.metacarta.com/wms/vmap0&quot;, {layers: &apos;basic&apos;}\n);</pre>\n<ul>\n<li>Create the heatmap layer based on previous data and layer.</li>\n</ul>\n<pre class=\"brush:js\">heatmap = new OpenLayers.Layer.Heatmap( &quot;Heatmap Layer&quot;, map, layer,\n\t{visible: true, radius:10}, {isBaseLayer: false, opacity: 0.3}\n);\nheatmap.setDataSet(testData);\nmap.addLayers([layer, heatmap]);</pre>\n<p>Although it is not perfect really it is a great job. Thanks Patrick.</p>\n<p>&#xA0;</p>","excerpt":"Some month ago I found nice post on how to create heatmaps using HTML5 canvas element. Its author, Patrick Wied, created a nice JavaScript code responsible to create a heatmap over an image depending on the mouse click or mouse move events.","frontmatter":{"date":"06 June, 2011","title":"Heatmaps in OpenLayers"},"fields":{"slug":"/blog/2011/06/06/heatmaps-in-openlayers","readingTime":{"text":"2 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2011/06/06/heatmaps-in-openlayers"}}}