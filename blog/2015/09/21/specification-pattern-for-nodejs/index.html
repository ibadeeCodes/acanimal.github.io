<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.3dcd2cdf97bf9f5b1e17.css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2a4f4b0a3646be9d8560178ebc4306e5.woff2) format("woff2"),url(/static/nunito-latin-200-249c20ee4450b15795cdde4cbb5f38d8.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-89ba5530f3b2c751f2a49e25f31e3f15.woff2) format("woff2"),url(/static/nunito-latin-200italic-67d3d63c0ac28ccbc0c0fcbda8e66e04.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-895205e22ad7d4d866df7102352077cd.woff2) format("woff2"),url(/static/nunito-latin-300-cad1324b066f52f764cf080d9244c8b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-f4a613c73f19da60cf08aa42b2a9249b.woff2) format("woff2"),url(/static/nunito-latin-300italic-1fde36925a8493f45651815dd89d22a7.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-de6068bf97f40206af0b062e262e6213.woff2) format("woff2"),url(/static/nunito-latin-400-6386ba6af7b7a5480eb5efda82ff803c.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-6ca737afe5cef0c0a9c9bbfec4e398ff.woff2) format("woff2"),url(/static/nunito-latin-400italic-ef2e2a0d9dd85cf89526d1f27f8fbbef.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-b10ecee279e3a8d11d5ec3193b68d8bf.woff2) format("woff2"),url(/static/nunito-latin-600-c3de23017bcb95715e6eb11dd6a10fc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-97d4f64b213f3e5163827754c213bb4e.woff2) format("woff2"),url(/static/nunito-latin-600italic-4f62b81ff327bd0ffadcb7b82e6c13b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-91ae827aa880d02ea567979add1da58c.woff2) format("woff2"),url(/static/nunito-latin-700-623f5ed42b0b347fb4531ded4e4b57a2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-b94caac4c88b1fe6c4faf6256646f42e.woff2) format("woff2"),url(/static/nunito-latin-700italic-3aabf345871453097c2d8762411d187e.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-36e4c9b478c2e2adb339a76d819eed7e.woff2) format("woff2"),url(/static/nunito-latin-800-33c733aff58ea08126616f346cbf4f4a.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-0f20328772c0d84250ef397c129607fb.woff2) format("woff2"),url(/static/nunito-latin-800italic-672d2afe4f40a766e46ff95379550c4f.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-b296e05d0932e16d500b753becdb338e.woff2) format("woff2"),url(/static/nunito-latin-900-cbf4339e858edf2b14d20140b2887343.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-ae87e7b4e2d3825919b9bc6c82039b80.woff2) format("woff2"),url(/static/nunito-latin-900italic-602859bd469800c6205701f5a16b1a1b.woff) format("woff")}#___gatsby,#gatsby-focus-wrapper,body,html{width:100%;height:100%;margin:0;font-family:Nunito,Avenir,Helvetica,"sans-serif";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code{background-color:rgba(0,0,0,.04)}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{margin:1rem;padding:1rem;border-radius:1rem;background-color:#eee}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.13.14"/><title data-react-helmet="true">Specification pattern for NodeJS | A Curious Animal</title><meta data-react-helmet="true" name="description" content="Although the specification pattern is mainly use in DDD to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. The code is freely available at github repository and also installable via npmjs. The specification pattern There are tons of good documents and tutorials about the pattern, so I don&#x27;t want to extent too much here. The best source of information, IMO, is the Eric Evans big blue book Domain-Driven Design: DDD The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: the validation of objects that satisfies some critaria. An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project: has few issues if the number of issues reported last month is less 10, and is updated project if the date of the last solved issued it not beyond a week. The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification quality project that means a project has few issues and is an updated project. Wikipedia has a nice image showing an UMl diagram class about the specification patter: UML specification pattern We can see a specification is any interface that implements the  method and has the ,  and  method to chain specifications. How to use the NodeJS implementation ? I have created two implementations of the pattern: asynchronous and synchronous versions. The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc. The first step to use the implementation is to include the required version (synchronous or asynchronous): For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification: Later, to use the previous specification: The base class  offers the ,  and  methods we can use to chain specifications and build complex ones. For example: The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the  method, which must be use a callback, for example: and to use it you can make via the callback: Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the  method: Conclusions The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing validations chaining through specifications."/><meta data-react-helmet="true" property="og:title" content="Specification pattern for NodeJS"/><meta data-react-helmet="true" property="og:description" content="Although the specification pattern is mainly use in DDD to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. The code is freely available at github repository and also installable via npmjs. The specification pattern There are tons of good documents and tutorials about the pattern, so I don&#x27;t want to extent too much here. The best source of information, IMO, is the Eric Evans big blue book Domain-Driven Design: DDD The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: the validation of objects that satisfies some critaria. An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project: has few issues if the number of issues reported last month is less 10, and is updated project if the date of the last solved issued it not beyond a week. The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification quality project that means a project has few issues and is an updated project. Wikipedia has a nice image showing an UMl diagram class about the specification patter: UML specification pattern We can see a specification is any interface that implements the  method and has the ,  and  method to chain specifications. How to use the NodeJS implementation ? I have created two implementations of the pattern: asynchronous and synchronous versions. The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc. The first step to use the implementation is to include the required version (synchronous or asynchronous): For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification: Later, to use the previous specification: The base class  offers the ,  and  methods we can use to chain specifications and build complex ones. For example: The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the  method, which must be use a callback, for example: and to use it you can make via the callback: Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the  method: Conclusions The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing validations chaining through specifications."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@acanimal"/><meta data-react-helmet="true" name="twitter:title" content="Specification pattern for NodeJS"/><meta data-react-helmet="true" name="twitter:description" content="Although the specification pattern is mainly use in DDD to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. The code is freely available at github repository and also installable via npmjs. The specification pattern There are tons of good documents and tutorials about the pattern, so I don&#x27;t want to extent too much here. The best source of information, IMO, is the Eric Evans big blue book Domain-Driven Design: DDD The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: the validation of objects that satisfies some critaria. An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project: has few issues if the number of issues reported last month is less 10, and is updated project if the date of the last solved issued it not beyond a week. The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification quality project that means a project has few issues and is an updated project. Wikipedia has a nice image showing an UMl diagram class about the specification patter: UML specification pattern We can see a specification is any interface that implements the  method and has the ,  and  method to chain specifications. How to use the NodeJS implementation ? I have created two implementations of the pattern: asynchronous and synchronous versions. The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc. The first step to use the implementation is to include the required version (synchronous or asynchronous): For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification: Later, to use the previous specification: The base class  offers the ,  and  methods we can use to chain specifications and build complex ones. For example: The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the  method, which must be use a callback, for example: and to use it you can make via the callback: Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the  method: Conclusions The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing validations chaining through specifications."/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="A Curious Animal" href="/rss.xml"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-f4df3cfd233e17bf7186.js"/><link as="script" rel="preload" href="/1-26e29eb6158becab9f2e.js"/><link as="script" rel="preload" href="/app-39cda9469372e75ea0ef.js"/><link as="script" rel="preload" href="/styles-577ae45e6d2a94e7a3f3.js"/><link as="script" rel="preload" href="/webpack-runtime-e0c8ee51081aad2e749b.js"/><link as="fetch" rel="preload" href="/page-data/blog/2015/09/21/specification-pattern-for-nodejs/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="1k8t7d9">.css-1k8t7d9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;}</style><div class="css-1k8t7d9 e46mkkt0"><style data-emotion-css="780j8p">.css-780j8p{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background-color:#EEEEEE;background:url("https://unsplash.it/1500/500?random&blur") no-repeat center center fixed;background-size:cover;}</style><header class="css-780j8p e5kaaa10"><style data-emotion-css="6wa51n">.css-6wa51n{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;max-width:860px;padding:1rem 1.0875rem;font-size:1.2rem;text-align:center;}</style><div class="css-6wa51n e5kaaa13"><style data-emotion-css="fb9rxi">.css-fb9rxi{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;text-shadow:1px 1px 1px #FFFFFF;margin-left:0;}.css-fb9rxi::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-fb9rxi:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-fb9rxi e5kaaa15" href="/">Home</a><style data-emotion-css="s7vzln">.css-s7vzln{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;text-shadow:1px 1px 1px #FFFFFF;}.css-s7vzln::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-s7vzln:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-s7vzln e5kaaa14" href="/blog">Blog</a><a class="css-s7vzln e5kaaa14" href="/books">Books</a><a class="css-s7vzln e5kaaa14" href="/projects">Projects</a><a class="css-s7vzln e5kaaa14" href="/archive">Archive</a><a class="css-s7vzln e5kaaa14" href="/about">About</a><style data-emotion-css="1r9gd80">.css-1r9gd80{position:absolute;top:20px;right:20px;}</style><a href="/rss.xml" class="css-1r9gd80 e5kaaa16"><style data-emotion-css="on3xa">.css-on3xa{width:20px;height:20px;margin-bottom:0;}</style><img alt="logo" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjQzNC4yMzlweCIgaGVpZ2h0PSI0MzQuMjM5cHgiIHZpZXdCb3g9IjAgMCA0MzQuMjM5IDQzNC4yMzkiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQzNC4yMzkgNDM0LjIzOTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik04OS4xMzgsMzA2LjgxN2MtMjMuNjIzLTEwLjQ4MS00OC4zNjctMTMuNzg3LTY4LjgxNiw1LjA2MmMtMTcuODgsMTYuNDgyLTIzLjQ2LDQ0LjUzOS0xNi45NTYsNjcuNzU1DQoJCQljOC41NTcsMzAuNTE5LDM4LjQ1Niw1MS41NzcsNjkuOTA5LDQ4LjM2M2MzNi4yMjEtMy42OTcsNzAuODc4LTM3LjAyMyw2MC42OTItNzQuODQNCgkJCUMxMjcuODk5LDMzMC42MzMsMTA5LjQ5NiwzMTUuODQ2LDg5LjEzOCwzMDYuODE3eiBNNjkuMzE5LDQwMy42OTljLTE5Ljg1NCwyLjAyNi0zNi4wMDgtMTIuOTE4LTQyLjEzMi0zMC42MzUNCgkJCWMtNC41ODUtMTMuMjY0LTEuNzAxLTI2LjU5OSw2LjA5OS0zNy45MzNjMTguODA0LTI3LjMzLDU4Ljc0Ny0zLjk1Niw3Mi44NjQsMTYuNTMzDQoJCQlDMTIzLjU0NywzNzYuOTM0LDkzLjI4Miw0MDEuMjU3LDY5LjMxOSw0MDMuNjk5eiIvPg0KCQk8cGF0aCBkPSJNMTkwLjgwNSwyMjcuNzUzYy00OS4xMzQtNDAuMDUtMTE2LjEwMy00OS4xMy0xNzcuMzY5LTUxLjEwNWMtNC43OTQtMC4xNTctNy44OTYsMi4zMTgtOS4zOTUsNS42MjINCgkJCWMtMS4xNTIsMS42NDMtMS43NTcsMy44MDYtMS40MjIsNi41NGMyLjU5NSwyMS4xNDMsMi41NzUsNDIuMjg5LDEuMzUxLDYzLjUyNWMtMC40MTcsNy4xNzYsNS4xMTksMTAuNjA4LDEwLjY4OSwxMC4zODUNCgkJCWMwLjg3NCwwLjI0NCwxLjgwMywwLjQwNiwyLjgyOSwwLjQyN2M0MC45NzksMC44OTQsODQuNjM0LDYuODcsMTE3LjI5NiwzMy43OTljMzUuMTI0LDI4Ljk3LDM5LjI3Myw3Ni43MDgsMzUuNDQ0LDExOC45NDENCgkJCWMtMC4yOTQsMy4yNSwwLjcwMSw1LjcwMiwyLjM1Niw3LjQyOWMxLjcwNiwyLjYwMSw0LjQ5OSw0LjUzLDguNDYsNC43MzNjMjMuODY2LDEuMjI5LDQ3Ljc0OSwxLjM1MSw3MS42NCwxLjM1MQ0KCQkJYzcuMjUxLDAsMTAuNjk5LTUuODQsMTAuNDA5LTExLjQ1NmMwLjI3NC0xLjAzMSwwLjQ2My0yLjE0MywwLjQwNi0zLjQwN0MyNjAuMzc3LDM0Mi41MDUsMjQ5Ljg2NywyNzUuODg3LDE5MC44MDUsMjI3Ljc1M3oNCgkJCSBNMTkyLjUzMSw0MDYuOTAzYzIuNjMtNDQuNjQ2LTUuNzE4LTg4Ljk1NS0zOC42MDMtMTIxLjc0OWMtMzIuOS0zMi44MDQtODIuOTIzLTQxLjU2OC0xMjcuODg0LTQzLjM1NQ0KCQkJYzAuNTI4LTE0LjM3MSwwLjM4MS0yOC43MDYtMC44MjgtNDMuMDMxYzUxLjkyNywyLjU5NSwxMDMuNzg0LDExLjc4OSwxNDcuMzA3LDQyLjA2NmM1Ni4yMjksMzkuMTIsNjUuODcxLDEwMy43ODgsNjkuMDEsMTY2Ljg5Mw0KCQkJQzIyNS4xOTMsNDA3LjY3MSwyMDguODYyLDQwNy41MTMsMTkyLjUzMSw0MDYuOTAzeiIvPg0KCQk8cGF0aCBkPSJNMzEyLjA0Miw5MC45NkMyMjUuNDkzLDIwLjQyNCwxMDYuMjIxLDcuODg3LDExLjk3OSw0Ljg0Yy0wLjAxLDAtMC4wMjUsMC0wLjAzNiwwYy01LjAxNywwLTguMTgxLDEuOTYtOS45MjcsNS44MTINCgkJCWwtMC42MDksMS4wNjZjLTEuMTkzLDEuNzA2LTEuNjMsMy45NTMtMS4zLDYuNjgzYzQuMDMyLDMyLjg5LDQuNzc4LDY3Ljg1MiwyLjM1NiwxMTAuMDNjLTAuMTg4LDMuMjUsMC42MDksNS44MzQsMi4zNjEsNy42OQ0KCQkJYzEuOTUsMi4wNjQsNS4wODMsMy4yNSw4LjU5NywzLjI1bDEuNjA0LTAuMDUzbDAuOTY1LDAuMjY3YzEuMTkzLDAuMzIyLDIuMjM5LDAuNDgyLDMuMjgsMC41MDMNCgkJCWM2My41OTcsMS4zOTgsMTQ0LjM3Miw5LjQwNywyMDUuMDA4LDU5LjQwOWM1MS4zODksNDIuMzc5LDcyLjAyMSwxMTAuODg2LDYzLjA4MywyMDkuNDM0Yy0wLjI5NCwzLjI2MSwwLjQzOCw1Ljc1NCwyLjI0NSw3LjYyNw0KCQkJbDAuNzU3LDAuOTVjMi4xMjIsMy4yMjksNS4yODYsNC45NzcsOS4zOTgsNS4xODljNDEuMjQ5LDIuMTIzLDgzLjA5NywyLjMwMSwxMjIuNDMxLDIuMzA2YzMuNDIzLDAsNi4xNjUtMS4wNTcsOC4xMzUtMy4xMzkNCgkJCWMyLjIwNC0yLjMxNSwzLjQwNy01LjkzMSwzLjIxNC05LjY1OGwtMC4wNjEtMS4wMjVsMC4yNzQtMC45OTVjMC4zNzYtMS40MjIsMC41MjgtMi42MjEsMC40NzItMy44Nw0KCQkJQzQyOS41MzYsMjk4LjA5Myw0MTUuODQ1LDE3NS41NzEsMzEyLjA0Miw5MC45NnogTTQwOS45MTUsNDAwLjg3MWwtNi44NTUtMC4wM2MtMjYuNTEyLTAuMDkyLTU1LjA2MS0wLjMyLTg0LjIwMy0xLjQxNw0KCQkJbC02LjYzMi0wLjI0OWwwLjM5MS02LjYyMWM1LjE1NC04Ny40NjMtMTYuNDU3LTE1NS45ODUtNjQuMjUxLTIwMy42NTVjLTQ0Ljg3NS00NC43Ni0xMTUuMTQ0LTY4LjQ1MS0yMTQuODI0LTcyLjQxOWwtNi40NjktMC4yNTkNCgkJCWwwLjIzOS02LjQ3NWMwLjk3NS0yNi40MDUsMC41MTMtNTAuMjY3LTEuNDA3LTcyLjk0MmwtMC42MjktNy40MTJsNy40MzQsMC4zNzFjMTEyLjE2Miw1LjU5OSwxOTEuMDU5LDI4LjE4OCwyNTUuODE4LDczLjIzOQ0KCQkJYzk3LjAwNSw2Ny40ODksMTE1LjUxNCwxNzkuNzU2LDEyMS4wNDksMjkxLjAxOUw0MDkuOTE1LDQwMC44NzF6Ii8+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=" class="css-on3xa egf89ri4"/></a></div><div class="css-6wa51n e5kaaa13"><style data-emotion-css="1loed2t">.css-1loed2t{font-size:2.5rem;margin-bottom:0;text-shadow:1px 1px 1px #FFFFFF;}</style><h1 class="css-1loed2t e5kaaa11">Specification pattern for NodeJS</h1><style data-emotion-css="jtg2ex">.css-jtg2ex{margin-top:10px;color:#606060;text-shadow:1px 1px 1px #FFFFFF;}</style><h3 class="css-jtg2ex e5kaaa12">21 September, 2015 - 4 min read</h3></div></header><style data-emotion-css="jgz09r">.css-jgz09r{margin:0 auto;max-width:860px;padding:1rem;}</style><div class="css-jgz09r egf89ri0"><main><style data-emotion-css="1rcp9ax">.css-1rcp9ax a{-webkit-text-decoration:none;text-decoration:none;position:relative;}.css-1rcp9ax a::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(255,250,150,0.8);}.css-1rcp9ax a:hover::after{top:0;}</style><div class="css-1rcp9ax egf89ri3"><p>Although the <a href="https://en.wikipedia.org/wiki/Specification_pattern">specification pattern</a> is mainly use in <a href="https://en.wikipedia.org/wiki/Domain-driven_design">DDD</a> to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. <em>The code is freely available at <a href="https://github.com/acanimal/node-specification-pattern">github</a> repository and also installable via <a href="https://www.npmjs.com/package/specification">npmjs</a>.</em></p>
<h2>The specification pattern</h2>
<blockquote>
<p>There are tons of good documents and tutorials about the pattern, so I don't want to extent too much here. The best source of information, IMO, is the Eric Evans <em>big blue book</em> <a href="https://domainlanguage.com/ddd/">Domain-Driven Design</a>:</p>
<p><a href="http://www.amazon.com/exec/obidos/ASIN/0321125215/domainlanguag-20"><img src="https://books.google.es/books/content?id=hHBf4YxMnWMC&#x26;printsec=frontcover&#x26;img=1&#x26;zoom=1&#x26;edge=curl&#x26;imgtk=AFLRE70686srrc3RTlROnjENjkfFCkKi1QUib9Afdj0jUdsEG6J_zSvJCf-gKeXJN5k9Ug-IGWhQPtx6R8sVeEw3S4k0dKHkCTm2yxDzNy9da3wMb0DCpoTjsFLu9OZ93r4rhAPD6sOh" alt="DDD"></a></p>
</blockquote>
<p>The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: <strong>the validation of objects that satisfies some critaria</strong>.</p>
<p>An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project:</p>
<ul>
<li>has <em>few issues</em> if the number of issues reported last month is less 10, and</li>
<li>is <em>updated project</em> if the date of the last solved issued it not beyond a week.</li>
</ul>
<p>The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification <em>quality project</em> that means a project has <em>few issues</em> and is an <em>updated project</em>.</p>
<p>Wikipedia has a nice image showing an UMl diagram class about the specification patter:</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/8/8b/Specification_UML_v2.png" alt="UML specification pattern"></p>
<p>We can see a specification is any interface that implements the <code class="language-text">isSatisfiedBy()</code> method and has the <code class="language-text">and</code>, <code class="language-text">or</code> and <code class="language-text">not</code> method to chain specifications.</p>
<h2>How to use the NodeJS implementation ?</h2>
<p>I have created two implementations of the pattern: asynchronous and synchronous versions.</p>
<p>The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc.</p>
<p>The first step to use the implementation is to include the required version (synchronous or asynchronous):</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token comment">// Asynchronous version</span>
<span class="token keyword">var</span> Specification <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"specification"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Specification<span class="token punctuation">;</span>

<span class="token comment">// Synchronous version</span>
<span class="token keyword">var</span> SpecificationSync <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"specification"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SpecificationSync<span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Make it a subclass of SpecificationSync base class.</span>
<span class="token class-name">GreaterThan</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>SpecificationSync<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Implement the 'isSatisfiedBy' method.</span>
<span class="token class-name">GreaterThan</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isSatisfiedBy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>n <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Later, to use the previous specification:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">var</span> greaterThan6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>greaterThan6<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"9 is greater than 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The base class <code class="language-text">SpecificationSync</code> offers the <code class="language-text">and</code>, <code class="language-text">or</code> and <code class="language-text">not</code> methods we can use to chain specifications and build complex ones. For example:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">var</span> greaterThan6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> greaterThan8 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> greaterThan6And8 <span class="token operator">=</span> greaterThan6<span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span>greaterThan8<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>greaterThan6And8<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"9 is greater than 6 and 8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the <code class="language-text">isSatisfiedBy()</code> method, which must be use a callback, for example:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">GreaterThan</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Specification<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">GreaterThan</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">isSatisfiedBy</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> n <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>and to use it you can make via the callback:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">var</span> greaterThan6 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

greaterThan6<span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> satisfies</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>satisfies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"9 is greater than 6"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the <code class="language-text">isSatisfiedBy()</code> method:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GreaterThan</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">isSatisfiedBy</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> satisfies</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>satisfies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"6 is greater than 1, 2 and 3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h3>Conclusions</h3>
<p>The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing <em>validations chaining</em> through specifications.</p></div></main><style data-emotion-css="vl390q">.css-vl390q{border-top:1px solid #CCCCCC;margin-top:40px;font-size:0.7em;text-align:center;}</style><footer class="css-vl390q egf89ri5">© I built this site with<style data-emotion-css="1d5m7t5">.css-1d5m7t5{margin-left:5px;margin-right:5px;}</style><a href="https://www.gatsbyjs.org" target="_blank" class="css-1d5m7t5 e46mkkt1">Gatsby</a>from the starter<a href="https://github.com/niklasmtj/gatsby-starter-julia" target="_blank" class="css-1d5m7t5 e46mkkt1">julia</a>and made a bunch of modifications. The full content is available in my<a href="https://github.com/acanimal/acanimal.github.io" target="_blank" class="css-1d5m7t5 e46mkkt1">repository</a>. Icons made by<a href="https://www.flaticon.com/authors/freepik" target="_blank" class="css-1d5m7t5 e46mkkt1">Freepik</a> <!-- -->from<!-- --> <a href="https://www.flaticon.com" target="_blank" class="css-1d5m7t5 e46mkkt1">Flaticon</a></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-8297669-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2015/09/21/specification-pattern-for-nodejs/";window.webpackCompilationHash="8f6cb71590af4882ab75";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-39cda9469372e75ea0ef.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-efcb05a4977ac294f9ec.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-f4df3cfd233e17bf7186.js"],"component---src-templates-page-js":["/component---src-templates-page-js-d8bc7d5a70307365ed46.js"],"component---src-pages-404-js":["/component---src-pages-404-js-b740de8a1adae130652a.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-122be1dec208f86b39cf.js"],"component---src-pages-index-js":["/component---src-pages-index-js-1497207a05081ce0dc9e.js"]};/*]]>*/</script><script src="/webpack-runtime-e0c8ee51081aad2e749b.js" async=""></script><script src="/styles-577ae45e6d2a94e7a3f3.js" async=""></script><script src="/app-39cda9469372e75ea0ef.js" async=""></script><script src="/1-26e29eb6158becab9f2e.js" async=""></script><script src="/component---src-templates-blog-post-js-f4df3cfd233e17bf7186.js" async=""></script></body></html>