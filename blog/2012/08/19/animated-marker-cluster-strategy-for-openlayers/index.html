<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.3dcd2cdf97bf9f5b1e17.css">code[class*=language-],pre[class*=language-]{color:#c5c8c6;text-shadow:0 1px rgba(0,0,0,.3);font-family:Inconsolata,Monaco,Consolas,Courier New,Courier,monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#1d1f21}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7c7c7c}.token.punctuation{color:#c5c8c6}.namespace{opacity:.7}.token.keyword,.token.property,.token.tag{color:#96cbfe}.token.class-name{color:#ffffb6;text-decoration:underline}.token.boolean,.token.constant{color:#9c9}.token.deleted,.token.symbol{color:#f92672}.token.number{color:#ff73fd}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a8ff60}.token.variable{color:#c6c5fe}.token.operator{color:#ededed}.token.entity{color:#ffffb6}.token.url{color:#96cbfe}.language-css .token.string,.style .token.string{color:#87c38a}.token.atrule,.token.attr-value{color:#f9ee98}.token.function{color:#dad085}.token.regex{color:#e9c062}.token.important{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:200;src:local("Nunito Extra Light "),local("Nunito-Extra Light"),url(/static/nunito-latin-200-2a4f4b0a3646be9d8560178ebc4306e5.woff2) format("woff2"),url(/static/nunito-latin-200-249c20ee4450b15795cdde4cbb5f38d8.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:200;src:local("Nunito Extra Light italic"),local("Nunito-Extra Lightitalic"),url(/static/nunito-latin-200italic-89ba5530f3b2c751f2a49e25f31e3f15.woff2) format("woff2"),url(/static/nunito-latin-200italic-67d3d63c0ac28ccbc0c0fcbda8e66e04.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:300;src:local("Nunito Light "),local("Nunito-Light"),url(/static/nunito-latin-300-895205e22ad7d4d866df7102352077cd.woff2) format("woff2"),url(/static/nunito-latin-300-cad1324b066f52f764cf080d9244c8b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:300;src:local("Nunito Light italic"),local("Nunito-Lightitalic"),url(/static/nunito-latin-300italic-f4a613c73f19da60cf08aa42b2a9249b.woff2) format("woff2"),url(/static/nunito-latin-300italic-1fde36925a8493f45651815dd89d22a7.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:400;src:local("Nunito Regular "),local("Nunito-Regular"),url(/static/nunito-latin-400-de6068bf97f40206af0b062e262e6213.woff2) format("woff2"),url(/static/nunito-latin-400-6386ba6af7b7a5480eb5efda82ff803c.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:400;src:local("Nunito Regular italic"),local("Nunito-Regularitalic"),url(/static/nunito-latin-400italic-6ca737afe5cef0c0a9c9bbfec4e398ff.woff2) format("woff2"),url(/static/nunito-latin-400italic-ef2e2a0d9dd85cf89526d1f27f8fbbef.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:600;src:local("Nunito SemiBold "),local("Nunito-SemiBold"),url(/static/nunito-latin-600-b10ecee279e3a8d11d5ec3193b68d8bf.woff2) format("woff2"),url(/static/nunito-latin-600-c3de23017bcb95715e6eb11dd6a10fc5.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:600;src:local("Nunito SemiBold italic"),local("Nunito-SemiBolditalic"),url(/static/nunito-latin-600italic-97d4f64b213f3e5163827754c213bb4e.woff2) format("woff2"),url(/static/nunito-latin-600italic-4f62b81ff327bd0ffadcb7b82e6c13b2.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:700;src:local("Nunito Bold "),local("Nunito-Bold"),url(/static/nunito-latin-700-91ae827aa880d02ea567979add1da58c.woff2) format("woff2"),url(/static/nunito-latin-700-623f5ed42b0b347fb4531ded4e4b57a2.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:700;src:local("Nunito Bold italic"),local("Nunito-Bolditalic"),url(/static/nunito-latin-700italic-b94caac4c88b1fe6c4faf6256646f42e.woff2) format("woff2"),url(/static/nunito-latin-700italic-3aabf345871453097c2d8762411d187e.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:800;src:local("Nunito ExtraBold "),local("Nunito-ExtraBold"),url(/static/nunito-latin-800-36e4c9b478c2e2adb339a76d819eed7e.woff2) format("woff2"),url(/static/nunito-latin-800-33c733aff58ea08126616f346cbf4f4a.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:800;src:local("Nunito ExtraBold italic"),local("Nunito-ExtraBolditalic"),url(/static/nunito-latin-800italic-0f20328772c0d84250ef397c129607fb.woff2) format("woff2"),url(/static/nunito-latin-800italic-672d2afe4f40a766e46ff95379550c4f.woff) format("woff")}@font-face{font-family:Nunito;font-style:normal;font-display:swap;font-weight:900;src:local("Nunito Black "),local("Nunito-Black"),url(/static/nunito-latin-900-b296e05d0932e16d500b753becdb338e.woff2) format("woff2"),url(/static/nunito-latin-900-cbf4339e858edf2b14d20140b2887343.woff) format("woff")}@font-face{font-family:Nunito;font-style:italic;font-display:swap;font-weight:900;src:local("Nunito Black italic"),local("Nunito-Blackitalic"),url(/static/nunito-latin-900italic-ae87e7b4e2d3825919b9bc6c82039b80.woff2) format("woff2"),url(/static/nunito-latin-900italic-602859bd469800c6205701f5a16b1a1b.woff) format("woff")}#___gatsby,#gatsby-focus-wrapper,body,html{width:100%;height:100%;margin:0;font-family:Nunito,Avenir,Helvetica,"sans-serif";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{font-style:normal;color:rgba(0,0,0,.8);-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code{background-color:rgba(0,0,0,.04)}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.8rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{margin:1rem;padding:1rem;border-radius:1rem;background-color:#eee}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.8rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}.gatsby-highlight{background-color:#1d1f21;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-].line-numbers{padding:0 0 0 2.8em;overflow:initial}@media only screen and (max-width:480px){html{font-size:100%}}</style><meta name="generator" content="Gatsby 2.13.14"/><title data-react-helmet="true">Animated marker cluster strategy for OpenLayers | A Curious Animal</title><meta data-react-helmet="true" name="description" content="Yes, this posts talks about my implementation of a cluster strategy that animates clusters when changing the zoom level. So, if you are one of those don&#x27;t like to read the blog posts from others and like the action, you can go directly to see AnimatedCluster demo page. or to the github repository to see the source code."/><meta data-react-helmet="true" property="og:title" content="Animated marker cluster strategy for OpenLayers"/><meta data-react-helmet="true" property="og:description" content="Yes, this posts talks about my implementation of a cluster strategy that animates clusters when changing the zoom level. So, if you are one of those don&#x27;t like to read the blog posts from others and like the action, you can go directly to see AnimatedCluster demo page. or to the github repository to see the source code."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@acanimal"/><meta data-react-helmet="true" name="twitter:title" content="Animated marker cluster strategy for OpenLayers"/><meta data-react-helmet="true" name="twitter:description" content="Yes, this posts talks about my implementation of a cluster strategy that animates clusters when changing the zoom level. So, if you are one of those don&#x27;t like to read the blog posts from others and like the action, you can go directly to see AnimatedCluster demo page. or to the github repository to see the source code."/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="shortcut icon" href="/icons/icon-48x48.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=78a6c6fcdb91be22537eb4a2256e5f2d"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="A Curious Animal" href="/rss.xml"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-d1561664b09f558588f2.js"/><link as="script" rel="preload" href="/1-26e29eb6158becab9f2e.js"/><link as="script" rel="preload" href="/app-39cda9469372e75ea0ef.js"/><link as="script" rel="preload" href="/styles-577ae45e6d2a94e7a3f3.js"/><link as="script" rel="preload" href="/webpack-runtime-b3898168b3285b8537bb.js"/><link as="fetch" rel="preload" href="/page-data/blog/2012/08/19/animated-marker-cluster-strategy-for-openlayers/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><style data-emotion-css="1k8t7d9">.css-1k8t7d9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;}</style><div class="css-1k8t7d9 e46mkkt0"><style data-emotion-css="1hn1nns">.css-1hn1nns{background-color:#EEEEEE;background:url("https://unsplash.it/1500/500?random&blur") no-repeat center center fixed;background-size:cover;height:100%;}</style><header class="css-1hn1nns e5kaaa10"><style data-emotion-css="6wa51n">.css-6wa51n{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;max-width:860px;padding:1rem 1.0875rem;font-size:1.2rem;text-align:center;}</style><div class="css-6wa51n e5kaaa13"><style data-emotion-css="fb9rxi">.css-fb9rxi{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;text-shadow:1px 1px 1px #FFFFFF;margin-left:0;}.css-fb9rxi::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-fb9rxi:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-fb9rxi e5kaaa15" href="/">Home</a><style data-emotion-css="s7vzln">.css-s7vzln{color:black;margin-left:15px;-webkit-text-decoration:none;text-decoration:none;display:inline-block;position:relative;text-shadow:1px 1px 1px #FFFFFF;}.css-s7vzln::after{content:"";position:absolute;width:100%;-webkit-transform:scaleX(0);-ms-transform:scaleX(0);transform:scaleX(0);height:2px;bottom:0;left:0;background-color:rgba(0,0,0,0.8);-webkit-transform-origin:bottom right;-ms-transform-origin:bottom right;transform-origin:bottom right;-webkit-transition:-webkit-transform 0.4s cubic-bezier(0.86,0,0.07,1);-webkit-transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);transition:transform 0.4s cubic-bezier(0.86,0,0.07,1);}.css-s7vzln:hover::after{-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;-ms-transform-origin:bottom left;transform-origin:bottom left;}</style><a class="css-s7vzln e5kaaa14" href="/blog">Blog</a><a class="css-s7vzln e5kaaa14" href="/books">Books</a><a class="css-s7vzln e5kaaa14" href="/projects">Projects</a><a class="css-s7vzln e5kaaa14" href="/archive">Archive</a><a class="css-s7vzln e5kaaa14" href="/about">About</a><style data-emotion-css="1r9gd80">.css-1r9gd80{position:absolute;top:20px;right:20px;}</style><a href="/rss.xml" class="css-1r9gd80 e5kaaa16"><style data-emotion-css="on3xa">.css-on3xa{width:20px;height:20px;margin-bottom:0;}</style><img alt="logo" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjQzNC4yMzlweCIgaGVpZ2h0PSI0MzQuMjM5cHgiIHZpZXdCb3g9IjAgMCA0MzQuMjM5IDQzNC4yMzkiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQzNC4yMzkgNDM0LjIzOTsiDQoJIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik04OS4xMzgsMzA2LjgxN2MtMjMuNjIzLTEwLjQ4MS00OC4zNjctMTMuNzg3LTY4LjgxNiw1LjA2MmMtMTcuODgsMTYuNDgyLTIzLjQ2LDQ0LjUzOS0xNi45NTYsNjcuNzU1DQoJCQljOC41NTcsMzAuNTE5LDM4LjQ1Niw1MS41NzcsNjkuOTA5LDQ4LjM2M2MzNi4yMjEtMy42OTcsNzAuODc4LTM3LjAyMyw2MC42OTItNzQuODQNCgkJCUMxMjcuODk5LDMzMC42MzMsMTA5LjQ5NiwzMTUuODQ2LDg5LjEzOCwzMDYuODE3eiBNNjkuMzE5LDQwMy42OTljLTE5Ljg1NCwyLjAyNi0zNi4wMDgtMTIuOTE4LTQyLjEzMi0zMC42MzUNCgkJCWMtNC41ODUtMTMuMjY0LTEuNzAxLTI2LjU5OSw2LjA5OS0zNy45MzNjMTguODA0LTI3LjMzLDU4Ljc0Ny0zLjk1Niw3Mi44NjQsMTYuNTMzDQoJCQlDMTIzLjU0NywzNzYuOTM0LDkzLjI4Miw0MDEuMjU3LDY5LjMxOSw0MDMuNjk5eiIvPg0KCQk8cGF0aCBkPSJNMTkwLjgwNSwyMjcuNzUzYy00OS4xMzQtNDAuMDUtMTE2LjEwMy00OS4xMy0xNzcuMzY5LTUxLjEwNWMtNC43OTQtMC4xNTctNy44OTYsMi4zMTgtOS4zOTUsNS42MjINCgkJCWMtMS4xNTIsMS42NDMtMS43NTcsMy44MDYtMS40MjIsNi41NGMyLjU5NSwyMS4xNDMsMi41NzUsNDIuMjg5LDEuMzUxLDYzLjUyNWMtMC40MTcsNy4xNzYsNS4xMTksMTAuNjA4LDEwLjY4OSwxMC4zODUNCgkJCWMwLjg3NCwwLjI0NCwxLjgwMywwLjQwNiwyLjgyOSwwLjQyN2M0MC45NzksMC44OTQsODQuNjM0LDYuODcsMTE3LjI5NiwzMy43OTljMzUuMTI0LDI4Ljk3LDM5LjI3Myw3Ni43MDgsMzUuNDQ0LDExOC45NDENCgkJCWMtMC4yOTQsMy4yNSwwLjcwMSw1LjcwMiwyLjM1Niw3LjQyOWMxLjcwNiwyLjYwMSw0LjQ5OSw0LjUzLDguNDYsNC43MzNjMjMuODY2LDEuMjI5LDQ3Ljc0OSwxLjM1MSw3MS42NCwxLjM1MQ0KCQkJYzcuMjUxLDAsMTAuNjk5LTUuODQsMTAuNDA5LTExLjQ1NmMwLjI3NC0xLjAzMSwwLjQ2My0yLjE0MywwLjQwNi0zLjQwN0MyNjAuMzc3LDM0Mi41MDUsMjQ5Ljg2NywyNzUuODg3LDE5MC44MDUsMjI3Ljc1M3oNCgkJCSBNMTkyLjUzMSw0MDYuOTAzYzIuNjMtNDQuNjQ2LTUuNzE4LTg4Ljk1NS0zOC42MDMtMTIxLjc0OWMtMzIuOS0zMi44MDQtODIuOTIzLTQxLjU2OC0xMjcuODg0LTQzLjM1NQ0KCQkJYzAuNTI4LTE0LjM3MSwwLjM4MS0yOC43MDYtMC44MjgtNDMuMDMxYzUxLjkyNywyLjU5NSwxMDMuNzg0LDExLjc4OSwxNDcuMzA3LDQyLjA2NmM1Ni4yMjksMzkuMTIsNjUuODcxLDEwMy43ODgsNjkuMDEsMTY2Ljg5Mw0KCQkJQzIyNS4xOTMsNDA3LjY3MSwyMDguODYyLDQwNy41MTMsMTkyLjUzMSw0MDYuOTAzeiIvPg0KCQk8cGF0aCBkPSJNMzEyLjA0Miw5MC45NkMyMjUuNDkzLDIwLjQyNCwxMDYuMjIxLDcuODg3LDExLjk3OSw0Ljg0Yy0wLjAxLDAtMC4wMjUsMC0wLjAzNiwwYy01LjAxNywwLTguMTgxLDEuOTYtOS45MjcsNS44MTINCgkJCWwtMC42MDksMS4wNjZjLTEuMTkzLDEuNzA2LTEuNjMsMy45NTMtMS4zLDYuNjgzYzQuMDMyLDMyLjg5LDQuNzc4LDY3Ljg1MiwyLjM1NiwxMTAuMDNjLTAuMTg4LDMuMjUsMC42MDksNS44MzQsMi4zNjEsNy42OQ0KCQkJYzEuOTUsMi4wNjQsNS4wODMsMy4yNSw4LjU5NywzLjI1bDEuNjA0LTAuMDUzbDAuOTY1LDAuMjY3YzEuMTkzLDAuMzIyLDIuMjM5LDAuNDgyLDMuMjgsMC41MDMNCgkJCWM2My41OTcsMS4zOTgsMTQ0LjM3Miw5LjQwNywyMDUuMDA4LDU5LjQwOWM1MS4zODksNDIuMzc5LDcyLjAyMSwxMTAuODg2LDYzLjA4MywyMDkuNDM0Yy0wLjI5NCwzLjI2MSwwLjQzOCw1Ljc1NCwyLjI0NSw3LjYyNw0KCQkJbDAuNzU3LDAuOTVjMi4xMjIsMy4yMjksNS4yODYsNC45NzcsOS4zOTgsNS4xODljNDEuMjQ5LDIuMTIzLDgzLjA5NywyLjMwMSwxMjIuNDMxLDIuMzA2YzMuNDIzLDAsNi4xNjUtMS4wNTcsOC4xMzUtMy4xMzkNCgkJCWMyLjIwNC0yLjMxNSwzLjQwNy01LjkzMSwzLjIxNC05LjY1OGwtMC4wNjEtMS4wMjVsMC4yNzQtMC45OTVjMC4zNzYtMS40MjIsMC41MjgtMi42MjEsMC40NzItMy44Nw0KCQkJQzQyOS41MzYsMjk4LjA5Myw0MTUuODQ1LDE3NS41NzEsMzEyLjA0Miw5MC45NnogTTQwOS45MTUsNDAwLjg3MWwtNi44NTUtMC4wM2MtMjYuNTEyLTAuMDkyLTU1LjA2MS0wLjMyLTg0LjIwMy0xLjQxNw0KCQkJbC02LjYzMi0wLjI0OWwwLjM5MS02LjYyMWM1LjE1NC04Ny40NjMtMTYuNDU3LTE1NS45ODUtNjQuMjUxLTIwMy42NTVjLTQ0Ljg3NS00NC43Ni0xMTUuMTQ0LTY4LjQ1MS0yMTQuODI0LTcyLjQxOWwtNi40NjktMC4yNTkNCgkJCWwwLjIzOS02LjQ3NWMwLjk3NS0yNi40MDUsMC41MTMtNTAuMjY3LTEuNDA3LTcyLjk0MmwtMC42MjktNy40MTJsNy40MzQsMC4zNzFjMTEyLjE2Miw1LjU5OSwxOTEuMDU5LDI4LjE4OCwyNTUuODE4LDczLjIzOQ0KCQkJYzk3LjAwNSw2Ny40ODksMTE1LjUxNCwxNzkuNzU2LDEyMS4wNDksMjkxLjAxOUw0MDkuOTE1LDQwMC44NzF6Ii8+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=" class="css-on3xa egf89ri4"/></a></div><div class="css-6wa51n e5kaaa13"><style data-emotion-css="1loed2t">.css-1loed2t{font-size:2.5rem;margin-bottom:0;text-shadow:1px 1px 1px #FFFFFF;}</style><h1 class="css-1loed2t e5kaaa11">Animated marker cluster strategy for OpenLayers</h1><style data-emotion-css="jtg2ex">.css-jtg2ex{margin-top:10px;color:#606060;text-shadow:1px 1px 1px #FFFFFF;}</style><h3 class="css-jtg2ex e5kaaa12">19 August, 2012 - 10 min read</h3></div></header><style data-emotion-css="jgz09r">.css-jgz09r{margin:0 auto;max-width:860px;padding:1rem;}</style><div class="css-jgz09r egf89ri0"><main><style data-emotion-css="1rcp9ax">.css-1rcp9ax a{-webkit-text-decoration:none;text-decoration:none;position:relative;}.css-1rcp9ax a::after{content:"";position:absolute;z-index:-1;top:70%;left:-0.1px;right:-0.1px;bottom:0;-webkit-transition:top 0.1s ease-in-out;transition:top 0.1s ease-in-out;background-color:rgba(255,250,150,0.8);}.css-1rcp9ax a:hover::after{top:0;}</style><div class="css-1rcp9ax egf89ri3"><p>Yes, this posts talks about my implementation of a <strong>cluster strategy that animates clusters when changing the zoom level</strong>. So, if you are one of those don't like to read the blog posts from others and like the action, you can go directly to see <a href="http://www.acuriousanimal.com/AnimatedCluster/">AnimatedCluster demo page</a>. or to the <a href="https://github.com/acanimal/AnimatedCluster">github repository</a> to see the source code.</p>
<blockquote><p>Read this post if you want to know how the sample works.</p></blockquote>
<p style="text-align: center;"><a href="http://www.acuriousanimal.com/AnimatedCluster/"><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQozx3RW3OaQAAFYP7/9K0PbaftTDOTMWmSxohcNCZABFGQsLss14UIGAQUEEmnTftW0x/wzZlzDgXX2mrz9Fys4ywl60gmi3gLwxyNnOnQtO/8uV+YamTCmIS5va7dvHK7fdE0SbcvqV0d5rVbVr6V+GpkC57+GPq8I9/aMxHNvdBoovPNZtbVXlWTlyrIardtd1lD8iqkHgK1bbb1PnOT+zwerzYpbQIWYA6CCH878J9b5eyv+PEQn6SV3aZXL4XelrArVT0CFAPdzYouyllervZrmvg/JsjjoD60IZnevF68qyTm2Zd3cX+fzZOabItFm/SapK+GIkUDCwQPXXy+ywQnknTwlYE2Y6ljrBXkMnSljdB7uT2t3EXjnXfz/mGbN7Hk+pwGLykWQgZCFMwzpRcYJ4Z1fcQsQDYe/plfl2i8I9rr5DQVLkAg1OrpdimWwtXYdhhrdsTgv7e90VlufThMz+Bdf4CRjkbp7Psv4f1Phd9LlxMEJCSrHrdie6lMTwJTxRx1DDni4zwDyyaR9Nv/sn3iJ752A9yxM/XD607pE00c+4qCHA7a6pLRsCj7pu0MKA4rnKVzENLANjB9SAZZzI+QxSPjHhtLl38VP5HZ7YQsOPDII3OIjYcAF1UQ5h7FWjqLHtk3DBW87FYnMp4O3q6CrAlHTvAks5o0pC3MgreCQxOJRAExCgvjH1OF5PD0P4RZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="animatedcluest" title="animatedcluest" src="/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png" srcset="/static/793ea5b78fbfa1ed276e1e9096dd9be1/19bd1/animatedcluest.png 163w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/d3bcb/animatedcluest.png 325w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png 600w" sizes="(max-width: 600px) 100vw, 600px" loading="lazy">
    </span></a></p>
<p>Next, you can find a descriptions on how the implementation works. I have tried to be has much OpenLayers compliant as possible, without using any other framework, library or classes outside the OpenLayers and following its design of concepts.</p>
<p>It is necessary to make a short introduction of concepts about OpenLayers, like vector layers and strategies, so the reader can understand more in depth the implementation.</p>
<blockquote><p><em><strong>NOTE: It was only tested with OpenLayers 2.11 !!!</strong></em></p></blockquote>
<h2>Some background</h2>
<p>Many time ago (at the end of 2011 year) I saw a great question in stackoverflow about <a href="http://gis.stackexchange.com/questions/17250/how-to-create-animated-cluster-markers-in-openlayers-leaflet/18594">How to Create Animated Cluster Markers in OpenLayers/Leaflet?</a> and, also, a similar one about <a href="http://stackoverflow.com/questions/6641919/openlayers-nice-marker-clustering">OpenLayers, nice marker clustering</a>.</p>
<p>Everybody knows <a href="http://en.wikipedia.org/wiki/A_picture_is_worth_a_thousand_words"><em>a picture&#xA0;is&#xA0;worth&#xA0;a&#xA0;thousand words</em></a> and when working with data visualization this is not an exception. It is not only important the look but the feel and having a nice animation of features while changing the zoom level is something visually funny and attractive.</p>
<p>On that days, I was completely busy involved on writing the book&#xA0;<a href="//2012/06/28/openlayers-cookbook/">OpenLayers Cookbook</a>. Initially I think to put hands on and try to implement a solution in OpenLayers, so it can serve as another recipe for the book.&#xA0;Unfortunately, &#xA0;I had no much time to spent in that challenge and I forget it to concentrate writing the book with a bunch of more practical recipes.</p>
<p>A month ago, Dave Leaver answers in the forum pointing to its <a href="//2012/08/12/awesome-clustered-markers-in-leaflet/">awesome clustered marker</a> implementation for Leaflet, which I must say is terrific.</p>
<p>Fortunately for the community, the implementation animated cluster for Leaflet was like a kick on my ass, it was what I need to start the challenge :)</p>
<p>Last&#xA0;week I start working in an implementation for OpenLayers. Spending my few nigh time on it and after some tries and errors, today I&apos;m able to publish the source code and documentation in addition to this post to the masses.</p>
<h2>A short Vector Layer class description</h2>
<p>In OpenLayers, when you want to render any feature within a map yo need to previously create a vector layer:</p>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;);</pre>
<p>Vector layers are one of the most complex and powerful kind of layers within the OpenLayers and because of this there is a great&#xA0;ecosystem&#xA0;of classes related with the vector layers:</p>
<p>[caption id=&quot;&quot; align=&quot;aligncenter&quot; width=&quot;384&quot;]<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 564px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 77.12765957446808%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADBklEQVQ4y4VUXUiTURg+3779uNZ0hiIMDUEIuxHspktxXQjNLgxjdNOFFQhRtDVQwzsXsbxQklhX60IkRS9SJH9i5lAvFP/d5tyfv3POrQlLEEk7Pec4ZdTCDw7ve96/c973ec5HyF9fW1sboZQKTN/Y2HgTDofdfr//eyAQ+La2tuZYXFz8BBf39/b2kks/u93OCkqYvre39xU6jcViNJlM0sPDQ7q6uvrjvGBnZ+flBePxOLHZbDxhdHT0LpZ1cnLSAtnS39/f0t3dXcd8xcXFxOFwZC4ik8m4zMrKurBptVoFRHamcKlUehGYm5vLpUKhODOgBXFzc1NcWloSE4mEmDpdXVhYeB0zlNXU1OQbDAZNT0+PQqfTaTEBGXzagoICNYvFjEW32y2yOuhCyHRhJZY6ba9K0+VpOou58k/2ysrK/fX19Ue7u7vVg4ODDc3NzdU47VY0Gn06MzNT19fX93J6evr2/Pz8zampKfPIyMgLxBswv1KLxXLP6XSaAJ5+eXn58dDQ0A0SiURCR0dHDD0GKJ2bm3u/vb39gelohaML6fR6vc+YDRSip6enFPT5uLOzY2E2+HguDnxFXC7XZ/AruLCw4PV4PInh4WEzbmMKBoNR2AJIDE9MTNiA9AMU20JHfuREcEMj/M99Pl8c83fhhlsDAwMGkuKUoNFo1EqlMi9tGtdKSkpyioqKJOcxWBLscxjSqRhJeXm5FOxgbBAzAZLX1NQkjI2NseT8dAcQ51IURZVer+doosszFJVKldVqFfgeyQTUENKQk6aWhhmqqqqErq4u8h+kzz/FhSYIAqmvr+d6bW1tTmVlZVlFRUUZOMdaIyaTifva29tlmOdV+EuNRmN2R0eHFK9GNTs7q0Z8aWtrq6qxsfGMRiA0uxEJhUKvgdhPgJME2mZmOz4+5vNCMR2oFQYoIQARHR8ffwi62MGIGEAJ4efhgd1H5HI5mwUviBfzDm+Zgg4USL9ltpOTE94i9nfYTwII/9rf36dA+Qm4+uXg4ICiIEUttn7/ARI3wYzpxS9VAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="978c1a0a" title="978c1a0a" src="/static/1ad4692207a03601b7cfaac25c0d7ebd/e7ab2/978c1a0a." srcset="/static/1ad4692207a03601b7cfaac25c0d7ebd/4e7fd/978c1a0a. 163w,
/static/1ad4692207a03601b7cfaac25c0d7ebd/16a03/978c1a0a. 325w,
/static/1ad4692207a03601b7cfaac25c0d7ebd/e7ab2/978c1a0a. 564w" sizes="(max-width: 564px) 100vw, 564px" loading="lazy">
    </span> Approximated conceptual model[/caption]</p>
<h3>Features and Geometries</h3>
<p>A vector layer is nothing more than a container for features, which are real world observations: a city, a river, a mountain peak, a country, a continent, ... all these are features. In addition, a feature can have a set of attributes like: population, length, height, etc.</p>
<p style="text-align: center;"><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz3VRS5PTMAzu//8BXDhw4sphmWXowJYOCyz7SGnJrt2kjftOk9hZO3Ucu06ToDaFAzP7jUYjWZL1SepgjCljSZJM53PnCQ3H4+V6DW78MqIoStMUIdRhjDUnEEovh6MrhNM8B7eu6+YFtCH4ogNNwKv2xtqKC1MU1X5fa10pVRljtS4KrffGNFVVQcbhAGVggt5utx1EZj/8yWgZZdKjyUWWfclzzFg3SS6t5ae0WmrtzBe30wDE3YTQ51zsToN7Mhutop30GX0vRE8pTOnHOP5QlqLluVPFdzT+hvDXR3Tr+Urrc/GR9t8xCgXEjoa1B6PL03uzk9JooF0bpYwqgDSMYq2N/hUDZgl9d/Pzs+t64bY7HHaHbrqLVqu3nv8qTT9R1g/I69X6DeN3/Uf/4v7h5rfbgdW3GxRKrTkPuUilBL3hQhvVHJY6x1UZVofE6klppqVlm2cRy9wj5Hyq/w7TOsXe3pGwj4gXcz9i1/7i2lus+K7NOZ6KECKl5AAhWgE8C5FlWURpf/Cr5wwe8NjBuDcYXDnOUxBACBYxmUz+AMefJ6m+XNbXAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="GeometryClasses" title="GeometryClasses" src="/static/d22d48c8daf7038a21b83380f40cf048/dbb61/GeometryClasses.png" srcset="/static/d22d48c8daf7038a21b83380f40cf048/19bd1/GeometryClasses.png 163w,
/static/d22d48c8daf7038a21b83380f40cf048/d3bcb/GeometryClasses.png 325w,
/static/d22d48c8daf7038a21b83380f40cf048/dbb61/GeometryClasses.png 650w,
/static/d22d48c8daf7038a21b83380f40cf048/c2dea/GeometryClasses.png 652w" sizes="(max-width: 650px) 100vw, 650px" loading="lazy">
    </span></p>
<p>Each feature can be&#xA0;visualized&#xA0;in a&#xA0;different&#xA0;way and this way is determined by a geometry associated with the feature. Points, LineString, Polygons, .. are different kinds of geometries we can use to visualize a feature.</p>
<pre class="prettyprint">// This code adds a point feature to a vector layer
var pointGeometry = new OpenLayers.Geometry.Point(px, py);
var pointFeature = new OpenLayers.Feature.Vector(pointGeometry);
vector.push([pointFeatures]);</pre>
<h3>Renderers and Styles</h3>
<p>Browsers can have support for different technologies: <a href="http://en.wikipedia.org/wiki/Canvas_element">Canvas</a>, <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a>, etc. So to make the process of draw geometries in the map independent from the vector layer, OpenLayers has the concept of renderer. A renderer is a special kind of class responsible to draw a geometry using a concrete technology.</p>
<p>Next code creates a new vector layer where we are specifying OpenLayers tries to render features using Canvas capabilities at first instance or otherwise using SVG technology.</p>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;, {
    renderers: [&apos;Canvas&apos;,&apos;SVG&apos;]
});</pre>
<p>In addition, a feature (or the vector layer itself) can have a style associated that is used by the renderer to draw the geometry that represents a feature. This way we can have cities rendered as blue points with radius 10px and mountain peaks rendered as brown points with radius 7px.</p>
<h3>Protocols and Formats</h3>
<p>A vector layer can have a protocol class associated with it. Protocols are special classes that knows how to read/write features from different sources and uses Format classes to read/write data in a specific format. For example: we can load features using the HTTP protocol from a GeoJSON or KML file.</p>
<p>Protocols and format classes makes the vector layer independent from the data source.</p>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &quot;world_cities.json&quot;,
        format: new OpenLayers.Format.GeoJSON()
    })
});</pre>
<p>Previous code creates a new vector layer that load data via HTTP from a GeoJSON format file.</p>
<h3>Strategies</h3>
<p>A vector layer can have one or more strategies attached to it. An strategy is a kind of class that, once activated, makes&#xA0;<em>things</em>&#xA0;on the vector layer without layer knows what is happening.</p>
<p>Examples of strategies are:</p>
<ul>
<li><code>OpenLayers.Strategy.Fixed</code>, which loads the content of a data source attached to the vector layer only once. This is usually used to load a data file in a vector layer, because it is only required to be loaded once.</li>
<li><code>OpenLayers.Strategy.Box</code>, which loads content from a data source each time the bounding box of the viewport changed. This strategy is useful for vector layers that loads content from a WFS server and needs to update its contents every time the BBOX changes.</li>
</ul>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &quot;world_cities.json&quot;,
        format: new OpenLayers.Format.GeoJSON()
    }),
    strategies: [new OpenLayers.Strategy.Fixed()]
});</pre>
<p>The previous code creates a vector layer that load data from a GeoJSON file. The Fixed strategy allows to load the file content once and only once, no mater if viewport BBOX changes.</p>
<h2>The cluster strategy</h2>
<p>When a vector layer contains tons of features and, they are rendered as points, an ugly effect can appear in our map. Depending on the zoom level and the point radius the points can be rendered overlapping each others.</p>
<p>One of the most useful strategies offered by OpenLayers is the <code>OpenLayers.Strategy.Cluster</code>. Given the set of features withint a layer and a zoom level, this strategy computes the distance among the features and clusters them so no cluster overlaps any other.</p>
<p>Next figures show a sample without and with applying the cluster strategy to a set of features within a vector layer:</p>
<p>[caption id=&quot;attachment_790&quot; align=&quot;aligncenter&quot; width=&quot;600&quot;]<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 49.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVQoz0WQXXOaQBSG+f2ZtonGNHXiaLVOaqfJJGOAhWWhiaZoorIsoOInIMLuEs10pn+g6E1nzsU5F88873mFDZ8kPIxZGKexGy7MBZ4mo4D6xnQo27bsmr20ZcWPJHJndBjzWfA22O3DP+802Y2FgJO3/Nhvxptpf+E9z3HHt7XxSHJeVM9Ug2tIP3Zpw83E1a6f7Vfv+zifv+8Z3c0E5D9FO8vPOis6WSRTQjWR9CXsSNgDyxvEzhE/h/QMbD/pyaXJmh1ac7kaZVYeWRDtUXfb6tGmmbZe3r5rURN6Zh5YIhYMf6DsFLKixosGLXeS2jNtEAaMtJwvT0ldEDHR1vdddqUkBTmsAufloLWxPNVhfIXoATOyz4gXVfbB5M10P+nTlkJP1E1dkHKJjdXwG2JfdFrR1g+AEMnywLzdy+qv9KfNZCO9fEqraNUG2wJMi4+7Moy+ym4/h/GBx1hdAj270HkBzCXRcpWpgWhF5xeIlRA/06JrgF1teaus7hC7+BXcQh8JEiZHmEhkqG4rPd7MbTC4EbGjEEtdiJCd5j8rqxvDsbr2THZetagqx0VjfScA51Um1sGPXdlXdVZ6ZjV1DnK4443Q+DdkBUhLSthQvJ5kE9WxFHeAg8k86+Xw4D887kB+AoJr8RhHPjYHNzVl2ZZsJ+9fPGZ8wCMc2v5m8g+7O9aPe1ETEwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="nocluster" title="nocluster" src="/static/ed469868ad86d331b827feecac7c12f7/34e8a/nocluster.png" srcset="/static/ed469868ad86d331b827feecac7c12f7/19bd1/nocluster.png 163w,
/static/ed469868ad86d331b827feecac7c12f7/d3bcb/nocluster.png 325w,
/static/ed469868ad86d331b827feecac7c12f7/34e8a/nocluster.png 600w" sizes="(max-width: 600px) 100vw, 600px" loading="lazy">
    </span> Without cluster strategy[/caption]</p>
<p>[caption id=&quot;attachment_791&quot; align=&quot;aligncenter&quot; width=&quot;600&quot;]<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVQozy2RZ3aqQACF2f9a3kl8kY7IUFSIyBTGAQSV4tAUzRJCcvL/fuc2oR4TPpTtUJe8oWW+yaOihyfOTLaXEVaPbtzrtMK4wtf+2N+v/SN7TbfX89ZNqcDH7D5dvqYaXum+YE4WuhlW41CNA+XouQUI+Fs8GM0TNhN+PptpKl8T/3q1/JEKIPNvD3K703ObFR1N2lBGSEJEhNg6rfxSw7VFehUOIu1XxbhLB7saSfdIyiEVRBSx1j8NbtptiiFwctuI58BQxKFz1oLm3a8Xu2YRceXYgqzbzhrcqknvftYrQYTIu1jJAEi79i7uEvsiIhKOJOoEpXHgul8rqDLi1iCt2rRsuBds1AP+YaSWICEkQrjJA3BZWrlk0t28kwSJma5wJ7Fufe4OtANR7di5RThApY1q2yhECX/OMPzlic4cr/wHK9Ngs3mkH3f2WdlV//FN3/O3VQo0hK1c0xPbPosgVwy2nWEs/SyEReLb5Xs+etnomKf1Moo1HDksJLWJamCkwCZkjRKV+uvLYl18bAtXUGNfnhvOPIwVBmC3TNqtRvcSRG58WNHowBe7CzAzW/mRYY2ECoY5z+oxFhQSyvgvuZaApAOAhR8Q/R6GFRRvCk+hGxFB+a8glkmIrhRXh29hoeYRr99tWwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="cluster" title="cluster" src="/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/34e8a/cluster.png" srcset="/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/19bd1/cluster.png 163w,
/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/d3bcb/cluster.png 325w,
/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/34e8a/cluster.png 600w" sizes="(max-width: 600px) 100vw, 600px" loading="lazy">
    </span> With cluster strategy[/caption]</p>
<p>The code required for the second figure is:</p>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &quot;world_cities.json&quot;,
        format: new OpenLayers.Format.GeoJSON()
    }),
    strategies: [
        new OpenLayers.Strategy.Fixed(),
        new OpenLayers.Strategy.Cluster()
    ]
});</pre>
<h3>How the cluster strategy works?</h3>
<p>The cluster strategy instance holds a reference to the vector layers features. In addition each time the zoom level changes, it computes a set of clusters each one containing some number of features.</p>
<p>The clusters are nothing more than point geometry features with a new <code>count</code> attribute (an holding references to the features it contains).</p>
<p>In addition the cluster strategy, removes the &quot;original&quot; set of features from the vector layers and adds the computed clusters to it.</p>
<h2>So (IMO)... What is the problem with the cluster strategy?</h2>
<p>Really there is no problem with cluster strategy, it works like a charm. From my point of view the problem is related with the user experience, more concretely to the look and feel.</p>
<p>IMO, the ugly effect with cluster strategy is done when the user changes the zoom level of the map. The clusters are computed again and they are drawn fine but without a nice animation that indicates the user the new cluster division or merge.</p>
<blockquote><p>Once can think no matter the look and feel of a bunch features on the screen, but I think <em>if we can have a good&#xA0;functionality&#xA0;with a nice experience that is twice better than only as good functionality</em>.</p></blockquote>
<h2>How to use the AnimatedCluster</h2>
<p>The <code>OpenLayers.Strategy.AnimatedCluster</code> class is a subclass of <code>OpenLayers.Strategy.Cluster</code> class so it inherits all the properties and extends some features.<br>
The usage is as easy as the cluster strategy. When you create a vector layer you need to pass an instance of OpenLayers.Strategy.AnimatedCluster in the strategies property:</p>
<pre class="prettyprint">var vector = new OpenLayers.Layer.Vector(&quot;Features&quot;, {
    ...
    strategies: [
        new OpenLayers.Strategy.Fixed(),
        new OpenLayers.Strategy.AnimatedCluster({
            distance: 45,
            animationMethod: OpenLayers.Easing.Expo.easeOut,
            animationDuration: 10
        })
    ],
    ...
});</pre>
<h3>Properties</h3>
<p>In addition to the inherited properties distance and threshold the AnimatedCluster offers a two new ones:</p>
<ul>
<li><code>animationMethod</code>: The tweening method to use. By default if is&#xA0;<code>OpenLayers.Easing.Expo.easeOut</code>.</li>
<li><code>animationDuration</code>: The duration of the tween in number of steps. By default it is 20.</li>
</ul>
<h2>How the AnimatedCluster works?</h2>
<p>Like its parent class the animated cluster strategy holds a reference to the features of the vector layer and each the zoom level changes the next steps takes place:</p>
<ul>
<li>Store a reference to the previous computed cluster (that related with the previous zoom level we come from)</li>
<li>Compute the new cluster</li>
<li>Start a tween to animate from the previous to the new cluster positions.</li>
</ul>
<p>These means animated cluster makes use of an extra array of clustered features (the previous one) but its size is relatively small, so there is no performance problem. In addition and, in the same way the cluster strategy does, the animated cluster only the computes the new cluster</p>
<p>The animation is a bit cumbersome. If we zoom in the view, it means we go to a level with &#xA0;more clusters than the previous one, that is, a cluster at level N becomes M clusters at level N+1.</p>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 273px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 95.23809523809523%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAADWklEQVQ4yzVUSY/jRBT2D+cGHLhwhjsHRkKtniROGgI9DU02x7uTeKv11WI7dpLpE0IDiJcEpHeosvyWb3nljKJoFESTOL7HNImncewmsXs7j6NoleyPUmkiVcmhZMfWfjy1fatVzZ1XP13EO9cLn/zI3YSjTTDahmMvHPvXeFj7y91uOGuoWI8lKIhK6Fp0TCkunbIgmgqaEZKRPKmzuMiSMt3lay9bp/nzMs7Tw6lvRMk6o/rBkpzCjjZU1QVz2gYYY5ZCr7UG/na2rZCNYFDTclPIPRM5aSrecmGZsFR2Ek7aCM3Hq8CpC2KlVJSbRuestp0USlCghPEsICzH32RvlWnE0IKpOc7cUlnn1WzhO4ZwQRnPa6NkXTMjJaNcCDgfvLflDKIYr02ju6MBYB3oTmktZVWSuRc7UnDOmTXcMsYpz3c1gOlT/893X/793Wd/TL+VlKRZ3ShVVZRUvMjJL6/pbH2l0+FS9L3uNfSdoZIjHN6aSzj/5/vPPz18/emHr0y170zTKji3Ji4qdxU8rv1JFKGWDgeutETCO6slE5pBuSfpKrw8fvPXuy/eXt6DlMezvrTqkOdIEio/S5JpklyT+5NCSC2TWgoEb3D2tJ6/JIck70Q5DNaCUIwbCT964SgI0T/opfH26ginAUD3nFstjDAaWpzfWMuVpMAArAFMBi7dRfTeC67OS5KFv9/FVRTkTq+NqjhUghQMq7RCnDqcn5cHqgVcLVEJJHy6ihDnZBvN1sF0E7746fM2cYaTbYwCVFery7HppOyPyLfUyNBJt3gWnBKa5NVkE0xWwdOrPw7DkR+OwtDpBzNY1YIwFs0AQ6+GRqOmrYHBqAE1JCxMD5OV74bX5qjQbWduhOlGXhp11EJJfumsbZVEtUAcj9oSgELsU7Ja7JbRHkme/L9w7l0qdBetKQMOGkrCRIH2Qc8JrdVwtOi52TKaeuE0uuXcA6XKMjdNnKdtPFr7s21UMjr0Bnc12dV5TWrO9lX9e5KNg/Ceg21RqkkYTxarh/mHyW9LB2EgAPz6wUutUNmhctfhoxegjPetvrXCVyH+KYjjfZEfqiI77LYx3RfOf1WT+DlIvHX66yL5Oc5wMDe8AbshRLbmyy0pSculJRyX92PfnK35F+MCuwum+j5tAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="zoom1" title="zoom1" src="/static/fdcb4e05be74b76f139f3602c74197c4/1df8f/zoom1.png" srcset="/static/fdcb4e05be74b76f139f3602c74197c4/19bd1/zoom1.png 163w,
/static/fdcb4e05be74b76f139f3602c74197c4/1df8f/zoom1.png 273w" sizes="(max-width: 273px) 100vw, 273px" loading="lazy">
    </span> &#xA0;<span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 306px;">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 91.83006535947712%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAADaElEQVQ4yxWT+2/bVBzF/W+DxjSGNBBIaEKISQiGUNRSyhjq+qBCFSptty5tk9ixHduJfd9PX7+aJlPWLhrfSt+f7Ouvzz2fczxdEJYTVTCV01JQwxmeYcO5ImhwceWHAZdsECZFOpOzvCnVvLOzaZz4kZLM6ypNcNE6VTnhLG+MQmnBCtQ2SmGUxunEn+STmdRMC1JxXkvRaGUVL0vhNU4LQSidXrfmpisrJxlGTSXbToe+f3Haz4IxwznIoTmpjIT3gmBFOSzyhKAI5WEcGs2aSgtJDYhmM0JySUkxKyLQjIhzykhWctbUyjrWtqqupNfWmgvmKmkNExwzGCHGkwnGWVfZaho2r35yxztZlsFvF60F8XEUaEnqWnlKM6lg6HWrcZ76QWDTYROfd7Vsars6/Pnj5qOPW4/55TE4u+isNZKgqZJEG+YZRaVCJTzKijhI0MXrDy++ue19tujvVYtucbZ9u/H4dvvJTR5Yp2F1GAV1Kbtawy08zUgY+gRlcZJcjUP+5nC98XC9+ejd0S9d/Ga1891q/4dmcgVgOCdpkkR+gNFMGw5OeXWlYawRUhIpaWP5zdnL5f6zMji/23m63vx89cfXfBJqJZSmzqhWm1JxY5kUxAOTwjAY+SPQ70qZ04K9Pnj317fXJy/fHz2/+/XT1e73jSyuK6MVBbbzzoDPEIpaC680orT8npOTiKFZmi1++3L9+5MPW1/Iy1M3Op0b3C3a1knJSVWpplGQs1IxJ7jXlQrsh5WAzjluGK//2Vg8/8RuPdVpbpq6xeNl+rYzQkuG0LSrVWtVVykA5CnFQT2sqO29Es0YhObiYK/v7yX2bZP777e/uus9WJ7vWiWTOGQUd6XunO5HE68gCFBzRgnCHOgJHg7jYJCdkT//1T19ebTuPVz3Hiz+/nEcBUkUpHE0Hg9P+v2d4xPItpSKa8UrzdtGz1sD2PI8pSKjBkImlmcvFgfP6mwESTSMlUIWWfHf5fhgMPLyaQKhWUIlrISOAP3l3NW15BROMU7hFjxPseZKI8oxpgU+74fHw/Bw5HuKCIlZVUrjmJEUulkaYIgYI4RgKSgMp8RZdm9VLaF8wSTZvRq8Ggy9OAqtYtYKcK4yHL6M47HvD6NJDG2BDkHmXcURQSCGoIISjDEapdn+YPQ/7Yij6vB9xZkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="zoom2" title="zoom2" src="/static/966f6799151c27af24c4c3ebe72aecba/66332/zoom2.png" srcset="/static/966f6799151c27af24c4c3ebe72aecba/19bd1/zoom2.png 163w,
/static/966f6799151c27af24c4c3ebe72aecba/66332/zoom2.png 306w" sizes="(max-width: 306px) 100vw, 306px" loading="lazy">
    </span></p>
<p>The vice-versa occurs for zoom out actions, we go to a new level with less clusters than the previous one, that is, M clusters at level N becomes 1 cluster at level N-1.</p>
<h2>Things to take into account with the AnimatedCluster</h2>
<p>There are two important things to understand and take into account when working with the AnimateCluster.</p>
<p>First, the animation is made using the <code>OpenLayers.Tween</code>&#xA0;class OpenLayers offers. This class is used to make animation when map panning and offers basic actions to make animations.</p>
<p>Unfortunately, the class does not allows specify the animation duration in second but in steps. You must know that the <code>OpenLayers.Tween</code> wait 10 milliseconds between steps (see documentation for the <code>OpenLayers.Tween.INTERVAL</code> property), so a duration of 50 steps means the animation is made in 500 milliseconds.</p>
<p>Second, each animation steps implies to redraw the vector layer again, to refresh the new position of the clusters. As you can see this has a direct performance impact.</p>
<h2>Conclusions</h2>
<p>To be the first implementation I proudly enough of the work but I am aware of the improvements it can be made.<br>
Any help will be appreciated.</p></div></main><style data-emotion-css="vl390q">.css-vl390q{border-top:1px solid #CCCCCC;margin-top:40px;font-size:0.7em;text-align:center;}</style><footer class="css-vl390q egf89ri5">© I built this site with<style data-emotion-css="1d5m7t5">.css-1d5m7t5{margin-left:5px;margin-right:5px;}</style><a href="https://www.gatsbyjs.org" target="_blank" class="css-1d5m7t5 e46mkkt1">Gatsby</a>from the starter<a href="https://github.com/niklasmtj/gatsby-starter-julia" target="_blank" class="css-1d5m7t5 e46mkkt1">julia</a>and made a bunch of modifications. The full content is available in my<a href="https://github.com/acanimal/acanimal.github.io" target="_blank" class="css-1d5m7t5 e46mkkt1">repository</a>. Icons made by<a href="https://www.flaticon.com/authors/freepik" target="_blank" class="css-1d5m7t5 e46mkkt1">Freepik</a> <!-- -->from<!-- --> <a href="https://www.flaticon.com" target="_blank" class="css-1d5m7t5 e46mkkt1">Flaticon</a></footer></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-8297669-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/2012/08/19/animated-marker-cluster-strategy-for-openlayers/";window.webpackCompilationHash="79efcce55e01ed481a07";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-39cda9469372e75ea0ef.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-c1b9e4ea0542c252b4a2.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-d1561664b09f558588f2.js"],"component---src-templates-page-js":["/component---src-templates-page-js-3bf02ca4bdcc7e6e991b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-6a579111a015615d0aba.js"],"component---src-pages-archive-js":["/component---src-pages-archive-js-688638beb86180f31198.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f6ee784c9a9daa4d5c7a.js"]};/*]]>*/</script><script src="/webpack-runtime-b3898168b3285b8537bb.js" async=""></script><script src="/styles-577ae45e6d2a94e7a3f3.js" async=""></script><script src="/app-39cda9469372e75ea0ef.js" async=""></script><script src="/1-26e29eb6158becab9f2e.js" async=""></script><script src="/component---src-templates-blog-post-js-d1561664b09f558588f2.js" async=""></script></body></html>