{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2019/10/03/from-jekyll-to-gatsby/","webpackCompilationHash":"8f6cb71590af4882ab75","result":{"data":{"markdownRemark":{"html":"<p>I think it was a matter of time to make this change. <a href=\"https://jekyllrb.com/\">Jekyll</a> was one of the first static site generates and it's awesome but for me, as a JavaScript developer that know little about ruby language, has more sense to stay close JS world.</p>\n<p>I heard about <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> some time ago but never spent enough time to get a good ideas about its philosophy and capabilities. Finally this weekend I decided to make the change. What I found is while Jekyll is extremely good doing one thing --mainly focused on blogs--, Gatsby is a more general solution that can be good for many other things and not only a blog.</p>\n<p>This post is about my experience in the migration process and how I implemented some features.</p>\n<!--more-->\n<h2>Differences between Jekyll &#x26; Gatsby</h2>\n<blockquote>\n<p>Disclaimer: I'm not a Jekyll expert so don't flame ðŸ”¥ next is my description of Jekyll for a blogger user</p>\n</blockquote>\n<p>Jekyll is mainly focused on static sites like blogs, because of this it divides the type of content between <code class=\"language-text\">pages</code> and <code class=\"language-text\">posts</code>. If you write a markdown file in the root folder or under <code class=\"language-text\">_site</code> thay are considered pages, meanwhile if you write <code class=\"language-text\">.md</code> files in <code class=\"language-text\">_posts</code> folder they are considered posts.</p>\n<p>In addition the post files must be named following the next rule <code class=\"language-text\">YEAR-MONTH-DAY-title.md</code> i.e. <code class=\"language-text\">2012-09-12-how-to-write-a-blog.md</code>. This is a nice rule that make your post files appears ordered in disk.</p>\n<p>Both pages and posts have a main section so called <em>frontmatter</em> used to specified some attributes of the content like title, date, tags, ...:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">---\nlayout: post\ntitle:  &quot;Welcome to Jekyll!&quot;\n---</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>On the other hand Gatsby is a more general purpose tool that reads data from different sources, process them and generate pages and the great is what it reads, process and generates is up to you. </p>\n<p>Well, don't worry most of them are done automatically but you are allowed to be involved in the previous process and tune them to achieve what you need.</p>\n<p>Note, one really important difference between Jekyll and Gatsby is designed to work with markdown content by default, both pages and posts can directly be written in markdown format, while Gatsby understand JavaScrip and React, but anyway it is easy configurable to accept other data sources like markdown files.</p>\n<h2>Before start</h2>\n<p>I hate those shitty posts title <code class=\"language-text\">Migrating from X to Y in 10 minutes</code> so <code class=\"language-text\">How to build X in 20 min</code>, so to be honest I want to say it clear: I spent many ours last weekend migrating my site from Jekyll to Gatsby, and that includes some hours playing with Gatsby, learning its API, looking into others source code and existent staters.</p>\n<p>Further more, I'm not a great designer. I love programming the client side but after years I have finally admitted to myself I'm not able to do visual beautiful things ðŸ˜… so I spend some time looking for a theme for my site and finally decided for the one used in the <a href=\"https://www.gatsbyjs.org/starters/niklasmtj/gatsby-starter-julia/\">julia</a> starter.</p>\n<blockquote>\n<p>One thing a loved about this theme is it used the <a href=\"https://emotion.sh/docs/styled\">emotion</a> library for CSS styles.</p>\n</blockquote>\n<p>One important consideration in my migration is all the content from previous site made in Jekyll is written in markdown, so I don't want to rewrite everything as JavaScript, React and HTML, the goal is simply copy&#x26;paste all these files and make them work in the new Gatsby site.</p>\n<h2>How Gatsby works</h2>\n<p>I'm going to try to synthesize the content of the <a href=\"https://www.gatsbyjs.org/docs/gatsby-internals/\">Gastby Internal</a> section in a few sentences:</p>\n<blockquote>\n<p>The flow to build a Gatsby site is as follow:</p>\n<ul>\n<li>first read data sources: this can be the JS files in the <code class=\"language-text\">src/pages</code> or any file read by a plugin like <code class=\"language-text\">gatsby-source-filesystem</code>. All this content is transformed into <em>gatsby nodes</em>. For example, each markdown file es read and converted into a node.</li>\n<li>process the previous <em>gatsby node</em>: as example, here we can create and attach new properties to the node. For example here we compute a slug for each node that corresponds to a blog post.</li>\n<li>create pages: we tell Gatsby engine to create a page for the nodes we desire. For example, we create a page for each blog posts, or a page for each node that correspond to a markdown <em>marked</em> as <em>page</em>,</li>\n</ul>\n</blockquote>\n<h2>Analyzing the new site</h2>\n<p>After the selecting the theme for the new site I was thinking how to organize it by sections:</p>\n<ul>\n<li>Home: Simple landing page with slogan and some links to my social networks</li>\n<li>Blog: This should contain all my previous posts written in markdown</li>\n<li>Books, Projects and About: those sections are also written in markdown</li>\n<li>Archive: This was automatically generated in Jekyll and must also by automatically generated in Gatsby</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.46974063400576%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADtklEQVQ4y22S+09TdxiHz9+wX/bDlpklZhlxiXO4IQJjXAZiBSYoyv0m4up0BkTRqRlrgqISvMw5McPBYoIQBEy52CItnUihQhkILbcCihNmaWlLyy3bs29J9sOyneTJ+ybnfJ73Ped8JdOUiYGJQfoFnc96UOk1tOq11LYrqXmkpK69hdYuHcqOR6j1nai7OkWv4cFjHXebm6hWq6jVaalStVDeWI80PjOGadrMkGDAMoxxfJCBaRO9ovZZntE74a1D6E1GukcGeDJsRNuvR93XRZ2uTcjUNOp11GhVVDYL4e/WaV7+McmLuUlmXk8z9mIEbXcHHYZfae/WotQ08/DxQ7RPNbTommjqUNKgrqe2uRZVj4qmrhYul18lNfcQMYlpSB7PLK7Fl9gd01htE1gsfRgMbfQZNegNQqRrpEVdg1Jdzc/Vt7h2u4zrP5Vx+YeLKEoV7M/KYFtwGJ/4B/G+byDS1KsRZl+PMms1Y7YY0PWoedzfzv1H9VTdv8P5GyV8c6kI+ekTJMkPsyfrIAnZucRn5iDbn8b2qN0ERUUTunMX/uE7kBqeqLinU1KhrqWsoZJvK78nt+Qce08cIUaezc7sdGQZaUQmpwrS+DwxlfCEZELjE/GPScB/Vzx+UbFsDZOxOSgSqaKtlgvV5Zy+VcrB4jPsyT9CRO4BPkvPIGBfCgF7kgjYncDHsjh8RdA3MpoPw2VsCo7CJzCC9/zDeNc3mHc2B/L2B9uRqjT1lLdWc+1BFZfqKlAIeUHFdQ5duUiK4jviCk8hyz9OqPwrPhWvuT01C7/kDLbuT2dLXAqbohLYGBLDhoBI3toWjlTZVsOPTb9QKmTF4qMX3b3J2cobFNy+ivzaZTIvnCdZoWDvubPEFp5kx/ECIvLyCT+aR0juMQIyDrMlMQef+DQ2fpGEVFwtBHfKOFl+ibybJXwtfsKXV4rJulBEYtEZ4k4VEl1wnMhjRwmRywnKEVtmZeOXcoCP9mXiszuFDbJ9vBkRxxvhsUiWV88Zm5li9MUk5ucWccgtDE9ZGJq0MDA+Tv/YKMZRwcgIvWYzT4eHMQybMAyZ0A8MiRMxiM74G9peIxqBxP9cbqcLm9WKw25nye3G5XBgn59n0enE7XKtY5+3wl9//icrra6u4hYht8eNx+PB6XLiEAKbzYZ9YWEdhxB568KCA6fobWKQXeAUgxe9Wbc352J5eQVpbW2NpaWldZaXl9flLnFzXmzkZUGI/umt3q3FsLm5ufXnVlZW/pXzuv4GEsA9f27c8SsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"site\"\n        title=\"site\"\n        src=\"/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/dbb61/2019-10_acanimal-gatsby-site.png\"\n        srcset=\"/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/19bd1/2019-10_acanimal-gatsby-site.png 163w,\n/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/d3bcb/2019-10_acanimal-gatsby-site.png 325w,\n/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/dbb61/2019-10_acanimal-gatsby-site.png 650w,\n/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/912da/2019-10_acanimal-gatsby-site.png 694w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>So at the end I have: </p>\n<ul>\n<li>sections written natively in JavaScript and sections written in markdown</li>\n<li>sections that are pages and blog posts</li>\n</ul>\n<p>Write pages in Gatsby is really easy, by default all React components under <code class=\"language-text\">src/pages</code> will be transformed to a page.</p>\n<h2>Migrating the markdown pages</h2>\n<p>I left <code class=\"language-text\">src/pages</code> as default folder to generate pages from JavaScript files and created a new folder <code class=\"language-text\">src/pages-markdown</code> for those pages writing in markdown format.</p>\n<p>In addition, these pages must be have next properties within the frontmatter section:</p>\n<ul>\n<li><code class=\"language-text\">layout: page</code></li>\n<li><code class=\"language-text\">path: /some_path</code></li>\n</ul>\n<p>For example:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">---\nlayout: page\ntitle: About\ndate: 2010-11-23 14:48\npath: /about\n---</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>To make Gatsby engine take into account these files in the build process first stop is to inform where to read them:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-config.js</span>\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-source-filesystem`</span></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`pages-markdown`</span></span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/src/pages-markdown/`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>For each file found at <code class=\"language-text\">src/pages-markdown</code> Gatsby will create a <em>node</em>. Now, we can extend the <code class=\"language-text\">createPages</code> method and make Gatsby create a new page for each node. The steps can be summarized as:</p>\n<ul>\n<li>Query for all the markdown nodes read by gatsby</li>\n<li>Filter those nodes with <code class=\"language-text\">layout=page</code></li>\n<li>Create a new page invoking <code class=\"language-text\">action.createPage</code> method and using the template file <code class=\"language-text\">src/templated/page.js</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-node.js</span>\nexports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n  <span class=\"token keyword\">const</span> pageTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/page.js`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token string\">`\n    {\n      allMarkdownRemark {\n        edges {\n          node {\n            fields {\n              slug\n            },\n            frontmatter {\n              path\n              layout\n            }\n          }\n        }\n      }\n    }\n    `</span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> markdownItems <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges\n\n    <span class=\"token comment\">// Create pages and blog post pages</span>\n    markdownItems<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>layout <span class=\"token operator\">===</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n        <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          path<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n          component<span class=\"token punctuation\">:</span> pageTemplate<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Migrating posts</h2>\n<p>I have copied all my blog posts into <code class=\"language-text\">blog</code> folder, so we need to tell gatsby where to find them:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-config.js</span>\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-source-filesystem'</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">'blog'</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/blog/`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>While the files are named <code class=\"language-text\">YYYY-MM-DD-some-title.md</code> we want the posts have the path <code class=\"language-text\">/blog/YYYY-MM-DD-some-title</code> in the browser so we need to create that <em>slug</em> from the file name. The way we can do is using the <code class=\"language-text\">onCreateNode</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token string\">`MarkdownRemark`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> filename <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">,</span> basePath<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`blog`</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Blog files must have format name YYYY-MM-DD-title.md</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>layout <span class=\"token operator\">===</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> match <span class=\"token operator\">=</span> filename<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\">/^\\/([\\d]{4}-[\\d]{2}-[\\d]{2})-{1}(.+)\\/$/</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>match<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> match\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>date <span class=\"token operator\">||</span> <span class=\"token operator\">!</span>title<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`Invalid filename </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>filename<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">. Change name to start with a valid date and title`</span></span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> slug <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token string\">`/blog/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token function\">slugify</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>title<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/`</span></span>\n          <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n            node<span class=\"token punctuation\">,</span>\n            name<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`slug`</span></span><span class=\"token punctuation\">,</span>\n            value<span class=\"token punctuation\">:</span> slug\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Finally, we need to tell gatsby to create a page for each blog post node. We can do it extending a bit the previous <code class=\"language-text\">createPages</code> method:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n  <span class=\"token keyword\">const</span> blogPostTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/blog-post.js`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> pageTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/page.js`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`...`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> markdownItems <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges\n    \n    <span class=\"token comment\">// Create pages and blog post pages</span>\n    markdownItems<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>layout <span class=\"token operator\">===</span> <span class=\"token string\">'page'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n        <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          path<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">,</span>\n          component<span class=\"token punctuation\">:</span> pageTemplate<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>layout <span class=\"token operator\">===</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n          path<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n          component<span class=\"token punctuation\">:</span> blogPostTemplate<span class=\"token punctuation\">,</span>\n          context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            slug<span class=\"token punctuation\">:</span> node<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">.</span>slug<span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Paginating the blog posts</h2>\n<p>What we desire is a blog section that lists all posts, really a paginated list of posts, and then let user select one to be read.</p>\n<p>The previous section creates a page for each post so we need to create the pages that list the posts.</p>\n<p>Again, we only need to update a bit the <code class=\"language-text\">createPages</code> method to create a new page for each set of six posts:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">createPages</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> graphql<span class=\"token punctuation\">,</span> actions <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createPage <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n  <span class=\"token keyword\">const</span> blogListTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./src/templates/blog-list.js\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> blogPostTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/blog-post.js`</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">const</span> pageTemplate <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`src/templates/page.js`</span></span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token function\">graphql</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`...`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">reject</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>errors<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">const</span> markdownItems <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>allMarkdownRemark<span class=\"token punctuation\">.</span>edges\n\n    <span class=\"token comment\">// Create blog-list pages</span>\n    <span class=\"token keyword\">const</span> posts <span class=\"token operator\">=</span> markdownItems<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=></span> item<span class=\"token punctuation\">.</span>node<span class=\"token punctuation\">.</span>frontmatter<span class=\"token punctuation\">.</span>layout <span class=\"token operator\">===</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> postsPerPage <span class=\"token operator\">=</span> <span class=\"token number\">6</span>\n    <span class=\"token keyword\">const</span> numPages <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> postsPerPage<span class=\"token punctuation\">)</span>\n    Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> numPages <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">createPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        path<span class=\"token punctuation\">:</span> i <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token template-string\"><span class=\"token string\">`/blog`</span></span> <span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`/blog/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">`</span></span><span class=\"token punctuation\">,</span>\n        component<span class=\"token punctuation\">:</span> blogListTemplate<span class=\"token punctuation\">,</span>\n        context<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n          limit<span class=\"token punctuation\">:</span> postsPerPage<span class=\"token punctuation\">,</span>\n          skip<span class=\"token punctuation\">:</span> i <span class=\"token operator\">*</span> postsPerPage<span class=\"token punctuation\">,</span>\n          numPages<span class=\"token punctuation\">,</span>\n          currentPage<span class=\"token punctuation\">:</span> i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\">// Create pages and blog post pages</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>Other things to take into consideration</h2>\n<p>As we saw, Gatsby knows where to read files using the plugin <a href=\"https://www.gatsbyjs.org/packages/gatsby-source-filesystem\">gatsby-source-filesystem</a> but how does it understand markdown format?</p>\n<p>The answer is it doesn't, we need to use the plugin <a href=\"https://www.gatsbyjs.org/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a> to transform markdown files into something gatsby can understand. This plugin is the responsible to read markdown files a extract information like the frontmatter, the excerpt and convert the text into HTML ready to be rendered.</p>\n<p>The plugin <code class=\"language-text\">gatsby-transformer-remark</code>  is really powerful and also has many plugins to use within it. I have used three main plugins:</p>\n<ul>\n<li><code class=\"language-text\">gatsby-remark-prismjs</code>: responsible to syntax highlight code within markdown files</li>\n<li><code class=\"language-text\">gatsby-remark-images</code>: optimize the images used in markdown files to be production ready</li>\n<li><code class=\"language-text\">gatsby-remark-reading-time</code>: adds some metadata about the estimated reading time</li>\n</ul>\n<p>Finally, note in Jekyll I used the text <code class=\"language-text\">&lt;!--more--&gt;</code> to mark the excerpt of the post. We can easily set it configuring the plugin <code class=\"language-text\">gatsby-transformer-remark</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token punctuation\">{</span>\n  resolve<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`gatsby-transformer-remark`</span></span><span class=\"token punctuation\">,</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    excerpt_separator<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token string\">`&lt;!--more-->`</span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","excerpt":"I think it was a matter of time to make this change. Jekyll was one of the first static site generates and it's awesome but for me, as a JavaScript developer that know little about ruby language, has more sense to stay close JS world. I heard about Gatsby some time ago but never spent enough time to get a good ideas about its philosophy and capabilities. Finally this weekend I decided to make the change. What I found is while Jekyll is extremely good doing one thing --mainly focused on blogs--, Gatsby is a more general solution that can be good for many other things and not only a blog. This post is about my experience in the migration process and how I implemented some features.","frontmatter":{"date":"03 October, 2019","title":"How I migrated my site from Jekyll to Gatsby"},"fields":{"slug":"/blog/2019/10/03/from-jekyll-to-gatsby/","readingTime":{"text":"9 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2019/10/03/from-jekyll-to-gatsby/"}}}