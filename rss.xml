<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[A Curious Animal]]></title><description><![CDATA[technology, gis, javascript, web, mapping, openlayers, leaflet, jquery, acuriousanimal, acanimal]]></description><link>https://www.acuriousanimal.com</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 27 Jan 2020 07:14:19 GMT</lastBuildDate><item><title><![CDATA[How to update a column's type (in PostgreSQL)]]></title><description><![CDATA[So, you have a table and you need to modify a column's type. The problem arise when the column is filled and the type change is incompatible, for example, from string to integer, so how we can update the type and recompute the filled values to the new type? Don't worry, SQL is powerful enough to let you make the change in one sentence with .]]></description><link>https://www.acuriousanimal.com/blog/2020/01/04/updating-column-type</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2020/01/04/updating-column-type</guid><pubDate>Sat, 04 Jan 2020 15:01:00 GMT</pubDate><content:encoded>&lt;p&gt;So, you have a table and you need to modify a column&apos;s type. The problem arise when the column is filled and the type change is incompatible, for example, from string to integer, so &lt;strong&gt;how we can update the type and recompute the filled values to the new type?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Don&apos;t worry, SQL is powerful enough to let you make the change in one sentence with &lt;code class=&quot;language-text&quot;&gt;ALTER TABLE&lt;/code&gt;.&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;In the next example, we are supposing:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;we have a table &lt;code class=&quot;language-text&quot;&gt;the_table&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;has a string column &lt;code class=&quot;language-text&quot;&gt;status&lt;/code&gt; with values: &lt;code class=&quot;language-text&quot;&gt;(happy | sad)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;we want to change the column&apos;s type from string to integer and set values as &lt;code class=&quot;language-text&quot;&gt;happy=1 | sad=2&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Yes, I know using strings for status instead creating a table with the allowed statuses is a bad decision, but is needed for this example ðŸ˜„&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Easy, just run:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-sql line-numbers&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; the_table
  &lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;COLUMN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INT&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;CASE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;happy&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;A note. If the column &lt;code class=&quot;language-text&quot;&gt;status&lt;/code&gt; has a default value, for example &lt;code class=&quot;language-text&quot;&gt;happy&lt;/code&gt; you first need to remove that default constraint, update the type and then set the new default value:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;sql&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-sql line-numbers&quot;&gt;&lt;code class=&quot;language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;BEGIN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; the_table &lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;COLUMN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DROP&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DEFAULT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; the_table
  &lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;COLUMN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TYPE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;INT&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;USING&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;CASE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;WHEN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;happy&apos;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;THEN&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ELSE&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; the_table &lt;span class=&quot;token keyword&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;COLUMN&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;COMMIT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this case, because we are executing three sentences, we are running within a transaction to avoid undesired problems if one of the sentences fails.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Working with query params in JavaScript]]></title><description><![CDATA[No matter if you work with JavaScript at client or server side, at some point you'll need to work with urls and its query params. As example, I'm currently using react-router in my project, which is an great tool. I can define dynamic routes with path params and easily react-router returns me these params within the  variable and the rest of url information in the  variable, but how can I easily access to query params? There are great libraries for this purpose -like query-string or qs- but the question is: why increase in some more bytes the size of your package when there is a native solution? ðŸ˜„ The .]]></description><link>https://www.acuriousanimal.com/blog/2019/11/09/urlsearchparams</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2019/11/09/urlsearchparams</guid><pubDate>Sat, 09 Nov 2019 08:24:00 GMT</pubDate><content:encoded>&lt;p&gt;No matter if you work with JavaScript at client or server side, at some point you&apos;ll need to work with urls and its query params.&lt;/p&gt;
&lt;p&gt;As example, I&apos;m currently using &lt;a href=&quot;https://reacttraining.com/react-router/web&quot;&gt;react-router&lt;/a&gt; in my project, which is an great tool. I can define dynamic routes with path params and easily react-router returns me these params within the &lt;code class=&quot;language-text&quot;&gt;match&lt;/code&gt; variable and the rest of url information in the &lt;code class=&quot;language-text&quot;&gt;location&lt;/code&gt; variable, but how can I easily access to query params?&lt;/p&gt;
&lt;p&gt;There are great libraries for this purpose -like &lt;a href=&quot;https://www.npmjs.com/package/query-string&quot;&gt;query-string&lt;/a&gt; or &lt;a href=&quot;https://www.npmjs.com/package/qs&quot;&gt;qs&lt;/a&gt;- but the question is: &lt;strong&gt;why increase in some more bytes the size of your package when there is a native solution?&lt;/strong&gt; ðŸ˜„ The &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt;.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h3&gt;Detect feature support&lt;/h3&gt;
&lt;p&gt;As all native implementation remember the support depends on the browser version. See compatibilities &lt;a href=&quot;https://caniuse.com/#search=URLSearchParams&quot;&gt;here&lt;/a&gt;. We can check it with:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;URLSearchParams&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Support :)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Construct an instance&lt;/h3&gt;
&lt;p&gt;The most typical usage is to build an &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; instance from a query string. Note it is also valid to pass a string that start with &lt;code class=&quot;language-text&quot;&gt;?&lt;/code&gt;, the &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; will strip it out:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;version=1&amp;amp;name=john&amp;amp;lastname=nieve&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// or&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;?version=1&amp;amp;name=john&amp;amp;lastname=nieve&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;ðŸ¤“ Be aware to not pass string url! Or it will be interpreted as the parameter name. For example, given:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://some_api.com?paramA=valueA&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You&apos;ll get the three parameters named: &lt;code class=&quot;language-text&quot;&gt;https://some_api.com?paramA&lt;/code&gt; with value &lt;code class=&quot;language-text&quot;&gt;valueA&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Working with params&lt;/h3&gt;
&lt;p&gt;Once we have an instance it is easy to get or set the parameters values:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;version&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;           &lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;              &lt;span class=&quot;token comment&quot;&gt;// john&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;              &lt;span class=&quot;token comment&quot;&gt;// john&lt;/span&gt;

params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lastname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;stark&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lastname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;          &lt;span class=&quot;token comment&quot;&gt;// stark&lt;/span&gt;

params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;has&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lastname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;          &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;has&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;age&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;               &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can also add new parameters and work with array parameters:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tags&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;bastard&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tags&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;lord&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tags&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;              &lt;span class=&quot;token comment&quot;&gt;// bastard&lt;/span&gt;
params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tags&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;           &lt;span class=&quot;token comment&quot;&gt;// [&apos;bastard&apos;, &apos;lord&apos;]&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Note the difference between &lt;code class=&quot;language-text&quot;&gt;get&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;getAll&lt;/code&gt; when working with array parameters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or simply delete params:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;lastname&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally we can convert the &lt;code class=&quot;language-text&quot;&gt;URLSearchParams&lt;/code&gt; back into a string with the:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;               &lt;span class=&quot;token comment&quot;&gt;// version=1&amp;amp;name=john&amp;amp;tags=bastard&amp;amp;tags=lord&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Working with URLs&lt;/h3&gt;
&lt;p&gt;If we have an URL string the easy way to get the params is using the &lt;code class=&quot;language-text&quot;&gt;URL&lt;/code&gt; object:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://got-api.com?version=1&amp;amp;name=john&amp;amp;lastname=nieve&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;URLSearchParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// version=1&amp;amp;name=john&amp;amp;lastname=nieve&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[How I migrated my site from Jekyll to Gatsby]]></title><description><![CDATA[I think it was a matter of time to make this change. Jekyll was one of the first static site generates and it's awesome but for me, as a JavaScript developer that know little about ruby language, has more sense to stay close JS world. I heard about Gatsby some time ago but never spent enough time to get a good ideas about its philosophy and capabilities. Finally this weekend I decided to make the change. What I found is while Jekyll is extremely good doing one thing --mainly focused on blogs--, Gatsby is a more general solution that can be good for many other things and not only a blog. This post is about my experience in the migration process and how I implemented some features.]]></description><link>https://www.acuriousanimal.com/blog/2019/10/03/from-jekyll-to-gatsby</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2019/10/03/from-jekyll-to-gatsby</guid><pubDate>Thu, 03 Oct 2019 09:06:00 GMT</pubDate><content:encoded>&lt;p&gt;I think it was a matter of time to make this change. &lt;a href=&quot;https://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; was one of the first static site generates and it&apos;s awesome but for me, as a JavaScript developer that know little about ruby language, has more sense to stay close JS world.&lt;/p&gt;
&lt;p&gt;I heard about &lt;a href=&quot;https://www.gatsbyjs.org/&quot;&gt;Gatsby&lt;/a&gt; some time ago but never spent enough time to get a good ideas about its philosophy and capabilities. Finally this weekend I decided to make the change. What I found is while Jekyll is extremely good doing one thing --mainly focused on blogs--, Gatsby is a more general solution that can be good for many other things and not only a blog.&lt;/p&gt;
&lt;p&gt;This post is about my experience in the migration process and how I implemented some features.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;Differences between Jekyll &amp;#x26; Gatsby&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Disclaimer: I&apos;m not a Jekyll expert so don&apos;t flame ðŸ”¥ next is my description of Jekyll for a blogger user&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Jekyll is mainly focused on static sites like blogs, because of this it divides the type of content between &lt;code class=&quot;language-text&quot;&gt;pages&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;posts&lt;/code&gt;. If you write a markdown file in the root folder or under &lt;code class=&quot;language-text&quot;&gt;_site&lt;/code&gt; thay are considered pages, meanwhile if you write &lt;code class=&quot;language-text&quot;&gt;.md&lt;/code&gt; files in &lt;code class=&quot;language-text&quot;&gt;_posts&lt;/code&gt; folder they are considered posts.&lt;/p&gt;
&lt;p&gt;In addition the post files must be named following the next rule &lt;code class=&quot;language-text&quot;&gt;YEAR-MONTH-DAY-title.md&lt;/code&gt; i.e. &lt;code class=&quot;language-text&quot;&gt;2012-09-12-how-to-write-a-blog.md&lt;/code&gt;. This is a nice rule that make your post files appears ordered in disk.&lt;/p&gt;
&lt;p&gt;Both pages and posts have a main section so called &lt;em&gt;frontmatter&lt;/em&gt; used to specified some attributes of the content like title, date, tags, ...:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;---
layout: post
title:  &amp;quot;Welcome to Jekyll!&amp;quot;
---&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On the other hand Gatsby is a more general purpose tool that reads data from different sources, process them and generate pages and the great is what it reads, process and generates is up to you. &lt;/p&gt;
&lt;p&gt;Well, don&apos;t worry most of them are done automatically but you are allowed to be involved in the previous process and tune them to achieve what you need.&lt;/p&gt;
&lt;p&gt;Note, one really important difference between Jekyll and Gatsby is designed to work with markdown content by default, both pages and posts can directly be written in markdown format, while Gatsby understand JavaScrip and React, but anyway it is easy configurable to accept other data sources like markdown files.&lt;/p&gt;
&lt;h2&gt;Before start&lt;/h2&gt;
&lt;p&gt;I hate those shitty posts title &lt;code class=&quot;language-text&quot;&gt;Migrating from X to Y in 10 minutes&lt;/code&gt; so &lt;code class=&quot;language-text&quot;&gt;How to build X in 20 min&lt;/code&gt;, so to be honest I want to say it clear: I spent many ours last weekend migrating my site from Jekyll to Gatsby, and that includes some hours playing with Gatsby, learning its API, looking into others source code and existent staters.&lt;/p&gt;
&lt;p&gt;Further more, I&apos;m not a great designer. I love programming the client side but after years I have finally admitted to myself I&apos;m not able to do visual beautiful things ðŸ˜… so I spend some time looking for a theme for my site and finally decided for the one used in the &lt;a href=&quot;https://www.gatsbyjs.org/starters/niklasmtj/gatsby-starter-julia/&quot;&gt;julia&lt;/a&gt; starter.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;One thing a loved about this theme is it used the &lt;a href=&quot;https://emotion.sh/docs/styled&quot;&gt;emotion&lt;/a&gt; library for CSS styles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One important consideration in my migration is all the content from previous site made in Jekyll is written in markdown, so I don&apos;t want to rewrite everything as JavaScript, React and HTML, the goal is simply copy&amp;#x26;paste all these files and make them work in the new Gatsby site.&lt;/p&gt;
&lt;h2&gt;How Gatsby works&lt;/h2&gt;
&lt;p&gt;I&apos;m going to try to synthesize the content of the &lt;a href=&quot;https://www.gatsbyjs.org/docs/gatsby-internals/&quot;&gt;Gastby Internal&lt;/a&gt; section in a few sentences:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The flow to build a Gatsby site is as follow:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;first read data sources: this can be the JS files in the &lt;code class=&quot;language-text&quot;&gt;src/pages&lt;/code&gt; or any file read by a plugin like &lt;code class=&quot;language-text&quot;&gt;gatsby-source-filesystem&lt;/code&gt;. All this content is transformed into &lt;em&gt;gatsby nodes&lt;/em&gt;. For example, each markdown file es read and converted into a node.&lt;/li&gt;
&lt;li&gt;process the previous &lt;em&gt;gatsby node&lt;/em&gt;: as example, here we can create and attach new properties to the node. For example here we compute a slug for each node that corresponds to a blog post.&lt;/li&gt;
&lt;li&gt;create pages: we tell Gatsby engine to create a page for the nodes we desire. For example, we create a page for each blog posts, or a page for each node that correspond to a markdown &lt;em&gt;marked&lt;/em&gt; as &lt;em&gt;page&lt;/em&gt;,&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Analyzing the new site&lt;/h2&gt;
&lt;p&gt;After the selecting the theme for the new site I was thinking how to organize it by sections:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Home: Simple landing page with slogan and some links to my social networks&lt;/li&gt;
&lt;li&gt;Blog: This should contain all my previous posts written in markdown&lt;/li&gt;
&lt;li&gt;Books, Projects and About: those sections are also written in markdown&lt;/li&gt;
&lt;li&gt;Archive: This was automatically generated in Jekyll and must also by automatically generated in Gatsby&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 71.46974063400576%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADtklEQVQ4y22S+09TdxiHz9+wX/bDlpklZhlxiXO4IQJjXAZiBSYoyv0m4up0BkTRqRlrgqISvMw5McPBYoIQBEy52CItnUihQhkILbcCihNmaWlLyy3bs29J9sOyneTJ+ybnfJ73Ped8JdOUiYGJQfoFnc96UOk1tOq11LYrqXmkpK69hdYuHcqOR6j1nai7OkWv4cFjHXebm6hWq6jVaalStVDeWI80PjOGadrMkGDAMoxxfJCBaRO9ovZZntE74a1D6E1GukcGeDJsRNuvR93XRZ2uTcjUNOp11GhVVDYL4e/WaV7+McmLuUlmXk8z9mIEbXcHHYZfae/WotQ08/DxQ7RPNbTommjqUNKgrqe2uRZVj4qmrhYul18lNfcQMYlpSB7PLK7Fl9gd01htE1gsfRgMbfQZNegNQqRrpEVdg1Jdzc/Vt7h2u4zrP5Vx+YeLKEoV7M/KYFtwGJ/4B/G+byDS1KsRZl+PMms1Y7YY0PWoedzfzv1H9VTdv8P5GyV8c6kI+ekTJMkPsyfrIAnZucRn5iDbn8b2qN0ERUUTunMX/uE7kBqeqLinU1KhrqWsoZJvK78nt+Qce08cIUaezc7sdGQZaUQmpwrS+DwxlfCEZELjE/GPScB/Vzx+UbFsDZOxOSgSqaKtlgvV5Zy+VcrB4jPsyT9CRO4BPkvPIGBfCgF7kgjYncDHsjh8RdA3MpoPw2VsCo7CJzCC9/zDeNc3mHc2B/L2B9uRqjT1lLdWc+1BFZfqKlAIeUHFdQ5duUiK4jviCk8hyz9OqPwrPhWvuT01C7/kDLbuT2dLXAqbohLYGBLDhoBI3toWjlTZVsOPTb9QKmTF4qMX3b3J2cobFNy+ivzaZTIvnCdZoWDvubPEFp5kx/ECIvLyCT+aR0juMQIyDrMlMQef+DQ2fpGEVFwtBHfKOFl+ibybJXwtfsKXV4rJulBEYtEZ4k4VEl1wnMhjRwmRywnKEVtmZeOXcoCP9mXiszuFDbJ9vBkRxxvhsUiWV88Zm5li9MUk5ucWccgtDE9ZGJq0MDA+Tv/YKMZRwcgIvWYzT4eHMQybMAyZ0A8MiRMxiM74G9peIxqBxP9cbqcLm9WKw25nye3G5XBgn59n0enE7XKtY5+3wl9//icrra6u4hYht8eNx+PB6XLiEAKbzYZ9YWEdhxB568KCA6fobWKQXeAUgxe9Wbc352J5eQVpbW2NpaWldZaXl9flLnFzXmzkZUGI/umt3q3FsLm5ufXnVlZW/pXzuv4GEsA9f27c8SsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;site&quot;
        title=&quot;site&quot;
        src=&quot;/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/dbb61/2019-10_acanimal-gatsby-site.png&quot;
        srcset=&quot;/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/19bd1/2019-10_acanimal-gatsby-site.png 163w,
/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/d3bcb/2019-10_acanimal-gatsby-site.png 325w,
/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/dbb61/2019-10_acanimal-gatsby-site.png 650w,
/static/e8e52d139f4b3e5bbd42b49dca7c0bdb/912da/2019-10_acanimal-gatsby-site.png 694w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;So at the end I have: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sections written natively in JavaScript and sections written in markdown&lt;/li&gt;
&lt;li&gt;sections that are pages and blog posts&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Write pages in Gatsby is really easy, by default all React components under &lt;code class=&quot;language-text&quot;&gt;src/pages&lt;/code&gt; will be transformed to a page.&lt;/p&gt;
&lt;h2&gt;Migrating the markdown pages&lt;/h2&gt;
&lt;p&gt;I left &lt;code class=&quot;language-text&quot;&gt;src/pages&lt;/code&gt; as default folder to generate pages from JavaScript files and created a new folder &lt;code class=&quot;language-text&quot;&gt;src/pages-markdown&lt;/code&gt; for those pages writing in markdown format.&lt;/p&gt;
&lt;p&gt;In addition, these pages must be have next properties within the frontmatter section:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;layout: page&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;path: /some_path&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;---
layout: page
title: About
date: 2010-11-23 14:48
path: /about
---&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To make Gatsby engine take into account these files in the build process first stop is to inform where to read them:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// gatsby-config.js&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  resolve&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`gatsby-source-filesystem`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  options&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`pages-markdown`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/src/pages-markdown/`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For each file found at &lt;code class=&quot;language-text&quot;&gt;src/pages-markdown&lt;/code&gt; Gatsby will create a &lt;em&gt;node&lt;/em&gt;. Now, we can extend the &lt;code class=&quot;language-text&quot;&gt;createPages&lt;/code&gt; method and make Gatsby create a new page for each node. The steps can be summarized as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Query for all the markdown nodes read by gatsby&lt;/li&gt;
&lt;li&gt;Filter those nodes with &lt;code class=&quot;language-text&quot;&gt;layout=page&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a new page invoking &lt;code class=&quot;language-text&quot;&gt;action.createPage&lt;/code&gt; method and using the template file &lt;code class=&quot;language-text&quot;&gt;src/templated/page.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// gatsby-node.js&lt;/span&gt;
exports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;createPages&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actions &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createPage &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; actions
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`src/templates/page.js`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`
    {
      allMarkdownRemark {
        edges {
          node {
            fields {
              slug
            },
            frontmatter {
              path
              layout
            }
          }
        }
      }
    }
    `&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; markdownItems &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allMarkdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;edges

    &lt;span class=&quot;token comment&quot;&gt;// Create pages and blog post pages&lt;/span&gt;
    markdownItems&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; node &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layout &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;page&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token function&quot;&gt;createPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          component&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pageTemplate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Migrating posts&lt;/h2&gt;
&lt;p&gt;I have copied all my blog posts into &lt;code class=&quot;language-text&quot;&gt;blog&lt;/code&gt; folder, so we need to tell gatsby where to find them:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// gatsby-config.js&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  resolve&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;gatsby-source-filesystem&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  options&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;blog&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;__dirname&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/blog/`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While the files are named &lt;code class=&quot;language-text&quot;&gt;YYYY-MM-DD-some-title.md&lt;/code&gt; we want the posts have the path &lt;code class=&quot;language-text&quot;&gt;/blog/YYYY-MM-DD-some-title&lt;/code&gt; in the browser so we need to create that &lt;em&gt;slug&lt;/em&gt; from the file name. The way we can do is using the &lt;code class=&quot;language-text&quot;&gt;onCreateNode&lt;/code&gt; method:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;exports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onCreateNode&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getNode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actions &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createNodeField &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; actions

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;internal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`MarkdownRemark`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; filename &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createFilePath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getNode&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; basePath&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`blog`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Blog files must have format name YYYY-MM-DD-title.md&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layout &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; match &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; filename&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/^\/([\d]{4}-[\d]{2}-[\d]{2})-{1}(.+)\/$/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;match&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; date&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; title&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; match
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;date &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Invalid filename &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;filename&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;. Change name to start with a valid date and title`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; slug &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`/blog/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slugify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;date&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;title&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/`&lt;/span&gt;&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;createNodeField&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`slug`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; slug
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, we need to tell gatsby to create a page for each blog post node. We can do it extending a bit the previous &lt;code class=&quot;language-text&quot;&gt;createPages&lt;/code&gt; method:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;exports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;createPages&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actions &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createPage &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; actions
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blogPostTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`src/templates/blog-post.js`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`src/templates/page.js`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; markdownItems &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allMarkdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;edges
    
    &lt;span class=&quot;token comment&quot;&gt;// Create pages and blog post pages&lt;/span&gt;
    markdownItems&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; node &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layout &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;page&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;token function&quot;&gt;createPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          component&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pageTemplate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layout &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;createPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          component&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; blogPostTemplate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            slug&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slug&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Paginating the blog posts&lt;/h2&gt;
&lt;p&gt;What we desire is a blog section that lists all posts, really a paginated list of posts, and then let user select one to be read.&lt;/p&gt;
&lt;p&gt;The previous section creates a page for each post so we need to create the pages that list the posts.&lt;/p&gt;
&lt;p&gt;Again, we only need to update a bit the &lt;code class=&quot;language-text&quot;&gt;createPages&lt;/code&gt; method to create a new page for each set of six posts:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;exports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;createPages&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; graphql&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actions &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; createPage &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; actions
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blogListTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;./src/templates/blog-list.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; blogPostTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`src/templates/blog-post.js`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; pageTemplate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`src/templates/page.js`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;graphql&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;errors&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; markdownItems &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;allMarkdownRemark&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;edges

    &lt;span class=&quot;token comment&quot;&gt;// Create blog-list pages&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; posts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; markdownItems&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;frontmatter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layout &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; postsPerPage &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; numPages &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;posts&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; postsPerPage&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; length&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; numPages &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;_&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;createPage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`/blog`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`/blog/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        component&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; blogListTemplate&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postsPerPage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          skip&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; postsPerPage&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          numPages&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          currentPage&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Create pages and blog post pages&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Other things to take into consideration&lt;/h2&gt;
&lt;p&gt;As we saw, Gatsby knows where to read files using the plugin &lt;a href=&quot;https://www.gatsbyjs.org/packages/gatsby-source-filesystem&quot;&gt;gatsby-source-filesystem&lt;/a&gt; but how does it understand markdown format?&lt;/p&gt;
&lt;p&gt;The answer is it doesn&apos;t, we need to use the plugin &lt;a href=&quot;https://www.gatsbyjs.org/packages/gatsby-transformer-remark&quot;&gt;gatsby-transformer-remark&lt;/a&gt; to transform markdown files into something gatsby can understand. This plugin is the responsible to read markdown files a extract information like the frontmatter, the excerpt and convert the text into HTML ready to be rendered.&lt;/p&gt;
&lt;p&gt;The plugin &lt;code class=&quot;language-text&quot;&gt;gatsby-transformer-remark&lt;/code&gt;  is really powerful and also has many plugins to use within it. I have used three main plugins:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-remark-prismjs&lt;/code&gt;: responsible to syntax highlight code within markdown files&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-remark-images&lt;/code&gt;: optimize the images used in markdown files to be production ready&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;gatsby-remark-reading-time&lt;/code&gt;: adds some metadata about the estimated reading time&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, note in Jekyll I used the text &lt;code class=&quot;language-text&quot;&gt;&amp;lt;!--more--&amp;gt;&lt;/code&gt; to mark the excerpt of the post. We can easily set it configuring the plugin &lt;code class=&quot;language-text&quot;&gt;gatsby-transformer-remark&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  resolve&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`gatsby-transformer-remark`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  options&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    excerpt_separator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&amp;lt;!--more--&gt;`&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Express API with autogenerated OpenAPI doc through Swagger]]></title><description><![CDATA[In past years OpenAPI has arise as the preferred way to document APIs. In this article we will see how easy is document an API created with NodeJS and Express through the Swagger tools. If you are working in an REST API you more probably will desire to have some API doc where your users could find what are the endpoints of your API, what they do, which parameters they accept and which output they generate.]]></description><link>https://www.acuriousanimal.com/blog/2018/10/20/express-swagger-doc</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2018/10/20/express-swagger-doc</guid><pubDate>Sat, 20 Oct 2018 18:31:00 GMT</pubDate><content:encoded>&lt;p&gt;In past years &lt;a href=&quot;https://www.openapis.org&quot;&gt;OpenAPI&lt;/a&gt; has arise as the preferred way to document APIs. In this article we will see how easy is document an API created with NodeJS and Express through the &lt;a href=&quot;https://swagger.io/&quot;&gt;Swagger&lt;/a&gt; tools.&lt;/p&gt;
&lt;p&gt;If you are working in an REST API you more probably will desire to have some API doc where your users could find what are the endpoints of your API, what they do, which parameters they accept and which output they generate.&lt;/p&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/CE01dwNEkEU&quot; frameborder=&quot;0&quot; allow=&quot;autoplay; encrypted-media&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;!--more--&gt;
&lt;h2&gt;Swagger&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://swagger.io/blog/api-strategy/difference-between-swagger-and-openapi/&quot;&gt;Do not confuse OpenAPI with Swagger&lt;/a&gt;. OpenAPI is an specification that says how APIs are documented. Swagger is a collection of tools to implement the specification.&lt;/p&gt;
&lt;p&gt;Thanks to Swagger, see the &lt;a href=&quot;https://editor.swagger.io/&quot;&gt;editor example&lt;/a&gt;, writing API docs is not difficult, you only need to write a bunch of YAML lines.&lt;/p&gt;
&lt;p&gt;Among other tools, swagger offers the &lt;a href=&quot;https://github.com/swagger-api/swagger-ui&quot;&gt;swagger-ui&lt;/a&gt;, which is nothing more than &lt;em&gt;a collection of HTML, Javascript, and CSS assets that dynamically generate beautiful documentation from a Swagger-compliant API&lt;/em&gt;, or in other words, &lt;code class=&quot;language-text&quot;&gt;swagger-ui&lt;/code&gt; is the beautiful web page ou see in the previous swagger editor link.&lt;/p&gt;
&lt;p&gt;To serve the &lt;code class=&quot;language-text&quot;&gt;swagger-ui&lt;/code&gt; content you only need a web server and the API documentation bundled in a JSON or YAML file.&lt;/p&gt;
&lt;h2&gt;ExpressJS and API documentation&lt;/h2&gt;
&lt;p&gt;When developing APIs with ExpressJS I tend to write my API endpoints in &lt;em&gt;route&lt;/em&gt; files (usually also stored under a &lt;code class=&quot;language-text&quot;&gt;routes&lt;/code&gt; folder) which contains the rules to attend requests and, because of this, it is a perfect location to document the endpoints of my API, for example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/**
 * @swagger
 * /users:
 *    get:
 *      description: This should return all users
 */&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/users&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;This sould return all users&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The problem is &lt;code class=&quot;language-text&quot;&gt;swagger-ui&lt;/code&gt; requires all my API doc reside in a single file, i.e. &lt;code class=&quot;language-text&quot;&gt;swagger.json&lt;/code&gt;, to be beautified as a web page.&lt;/p&gt;
&lt;h2&gt;How to autogenerate swagger doc ?&lt;/h2&gt;
&lt;p&gt;All the magic resides in the next packages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/scottie1984/swagger-ui-express&quot;&gt;swagger-ui-express&lt;/a&gt;: Adds middleware to your express app to serve the Swagger UI bound to your Swagger document. This acts as living documentation for your API hosted from within your app.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Surnet/swagger-jsdoc&quot;&gt;swagger-jsdoc&lt;/a&gt;: Generates swagger doc based on JSDoc comments in your code to keep a live and reusable OpenAPI (Swagger) specification.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So the idea is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Document your routes with jsdoc using the swagger YAML notation (as you can see in the previous route).&lt;/li&gt;
&lt;li&gt;Let &lt;code class=&quot;language-text&quot;&gt;swagger-jsdoc&lt;/code&gt; to autogenerate a &lt;code class=&quot;language-text&quot;&gt;swagger.json&lt;/code&gt; file with all the documentation you set in your files.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; swaggerJsdoc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;swagger-jsdoc&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  swaggerDefinition&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Like the one described here: https://swagger.io/specification/#infoObject&lt;/span&gt;
    info&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      title&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Test API&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      version&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;1.0.0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      description&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Test Express API with autogenerated swagger doc&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// List of files to be processes. You can also set globs &apos;./routes/*.js&apos;&lt;/span&gt;
  apis&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;endpoints.js&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; specs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;swaggerJsdoc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Use the &lt;code class=&quot;language-text&quot;&gt;swagger-ui-express&lt;/code&gt; to add a new endpoint where your user can see the documentation.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; swaggerUi &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;swagger-ui-express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/api-docs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; swaggerUi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;serve&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; swaggerUi&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;specs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is all the magic. At this point if you start and open your browser at &lt;code class=&quot;language-text&quot;&gt;http://localhost:3000/api-docs&lt;/code&gt; you will see the Swagger UI web page with the documentation of your endpoint.&lt;/p&gt;
&lt;p&gt;Of course you can create much more complex documentations. You can include files which only defines includes type definitions (i.e. about input/output data), group your endpoints by tags, etc.&lt;/p&gt;
&lt;p&gt;The important thing is how the convination of &lt;code class=&quot;language-text&quot;&gt;swagger-ui-express&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;swagger-jsdoc&lt;/code&gt; can incredible help and simplify the way to have your API documentation always up to date.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Joppy, the Tinder for tech recruitment]]></title><description><![CDATA[TLTR: This post is about Joppy, a new service I'm working on that tries to eliminate the pain currently exists in the communication among recruiters and tech professionals. Let me describe you the current scenario in the recruitment world and, please, any feedback will be welcome. Tech professionals: Wherever I wrote tech professionals I mean any kind of role related with tech companies: software engineers, developers or programmers, manager, product owners, QA, designers, ... It all starts... ...taken a beer and asking your friends: How many connection requests do you receive per week from LinkedIn? All three (two developers and a UI/UX designer) answer the same enough to be annoying. Every tech professional want to have his/her CV updated in LinkedIn, it is a great service, but no one agrees with the myriad of emails asking for connections from recruiters that has awesome job offers from awesome companies. Do you think the job of a recruiter is easy? Well, let me say you are completely wrong. It is not an easy job and often ungrateful. If you think in a more or less important city with many tech companies you can image the competition existing among companies to get tech professional. Currently there are two main things recruiters can do to arrive to candidates: Publish offers in some kind of board and wait candidates applies (we all have in mind web sites that crawls and shows tons of job offers) Make an active search of potential candidates. Recruiters need to use services like LinkedIn, where they can search techies in a given geographical area, that know about X, Y, Z skills and many other options. Once filtered they need to contact each of them where, probably, most of them are not interested in a change or in the position the recruiter is offering.]]></description><link>https://www.acuriousanimal.com/blog/2018/06/30/joppy</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2018/06/30/joppy</guid><pubDate>Thu, 28 Jun 2018 12:10:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;TLTR: This post is about &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt;, a new service I&apos;m working on that tries to eliminate the pain currently exists in the communication among recruiters and tech professionals. Let me describe you the current scenario in the recruitment world and, please, any feedback will be welcome.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Tech professionals&lt;/strong&gt;: Wherever I wrote &lt;em&gt;tech professionals&lt;/em&gt; I mean any kind of role related with tech companies: software engineers, developers or programmers, manager, product owners, QA, designers, ...&lt;/p&gt;
&lt;/blockquote&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 362px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 24.033149171270722%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7UlEQVQY031O3UqFQBj0zYtuhSA4lJca6IHAoAfw1hsFydBjoiEVIorm34ob6pw9CwteRAPD7M7Mft9K2GHbNq7zPOPZNGE+HaEoDzAMg6kCTdNgWRbP9/09pIspuK4rN5u6xu3dAfePL7i6voGqqpBlGbqu86EXLMuC/VtBCX+AjD3eP75wqoDs8xvTRFBVFcqyRNM0+A9SURSo2Y/GceRlwV86g5IOfd+z+w/PCSFo2xZd17ElE4Zh4GfhUUoh2baNIAiQZRk8z0OSJIiiCK++D99/QxiemPpMQ56JfhzHXNM0heu6cBwHeZ7jDPMOb0SB7oR6AAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Joppy&quot; title=&quot;Joppy&quot; src=&quot;/static/c26bf07becc78cbd67d5e0a64d79fb92/e635c/joppy-slogan.png&quot; srcset=&quot;/static/c26bf07becc78cbd67d5e0a64d79fb92/19bd1/joppy-slogan.png 163w,
/static/c26bf07becc78cbd67d5e0a64d79fb92/d3bcb/joppy-slogan.png 325w,
/static/c26bf07becc78cbd67d5e0a64d79fb92/e635c/joppy-slogan.png 362w&quot; sizes=&quot;(max-width: 362px) 100vw, 362px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;
&lt;h2&gt;It all starts...&lt;/h2&gt;
&lt;p&gt;...taken a beer and asking your friends: &lt;em&gt;How many connection requests do you receive per week from LinkedIn?&lt;/em&gt; All three (two developers and a UI/UX designer) answer the same &lt;em&gt;enough to be annoying&lt;/em&gt;. Every tech professional want to have his/her CV updated in LinkedIn, it is a great service, but no one agrees with the myriad of emails asking for connections from recruiters that has awesome job offers from awesome companies.&lt;/p&gt;
&lt;p&gt;Do you think the job of a recruiter is easy? Well, let me say you are completely wrong. It is not an easy job and often ungrateful. If you think in a more or less important city with many tech companies you can image the competition existing among companies to get tech professional.&lt;/p&gt;
&lt;p&gt;Currently there are two main things recruiters can do to arrive to candidates:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Publish offers in some kind of board and wait candidates applies (we all have in mind web sites that crawls and shows tons of job offers)&lt;/li&gt;
&lt;li&gt;Make an &lt;strong&gt;active search&lt;/strong&gt; of potential candidates. Recruiters need to use services like LinkedIn, where they can search techies in a given geographical area, that know about X, Y, Z skills and many other options. Once filtered they need to contact each of them where, probably, most of them are not interested in a change or in the position the recruiter is offering.&lt;/li&gt;
&lt;/ol&gt;
&lt;!--more--&gt;
&lt;h2&gt;The problem&lt;/h2&gt;
&lt;p&gt;So, with the previous in mind you can see the problem:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;From the side of techies they are bored of the need to accept connections to know about new opportunities and, many times, that connections do not represent a new challenge for them.&lt;/li&gt;
&lt;li&gt;From the side of the recruiters they are required to make an active search of candidates, most of times contacting with people not interested in the position or in a change.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Our solution: Joppy !&lt;/h2&gt;
&lt;p&gt;If tech professionals are the ones who better knows what are their best skills and preferences (I mean salary, kind of company, etc) and companies requires professionals with a given set of skills, why not create a service where: &lt;strong&gt;users will be only notified of jobs that matches their skills and preferences&lt;/strong&gt;. And all this completely anonymous for the candidate !!!&lt;/p&gt;
&lt;video width=&quot;680&quot; autoplay controls&gt;
  &lt;source src=&quot;./images/1-more-info.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
&lt;p&gt;If you don&apos;t see the benefit for the two sides here are some points:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Candidates are never burnt&lt;/strong&gt;. They only see job offers for jobs that matches their skills and preferences (location, salary, company size, etc).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Recruiters don&apos;t lose their time&lt;/strong&gt; contacting people not interested or trying to convince anybody.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Recruiters can&apos;t contact candidates directly&lt;/strong&gt;. Only when a candidate indicates it is interested in a job offer a chat is created among them to start communication.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Candidates are by default anonymous&lt;/strong&gt;, although they can share their real profile in a chat for a given job and recruiter.&lt;/li&gt;
&lt;li&gt;Anonymity, not only protects already working candidates, but brings equal opportunity for talent regarding of their genders, race or age.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Features&lt;/h3&gt;
&lt;p&gt;We have worked hard to make &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; something really simple and focus on its goal: &lt;strong&gt;put in contact recruiters and techies without pain&lt;/strong&gt; for both sides.&lt;/p&gt;
&lt;p&gt;For tech professional, &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; offers the perfect tool to avoid bothering them but that allows be up to date of new challenges:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Registration is extremely short and simple&lt;/strong&gt;: say your preferences (salary, location, ...), choose the speciality/ies you master, indicate the years if experience and, finally, the skills (per experience) you are really good at. With this we avoid people setting a long list of not so useful skills or a super awesome job title. At the end, the important is to know what you are good at.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Only notify you on job offers that match your preferences&lt;/strong&gt;: &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; is not a board of job posts neither a tool to make active search of jobs and candidates. &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; is like Tinder. Simply register and set your preferences. When a company publish a job that match you we will notify so you can decide if you are interested.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Real time chat&lt;/strong&gt;: Once you indicate you are interested in a job offer we will create a chat between company&apos;s recruiter and you. Real time and direct communication is best way to know about the position.&lt;/li&gt;
&lt;/ul&gt;
&lt;video width=&quot;680&quot; autoplay controls&gt;
  &lt;source src=&quot;./images/2-conversation-chat.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Anonymous by default&lt;/strong&gt;: No one can see you real data. When you are interested in a job the chat will show always your anonymous profile. No one will know who you are or where are you currently working. If you feel comfortable in a chat conversation you can make visible your real profile to that recruiter for that only job.&lt;/li&gt;
&lt;/ul&gt;
&lt;video width=&quot;680&quot; autoplay controls&gt;
  &lt;source src=&quot;./images/3-profile-anonymous-real_1.mp4&quot; type=&quot;video/mp4&quot;&gt;
  Your browser does not support the video tag.
&lt;/video&gt;
&lt;p&gt;And for recruiters, &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; is a new tool that completes their toolbox:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Reach unreachable candidates&lt;/strong&gt;: &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; is not only for active searching candidates. Everybody can be registered because we only notify them of new opportunities that match their preferences.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Increase answer ratio&lt;/strong&gt;: Forget the time needed to search and contact with candidates to finally do not receive answer or, in the best case, receive a negative. In &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; you publish a job offer and each new chat means an interested candidate in the position.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;What&apos;s the future?&lt;/h2&gt;
&lt;p&gt;Nobody knows but what is for sure is the recruitment model requires an update and &lt;a href=&quot;https://www.joppy.me&quot;&gt;Joppy&lt;/a&gt; here to work in that direction. The IT industry has needs completely different from other industries so do not expect the same model that works for others works for IT too.&lt;/p&gt;
&lt;p&gt;The offer and demand of jobs and candidates in IT is something unique and we need tools that adapt to that new scenario.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using async/await in ExpressJS middlewares]]></title><description><![CDATA[If you are not living in a cave for the past year you'll probably know the  keywords are one of the most interesting additions on ES7. It merges the benefits of a sequential syntax with the power of asynchronous programming. In this post we will cover how we must use correctly async functions as express middleware.]]></description><link>https://www.acuriousanimal.com/blog/2018/03/15/express-async-middleware</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2018/03/15/express-async-middleware</guid><pubDate>Thu, 15 Feb 2018 11:10:00 GMT</pubDate><content:encoded>&lt;p&gt;If you are not living in a cave for the past year you&apos;ll probably know the &lt;code class=&quot;language-text&quot;&gt;async/await&lt;/code&gt; keywords are one of the most interesting additions on ES7. It merges the benefits of a sequential syntax with the power of asynchronous programming.&lt;/p&gt;
&lt;p&gt;In this post we will cover how we must use correctly async functions as express middleware.&lt;/p&gt;
&lt;!--more--&gt;
&lt;h2&gt;async/await&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;async/await&lt;/code&gt; is an extremely useful notation. There are plenty of good articles explaining them and how to use it and, IMO, there is an extremely useful visual explanation in 7 secs: &lt;a href=&quot;https://async-await.xyz/&quot;&gt;Async/Await in JavaScript, 7 seconds&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Simply compare the syntax evolution from callbacks, passig through the use of promises until asyn/await (extracted from &lt;a href=&quot;https://www.toptal.com/javascript/asynchronous-javascript-async-await-tutorial&quot;&gt;Asynchronous JavaScript: From Callback Hell to Async and Await&lt;/a&gt;):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Verifying a user using callbacks&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;verifyUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verifyUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
           dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getRoles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;error&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; roles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
               &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                   &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
               &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                   dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logAccess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                       &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                           &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                           &lt;span class=&quot;token function&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; userInfo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; roles&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
               &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Verifying a user with promises&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;verifyUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verifyUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;userInfo&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getRoles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;rolesInfo&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logAccess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rolesInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;finalResult&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;token comment&quot;&gt;//do whatever the &apos;callback&apos; would do&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;token comment&quot;&gt;//do whatever the error handler needs&lt;/span&gt;
       &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Here you must implement `database.verifyUser`, `database.getRoles`&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// and `database.logAccess` as promises, i.e:&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; getRoles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       database&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;connect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;get roles sql&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
           &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Verifying a user with async/await&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;verifyUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; userInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verifyUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rolesInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getRoles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; logStatus &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logAccess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; userInfo&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token comment&quot;&gt;//handle errors as needed&lt;/span&gt;
   &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Here we use the same `database.verifyUser`, `database.getRoles`&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// and `database.logAccess` implementation based on promises&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see the async/await notation is more clear, in the sense it visually looks like a sequential set ot imperative sentences, but with the powerful of JS asynchronous programing.&lt;/p&gt;
&lt;h3&gt;Notes on async/await&lt;/h3&gt;
&lt;p&gt;When you use async/await you are responsible to handle errores at the point you desire. In the previous example we could also write:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Verifying a user with async/await&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;verifyUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; userInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verifyUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; rolesInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getRoles&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; logStatus &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; dataBase&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;logAccess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;userInfo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; userInfo&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The issue is if &lt;code class=&quot;language-text&quot;&gt;verifyUser&lt;/code&gt; fails at some point the funcion will trown an exception that should be catch by caller function:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; userInfo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;verifyUser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do something with the info&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do whatever&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: There is nothing new, the same way we need to use &lt;code class=&quot;language-text&quot;&gt;.catch()&lt;/code&gt; for promises.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Middlewares&lt;/h2&gt;
&lt;p&gt;Express is one of the most famous and used NodeJS frameworks. Among other things it adds the concept of middleware. Given a HTTP request (also the response) we can imagine a pipeline to traverse, where on each step a task is made: check request is authenticated, parse body and &quot;inject&quot; as an extra param in the request, check params are right, do some bussiness logic, etc.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn-images-1.medium.com/max/1600/0*8HIzvtX-DA3C26uv.png&quot; alt=&quot;Express middlewares&quot;&gt;&lt;/p&gt;
&lt;p&gt;In express, a middleware is nothing more than a callback function that receives three params: &lt;code class=&quot;language-text&quot;&gt;function middleware (request, response, next) {}&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt;: Reference to the object representing the HTTP request. We use it to get any data associated to the request: body, url, headers, etc.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;response&lt;/code&gt;: Reference to the object repreenting the HTTP response. We need it to write a response: response code, body, headers, etc.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;next&lt;/code&gt;: Callback we need to execute if we want to continue the pipeline of middlewares.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; require &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;This is a not async/await middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;How to use async/await functions as middlewares&lt;/h2&gt;
&lt;p&gt;Simply remember to handle async/await errors. So &lt;strong&gt;never to this&lt;/strong&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// NEVER DO THIS !!!&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Some code here&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because if for some reason the code inside the async funcion fails it will throw the error to the caller function (which is expressjs) and it will never be handled.&lt;/p&gt;
&lt;p&gt;The right way would be as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// DO THIS !!!&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Do something&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;error&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inside the middleware we make some actions and if things goes fine we invoke the net middleware or catch the error and invoke the next middleware with the error, this way expressjs will detect and handle the error.&lt;/p&gt;
&lt;h3&gt;Applying some DRY&lt;/h3&gt;
&lt;p&gt;One thing we can do to avoid repeating the try/catch code on each async middleware is write once in a high order function.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;asyncHandler&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
  Promise
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;asyncHandler&lt;/code&gt; receives a function and returns a function with three input params (oh wait!!! that&apos;s like a middleware function). This new function is responsible to executes the original function passing the three params and catching any error.&lt;/p&gt;
&lt;p&gt;Now we can rewrite our asynchronous middlewares like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/hello&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;asyncHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Some code here. Any error will be catch and pass to expressjs&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;My advice is: embrace &lt;code class=&quot;language-text&quot;&gt;async/await&lt;/code&gt;. It is very powerful notation one step beyong promises. Simply remember do not believe in magic and handle errors (the same way like with promises and callbacks) and remember to apply this too when working with expressjs.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Graceful shutdown NodeJS HTTP server when using PM2]]></title><description><![CDATA[So you have created a NodeJS server that receives tons of requests and you are really happy but, as every piece of software, you found a bug or add a new feature to it. It is clear you will need to shutdown your NodeJS process/es and restart again so that the new code takes place. The question is: how can you do that in a graceful way that allows continue serving incoming requests?]]></description><link>https://www.acuriousanimal.com/blog/2017/08/27/graceful-shutdown-node-processes</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2017/08/27/graceful-shutdown-node-processes</guid><pubDate>Sun, 27 Aug 2017 10:10:00 GMT</pubDate><content:encoded>&lt;p&gt;So you have created a NodeJS server that receives tons of requests and you are really happy but, as every piece of software, you found a bug or add a new feature to it. It is clear you will need to shutdown your NodeJS process/es and restart again so that the new code takes place. The question is: &lt;strong&gt;how can you do that in a graceful way that allows continue serving incoming requests?&lt;/strong&gt;&lt;/p&gt;
&lt;!--more--&gt;
&lt;hr&gt;
&lt;p&gt;More on this series:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/12/understanding-the-nodejs-cluster-module&quot;&gt;Understanding the NodeJS cluster module&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/18/using-cluster-module-with-http-servers&quot;&gt;Using cluster module with HTTP servers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/20/using-pm2-to-manage-cluster&quot;&gt;Using PM2 to manage a NodeJS cluster&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Graceful shutdown NodeJS HTTP server when using PM2&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Starting a HTTP server&lt;/h2&gt;
&lt;p&gt;Before see how we must shutdown a HTTP server lets see how usually create one. Next code shows a very basic code with an ExpressJS service that will return &lt;code class=&quot;language-text&quot;&gt;Hello World !!!&lt;/code&gt; when accessing the &lt;code class=&quot;language-text&quot;&gt;/hello&lt;/code&gt; path. You can also pass a path param, i.e. &lt;code class=&quot;language-text&quot;&gt;/hello/John&lt;/code&gt; with a name so it returns &lt;code class=&quot;language-text&quot;&gt;Hello John !!!&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; express &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;express&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; expressApp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;express&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Responds with Hello World or optionally the name you pass as path param&lt;/span&gt;
expressApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/hello/:name?&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Hello &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;!!!`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World !!!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Start server&lt;/span&gt;
expressApp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;App listening on port 3000!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What &lt;code class=&quot;language-text&quot;&gt;app.listen()&lt;/code&gt; function does is start a new HTTP server using the core &lt;code class=&quot;language-text&quot;&gt;http&lt;/code&gt; module and return a reference to the HTTP server object. In concrete, the source code of the &lt;code class=&quot;language-text&quot;&gt;listen()&lt;/code&gt; is as follows:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;listen&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;NOTE: Another way to create an express server is pass our &lt;code class=&quot;language-text&quot;&gt;expressApp&lt;/code&gt; reference directly to the &lt;code class=&quot;language-text&quot;&gt;http. createServer()&lt;/code&gt;, something like: &lt;code class=&quot;language-text&quot;&gt;const server = http.createServer(app).listen(3000)&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;How to shutdown properly an HTTP server ?&lt;/h2&gt;
&lt;p&gt;The proper way to shutdown an HTTP server is to invoke the &lt;code class=&quot;language-text&quot;&gt;server.close()&lt;/code&gt; function, this will stop server from accepting new connections while keeps existing ones until response them.&lt;/p&gt;
&lt;p&gt;Next code presents a new &lt;code class=&quot;language-text&quot;&gt;/close&lt;/code&gt; endpoint that once invoked will stop the HTTP server and exit the applications (stopping the nodejs process):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/close&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Closing the server...&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--&gt; Server call callback run !!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is clear shutting down a server through an endpoint is not the right way to it.&lt;/p&gt;
&lt;h2&gt;Graceful shutdown/restart with and without PM2&lt;/h2&gt;
&lt;p&gt;The goal of a graceful shutdown is to close the incoming connections to a server without killing the current ones we are handling.&lt;/p&gt;
&lt;p&gt;When using a process manager like PM2, we manage a cluster of processes each one acting as a HTTP server. The way PM2 achieves the graceful restart is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;sending a &lt;code class=&quot;language-text&quot;&gt;SIGNINT&lt;/code&gt; signal to each worker process,&lt;/li&gt;
&lt;li&gt;the worker are responsible to catch the signal, cleanup or free any used resource and finish the its process,&lt;/li&gt;
&lt;li&gt;finally PM2 manager spawns a new process&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Because this is done sequentially with our cluster processes customers must not be affected by the restart because there will always be some processes working and attending requests.&lt;/p&gt;
&lt;p&gt;This is very useful when we deploy new code and want to restart our servers so the new changes take effect without risk for incoming requests. We can achieve this putting next code in out app:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Graceful shutdown&lt;/span&gt;
process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;SIGINT&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;cleanUp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Clean up other resources like DB connections&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Closing server...&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Server closed !!! &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;cleanUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Force close server after 5secs&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Forcing server close !!!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;cleanUp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When the &lt;code class=&quot;language-text&quot;&gt;SINGINT&lt;/code&gt; signal it catch we invoke the &lt;code class=&quot;language-text&quot;&gt;server.close()&lt;/code&gt; to avoid accepting more requests and once it is closed we clean up any resource used by our app, like close database connection, close opened files, etc invoking the &lt;code class=&quot;language-text&quot;&gt;cleanUp()&lt;/code&gt; function and, finally, we exits the process with &lt;code class=&quot;language-text&quot;&gt;process.exit()&lt;/code&gt;.  In addition, if for some reason our code spends too much time to close the server we force it running a very similar code within a &lt;code class=&quot;language-text&quot;&gt;setTimeout()&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;When creating a HTTP server, no matter if a web server to serve pages or an API, we need to take into account the fact it will be updated in time with new features and bug fixes, so we need to think in a way to minimize the impact on customers.&lt;/p&gt;
&lt;p&gt;Running nodejs processes in cluster mode is a common way to improve our applications performance and we need to think on how to graceful shutdown all them to not affect incoming requests.&lt;/p&gt;
&lt;p&gt;Terminating a node process with &lt;code class=&quot;language-text&quot;&gt;process.exit()&lt;/code&gt; is not enough when working with an HTTP server because it will terminate abruptly all the communications, we need to first stop accepting new connections, free any resource used by our application and, finally, stop the process.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using PM2 to manage NodeJS cluster]]></title><description><![CDATA[The cluster module allows us to create worker processes to improve our NodeJS applications performance. This is specially important in web applications, where a master process receives all the requests and load balances them among the worker processes. But all this power comes with the cost that must be the application who manages all the complexity associated with process managements: what happens if a worker process exists unexpectedly, how exit gracefully the worker processes, what if you need to restart all your workers, etc. In this post we present PM2 tool. although it is a general process manager, that means it can manage any kind of process like python, ruby, ... and not only NodeJS processes, the tool is specially designed to manage NodeJS applications that want to work with the cluster module.]]></description><link>https://www.acuriousanimal.com/blog/2017/08/20/using-pm2-to-manage-cluster</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2017/08/20/using-pm2-to-manage-cluster</guid><pubDate>Sun, 20 Aug 2017 08:34:00 GMT</pubDate><content:encoded>&lt;p&gt;The cluster module allows us to create worker processes to improve our NodeJS applications performance. This is specially important in web applications, where a master process receives all the requests and load balances them among the worker processes.&lt;/p&gt;
&lt;p&gt;But all this power comes with the cost that must be the application who manages all the complexity associated with process managements: what happens if a worker process exists unexpectedly, how exit gracefully the worker processes, what if you need to restart all your workers, etc.&lt;/p&gt;
&lt;p&gt;In this post we present &lt;a href=&quot;http://pm2.keymetrics.io&quot;&gt;PM2&lt;/a&gt; tool. although it is a general process manager, that means it can manage any kind of process like python, ruby, ... and not only NodeJS processes, the tool is specially designed to manage NodeJS applications that want to work with the cluster module.&lt;/p&gt;
&lt;!--more--&gt;
&lt;hr&gt;
&lt;p&gt;More on this series:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/12/understanding-the-nodejs-cluster-module&quot;&gt;Understanding the NodeJS cluster module&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/18/using-cluster-module-with-http-servers&quot;&gt;Using cluster module with HTTP servers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Using PM2 to manage a NodeJS cluster&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/27/graceful-shutdown-node-processes&quot;&gt;Graceful shutdown NodeJS HTTP server when using PM2&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Introducing PM2&lt;/h2&gt;
&lt;p&gt;As said previously, PM2 is a general process manager, that is, a program that controls the execution of other process (like a python program that check if you have new emails) and does things like: check your process is running, re-execute your process if for some reason it exits unexpectedly, log its output, etc.&lt;/p&gt;
&lt;p&gt;The most important thing for us is PM2 simplifies the execution of NodeJS applications to run as a cluster. Yes, you write your application without worrying about cluster module and is PM2 who creates a given number of worker processes to run your application.&lt;/p&gt;
&lt;h3&gt;The hard part of cluster module&lt;/h3&gt;
&lt;p&gt;Lets see an example where we create a very basic HTTP server using the cluster module. The master process will spawn as many workers as CPUs and will take care if any of the workers exists to spawn a new worker.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cluster&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; http &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; numCPUs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;os&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cpus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isMaster&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; is running`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; numCPUs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Forking process number &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;i&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;exit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;worker&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; code&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; signal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;worker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; died`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Forking a new process...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; started...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeHead&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The worker process is a very simple HTTP server listening on port 3000 and programmed to return a &lt;code class=&quot;language-text&quot;&gt;Hello World&lt;/code&gt; and exit (to simulate a failure).&lt;/p&gt;
&lt;p&gt;If we run the program with &lt;code class=&quot;language-text&quot;&gt;$ node app.js&lt;/code&gt; the output will show something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ node app.js

Master 2398 is running
Forking process number 0&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 1&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 2399 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 2400 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we go to browser at URL &lt;code class=&quot;language-text&quot;&gt;http://localhost:3000&lt;/code&gt; we will get a &lt;code class=&quot;language-text&quot;&gt;Hello World&lt;/code&gt; and in the console see something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;Worker 2400 died
Forking a new process&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 2401 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That&apos;s very nice, now lets go to see how PM2 can simplify our application.&lt;/p&gt;
&lt;h3&gt;The PM2 way&lt;/h3&gt;
&lt;p&gt;Before continue, you need to instal PM2 on your system. Typically it is installed as a global module with &lt;code class=&quot;language-text&quot;&gt;$ npm install pm2 -g&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;$ yarn global add pm2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;When using PM2 we can forget the part of the code related with the master process, that will responsibility of PM2, so our very basic HTTP server can be rewritten as:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; http &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; started...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeHead&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now run PM2 with &lt;code class=&quot;language-text&quot;&gt;$ pm2 start app.js -i 3&lt;/code&gt; and you will see an output similar to:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note the option &lt;code class=&quot;language-text&quot;&gt;-i&lt;/code&gt; that is used to indicate the number of instances to create. The idea is that number be the same as your number of CPU cores. If you don&apos;t know them you can set &lt;code class=&quot;language-text&quot;&gt;-i 0&lt;/code&gt; to leave PM2 detect it automatically.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ pm2 start app.js -i 3

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;PM2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; Starting /Users/blablabla/some-project/app.js &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; cluster_mode &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;3 instances&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;PM2&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; Done.

&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Name      &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; mode    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; status &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; â†º &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; cpu &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; memory    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; ----------&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;---------&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;--------&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;---&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;-----&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;-----------&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; app       &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; online &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 0 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 23% &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 27.1 MB   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; app       &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; online &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 0 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 26% &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 27.3 MB   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; app       &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; online &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 0 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 14% &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; 25.1 MB   &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can see the application logs running &lt;code class=&quot;language-text&quot;&gt;$ pm2 log&lt;/code&gt;. Now when accessing the the &lt;code class=&quot;language-text&quot;&gt;http://localhost:3000&lt;/code&gt; URL we will see logs similar to:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;PM2        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; App name:app id:0 disconnected
PM2        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; App &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; with &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;0&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; and pid &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;1299&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;, exited with code &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;1&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; via signal &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;SIGINT&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
PM2        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Starting execution sequence &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; -cluster mode- &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; app name:app id:0
PM2        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; App name:app id:0 online
0&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;app      &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Worker 1489 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can see how PM2 process detects one of our workers has exit and automatically starts a new instance.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;Although the NodeJS cluster module is a powerful mechanism to improve performance it comes at the cost of complexity required to manage all the situations an application can found: what happens if a worker exists, how can we reload the application cluster without down time, etc.&lt;/p&gt;
&lt;p&gt;PM2 is a process manager specially designed to work with NodeJS clusters. It allow to cluster an application, restart or reload, without the required code complexity in addition to offer tools to see log outputs, monitorization, etc.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://keymetrics.io/2015/03/26/pm2-clustering-made-easy/&quot;&gt;Node.js clustering made easy with PM2&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using cluster module with HTTP servers]]></title><description><![CDATA[The cluster module allow us improve performance of our application in multicore CPU systems. This is specially important no matter if working on an APIs or an, i.e. ExpressJS based, web servers, what we desire is to take advantage of all the CPUs on each machine our NodeJS application is running. The cluster module allow us to load balance the incoming request among a set of worker processes and, because of this, improving the throughput of our application. In the previous post Understanding the NodeJS cluster module I introduced the cluster module and show some basic usages of it to create worker processes and comunicate them with the master process. In this post we are going to see how to use the cluster module when creating HTTP servers, both using plain HTTP module and with ExpressJS.]]></description><link>https://www.acuriousanimal.com/blog/2017/08/18/using-cluster-module-with-http-servers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2017/08/18/using-cluster-module-with-http-servers</guid><pubDate>Fri, 18 Aug 2017 17:18:00 GMT</pubDate><content:encoded>&lt;p&gt;The &lt;a href=&quot;https://nodejs.org/api/cluster.html&quot;&gt;cluster&lt;/a&gt; module allow us improve performance of our application in multicore CPU systems. This is specially important no matter if working on an APIs or an, i.e. ExpressJS based, web servers, what we desire is to take advantage of all the CPUs on each machine our NodeJS application is running.&lt;/p&gt;
&lt;p&gt;The cluster module allow us to load balance the incoming request among a set of worker processes and, because of this, improving the throughput of our application.&lt;/p&gt;
&lt;p&gt;In the previous post &lt;a href=&quot;%7B%7B%20site.baseurl%20%7D%7D%7B%25%20post_url%202017-08-12-understanding-the-nodejs-cluster-module%20%25%7D&quot;&gt;Understanding the NodeJS cluster module&lt;/a&gt; I introduced the cluster module and show some basic usages of it to create worker processes and comunicate them with the master process. In this post we are going to see how to use the cluster module when creating HTTP servers, both using plain &lt;a href=&quot;https://nodejs.org/api/http.html&quot;&gt;HTTP&lt;/a&gt; module and with ExpressJS.&lt;/p&gt;
&lt;!--more--&gt;
&lt;hr&gt;
&lt;p&gt;More on this series:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/12/understanding-the-nodejs-cluster-module&quot;&gt;Understanding the NodeJS cluster module&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Using cluster module with HTTP servers&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/20/using-pm2-to-manage-cluster&quot;&gt;Using PM2 to manage a NodeJS cluster&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/27/graceful-shutdown-node-processes&quot;&gt;Graceful shutdown NodeJS HTTP server when using PM2&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Using cluster module with HTTP servers&lt;/h2&gt;
&lt;p&gt;Lets go to see how we can create a really basic HTTP server that takes profit of the cluster module.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cluster&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; http &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; numCPUs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;os&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cpus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isMaster&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; is running`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; numCPUs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Forking process number &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;i&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; started...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeHead&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We have diveded the code in two parts, the one corresponding to the master process and the one where we initialize the worker processes. This way the &lt;code class=&quot;language-text&quot;&gt;masterProcess&lt;/code&gt; function forks a worker process per CPU code. On the other hand the &lt;code class=&quot;language-text&quot;&gt;childProcess&lt;/code&gt; simply creates an HTTP server listenen on port 3000 and returning a nice &lt;code class=&quot;language-text&quot;&gt;Hello World&lt;/code&gt; text string with a 200 status code.&lt;/p&gt;
&lt;p&gt;If you run the code the output must show something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ node app.js

Master 1859 is running
Forking process number 0&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 1&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 2&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 3&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 1860 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 1862 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 1863 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 1861 started&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Basically our initial process (the master) is spawing a new worker process per CPU that runs an HTTP server that handle requests. As you can see this can improve a lot your server performance because it is not the same having one processing attending one million of requests than having four processes attending one millun requests.&lt;/p&gt;
&lt;h2&gt;How cluster module works with network connections ?&lt;/h2&gt;
&lt;p&gt;The previous example is simple but hides something tricky, some &lt;em&gt;magic&lt;/em&gt; NodeJS make to simplify our live as developer.&lt;/p&gt;
&lt;p&gt;In any OS a process can use a port to communicate with other systems and, that means, the given port can only be used by that process. So, the question is, &lt;strong&gt;how can the forked worker processes use the same port?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The answer, the simplified answer, is the master process is the one who listens in the given port and load balances the requests among all the child/worker processes. From the offical documentation:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The worker processes are spawned using the child_process.fork() method, so that they can communicate with the parent via IPC and pass server handles back and forth.&lt;/p&gt;
&lt;p&gt;The cluster module supports two methods of distributing incoming connections.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The first one (and the default one on all platforms except Windows), is the round-robin approach, where the master process listens on a port, accepts new connections and distributes them across the workers in a round-robin fashion, with some built-in smarts to avoid overloading a worker process.&lt;/li&gt;
&lt;li&gt;The second approach is where the master process creates the listen socket and sends it to interested workers. The workers then accept incoming connections directly.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;As long as there are some workers still alive, the server will continue to accept connections. If no workers are alive, existing connections will be dropped and new connections will be refused.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Other alternatives to cluster module load balancing&lt;/h2&gt;
&lt;p&gt;Cluster module allow the master process to receive request and load balance it among all the worker processes. This is a way to improve performance but it is not the only one.&lt;/p&gt;
&lt;p&gt;In the post &lt;a href=&quot;https://medium.com/@fermads/node-js-process-load-balancing-comparing-cluster-iptables-and-nginx-6746aaf38272&quot;&gt;Node.js process load balance performance: comparing cluster module, iptables and Nginx&lt;/a&gt; you can find a performance comparison among: node cluster module, iptables and nginx reverse proxy.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;Nowadays performance is mandatory on any web applications, we need to support high throughput and serve data fast.&lt;/p&gt;
&lt;p&gt;The cluster module is one possible solution, it allows us to have one master process and create a worker processes for each core, so that they run an HTTP server. The cluster module offers two great features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;simplifies communication among master and workers, by creating an IPC channel and allowing send messages with &lt;code class=&quot;language-text&quot;&gt;process.send()&lt;/code&gt;,&lt;/li&gt;
&lt;li&gt;allow worker processes share the same port. This is done making the master process the one which receives requests and multiplexe them among workers.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Understanding the NodeJS cluster module]]></title><description><![CDATA[NodeJS processes runs on a single process, which means it does not take advantage from multi-core systems by default. If you have an 8 core CPU and run a  NodeJS program via  it will run in a single process, wasting the rest of CPUs. Hopefully for us NodeJS offers the cluster module that contains a set of functions and properties that help us to create programs that uses all the CPUs. Not a surprise the mechanism the cluster module uses to maximize the CPU usage was via forking processes, similar to the old fork() system call Unix systems.]]></description><link>https://www.acuriousanimal.com/blog/2017/08/12/understanding-the-nodejs-cluster-module</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2017/08/12/understanding-the-nodejs-cluster-module</guid><pubDate>Sat, 12 Aug 2017 10:34:00 GMT</pubDate><content:encoded>&lt;p&gt;NodeJS processes runs on a single process, which means it does not take advantage from multi-core systems by default. If you have an 8 core CPU and run a  NodeJS program via &lt;code class=&quot;language-text&quot;&gt;$ node app.js&lt;/code&gt; it will run in a single process, wasting the rest of CPUs.&lt;/p&gt;
&lt;p&gt;Hopefully for us NodeJS offers the &lt;a href=&quot;https://nodejs.org/api/cluster.html&quot;&gt;cluster&lt;/a&gt; module that contains a set of functions and properties that help us to create programs that uses all the CPUs. Not a surprise the mechanism the cluster module uses to maximize the CPU usage was via forking processes, similar to the old &lt;a href=&quot;http://www.includehelp.com/c-programs/c-fork-function-linux-example.aspx&quot;&gt;fork()&lt;/a&gt; system call Unix systems.&lt;/p&gt;
&lt;!--more--&gt;
&lt;hr&gt;
&lt;p&gt;More on this series:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Understanding the NodeJS cluster module&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/18/using-cluster-module-with-http-servers&quot;&gt;Using cluster module with HTTP servers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/20/using-pm2-to-manage-cluster&quot;&gt;Using PM2 to manage a NodeJS cluster&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/2017/08/27/graceful-shutdown-node-processes&quot;&gt;Graceful shutdown NodeJS HTTP server when using PM2&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Introducing the cluster module&lt;/h2&gt;
&lt;p&gt;The cluster module is a NodeJS module that contains a set of functions and properties that help us forking processes to take advantage of multi-core systems. It is propably the first level of scalability you must take care in your node application, specifally if you are working in a HTTP server application, before going to a higher scalability levels (I mean scaling vertically and horizontally in different machines).&lt;/p&gt;
&lt;p&gt;With the cluster module a &lt;em&gt;parent/master&lt;/em&gt; process can be forked in any number of &lt;em&gt;child/worker&lt;/em&gt; processes and communicate with them sending messages via &lt;a href=&quot;https://en.wikipedia.org/wiki/Inter-process_communication&quot;&gt;IPC&lt;/a&gt; communication. &lt;strong&gt;Remember there is no shared memory among processes.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Next lines are a compilation of sentences from the NodeJS documentation I have taken the liberty to copy&amp;#x26;pasta to put it in a way I think can help you understand thw whole thing in a few lines.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A single instance of Node.js runs in a single thread. To take advantage of multi-core systems the user will sometimes want to launch a cluster of Node.js processes to handle the load.&lt;/p&gt;
&lt;p&gt;The cluster module allows easy creation of child processes that all share server ports.&lt;/p&gt;
&lt;p&gt;The worker (child) processes are spawned using the &lt;code class=&quot;language-text&quot;&gt;child_proces.fork()&lt;/code&gt; method, so that they can communicate with the parent via IPC and pass server handles back and forth. The &lt;code class=&quot;language-text&quot;&gt;child_process.fork()&lt;/code&gt; method is a special case of &lt;code class=&quot;language-text&quot;&gt;child_process.spawn()&lt;/code&gt; used specifically to spawn new Node.js processes. Like &lt;code class=&quot;language-text&quot;&gt;child_process.spawn()&lt;/code&gt;, a &lt;code class=&quot;language-text&quot;&gt;ChildProcess&lt;/code&gt; object is returned. The returned &lt;code class=&quot;language-text&quot;&gt;ChildProcess&lt;/code&gt; will have an additional communication channel built-in that allows messages to be passed back and forth between the parent and child, through the &lt;code class=&quot;language-text&quot;&gt;send()&lt;/code&gt; method. See &lt;code class=&quot;language-text&quot;&gt;subprocess.sen()&lt;/code&gt; for details.&lt;/p&gt;
&lt;p&gt;It is important to keep in mind that spawned Node.js child processes are independent of the parent with exception of the IPC communication channel that is established between the two. Each process has its own memory, with their own V8 instances. Because of the additional resource allocations required, spawning a large number of child Node.js processes is not recommended.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, most of the magic is done by the &lt;a href=&quot;https://nodejs.org/api/child_process.html&quot;&gt;child_process&lt;/a&gt; module, which is resposible to spawn new process and help communicate among them, for example, creating pipes. You can find a great article at &lt;a href=&quot;https://medium.freecodecamp.org/node-js-child-processes-everything-you-need-to-know-e69498fe970a&quot;&gt;Node.js Child Processes: Everything you need to know&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;A basic example&lt;/h2&gt;
&lt;p&gt;Stop talking and lets see a real exampe. Next we show a very basic code that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Creates a master process that retrives the number of CPUs and forks a worker process for each CPU, and&lt;/li&gt;
&lt;li&gt;Each child process prints a message in console and exit.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cluster &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;cluster&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; http &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; numCPUs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;os&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cpus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isMaster&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; is running`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; numCPUs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Forking process number &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;i&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; started and finished`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save the code in &lt;code class=&quot;language-text&quot;&gt;app.js&lt;/code&gt; file and run executing: &lt;code class=&quot;language-text&quot;&gt;$ node app.js&lt;/code&gt;. The output should be something similar to:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ node app.js

Master 8463 is running
Forking process number 0&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 1&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 2&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 3&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 8464 started and finished
Worker 8465 started and finished
Worker 8467 started and finished
Worker 8466 started and finished&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Code explanation&lt;/h3&gt;
&lt;p&gt;When we run the &lt;code class=&quot;language-text&quot;&gt;app.js&lt;/code&gt; program an OS process is created that starts running our code. At the beginning the cluster mode is imported &lt;code class=&quot;language-text&quot;&gt;const cluster = require(&amp;#39;cluster&amp;#39;)&lt;/code&gt; and in the &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; sentence we check if the &lt;code class=&quot;language-text&quot;&gt;isMaster&lt;/code&gt; property.&lt;/p&gt;
&lt;p&gt;Because the process is the &lt;em&gt;first&lt;/em&gt; process the &lt;code class=&quot;language-text&quot;&gt;isMaster&lt;/code&gt; property is &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt; and then we run the code of &lt;code class=&quot;language-text&quot;&gt;masterProcess&lt;/code&gt; function. This function has not much secret, it loops depending on the number of CPUs of your machine and forks the current process using the &lt;code class=&quot;language-text&quot;&gt;cluster.fork()&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;What the &lt;code class=&quot;language-text&quot;&gt;fork()&lt;/code&gt; really does is to create a new node process, like if you run it via command line with &lt;code class=&quot;language-text&quot;&gt;$node app.js&lt;/code&gt;, that is you have many processes running your &lt;code class=&quot;language-text&quot;&gt;app.js&lt;/code&gt; program.&lt;/p&gt;
&lt;p&gt;When a child process is created and executed, it does the same as the master, that is, imports the cluster module and executes the &lt;code class=&quot;language-text&quot;&gt;if&lt;/code&gt; statement. Once of the differences is for the child process the value of &lt;code class=&quot;language-text&quot;&gt;cluster.isMaster&lt;/code&gt; is &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;, so they ends running the &lt;code class=&quot;language-text&quot;&gt;childProcess&lt;/code&gt; function.&lt;/p&gt;
&lt;p&gt;Note, we explicitly terminate the master and worker processes with &lt;code class=&quot;language-text&quot;&gt;process.exit()&lt;/code&gt;, which by default return value of zero. &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;NOTE: NodeJS also offers the &lt;a href=&quot;https://nodejs.org/api/child_process.html&quot;&gt;Child Processes&lt;/a&gt; module that simplifies the creation and comunication with other processes. For example we can spawn the &lt;code class=&quot;language-text&quot;&gt;ls -l&lt;/code&gt; terminal command and pipe with another process that handles the results.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Comunicating master and worker processes&lt;/h2&gt;
&lt;p&gt;When a worker process is created, an IPC channel is created among the worker and the master, allowing us to communicated between them with the &lt;code class=&quot;language-text&quot;&gt;send()&lt;/code&gt; method, which accepts a JavaScript object as parameter. Remember they are different processes (not threads) so we can&apos;t use shared memory as a way of communcation.&lt;/p&gt;
&lt;p&gt;From the master process, we can send a message to a worker process using the process reference, i.e. &lt;code class=&quot;language-text&quot;&gt;someChild.send({ ... })&lt;/code&gt;, and within the worker process we can messages to the master simply using the current &lt;code class=&quot;language-text&quot;&gt;process&lt;/code&gt; reference, i.e. &lt;code class=&quot;language-text&quot;&gt;process.send()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We have updated slighly the previous code to allow master send and receive messages from/to the workers and also the workers receive and send messages from the master process:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;childProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; started`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;message&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; recevies message &apos;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; sends message to master...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; msg&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Message from worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; finished`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The worker process is simply to understand. First we listen for the &lt;code class=&quot;language-text&quot;&gt;message&lt;/code&gt; event registering a listener with the &lt;code class=&quot;language-text&quot;&gt;process.on(&amp;#39;message&amp;#39;, handler)&lt;/code&gt; method. Later we send a messages with &lt;code class=&quot;language-text&quot;&gt;process.send({...})&lt;/code&gt;. Note the message is a plain JavaScript object.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; workers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;masterProcess&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; is running`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Fork workers&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; numCPUs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Forking process number &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;i&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; worker &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cluster&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fork&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    workers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;worker&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Listen for messages from worker&lt;/span&gt;
    worker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;message&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; recevies message &apos;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; from worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;worker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// Send message to the workers&lt;/span&gt;
  workers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;worker&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; sends message to worker &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;worker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    worker&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; msg&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Message from master &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;    
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;masterProcess&lt;/code&gt; function has been divided in two parts. In the first loop we fork as much workers as CPUs we have. The &lt;code class=&quot;language-text&quot;&gt;cluster.fork()&lt;/code&gt; returns a &lt;code class=&quot;language-text&quot;&gt;worker&lt;/code&gt; object representing the worker process, we store the reference in an array and register a listener to receive messages that comes from that worker instance.&lt;/p&gt;
&lt;p&gt;Later, we loop over the array of workers and send a message from the master process to that concrete worker.&lt;/p&gt;
&lt;p&gt;If you run the code the output will be something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;$ node app.js

Master 4045 is running
Forking process number 0&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Forking process number 1&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Master 4045 sends message to worker 4046&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Master 4045 sends message to worker 4047&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 4047 started
Worker 4047 sends message to master&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 4047 finished
Master 4045 recevies message &lt;span class=&quot;token string&quot;&gt;&apos;{&quot;msg&quot;:&quot;Message from worker 4047&quot;}&apos;&lt;/span&gt; from worker 4047
Worker 4047 recevies message &lt;span class=&quot;token string&quot;&gt;&apos;{&quot;msg&quot;:&quot;Message from master 4045&quot;}&apos;&lt;/span&gt;
Worker 4046 started
Worker 4046 sends message to master&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;.
Worker 4046 finished
Master 4045 recevies message &lt;span class=&quot;token string&quot;&gt;&apos;{&quot;msg&quot;:&quot;Message from worker 4046&quot;}&apos;&lt;/span&gt; from worker 4046
Worker 4046 recevies message &lt;span class=&quot;token string&quot;&gt;&apos;{&quot;msg&quot;:&quot;Message from master 4045&quot;}&apos;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here we are not terminating the process with &lt;code class=&quot;language-text&quot;&gt;process.exit()&lt;/code&gt; so to close the application you need to use &lt;code class=&quot;language-text&quot;&gt;ctrl+c&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&quot;https://nodejs.org/api/cluster.html&quot;&gt;cluster module&lt;/a&gt; offers to NodeJS the needed capabilities to use the whole power of a CPU. Although not seen in this post, the cluster module is complemented with the &lt;a href=&quot;https://nodejs.org/api/child_process.html&quot;&gt;child process&lt;/a&gt; module that offers plenty of tools to work with processes: start, stop and pipe input/out, etc.&lt;/p&gt;
&lt;p&gt;Cluster module allow us to easily create worker processes. In addition it &lt;strong&gt;magically&lt;/strong&gt; creates an IPC channel to communicate the master and worker process passing JavaScript objects.&lt;/p&gt;
&lt;p&gt;In my next post I will show how important is the cluster module when working in an HTTP server, no matter if an API or web server working with ExpressJS. The cluster module can increase performance of our application having as many worker processes as CPUs cores.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[fetch API and Express sessions]]></title><description><![CDATA[TL;DR fetch API is the successor of XHR and although it's really powerful ( see What is the difference between the Fetch API and XMLHttpRequest?) you should take care of some things, like the fact you are responsible to determine if cookies must be sent to the server.]]></description><link>https://www.acuriousanimal.com/blog/2016/12/11/fetch-api-and-express-sessions</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2016/12/11/fetch-api-and-express-sessions</guid><pubDate>Sun, 11 Dec 2016 08:12:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;TL;DR&lt;/em&gt; fetch API is the successor of XHR and although it&apos;s really powerful ( see &lt;a href=&quot;http://stackoverflow.com/questions/35549547/what-is-the-difference-between-the-fetch-api-and-xmlhttprequest&quot;&gt;What is the difference between the Fetch API and XMLHttpRequest?&lt;/a&gt;) you should take care of some things, like the fact you are responsible to determine if cookies must be sent to the server.&lt;/p&gt;
&lt;!--more--&gt;
&lt;p&gt;This is not a tutorial on how to use the &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt; API neither Express framework. This post is a short reminder on how to work with cookies in an Express application that uses fetch in the client side.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;My custom scenario&lt;/h2&gt;
&lt;p&gt;Before continue I&apos;m going to describe my application scenario so you can be centered in the &lt;em&gt;problem&lt;/em&gt; produced me a real headache.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Client side application. The user access some URL which serves all the code of the application. From this point all the interaction happens in the client side. (It is a react+redux client side application without server side rendering).&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;API. Client communicates with the same server that serves the HTML+CSS+JS page, invoking API endpoints for login, create resources, get list of resources, etc.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;API implemented with Express+passport.&lt;/li&gt;
&lt;li&gt;authentication based on sessions. Once the user is logged in a session is created which serves to authenticate next operations.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;fetch, cookies and the &lt;code class=&quot;language-text&quot;&gt;credentials&lt;/code&gt; property&lt;/h2&gt;
&lt;p&gt;Simply remember you must use the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials&quot;&gt;credentials&lt;/a&gt; property to send cookies in your requests.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The credentials read-only property of the Request interface indicates whether the user agent should send cookies from the other domain in the case of cross-origin requests. This is similar to XHRâ€™s withCredentials flag.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The allowed values are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;omit&lt;/code&gt;: Never send cookies. &lt;strong&gt;Default value&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;same-origin&lt;/code&gt;: Only send cookies if the URL is on the same origin as the calling script.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;include&lt;/code&gt;: Always send cookies, even for cross-origin calls.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, &lt;strong&gt;you must set the &lt;code class=&quot;language-text&quot;&gt;credentials&lt;/code&gt; property in all your client requests&lt;/strong&gt; so that any operation, a login, an operation that retrieves resources or creates a new resource, sends the cookie to the API and can be authenticated. In my case I choose &lt;code class=&quot;language-text&quot;&gt;credentials: same-origin&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note, if your API is in a different domain that the page that serves your client code you must use the &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Request/mode&quot;&gt;mode&lt;/a&gt; property too to indicate a CORS request.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Express, sessions and passport&lt;/h2&gt;
&lt;p&gt;On the server side, the API, we have configured Express to allow sessions and configured passport to store local authentication in sessions. It is important to remember initialize the passport session middleware after the express session one.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; session &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;express-session&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; passport &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;passport&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  resave&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  saveUninitialized&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;supersecret&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  cookie&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    httpOnly&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    secure&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;passport&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;passport&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;env&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;production&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;trust proxy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// trust first proxy&lt;/span&gt;
  sessionOptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;proxy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  sessionOptions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookie&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;secure &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// serve secure cookies&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lets describe the previous session configuration properties:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;cookies&lt;/code&gt;: this object contains configuration on how cookies must be handled in the session.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;secure&lt;/code&gt;: Specified if &lt;code class=&quot;language-text&quot;&gt;Set-Cookie&lt;/code&gt; header will contains &lt;code class=&quot;language-text&quot;&gt;Secure&lt;/code&gt; flag. &lt;strong&gt;Be careful when setting this to true, as compliant clients will not send the cookie back to the server in the future if the browser does not have an HTTPS connection.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;httpOnly&lt;/code&gt;: Specified if &lt;code class=&quot;language-text&quot;&gt;Set-Cookie&lt;/code&gt; header will contains &lt;code class=&quot;language-text&quot;&gt;HttpOnly&lt;/code&gt; flag. &lt;strong&gt;Be careful when setting this to true, as compliant clients will not allow client-side JavaScript to see the cookie in document.cookie.&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This two &lt;code class=&quot;language-text&quot;&gt;cookies&lt;/code&gt; properties can become your worst enemy while developing because usually you do not work using HTTPS. So, take them into account.&lt;/p&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;As always the process of developing is a cycle of &lt;em&gt;pain and ecstasy&lt;/em&gt;, where pain is almost always produced by stupid or really subtle things that transform your productive day in a hell.&lt;/p&gt;
&lt;iframe src=&quot;//giphy.com/embed/4TMqcN59kg3Yc&quot; width=&quot;480&quot; height=&quot;270&quot; frameBorder=&quot;0&quot; class=&quot;giphy-embed&quot; allowFullScreen&gt;&lt;/iframe&gt;&lt;p&gt;&lt;a href=&quot;https://giphy.com/gifs/burning-dr-steve-brule-4TMqcN59kg3Yc&quot;&gt;via GIPHY&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Configuring Atom editor with ESLint and the AirBnB style guide rules]]></title><description><![CDATA[TL;DR This article demonstrate how to integrate the ESLint tool with Atom editor so our source code be automatically checked, showing linting messages in editor. In addition, ESLint will be configured based on the AirBnB code style rules. Atom & ESLint Atom editor is probably one of the most used text editors (along with SublimeText, Visual Studio Code, TextMate, ...). On his side, ESLint is an open source project, originally created by Nicholas C. Zakas, with the goal to provide a pluggable linting utility for JavaScript. Usually, the way to use ESLint involves the command line, invoking it to check our project's code at some point (for example, before made a build) or automatizing its execution with a tool like Gulp or Grunt each time a file is modified. ESLint also accepts a configuration files, like , where we can define the set of rules we want the tool checks. The issue is, as you can imagine, the number of rules ESLint accepts is really huge. The importance of a style guide In projects with many developers it can be useful define a set of rules that force all of them to code with the same style, that is, use a style guide. The problem with style guides is they are set of good practices-conventions that everybody assumes the rest are applying. As you can image working with assumptions in a big and shared code is not good. Without a tool like ESLint there must be people acting as a police, that is, spending time reviewing the code style and not only the code. Thanks to ESLint this time can be reduced forcing each member of the team to ensure the code follows the same convention rules before committing or pushing to the repository. Besides, using CI tools (like GitHub with TravisCI) we can also check the code style and disable the possibility to merge a branch if the code lint fails. The AirBnB JavaScript Style Guide Creating and maintaining a style guide is not an easy tasks. Hopefully, the awesome people at AirBnB have created the AirBnB JavaScript Style Guide for us that I have chose because of: Works with ES5 and ES6: arrow functions, object destructuring, array spread, ... Includes React and JSX style: one component per file, recognizes stateless vs class component, ... It is based on ESLint. I want to note here the Standard JS project, which defines a set of rules ready to be used in our JS projects. Related with what I have said in the previous section, I want to highlight two sentences written in the main page of the project: This module saves you (and others!) time in two ways: No configuration. The easiest way to enforce consistent style in your project. Just drop it in. Catch style errors before they're submitted in PRs. Saves precious code review time by eliminating back-and-forth between maintainer and contributor. Integrating ESLint with Atom Ok, enough talk and lets start working. We need to make two things: first, configure ESLint in our project (for this we also need to install the AirBnB style guide), and second install necessary Atom plugins to show messages while coding. Configuring ESLint in your project The first thing we need to do is configure ESLint in our project. Remember we are going to use the AirBnB style guide so we need no install the required package and make our ESLint configuration extend from the AirBnB ESLint configuration. Install ESLint locally to your project: . Install the AirBnB ESLint configuration. Following package instructions we need to execute next sentences to install the right package versions and dependencies: Create a  file in the root of our project. We must be sure to include the property  as part of the configuration. Next is a sample configuration file. Note we inherited configuration from AirBnB. In addition, we have added the eslint rules  and  to forces us to write some JSDoc for functions, methods and classes. Right now our project is configured with ESLint and the base set of rules from AirBnB, but it requires we execute ESLint manually or automatize in some way (in the build process). Installing Atom plugins Lets go to configure Atom to automatically lint files and show us message while coding. Be sure you have completed successfully the previous sections. Install the Atom plugin linter-eslint. You are finished :) The plugin will detect automatically the  file in your project and will start linting on the fly the source code showing all the errors and warning.  Conclusions ESLint is a powerful tool that help teams ensuring quality code. On his side Atom is become a great and powerful editor, mainly due the active community and the growing set of plugins. The combination of both tools can improve greatly our productivity so, no doubt and try it !!!]]></description><link>https://www.acuriousanimal.com/blog/2016/08/14/configuring-atom-with-eslint</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2016/08/14/configuring-atom-with-eslint</guid><pubDate>Sun, 14 Aug 2016 17:12:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;TL;DR&lt;/em&gt; This article demonstrate how to integrate the ESLint tool with Atom editor so our source code be automatically checked, showing linting messages in editor. In addition, ESLint will be configured based on the AirBnB code style rules.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Atom &amp;#x26; ESLint&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://atom.io&quot;&gt;Atom&lt;/a&gt; editor is probably one of the most used text editors (along with SublimeText, Visual Studio Code, TextMate, ...). On his side, &lt;a href=&quot;http://eslint.org&quot;&gt;ESLint&lt;/a&gt; is an open source project, originally created by &lt;a href=&quot;https://www.nczonline.net&quot;&gt;Nicholas C. Zakas&lt;/a&gt;, with the goal to provide a pluggable linting utility for JavaScript.&lt;/p&gt;
&lt;p&gt;Usually, the way to use ESLint involves the command line, invoking it to check our project&apos;s code at some point (for example, before made a build) or automatizing its execution with a tool like Gulp or Grunt each time a file is modified. ESLint also accepts a configuration files, like &lt;code class=&quot;language-text&quot;&gt;.eslintrc.js&lt;/code&gt;, where we can define the set of rules we want the tool checks. The &lt;em&gt;issue&lt;/em&gt; is, as you can imagine, the number of rules ESLint accepts is really huge.&lt;/p&gt;
&lt;h2&gt;The importance of a style guide&lt;/h2&gt;
&lt;p&gt;In projects with many developers it can be useful define a set of rules that force all of them to code with the same style, that is, use a &lt;em&gt;style guide&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The problem with style guides is they are set of good practices-conventions that everybody assumes the rest are applying. As you can image working with assumptions in a big and shared code is not good.&lt;/p&gt;
&lt;p&gt;Without a tool like ESLint there must be people acting as a police, that is, spending time reviewing the code style and not only the code. Thanks to ESLint this time can be reduced forcing each member of the team to ensure the code follows the same convention rules before committing or pushing to the repository. Besides, using CI tools (like GitHub with TravisCI) we can also check the code style and disable the possibility to merge a branch if the code lint fails.&lt;/p&gt;
&lt;h2&gt;The AirBnB JavaScript Style Guide&lt;/h2&gt;
&lt;p&gt;Creating and maintaining a style guide is not an easy tasks. Hopefully, the awesome people at AirBnB have created the &lt;a href=&quot;https://github.com/airbnb/javascript&quot;&gt;AirBnB JavaScript Style Guide&lt;/a&gt; for us that I have chose because of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Works with ES5 and ES6: arrow functions, object destructuring, array spread, ...&lt;/li&gt;
&lt;li&gt;Includes React and JSX style: one component per file, recognizes stateless vs class component, ...&lt;/li&gt;
&lt;li&gt;It is based on ESLint.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;I want to note here the &lt;a href=&quot;http://standardjs.com&quot;&gt;Standard JS&lt;/a&gt; project&lt;/strong&gt;, which defines a set of &lt;a href=&quot;http://standardjs.com/rules.html&quot;&gt;rules&lt;/a&gt; ready to be used in our JS projects. Related with what I have said in the previous section, I want to highlight two sentences written in the main page of the project:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This module saves you (and others!) time in two ways:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No configuration. The easiest way to enforce consistent style in your project. Just drop it in.&lt;/li&gt;
&lt;li&gt;Catch style errors before they&apos;re submitted in PRs. Saves precious code review time by eliminating back-and-forth between maintainer and contributor.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Integrating ESLint with Atom&lt;/h2&gt;
&lt;p&gt;Ok, enough talk and lets start working. We need to make two things: first, configure ESLint in our project (for this we also need to install the AirBnB style guide), and second install necessary Atom plugins to show messages while coding.&lt;/p&gt;
&lt;h3&gt;Configuring ESLint in your project&lt;/h3&gt;
&lt;p&gt;The first thing we need to do is configure ESLint in our project. Remember we are going to use the AirBnB style guide so we need no install the required package and make our ESLint configuration extend from the AirBnB ESLint configuration.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install ESLint locally to your project: &lt;code class=&quot;language-text&quot;&gt;&amp;gt; npm install eslint --save-dev&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Install the &lt;a href=&quot;https://www.npmjs.com/package/eslint-config-airbnb&quot;&gt;AirBnB ESLint configuration&lt;/a&gt;. Following package instructions we need to execute next sentences to install the right package versions and dependencies:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;export&lt;/span&gt; PKG&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;eslint-config-airbnb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; info &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$PKG&lt;/span&gt;&quot;&lt;/span&gt; peerDependencies --json &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;s/[\{\},]//g ; s/: /@/g&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;xargs&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; --save-dev &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$PKG&lt;/span&gt;&quot;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;Create a &lt;code class=&quot;language-text&quot;&gt;.eslintrc&lt;/code&gt; file in the root of our project. We must be sure to include the property &lt;code class=&quot;language-text&quot;&gt;&amp;quot;extends&amp;quot;: &amp;quot;airbnb&amp;quot;&lt;/code&gt; as part of the configuration.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next is a sample configuration file. Note we inherited configuration from AirBnB. In addition, we have added the eslint rules &lt;code class=&quot;language-text&quot;&gt;valid-jsdoc&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;require-jsdoc&lt;/code&gt; to forces us to write some JSDoc for functions, methods and classes.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-json line-numbers&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;extends&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;airbnb&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;parser&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;babel-eslint&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;env&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;browser&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;node&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;es6&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;mocha&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;rules&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;valid-jsdoc&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;requireReturn&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;requireReturnType&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;requireParamDescription&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;requireReturnDescription&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;require-jsdoc&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token property&quot;&gt;&quot;require&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;FunctionDeclaration&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;MethodDefinition&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token property&quot;&gt;&quot;ClassDeclaration&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Right now our project is configured with ESLint and the base set of rules from AirBnB, but it requires we execute ESLint manually or automatize in some way (in the build process).&lt;/p&gt;
&lt;h3&gt;Installing Atom plugins&lt;/h3&gt;
&lt;p&gt;Lets go to configure Atom to automatically lint files and show us message while coding.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Be sure you have completed successfully the previous sections.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Install the Atom plugin &lt;a href=&quot;https://github.com/AtomLinter/linter-eslint&quot;&gt;linter-eslint&lt;/a&gt;. You are finished :)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The plugin will detect automatically the &lt;code class=&quot;language-text&quot;&gt;.eslintrc&lt;/code&gt; file in your project and will start linting on the fly the source code showing all the errors and warning.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 8.644859813084112%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiUlEQVQI102JywqCUAAF/SVLMCwTKewameZroYQFdxFYalARtKpo1UdPYgQthjnDUSxzjD6y6dmCgeUg/JhgFZCHHssoYToLmDg+zjxCLBKEl3z9o23XS9sdd61omo6mGgz7JqrhEq4llSx5ZwUb2ZAVJfl2z666UV+eNC3V+UH9x/H64nC6d/8H91tQ+MZBz0QAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ESlint integration with Atom&quot;
        title=&quot;ESlint integration with Atom&quot;
        src=&quot;/static/5ea10e97fb87154a25beb8fa163e89f5/dbb61/2016-08-14-configuring-atom-with-eslint.png&quot;
        srcset=&quot;/static/5ea10e97fb87154a25beb8fa163e89f5/19bd1/2016-08-14-configuring-atom-with-eslint.png 163w,
/static/5ea10e97fb87154a25beb8fa163e89f5/d3bcb/2016-08-14-configuring-atom-with-eslint.png 325w,
/static/5ea10e97fb87154a25beb8fa163e89f5/dbb61/2016-08-14-configuring-atom-with-eslint.png 650w,
/static/5ea10e97fb87154a25beb8fa163e89f5/a1472/2016-08-14-configuring-atom-with-eslint.png 856w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;ESLint is a powerful tool that help teams ensuring quality code. On his side Atom is become a great and powerful editor, mainly due the active community and the growing set of plugins.&lt;/p&gt;
&lt;p&gt;The combination of both tools can improve greatly our productivity so, no doubt and try it !!!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Introducing Universal Web Applications]]></title><description><![CDATA[TL;DR: This post is the first in a series of articles to talk about Universal (previously known as Isomorphic) Web Applications. The goal of the series is to describe: What an universal web application is? Why are them important? What benefits offers universal web apps? and How to create a boilerplate to start a universal app project. Note, because JavaScript ecosystem is incredible bast and, because we can create an universal web app with almost any combination of framework and libraries, we will use in this series React, Redux and Webpack.]]></description><link>https://www.acuriousanimal.com/blog/2016/08/10/universal-applications</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2016/08/10/universal-applications</guid><pubDate>Wed, 10 Aug 2016 06:32:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;TL;DR:&lt;/em&gt; This post is the first in a series of articles to talk about Universal (previously known as Isomorphic) Web Applications. The goal of the series is to describe: &lt;em&gt;What an universal web application is? Why are them important? What benefits offers universal web apps?&lt;/em&gt; and &lt;em&gt;How to create a boilerplate to start a universal app project&lt;/em&gt;. Note, because JavaScript ecosystem is incredible bast and, because we can create an universal web app with almost any combination of framework and libraries, we will use in this series &lt;a href=&quot;https://facebook.github.io/react/&quot;&gt;React&lt;/a&gt;, &lt;a href=&quot;http://redux.js.org&quot;&gt;Redux&lt;/a&gt; and &lt;a href=&quot;https://webpack.github.io&quot;&gt;Webpack&lt;/a&gt;.&lt;/p&gt;
&lt;!--more--&gt;
&lt;hr&gt;
&lt;p&gt;The web is evolving faster than ever, mainly by the evolution and improvements of the JavaScript language. Besides, NodeJS project has made possible to use JavaScript on the server side demonstrating JS is a &lt;em&gt;first class language&lt;/em&gt; as good -or bad- as Java, PHP or Python. But, in contrast to them, the fact that we can use JS both for server and client side, converts JS in a really special language, which brings us possibility to create what are called &lt;em&gt;universal applications&lt;/em&gt; (previously known as &lt;em&gt;isomorphic applications&lt;/em&gt;).&lt;/p&gt;
&lt;h2&gt;JavaScript on the client side&lt;/h2&gt;
&lt;p&gt;The use of JavaScript in the browser was the initial reason to exists for the language. Its use has evolve from having a couple of lines to validate some input text to really complex applications. Nowadays everybody uses some &lt;a href=&quot;https://en.wikipedia.org/wiki/Rich_Internet_application&quot;&gt;RIA&lt;/a&gt; application for email, social networks, photo sharing, etc.&lt;/p&gt;
&lt;p&gt;As a summary, RIA works as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The browser loads a HTML file. This file is usually organized in like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;&amp;lt;head&amp;gt;&lt;/code&gt; section of the HTML contains all needed CSS code required to style the DOM elements of our application.&lt;/li&gt;
&lt;li&gt;The &lt;code class=&quot;language-text&quot;&gt;&amp;lt;body&amp;gt;&lt;/code&gt; tag contains almost no DOM elements (&lt;em&gt;these elements are dynamically generated be JS code&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;At the end a &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag includes all the JavaScript code required by our app.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;At this point the client, the browser, contains all the required code to work. The JavaScript loaded in the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag is responsible to add or remove new DOM elements (like modal windows, menus, list items, ...), load data asynchronously from the server, authenticate, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Pros and cons of RIA applications&lt;/h3&gt;
&lt;p&gt;RIA have meant a significant step in the context of web based applications. I remember when GMail appeared and how its UX was much better than other competitors. In GMail the app was loaded once and any change or data loading was handled asynchronously, without the need to reload the page. This is, probably, the most important fact about RIA apps, their similarity with native applications.&lt;/p&gt;
&lt;p&gt;But real life always teach us something and the truth is RIA apps has a problem. Lets examine what the flow of a RIA app:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;First you need to access to an URL and wait until the app is loaded.&lt;/li&gt;
&lt;li&gt;Then, the app requested some data asynchronously and user must wait until it is loaded and added to the page.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see, with this flow &lt;strong&gt;the user needs to wait double of time to get some initial content&lt;/strong&gt; of the app.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Time ago, with the apparition of HTML5 many companies changed from developing native mobile apps to develop &lt;a href=&quot;http://developer.telerik.com/featured/what-is-a-hybrid-mobile-app/&quot;&gt;hybrid apps&lt;/a&gt;. They quickly found users do not like to wait much time until get some content. See &lt;a href=&quot;https://blog.kissmetrics.com/loading-time/&quot;&gt;How Loading Time Affects Your Bottom Line&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;JavaScript on the server side&lt;/h2&gt;
&lt;p&gt;There are some alternatives to run JavaScript on the server side, but the one that has beat all them has been the NodeJS project.&lt;/p&gt;
&lt;p&gt;Based on Google &lt;a href=&quot;https://en.wikipedia.org/wiki/V8_(JavaScript_engine)&quot;&gt;V8 JavaScript Engine&lt;/a&gt; NodeJS allows to run JavaScript code on the server side. Because of the nature of JavaScript it is extremely easy to create asynchronous event-driven applications, which are easier to develop than the traditional concurrent applications.&lt;/p&gt;
&lt;p&gt;Working with JavaScript at serve side is similar to work with any other language and technologies:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;clients makes a request to the server,&lt;/li&gt;
&lt;li&gt;the server process incoming data, computes or queries any needed values, constructs an HTML page as response and returns to the client.&lt;/li&gt;
&lt;li&gt;the client interprets the returned HTML page, loading any included image, CSS or JavaScript script.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is, for example, the way to work of ancient email clients where each action (click in a link or button) implied a call to a different URL on the server and the user must to wait until server resolves the new HTML code and returns it to the browser.&lt;/p&gt;
&lt;h3&gt;Pros and cons of server side applications&lt;/h3&gt;
&lt;p&gt;Time has passed and everybody can think on server side applications as a bad option to develop a web app, because of the need of waiting for a server response on each client action.&lt;/p&gt;
&lt;p&gt;That&apos;s right, but the truth is server side applications are great in one aspect: &lt;strong&gt;they can return pages with content&lt;/strong&gt;, that is, when you request some URL you get the page with the content you expect.&lt;/p&gt;
&lt;p&gt;This fact is what makes important server side processing when building universal apps. We need to speed up the app and improve the UX returning as much content as possible when user access some URL.&lt;/p&gt;
&lt;h2&gt;Universal applications&lt;/h2&gt;
&lt;p&gt;An universal app is a mix between client side and server side app. The idea is the first time we access a website the server responds with all the code and content user expects, for example, in an e-commerce site the first access could include the initial twenty items and later let the user continue loading more asynchronously.&lt;/p&gt;
&lt;p&gt;This behavior is something we can achieve with almost any language and technologies. For example, we could have a Tomcat server using Java+JSP that returns the initial HTML code include some JavaScript bundle with the code needed to work the app in the client side. That might work, but that&apos;s not an universal application.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;To be an universal app our application must use the same code both on client and server side to render the application components&lt;/strong&gt;. That means that, following the previous example of an e-commerce site, when accessing the first time the code used by the server to request items to the API and render them (convert to DOM elements) must be the same code used by the client when user want to load more items. This way, the JavaScript code of our app is &lt;em&gt;universal&lt;/em&gt; because can run everywhere.&lt;/p&gt;
&lt;h3&gt;The execution flow&lt;/h3&gt;
&lt;p&gt;Ok, I have described how universal apps works but a picture is worth a thousand words.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.316715542522%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA3XAAAN1wFCKJt4AAACk0lEQVQoz21TS0hbURC9L4l51ZrYhrZCoZA2FEHoIrirmxRcpdJCN+qq0kWzcRlqIF2kcZFPY4LmQ1bWhFgpoZvqQsR8aENIoov8xEBIyE/BajY2QSqG15lLXom2A8PcO2/mzJmZ+0gkEnlUq9Xm8/n8y+HhYZHFYukjhLCgt0FFMzMzIrBkZ2fnaalU0kHsu1Qq9Rxc/XK5/BbYgUwm8yIWi73GOHJwcDDPgRweHv6EK4IxEonkAdgR0LtjY2N3MG53d9fOdaVer39Dn8/nuwFGAIDJVqvFjY6OSkkoFHpWKBQiiUTCvrW1pQ8Gg9NYXSaTDTEMM6hSqYYwuVKp6DudDod6dHT0GX1arbYfbTwed2az2e8KhWKQ9Ijo7OwMq/+Cs5B3AiEBWvDrz8/PuXa7zZXL5a9YdG1tTYzjKRaLoWq1eqHT6VSYwGDCxsaGeH9//wPM8j0Izo9MTEwwwBzHQCDBwLd8cnISRJ9GoxlAm8vlvgBrbnFx8Q1lsb6+3suUuFyum8vLy2yXIWWbTCbfAsvq8fFxKZ1OW9EHhZGhYHt727G5ufljdnZ2BBMoSCAQoMnYotfrFZrNZinLsjg/cbcO01NTaLfb/56BXRqZm0ymaaJWq6lXqVSSqakpMjk5Se8Oh6N/bm5OAnf6bIAxAyye2Gw2Oo6VlRXm8vKSFgmHwx+j0WgdSLwi18XtdvNtC/x+PwuDp617PJ7HuBB4Zp96l8UvFJc0Pj4uuAK2tLREumyohbZEAIRvjVit1nvwdJqwNFcXkIE4KXQivQZ+VXgwHnx1dRWXwsD9Ifwlv/f29uiH09NTIcSKQfsWFhaIwWAgRqPxX0AE4geO50ajQc9Op/N+s9m8gLuPZ/g/In8AyqBcdE9vaDsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Universal/Isomorphic flow&quot;
        title=&quot;Universal/Isomorphic flow&quot;
        src=&quot;/static/6fc69cc78f97fd3770ead4e03fb3cc4c/dbb61/2016-08_universal_js.png&quot;
        srcset=&quot;/static/6fc69cc78f97fd3770ead4e03fb3cc4c/19bd1/2016-08_universal_js.png 163w,
/static/6fc69cc78f97fd3770ead4e03fb3cc4c/d3bcb/2016-08_universal_js.png 325w,
/static/6fc69cc78f97fd3770ead4e03fb3cc4c/dbb61/2016-08_universal_js.png 650w,
/static/6fc69cc78f97fd3770ead4e03fb3cc4c/38c7b/2016-08_universal_js.png 682w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Request&lt;/strong&gt;: The browser requests the server. This is the initial and main request because tt is responsible to return a web page that points to the bundles with the JavaScript and CSS code, besides with as much content as possible (included as DOM elements in the page) for the request made by the user.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Process and render&lt;/strong&gt;: The server handles the request. The server must retrieve the route the user is requesting for (main page, about section, item detail, ...), must query for the needed data to render the HTML page elements.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Response&lt;/strong&gt;: The server returns the previously built HTML page to the client. The client loads the images included in the document along the CSS and JavaScript files.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Interaction&lt;/strong&gt;: The client has all the needed code to work as a RIA application. The initial content of the page has been rendered by the server, bringing better UX to the user, and from now the app is responsible to request new content asynchronously, without the need to reload the web page.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Remember the code you made must works both on client and server side, some examples are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Code needed to get the current route and render the right section. Given an app with three tabs: &lt;em&gt;main&lt;/em&gt;, &lt;em&gt;help&lt;/em&gt; and &lt;em&gt;about&lt;/em&gt;, if we can write the absolute URL to the &lt;em&gt;about&lt;/em&gt; section in the browser we expect to get the app with the &lt;em&gt;about&lt;/em&gt; section enabled. Later, once the app is loaded in the browser, if we change to the &lt;em&gt;help&lt;/em&gt; section the components must change. In both cases the code that detects the visited route and renders the page elements must be the same.&lt;/li&gt;
&lt;li&gt;Code needed to retrieve data. Because data can be retrieved by the server but also from the client once the app is loaded in the browser, the code you use to get data must work in the two sides. Because of this, usually, universal apps requests data to an API server.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;An universal app must comply one requirement: code must be the same both for the client and the server. Currently this only can be achieved using JavaScript.&lt;/p&gt;
&lt;p&gt;To improve UX the first time we access the server to load the app, the HTML should contain all the expected DOM elements of the page. This way we reduce the time user must wait until have the first content of the page.&lt;/p&gt;
&lt;p&gt;The JavaScript code must be &lt;em&gt;compatible&lt;/em&gt; to run on the server and client. For example, you can&apos;t access directly to a database to retrieve some data because that code will not work in the client side.&lt;/p&gt;
&lt;p&gt;Great !! Now you know the basis of how universal applications works. From here, there is a long, but awesome, way until implement a real application.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Resilient PHP applications with Phystrix]]></title><description><![CDATA[TL;DR: This post talks about how to make our PHP applications more resilient, that is, they must be able to adapt to third party failures and recover quickly from them. You will see why configuring timeouts is not enough to protect your system and what better tools exists. We will explain briefly Hystrix concepts and introduce an alternative for PHP called Phystrix. No matter how well designed be your system, no matter the number, kind or quality of your tests. There is only once thing for sure: your system will fail. Although we can well design, implement and test our systems we have dependencies with third party services: databases, queues, call REST API on another systems, ... In the decade of microservices where dependency/communication among systems becomes a main pilar we need mechanisms to make our systems resistant among third party failures. We need to resilience, that is, recover quickly from disasters. The problem with dependencies In the best case you can be sure your system will work fine but you can make the same assumption for the third party systems you communicate with (another microservices, databases, queues, ...). So the problems arise when some third party services starts failing. This can be because of: The system is near collapse, your requests arrives but they take too much time to be replied. This means each request that arrives to our system is hold until the third party service responds. Because the third party system works slowly we start holding too much connections which could collapse our system too. In addition, although the third party system is near collapse we continue sending requests, so we are not helping to mitigate the problem, we are increasing it. Collapse of a third party service can collapse our system. The system is down. Many drivers tries to establish a connection during a given period of time before raising an exception. Why to wait for a connection if we know the system is down? The classic (and not the right) way to solve The classic way and, a good practice, to mitigate this problem is to configure the timeouts for each library and driver you use to communicate to every third party service. As example, Guzzle allows to set a  when instatiating a : Or the SncRedisBundle for Symfony allows to specify the timeout both for connection and read/write actions: As I said, setting timeouts is a good practice, but it not solves the problem. If the third party is down and we have a timeout of 2 seconds we guaranty our systems will finish the query in two seconds but, why send request and spend 2 seconds while we know the system is down? A robust solution As we talk at the beginning, the goal is to make our system resilient, that is, it must be able to adapt to third party failures and recover quickly from them. This means: Do not call a third party if we know it is down or takes too much time to respond. Fail quickly. If our system receives a request and we can't complete due lack of support from a third party service, we can fail quickly. The client, although it will receive a bad response, will receive a response quickly and our system should be able to attend a new request. You can see how this will avoid a cascade failure of our system. Hopefully, some years ago the Netflix engineers worked in a solution called Hystrix which is so good that has become one of the most famous tools when working with microservices in Java. Hystrix is a latency and fault tolerance library designed to isolate points of access to remote systems, services and 3rd party libraries, stop cascading failure and enable resilience in complex distributed systems where failure is inevitable. Hystrix implements the circuit breaker pattern. Following the electrical circuits analogy, each dependency of our system to a third party service can be seen as a cable with an interruptor. While the communications with the third party works fine, the interruptor is closed (allowing flow the electricity), but when a problem is detected in the third party system (i.e due a timeout) the interruptor is opened making our system impossible to communicate with the third party, which makes our system fail quickly when a dependency fails. A robust solution for PHP After looking some libraries I finally decide to use Phystrix, a Hystrix port to PHP made by oDesk (now Upwork). Following Hystrix design, Phyxtrix requires all the actions we want to make against a third party service (querying a database, inserting into a queue, etc) must be encapsulated as a command (see the command pattern). The library offers and abstract command class from we can inherit when creating our commands. It is up to us to implement the  method responsible to make the real action (the call to a service, the insert into database, etc) and optionally the  method that returns a result if the third party is not available. The good part is each time a command is executed, the base command class collects metrics (like the number of failed call to a third party) and is responsible to manage the circuit state (open or close) depending on the current metric values. Note Phystrix stores all the metric in APC, so you should have this extension enabled. Additionally, the people from oDesk implemented two more tools: phystrix-bundle: A bundle for Symfony2 that can help us integrate Phystrix into our Symfony projects. phystrix-dashboard: Some classes that helps creating an endpoint in our application to serve the metrics stores by Phystrix. This endpoint can be added to the hystrix-dashboard tool to monitor our metrics in almost real time. hystrix-dashboard Conclusions Our systems has dependencies to other systems we can't control. Setting timeouts in our connections is a good practice but it is not enough. Hystrix is a tool that implements the circuit breaker pattern, which can help our systems to be more resilient. Phystrix is a Hystrix port for PHP. It is easy to integrate in our PHP applications and protect against latency, fault tolerance and cascade failures when working with third party systems.]]></description><link>https://www.acuriousanimal.com/blog/2016/07/26/resilient-php-applications-with-phystrix</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2016/07/26/resilient-php-applications-with-phystrix</guid><pubDate>Wed, 06 Jul 2016 17:32:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;TL;DR: This post talks about how to make our PHP applications more resilient, that is, they must be able to adapt to third party failures and recover quickly from them. You will see why configuring timeouts is not enough to protect your system and what better tools exists. We will explain briefly Hystrix concepts and introduce an alternative for PHP called Phystrix.&lt;/em&gt;&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/resiliency-php-apps/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;/blockquote&gt;
&lt;p&gt;No matter how well designed be your system, no matter the number, kind or quality of your tests. There is only once thing for sure: &lt;em&gt;your system will fail&lt;/em&gt;. Although we can well design, implement and test our systems we have dependencies with third party services: databases, queues, call REST API on another systems, ...&lt;/p&gt;
&lt;p&gt;In the decade of &lt;a href=&quot;http://martinfowler.com/articles/microservices.html&quot;&gt;microservices&lt;/a&gt; where dependency/communication among systems becomes a main pilar we need mechanisms to make our systems resistant among third party failures. We need to &lt;a href=&quot;http://www.dictionary.com/browse/resilience&quot;&gt;resilience&lt;/a&gt;, that is, recover quickly from disasters.&lt;/p&gt;
&lt;h2&gt;The problem with dependencies&lt;/h2&gt;
&lt;p&gt;In the best case you can be sure your system will work fine but you can make the same assumption for the third party systems you communicate with (another microservices, databases, queues, ...).&lt;/p&gt;
&lt;p&gt;So the problems arise when some third party services starts failing. This can be because of:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The system is near collapse, your requests arrives but they take too much time to be replied. This means each request that arrives to our system is hold until the third party service responds. Because the third party system works slowly we start holding too much connections which could collapse our system too. In addition, although the third party system is near collapse we continue sending requests, so we are not helping to mitigate the problem, we are increasing it. &lt;strong&gt;Collapse of a third party service can collapse our system&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;The system is down. Many drivers tries to establish a connection during a given period of time before raising an exception. &lt;strong&gt;Why to wait for a connection if we know the system is down?&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;The classic (and not the right) way to solve&lt;/h2&gt;
&lt;p&gt;The classic way and, a good practice, to mitigate this problem is to configure the timeouts for each library and driver you use to communicate to every third party service.&lt;/p&gt;
&lt;p&gt;As example, &lt;a href=&quot;http://docs.guzzlephp.org/en/latest/&quot;&gt;Guzzle&lt;/a&gt; allows to set a &lt;code class=&quot;language-text&quot;&gt;timeout&lt;/code&gt; when instatiating a &lt;code class=&quot;language-text&quot;&gt;Client&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;php&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-php line-numbers&quot;&gt;&lt;code class=&quot;language-php&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$client&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token single-quoted-string string&quot;&gt;&apos;base_uri&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token single-quoted-string string&quot;&gt;&apos;http://microservice/api&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token single-quoted-string string&quot;&gt;&apos;timeout&apos;&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or the &lt;a href=&quot;https://github.com/snc/SncRedisBundle/blob/master/Resources/doc/index.md&quot;&gt;SncRedisBundle&lt;/a&gt; for Symfony allows to specify the timeout both for connection and read/write actions:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;snc_redis&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;clients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; predis
            &lt;span class=&quot;token key atrule&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; default
            &lt;span class=&quot;token key atrule&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; redis&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//localhost
            &lt;span class=&quot;token key atrule&quot;&gt;logging&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %kernel.debug%
        &lt;span class=&quot;token key atrule&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; predis
            &lt;span class=&quot;token key atrule&quot;&gt;alias&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cache
            &lt;span class=&quot;token key atrule&quot;&gt;dsn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; redis&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//secret@localhost/1
            &lt;span class=&quot;token key atrule&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2.2&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;connection_timeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;read_write_timeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As I said, setting timeouts is a good practice, but it not solves the problem. If the third party is down and we have a timeout of 2 seconds we guaranty our systems will finish the query in two seconds but, why send request and spend 2 seconds while we know the system is down?&lt;/p&gt;
&lt;h2&gt;A robust solution&lt;/h2&gt;
&lt;p&gt;As we talk at the beginning, the goal is to make our system resilient, that is, it must be able to adapt to third party failures and recover quickly from them. This means:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Do not call a third party if we know it is down or takes too much time to respond.&lt;/li&gt;
&lt;li&gt;Fail quickly. If our system receives a request and we can&apos;t complete due lack of support from a third party service, we can fail quickly. The client, although it will receive a bad response, will receive a response quickly and our system should be able to attend a new request. &lt;em&gt;You can see how this will avoid a cascade failure of our system&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hopefully, some years ago the Netflix engineers worked in a solution called &lt;a href=&quot;https://github.com/Netflix/Hystrix&quot;&gt;Hystrix&lt;/a&gt; which is so good that has become one of the most famous tools when working with microservices in Java.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hystrix is a latency and fault tolerance library designed to isolate points of access to remote systems, services and 3rd party libraries, stop cascading failure and enable resilience in complex distributed systems where failure is inevitable.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hystrix implements the &lt;a href=&quot;http://martinfowler.com/bliki/CircuitBreaker.html&quot;&gt;circuit breaker&lt;/a&gt; pattern. Following the electrical circuits analogy, each dependency of our system to a third party service can be seen as a cable with an interruptor. While the communications with the third party works fine, the interruptor is closed (allowing flow the electricity), but when a problem is detected in the third party system (i.e due a timeout) the interruptor is opened making our system impossible to communicate with the third party, which makes our system fail quickly when a dependency fails.&lt;/p&gt;
&lt;h2&gt;A robust solution for PHP&lt;/h2&gt;
&lt;p&gt;After looking some libraries I finally decide to use &lt;a href=&quot;https://github.com/odesk/phystrix&quot;&gt;Phystrix&lt;/a&gt;, a Hystrix port to PHP made by &lt;a href=&quot;https://www.upwork.com&quot;&gt;oDesk (now Upwork)&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Following Hystrix design, Phyxtrix requires all the actions we want to make against a third party service (querying a database, inserting into a queue, etc) must be encapsulated as a command (see the &lt;a href=&quot;http://www.oodesign.com/command-pattern.html&quot;&gt;command pattern&lt;/a&gt;). The library offers and abstract command class from we can inherit when creating our commands. It is up to us to implement the &lt;code class=&quot;language-text&quot;&gt;run()&lt;/code&gt; method responsible to make the real action (the call to a service, the insert into database, etc) and optionally the &lt;code class=&quot;language-text&quot;&gt;getFallback()&lt;/code&gt; method that returns a result if the third party is not available.&lt;/p&gt;
&lt;p&gt;The good part is each time a command is executed, the base command class collects metrics (like the number of failed call to a third party) and is responsible to manage the circuit state (open or close) depending on the current metric values.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note Phystrix stores all the metric in APC, so you should have this extension enabled.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Additionally, the people from oDesk implemented two more tools:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/odesk/phystrix-bundle&quot;&gt;phystrix-bundle&lt;/a&gt;: A bundle for Symfony2 that can help us integrate Phystrix into our Symfony projects.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/odesk/phystrix-dashboard&quot;&gt;phystrix-dashboard&lt;/a&gt;: Some classes that helps creating an endpoint in our application to serve the metrics stores by Phystrix. This endpoint can be added to the &lt;a href=&quot;https://github.com/Netflix/Hystrix/wiki/Dashboard&quot;&gt;hystrix-dashboard&lt;/a&gt; tool to monitor our metrics in almost real time.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://raw.githubusercontent.com/wiki/Netflix/Hystrix/images/hystrix-dashboard-single-row.png&quot; alt=&quot;hystrix-dashboard&quot;&gt;&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;Our systems has dependencies to other systems we can&apos;t control. Setting timeouts in our connections is a good practice but it is not enough. Hystrix is a tool that implements the circuit breaker pattern, which can help our systems to be more resilient.&lt;/p&gt;
&lt;p&gt;Phystrix is a Hystrix port for PHP. It is easy to integrate in our PHP applications and protect against latency, fault tolerance and cascade failures when working with third party systems.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Symfony, images and S3]]></title><description><![CDATA[Paraphrasing the movie title Sex, lies and videotape, this post is related on how I configured my symfony project to work with images (including thumbnail generation) and store all them on Amazon S3 service. There are are libraries and bundles to work with images and also others to work with S3, but the combination of all them can be a tricky experience with not much documentation out there. In addition, there is also one more challenge to achieve and, that is, while developing I want to store images locally (in a directory) but when deployed I want to use S3 storage. Currently I'm working on a project where users can upload photos. The application allows users to create collections, drag and drop images, order them and finally upload to the server. In addition, the user can explore his/her collections, browse images and download collections in a single ZIP file. All this having in mind: While developing locally we want to store images in the local server folder. In staging or production environment we want to use S3. Original images must remain private, while the thumbnails must be public to be included in the application web pages. We need to generate thumbnails with different sizes. When a user access to a collection a list of small thumbnails are shown. When user clicks an image a medium thumbnail is presented. When user downloads a collection the ZIP file must include the original images. So, in summary, we need to deal with image upload, thumbnail generation and S3 service. Uploading images For image uploading we have used the VichUploaderBundle. Uploading images isn't a secret but can involve some extra tasks. The VichUploaderBundle helps working with file uploads that are attached to ORM entities, that is, it is responsible to move the images to some configured place and attach it to your entity. In addition, we want to store images in folders classified by user and collection, something like , where  and  are identifiers. A nice feature VichUploaderBundle offers is the possibility to attach the so called directory namer or file namer that determines the final name for the upload file. This way when a file is uploaded, given the current user and the selected collection, we determine dynamically the target folder where the bundle must store the image. Note the ORM entity only has the image file name. The path to the file is computed through the specified directory and/or file namers. For this reason, the bundle also includes the methods require to get the absolute path to a file given the file name stored within the entity. Generating thumbnails To generate thumbnails we have used the LiipImagineBundle bundle. With it, when you reference an image within your templates you don't get the original image but a new one obtained applying some filters. Next line shows how to include an image in your twig template obtained after applying a  configuration: The good thing is LiipImagineBundle generates the thumbnails when images are first time accessed and stores them in a cache folder for next calls. Abstracting the file system The issue is we want to upload images and generate thumbnails into a local folder at development time and to S3 when running in staging or production. Hopefully for us there is the Gaufrette bundle, which is an abstract filesystem. It offers a common interface to read/write to different filesystem and a bunch of implementations to work against the local filesystem, an FTP server, Amazon S3 service, ... and many more. Putting it all together Arrived here, the main question is how to configure the three bundles to work together, in summary: We want to abstract the filesystem to work locally while developing and with S3 in production. We need to upload images. We need to generate thumbnails for uploaded images and store them in a cache folder to be later server. We have divided the configuration between the  file and the . The first contains the configuration for the previous three bundles ready to work locally. The second overrides some propertires to work in production, using S3. The first point is to configure the Gaufrette bundle to abstract our filesystem. Next is the configuration in the : Compare with parameters we override in the . Note for production you need to define an AWS-S3 service which I do not include here. We define a  filesystem which by default uses a  adapter and in production uses an  one. Next step is to configure the VichUploaderBundle bundle. Hopefully it is designed to integrate with Gaufrette so it is easy to specify how to upload files through gaufrette. Next is the configuration: As you can see we are specifying we want to use gaufrette with  and the upload destination is the previous defined gaufrette filesystem . This means all images will be uploaded through the Gaufrette filesystem to that destination. Note, within the target filesystem, the final folder and file name are determined by a custom directory namer we have implemented ( which adds the user ID to the path) and the file namer  offered by Gaufrette, which assigns a unique name to each file. Finally, we need to configure the LiipImagineBundle bundle. Next is the configuration used for local development. We need to specify the cache folder where to generate the thumbnails in adition to our filter, that will generate with size  and half quality: Main properties to configure are the and the . The first one uses the stream  that uses gaufrette filesystem. The second uses the resolver  that we have configured to use the local folder . For production, configuration changes slightly. Here we override the resolver to generate cache files through the resolver  which points to S3 bucket: Conclusions VichUploaderBundle, LiipImagineBundle and Gaufrette are three great Symfony2 bundles. The configuration to make work all them can by tricky so hope this post can help others. While VichUploaderBundle is designed to work with Gaufrette, and its configuration is almost trivial, LiipImagineBundle is not and requires some extra tasks. For LiipImagineBundle we need to configure its main components, which are the cache and the .]]></description><link>https://www.acuriousanimal.com/blog/2016/03/26/symfony-and-s3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2016/03/26/symfony-and-s3</guid><pubDate>Fri, 25 Mar 2016 07:09:00 GMT</pubDate><content:encoded>&lt;p&gt;Paraphrasing the movie title &lt;em&gt;Sex, lies and videotape&lt;/em&gt;, this post is related on how I configured my symfony project to work with images (including thumbnail generation) and store all them on Amazon S3 service. There are are libraries and bundles to work with images and also others to work with S3, but the combination of all them can be a tricky experience with not much documentation out there. In addition, there is also one more challenge to achieve and, that is, while developing I want to store images locally (in a directory) but when deployed I want to use S3 storage.&lt;/p&gt;
&lt;p&gt;Currently I&apos;m working on a project where users can upload photos. The application allows users to create collections, drag and drop images, order them and finally upload to the server. In addition, the user can explore his/her collections, browse images and download collections in a single ZIP file. All this having in mind:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;While developing locally we want to store images in the local server folder. In staging or production environment we want to use S3. Original images must remain private, while the thumbnails must be public to be included in the application web pages.&lt;/li&gt;
&lt;li&gt;We need to generate thumbnails with different sizes. When a user access to a collection a list of small thumbnails are shown. When user clicks an image a medium thumbnail is presented. When user downloads a collection the ZIP file must include the original images.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;So, in summary, we need to deal with image upload, thumbnail generation and S3 service.&lt;/p&gt;
&lt;h2&gt;Uploading images&lt;/h2&gt;
&lt;p&gt;For image uploading we have used the &lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt;. Uploading images isn&apos;t a secret but can involve some extra tasks. The &lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt; helps working with file uploads that are attached to ORM entities, that is, it is responsible to move the images to some configured place and attach it to your entity.&lt;/p&gt;
&lt;p&gt;In addition, we want to store images in folders classified by user and collection, something like &lt;code class=&quot;language-text&quot;&gt;user_X/collection_Y/some_image&lt;/code&gt;, where &lt;code class=&quot;language-text&quot;&gt;X&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Y&lt;/code&gt; are identifiers. A nice feature &lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt; offers is the possibility to attach the so called &lt;em&gt;directory namer&lt;/em&gt; or &lt;em&gt;file namer&lt;/em&gt; that determines the final name for the upload file. This way when a file is uploaded, given the current user and the selected collection, we determine dynamically the target folder where the bundle must store the image.&lt;/p&gt;
&lt;p&gt;Note the ORM entity only has the image file name. The path to the file is computed through the specified directory and/or file namers. For this reason, the bundle also includes the methods require to get the absolute path to a file given the file name stored within the entity.&lt;/p&gt;
&lt;h2&gt;Generating thumbnails&lt;/h2&gt;
&lt;p&gt;To generate thumbnails we have used the &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; bundle. With it, when you reference an image within your templates you don&apos;t get the original image but a new one obtained applying some filters. Next line shows how to include an image in your twig template obtained after applying a &lt;code class=&quot;language-text&quot;&gt;my_thumbnail&lt;/code&gt; configuration:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-html line-numbers&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;{{ &apos;/relative/path/to/image.jpg&apos; | imagine_filter(&apos;my_thumbnail&apos;) }}&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The good thing is &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; generates the thumbnails when images are first time accessed and stores them in a &lt;em&gt;cache&lt;/em&gt; folder for next calls.&lt;/p&gt;
&lt;h2&gt;Abstracting the file system&lt;/h2&gt;
&lt;p&gt;The issue is we want to upload images and generate thumbnails into a local folder at development time and to S3 when running in staging or production.&lt;/p&gt;
&lt;p&gt;Hopefully for us there is the &lt;a href=&quot;https://github.com/KnpLabs/Gaufrette&quot;&gt;Gaufrette&lt;/a&gt; bundle, which is an abstract filesystem. It offers a common interface to read/write to different filesystem and a bunch of implementations to work against the local filesystem, an FTP server, Amazon S3 service, ... and many more.&lt;/p&gt;
&lt;h2&gt;Putting it all together&lt;/h2&gt;
&lt;p&gt;Arrived here, the main question is how to configure the three bundles to work together, in summary:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;We want to abstract the filesystem to work locally while developing and with S3 in production.&lt;/li&gt;
&lt;li&gt;We need to upload images.&lt;/li&gt;
&lt;li&gt;We need to generate thumbnails for uploaded images and store them in a cache folder to be later server.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We have divided the configuration between the &lt;code class=&quot;language-text&quot;&gt;config.yml&lt;/code&gt; file and the &lt;code class=&quot;language-text&quot;&gt;config_prod.yml&lt;/code&gt;. The first contains the configuration for the previous three bundles ready to work locally. The second overrides some propertires to work in production, using S3.&lt;/p&gt;
&lt;p&gt;The first point is to configure the &lt;a href=&quot;https://github.com/KnpLabs/Gaufrette&quot;&gt;Gaufrette&lt;/a&gt; bundle to abstract our filesystem. Next is the configuration in the &lt;code class=&quot;language-text&quot;&gt;config.yml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# config.yml&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;knp_gaufrette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;stream_wrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null important&quot;&gt;~&lt;/span&gt;

    &lt;span class=&quot;token key atrule&quot;&gt;adapters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Local adapter&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;local&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;directory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %kernel.root_dir%/../web/uploads

    &lt;span class=&quot;token key atrule&quot;&gt;filesystems&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;custom_uploads_fs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    local&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Compare with parameters we override in the &lt;code class=&quot;language-text&quot;&gt;config_prod.yml&lt;/code&gt;. &lt;em&gt;Note for production you need to define an AWS-S3 service which I do not include here.&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# config_prod.yml&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;knp_gaufrette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;adapters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# S3 adapter&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;s3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;aws_s3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;service_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;komik.aws_s3.client&apos;&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;bucket_name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;komik-staging&apos;&lt;/span&gt;

    &lt;span class=&quot;token key atrule&quot;&gt;filesystems&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;custom_uploads_fs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    s3&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We define a &lt;code class=&quot;language-text&quot;&gt;custom_uploads_fs&lt;/code&gt; filesystem which by default uses a &lt;code class=&quot;language-text&quot;&gt;local&lt;/code&gt; adapter and in production uses an &lt;code class=&quot;language-text&quot;&gt;aws_s3&lt;/code&gt; one.&lt;/p&gt;
&lt;p&gt;Next step is to configure the &lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt; bundle. Hopefully it is designed to integrate with Gaufrette so it is easy to specify how to upload files through gaufrette. Next is the configuration:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# config.yml&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;vich_uploader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;db_driver&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; orm
    &lt;span class=&quot;token key atrule&quot;&gt;storage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   gaufrette

    &lt;span class=&quot;token key atrule&quot;&gt;mappings&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;my_images&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;uri_prefix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;         &lt;span class=&quot;token null important&quot;&gt;~&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;upload_destination&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; custom_uploads_fs
            &lt;span class=&quot;token key atrule&quot;&gt;directory_namer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    app.vich_uploader.custom.directory.namer
            &lt;span class=&quot;token key atrule&quot;&gt;namer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;              vich_uploader.namer_uniqid
            &lt;span class=&quot;token key atrule&quot;&gt;inject_on_load&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;     &lt;span class=&quot;token boolean important&quot;&gt;false&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;delete_on_update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;delete_on_remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;token boolean important&quot;&gt;true&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see we are specifying we want to use gaufrette with &lt;code class=&quot;language-text&quot;&gt;storage: gaufrette&lt;/code&gt; and the upload destination is the previous defined gaufrette filesystem &lt;code class=&quot;language-text&quot;&gt;custom_uploads_fs&lt;/code&gt;. This means all images will be uploaded through the Gaufrette filesystem to that destination. Note, within the target filesystem, the final folder and file name are determined by a custom directory namer we have implemented (&lt;code class=&quot;language-text&quot;&gt;app.vich_uploader.custom.directory.namer&lt;/code&gt; which adds the user ID to the path) and the file namer &lt;code class=&quot;language-text&quot;&gt;vich_uploader.namer_uniqid&lt;/code&gt; offered by Gaufrette, which assigns a unique name to each file.&lt;/p&gt;
&lt;p&gt;Finally, we need to configure the &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; bundle. Next is the configuration used for local development. We need to specify the cache folder where to generate the thumbnails in adition to our filter, that will generate with size &lt;code class=&quot;language-text&quot;&gt;350x450&lt;/code&gt; and half quality:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# config.yml&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;liip_imagine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;resolvers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Cache generated files locally&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;local_fs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;web_path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;web_root&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %kernel.root_dir%/../web
                &lt;span class=&quot;token key atrule&quot;&gt;cache_prefix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; uploads/_cache

    &lt;span class=&quot;token key atrule&quot;&gt;loaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;stream_uploads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;wrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gaufrette&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//custom_uploads_fs/

    &lt;span class=&quot;token key atrule&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; local_fs

    &lt;span class=&quot;token key atrule&quot;&gt;data_loader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; stream_uploads

    &lt;span class=&quot;token key atrule&quot;&gt;filter_sets&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;my_thumb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;quality&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;filters&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;thumbnail&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;450&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; inset &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token null important&quot;&gt;~&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Main properties to configure are the &lt;code class=&quot;language-text&quot;&gt;data_loader&lt;/code&gt;and the &lt;code class=&quot;language-text&quot;&gt;cache&lt;/code&gt;. The first one uses the stream &lt;code class=&quot;language-text&quot;&gt;stream_uploads&lt;/code&gt; that uses gaufrette filesystem. The second uses the resolver &lt;code class=&quot;language-text&quot;&gt;local_fs&lt;/code&gt; that we have configured to use the local folder &lt;code class=&quot;language-text&quot;&gt;uploads/_cache&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For production, configuration changes slightly. Here we override the resolver to generate cache files through the resolver &lt;code class=&quot;language-text&quot;&gt;s3_fs&lt;/code&gt; which points to S3 bucket:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# config_prod.yml&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;liip_imagine&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;resolvers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;# Cache generated files on S3&lt;/span&gt;
        &lt;span class=&quot;token key atrule&quot;&gt;s3_fs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token key atrule&quot;&gt;aws_s3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token key atrule&quot;&gt;client_config&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;token key atrule&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %your_amazon_s3.key%
                    &lt;span class=&quot;token key atrule&quot;&gt;secret&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %your_amazon_s3.secret%
                    &lt;span class=&quot;token key atrule&quot;&gt;region&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %your_amazon_s3.region%
                &lt;span class=&quot;token key atrule&quot;&gt;bucket&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; %your_bucket_name%

    &lt;span class=&quot;token key atrule&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; s3_fs&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1&gt;Conclusions&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt;, &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; and &lt;a href=&quot;https://github.com/KnpLabs/Gaufrette&quot;&gt;Gaufrette&lt;/a&gt; are three great Symfony2 bundles. The configuration to make work all them can by tricky so hope this post can help others.&lt;/p&gt;
&lt;p&gt;While &lt;a href=&quot;https://github.com/dustin10/VichUploaderBundle&quot;&gt;VichUploaderBundle&lt;/a&gt; is designed to work with &lt;a href=&quot;https://github.com/KnpLabs/Gaufrette&quot;&gt;Gaufrette&lt;/a&gt;, and its configuration is almost trivial, &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; is not and requires some extra tasks. For &lt;a href=&quot;https://github.com/liip/LiipImagineBundle&quot;&gt;LiipImagineBundle&lt;/a&gt; we need to configure its main components, which are the &lt;em&gt;cache&lt;/em&gt; and the &lt;code class=&quot;language-text&quot;&gt;data_loader&lt;/code&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Closing 2015]]></title><description><![CDATA[2015 is finishing. Its 18:15h while writing these lines. Looking back to this year lot of feelings mixes in my mind, some of them great and some sad. But live continues and we can only go forward. At professional level the most important fact was leaving Servei MeteorolÃ²gic de Catalunya (meteo.cat) after nine years. I leave great workmates. We made some incredible things and, in the past year we work in some nice projects (a new website, a mobile ready web and an API to access weather data). Although probably the thing what I'm most proud with, as a team leader, was the fact to help creating a positive and constructive environment, always looking to learn and improve. Anyway, decisions are not easy to take and never likes to everybody. Well, I'm human like anyone, I can be wrong, but do not regret from anything I was done. You have enemies? Good. That means youâ€™ve stood up for something, sometime in your life. - Winston Churchill A man with no enemies is a man with no character. - Paul Newman This year also start working at CartoDB, a young and really motivated company. I have been the last couple of months diving into code, learning and helping. I can't say much more, but the fact we are working on something really awesome for this new year :) At personal level this was a really hard year. The death of my father seems something a can't overcome. After a suddenly and aggressive cancer he passes away on April. The few months he lived after cancer was detected were a real hell for the family, and specially for mother. He always tried to have mental strength but seeing yourself deteriorating at giant steps is hard enough to make you fall and seeing someone you love dying a bit more every day, while trying to demonstrate strength, is something that is going accumulating in your mind. Simply writing these lines tears comes to my eyes. He teach me to have an open mind. He was the one that shows me what principles mean. I always thought if my father hadn't been my father we had been great friends. He always was proud about. See you some day friend ;) Live continues and we must continue going forward.]]></description><link>https://www.acuriousanimal.com/blog/2015/12/31/Closing-2015</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/12/31/Closing-2015</guid><pubDate>Thu, 31 Dec 2015 17:14:00 GMT</pubDate><content:encoded>&lt;p&gt;2015 is finishing. Its 18:15h while writing these lines. Looking back to this year lot of feelings mixes in my mind, some of them great and some sad. But live continues and we can only go forward.&lt;/p&gt;
&lt;p&gt;At professional level the most important fact was leaving &lt;em&gt;Servei MeteorolÃ²gic de Catalunya&lt;/em&gt; (&lt;a href=&quot;http://www.meteo.cat&quot;&gt;meteo.cat&lt;/a&gt;) after nine years. I leave great workmates. We made some incredible things and, in the past year we work in some nice projects (a new website, a mobile ready web and an API to access weather data). Although probably the thing what I&apos;m most proud with, as a team leader, was the fact to help creating a positive and constructive environment, always looking to learn and improve. Anyway, decisions are not easy to take and never likes to everybody. Well, I&apos;m human like anyone, I can be wrong, but do not regret from anything I was done.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You have enemies? Good. That means youâ€™ve stood up for something, sometime in your life. - &lt;strong&gt;Winston Churchill&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;A man with no enemies is a man with no character. - &lt;strong&gt;Paul Newman&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This year also start working at &lt;a href=&quot;http://www.cartodb.com&quot;&gt;CartoDB&lt;/a&gt;, a young and really motivated company. I have been the last couple of months diving into code, learning and helping. I can&apos;t say much more, but the fact we are working on something really awesome for this new year :)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;At personal level this was a really hard year. The death of my father seems something a can&apos;t overcome. After a suddenly and aggressive cancer he passes away on April. The few months he lived after cancer was detected were a real hell for the family, and specially for mother. He always tried to have mental strength but seeing yourself deteriorating at giant steps is hard enough to make you fall and seeing someone you love dying a bit more every day, while trying to demonstrate strength, is something that is going accumulating in your mind. &lt;em&gt;Simply writing these lines tears comes to my eyes.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;He teach me to have an open mind. He was the one that shows me what principles mean. I always thought if my father hadn&apos;t been my father we had been great friends. He always was proud about. See you some day friend ;) Live continues and we must continue going forward.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Reading very big JSON files in stream mode with GSON]]></title><description><![CDATA[JSON is everywhere, it is the new fashion file format (see you XML). JSON format is mainly used on REST APIs because it is easy to read by JavaScript  (JSON means JavaScript Object Notation) allowing to develop client side application. In Java and, similarly to the old days of XML, we have different ways to read JSON files: object model or streaming way. No one is better than other, they are simply designed for different needs and situations. The object model way works loading the whole file in memory and translating each JavaScript object to a Java object containing all the properties, array objects, etc. It is similar to the DOM way to read XML files. On the other hand, the stream way reads the file byte by byte and allows to apply actions when an object starts, an array ends, etc. It is similar to SAX way to read XML files. There is a third way to read a JSON file, similarly to StAX with XML, that combines the streaming way to read with the object model. For example, we can read a file in stream mode and when found an object start then read the whole object into memory. Which method is better depends on your needs. If your JSON is small the object model is great because you can load all the data and work as a normal Java objects, searching within an array, iterating, etc. When the file is really big you'll probably don't want to load it all into memory, so the streaming model is the best choice. The scene We are working on an API implemented in Java and one of the operations requires to open a big JSON file (about 10Mb) an returns an object identified by a given string. The file in question is formed by an array of objects, tons of object, and it has no sense to read the whole file and create tons of Java objects into memory only to return one. So, this is a good scenario to read the JSON file in stream mode. The code Before to continue it is worth to mention the code you will see here is available at java-json-examples repository. I have generated a 2.5MB JSON file using the mockjson tool. The data file is formed by an array ob person objects. Each person has an , , a  status and a list of  and : {% highlight json %}
[
  {
    "id" : 0,
    "married" : true,
    "name" : "George Moore",
    "sons" : null,
    "daughters" : 
      {
        "age" : 25,
        "name" : "Elizabeth"
      },
      {
        "age" : 28,
        "name" : "Nancy"
      },
      {
        "age" : 9,
        "name" : "Sandra"
      }
    
  },
  ...
]
{% endhighlight %} GSON We are using GSON to read JSON files in Java. Take a look to the wikipedia link so you can see some of its main features. The other one great library to work with JSON data is Jackson. Both have similar features and performance. Our  model class When GSON reads JSON data it allows to unmarshal it to a given Java class. For this purpose we have created the  class which will store all the previous information (for the sample we are only stoting the person  and ): {% highlight java %}
public class Person {
    private int id;
    private String name; }
{% endhighlight %} Reading using object model Next code shows how to read the JSON file using the object model. Remember, we are loading the whole file in memory converting data to  java class. {% highlight java %}
public static void readDom() {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader(file));
        Gson gson = new GsonBuilder().create();
        Person[] people = gson.fromJson(reader, Person[].class); }
{% endhighlight %} The magic occurs within the line: . We are telling GSON to read the file and return an array of  objects. From here, if we want to return a given person we need to find it within the array. Let's take a look how we can do the same using the stream mode. Reading using the stream mode What we really are going to do here is to use a mixed mode between stream and object model. We are going to read file in stream mode and each time we found the start of a person object we are going to unmarshal it using the object model and we will repeat the process until we found the desired object. {% highlight java %}
public static void readStream() {
    try {
        JsonReader reader = new JsonReader(new InputStreamReader(stream, "UTF-8"));
        Gson gson = new GsonBuilder().create(); }
{% endhighlight %} With this approach we are loading all the objects to memory but one by one and not the whole file at once. Conclusion We have seen that JSON files, like XML, can be read with different techniques. Object model, stream mode or a mix of both. It is up to you to chose one depending on your needs. Object model allows to read a whole file and offers greater abstraction, because you can unmarshal data to your custom Java object model. Stream mode allows to read big files consuming fewer memory. As a cons, it implies a more low level reading but can be improved mixing both models (like in the example).]]></description><link>https://www.acuriousanimal.com/blog/2015/10/23/reading-json-file-in-stream-mode-with-gson</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/10/23/reading-json-file-in-stream-mode-with-gson</guid><pubDate>Fri, 23 Oct 2015 13:19:00 GMT</pubDate><content:encoded>&lt;p&gt;JSON is everywhere, it is the new fashion file format (see you XML). JSON format is mainly used on REST APIs because it is easy to read by JavaScript  (JSON means JavaScript Object Notation) allowing to develop client side application. In Java and, similarly to the old days of XML, we have different ways to read JSON files: object model or streaming way. No one is better than other, they are simply designed for different needs and situations.&lt;/p&gt;
&lt;p&gt;The object model way works loading the whole file in memory and translating each JavaScript object to a Java object containing all the properties, array objects, etc. It is similar to the DOM way to read XML files.&lt;/p&gt;
&lt;p&gt;On the other hand, the stream way reads the file &lt;em&gt;byte by byte&lt;/em&gt; and allows to apply actions when an object starts, an array ends, etc. It is similar to SAX way to read XML files.&lt;/p&gt;
&lt;p&gt;There is a third way to read a JSON file, similarly to StAX with XML, that combines the streaming way to read with the object model. For example, we can read a file in stream mode and when found an object start then read the whole object into memory.&lt;/p&gt;
&lt;p&gt;Which method is better depends on your needs. If your JSON is small the object model is great because you can load all the data and work as a normal Java objects, searching within an array, iterating, etc. When the file is really big you&apos;ll probably don&apos;t want to load it all into memory, so the streaming model is the best choice.&lt;/p&gt;
&lt;h3&gt;The scene&lt;/h3&gt;
&lt;p&gt;We are working on an API implemented in Java and one of the operations requires to open a big JSON file (about 10Mb) an returns an object identified by a given string. The file in question is formed by an array of objects, tons of object, and it has no sense to read the whole file and create tons of Java objects into memory only to return one.&lt;/p&gt;
&lt;p&gt;So, this is a good scenario to read the JSON file in stream mode.&lt;/p&gt;
&lt;h3&gt;The code&lt;/h3&gt;
&lt;p&gt;Before to continue it is worth to mention the code you will see here is available at &lt;a href=&quot;https://github.com/acanimal/java-json-examples&quot;&gt;java-json-examples&lt;/a&gt; repository.&lt;/p&gt;
&lt;p&gt;I have generated a 2.5MB JSON file using the &lt;a href=&quot;http://experiments.mennovanslooten.nl/2010/mockjson/tryit.html&quot;&gt;mockjson&lt;/a&gt; tool. The data file is formed by an array ob &lt;em&gt;person&lt;/em&gt; objects. Each &lt;em&gt;person&lt;/em&gt; has an &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;, a &lt;code class=&quot;language-text&quot;&gt;married&lt;/code&gt; status and a list of &lt;code class=&quot;language-text&quot;&gt;sons&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;daughters&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;{% highlight json %}
[
{
&quot;id&quot; : 0,
&quot;married&quot; : true,
&quot;name&quot; : &quot;George Moore&quot;,
&quot;sons&quot; : null,
&quot;daughters&quot; : [
{
&quot;age&quot; : 25,
&quot;name&quot; : &quot;Elizabeth&quot;
},
{
&quot;age&quot; : 28,
&quot;name&quot; : &quot;Nancy&quot;
},
{
&quot;age&quot; : 9,
&quot;name&quot; : &quot;Sandra&quot;
}
]
},
...
]
{% endhighlight %}&lt;/p&gt;
&lt;h3&gt;GSON&lt;/h3&gt;
&lt;p&gt;We are using &lt;a href=&quot;https://en.wikipedia.org/wiki/Gson&quot;&gt;GSON&lt;/a&gt; to read JSON files in Java. Take a look to the wikipedia link so you can see some of its main features.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The other one great library to work with JSON data is Jackson. Both have similar features and performance.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Our &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt; model class&lt;/h3&gt;
&lt;p&gt;When GSON reads JSON data it allows to unmarshal it to a given Java class. For this purpose we have created the &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt; class which will store all the previous information (for the sample we are only stoting the person &lt;code class=&quot;language-text&quot;&gt;id&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;name&lt;/code&gt;):&lt;/p&gt;
&lt;p&gt;{% highlight java %}
public class Person {
private int id;
private String name;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Getter/Setter methods
...

@Override
public String toString() {
    return &amp;quot;Person{&amp;quot; + &amp;quot;id=&amp;quot; + id + &amp;quot;, name=&amp;quot; + name + &amp;#39;}&amp;#39;;
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}
{% endhighlight %}&lt;/p&gt;
&lt;h4&gt;Reading using object model&lt;/h4&gt;
&lt;p&gt;Next code shows how to read the JSON file using the object model. Remember, we are loading the whole file in memory converting data to &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt; java class.&lt;/p&gt;
&lt;p&gt;{% highlight java %}
public static void readDom() {
BufferedReader reader = null;
try {
reader = new BufferedReader(new FileReader(file));
Gson gson = new GsonBuilder().create();
Person[] people = gson.fromJson(reader, Person[].class);&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    System.out.println(&amp;quot;Object mode: &amp;quot; + people[0]);

} catch (FileNotFoundException ex) {
    ...
} finally {
    ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;The magic occurs within the line: &lt;code class=&quot;language-text&quot;&gt;Person[] people = gson.fromJson(reader, Person[].class);&lt;/code&gt;. We are telling GSON to read the file and return an array of &lt;code class=&quot;language-text&quot;&gt;Person&lt;/code&gt; objects.&lt;/p&gt;
&lt;p&gt;From here, if we want to return a given person we need to find it within the array. Let&apos;s take a look how we can do the same using the stream mode.&lt;/p&gt;
&lt;h4&gt;Reading using the stream mode&lt;/h4&gt;
&lt;p&gt;What we really are going to do here is to use a mixed mode between stream and object model. We are going to read file in stream mode and each time we found the start of a person object we are going to unmarshal it using the object model and we will repeat the process until we found the desired object.&lt;/p&gt;
&lt;p&gt;{% highlight java %}
public static void readStream() {
try {
JsonReader reader = new JsonReader(new InputStreamReader(stream, &quot;UTF-8&quot;));
Gson gson = new GsonBuilder().create();&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    // Read file in stream mode
    reader.beginArray();
    while (reader.hasNext()) {
        // Read data into object model
        Person person = gson.fromJson(reader, Person.class);
        if (person.getId() == 0 ) {
            System.out.println(&amp;quot;Stream mode: &amp;quot; + person);
        }
        break;
    }
    reader.close();
} catch (UnsupportedEncodingException ex) {
    ...
} catch (IOException ex) {
    ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;With this approach we are loading all the objects to memory but one by one and not the whole file at once.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;We have seen that JSON files, like XML, can be read with different techniques. Object model, stream mode or a mix of both. It is up to you to chose one depending on your needs.&lt;/p&gt;
&lt;p&gt;Object model allows to read a whole file and offers greater abstraction, because you can unmarshal data to your custom Java object model.&lt;/p&gt;
&lt;p&gt;Stream mode allows to read big files consuming fewer memory. As a cons, it implies a more &lt;em&gt;low level&lt;/em&gt; reading but can be improved mixing both models (like in the example).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Webpack, not another task runner tool]]></title><description><![CDATA[It seems we are living an gold era about JavaScript and front end world with a myriad of frameworks, language improvements and, what is related to this article, build systems, tasks runner or whatever you want to call them.
We have adepts to Grunt, firm believers of Gulp or purists preferring the use of old fashion npm scripts way. Well, I'm sorry for all of you but there is a new kid on the block and it is (IMO) a really strong competitor. It's name is webpack and it is a module bundler. OMG !!! A module what? What is webpack ? Webpack is a module bundler. It has nothing to do with a tasks runner, although in many cases can substitute the need of gulp or grunt. Webpack understands about modules and its dependencies (among JavaScript files, CSS or whatever) and generates assets. Probably you don't understand the importance of the last sentence, so I repeat it again: Remember webpack understands about modules and its dependencies and is good to generate assets from it. That is probably the main impact I see when developing with webpack. To get all its potential you need to change your mind from programming a set of JavaScript files, that finally and concatenated and minimized, to a set of modules, that exports variables and has dependencies among them. A brief presentation Here I present a short slideshow I prepared to introduce webpack to my team. Any feedback will be appreciated. You can also view at slid.es The two samples present in the slideshow are available at github at the webpack-presentation repository.]]></description><link>https://www.acuriousanimal.com/blog/2015/10/15/webpack-not-another-task-runner-tool</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/10/15/webpack-not-another-task-runner-tool</guid><pubDate>Thu, 15 Oct 2015 19:50:00 GMT</pubDate><content:encoded>&lt;p&gt;It seems we are living an gold era about JavaScript and front end world with a myriad of frameworks, language improvements and, what is related to this article, build systems, tasks runner or whatever you want to call them.
We have adepts to &lt;a href=&quot;http://gruntjs.com/&quot;&gt;Grunt&lt;/a&gt;, firm believers of &lt;a href=&quot;http://gulpjs.com/&quot;&gt;Gulp&lt;/a&gt; or purists preferring the use of old fashion &lt;a href=&quot;https://docs.npmjs.com/misc/scripts&quot;&gt;npm scripts&lt;/a&gt; way. Well, I&apos;m sorry for all of you but there is a new kid on the block and it is (IMO) a really strong competitor. It&apos;s name is &lt;a href=&quot;http://webpack.github.io/&quot;&gt;webpack&lt;/a&gt; and it is a module bundler. OMG !!! A module what?&lt;/p&gt;
&lt;h3&gt;What is webpack ?&lt;/h3&gt;
&lt;p&gt;Webpack is a module bundler. It has nothing to do with a tasks runner, although in many cases can substitute the need of gulp or grunt. Webpack understands about modules and its dependencies (among JavaScript files, CSS or whatever) and generates assets. Probably you don&apos;t understand the importance of the last sentence, so I repeat it again:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Remember webpack understands about modules and its dependencies and is good to generate assets from it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That is probably the main impact I see when developing with webpack. To get all its potential you need to change your mind from programming a set of JavaScript files, that finally and concatenated and minimized, to a set of modules, that exports variables and has dependencies among them.&lt;/p&gt;
&lt;h3&gt;A brief presentation&lt;/h3&gt;
&lt;p&gt;Here I present a short slideshow I prepared to introduce webpack to my team. Any feedback will be appreciated.&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/webpack/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;em&gt;You can also view at &lt;a href=&quot;http://slides.com/acanimal/webpack#/&quot;&gt;slid.es&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The two samples present in the slideshow are available at github at the &lt;a href=&quot;https://github.com/acanimal/webpack-presentation&quot;&gt;webpack-presentation&lt;/a&gt; repository.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Git, a short introduction with some pictures]]></title><description><![CDATA[This is a short introduction about Git version control system I made some time ago describing the main topics. Currently, Git is probably one of the most powerful and most used version control systems, so never is late to start with it. You can also view at slid.es]]></description><link>https://www.acuriousanimal.com/blog/2015/09/23/git-a-short-introduction-with-some-pictures</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/09/23/git-a-short-introduction-with-some-pictures</guid><pubDate>Wed, 23 Sep 2015 06:14:00 GMT</pubDate><content:encoded>&lt;p&gt;This is a short introduction about Git version control system I made some time ago describing the main topics. Currently, Git is probably one of the most powerful and most used version control systems, so never is late to start with it.&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/git/embed&quot; width=&quot;600&quot; height=&quot;460&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;em&gt;You can also view at &lt;a href=&quot;http://slides.com/acanimal/git#/&quot;&gt;slid.es&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Specification pattern for NodeJS]]></title><description><![CDATA[Although the specification pattern is mainly use in DDD to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. The code is freely available at github repository and also installable via npmjs. The specification pattern There are tons of good documents and tutorials about the pattern, so I don't want to extent too much here. The best source of information, IMO, is the Eric Evans big blue book Domain-Driven Design: DDD The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: the validation of objects that satisfies some critaria. An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project: has few issues if the number of issues reported last month is less 10, and is updated project if the date of the last solved issued it not beyond a week. The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification quality project that means a project has few issues and is an updated project. Wikipedia has a nice image showing an UMl diagram class about the specification patter: UML specification pattern We can see a specification is any interface that implements the  method and has the ,  and  method to chain specifications. How to use the NodeJS implementation ? I have created two implementations of the pattern: asynchronous and synchronous versions. The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc. The first step to use the implementation is to include the required version (synchronous or asynchronous): For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification: Later, to use the previous specification: The base class  offers the ,  and  methods we can use to chain specifications and build complex ones. For example: The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the  method, which must be use a callback, for example: and to use it you can make via the callback: Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the  method: Conclusions The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing validations chaining through specifications.]]></description><link>https://www.acuriousanimal.com/blog/2015/09/21/specification-pattern-for-nodejs</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/09/21/specification-pattern-for-nodejs</guid><pubDate>Mon, 21 Sep 2015 20:14:00 GMT</pubDate><content:encoded>&lt;p&gt;Although the &lt;a href=&quot;https://en.wikipedia.org/wiki/Specification_pattern&quot;&gt;specification pattern&lt;/a&gt; is mainly use in &lt;a href=&quot;https://en.wikipedia.org/wiki/Domain-driven_design&quot;&gt;DDD&lt;/a&gt; to check business rules, I think the idea of combine rules offers great flexibility in any application architecture, it is suitable for any kind of validations, simplifying and improving reusability and making code clearer. Because of this, some days ago I started working on an implementation of the specification pattern for NodeJS. &lt;em&gt;The code is freely available at &lt;a href=&quot;https://github.com/acanimal/node-specification-pattern&quot;&gt;github&lt;/a&gt; repository and also installable via &lt;a href=&quot;https://www.npmjs.com/package/specification&quot;&gt;npmjs&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;The specification pattern&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;There are tons of good documents and tutorials about the pattern, so I don&apos;t want to extent too much here. The best source of information, IMO, is the Eric Evans &lt;em&gt;big blue book&lt;/em&gt; &lt;a href=&quot;https://domainlanguage.com/ddd/&quot;&gt;Domain-Driven Design&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.amazon.com/exec/obidos/ASIN/0321125215/domainlanguag-20&quot;&gt;&lt;img src=&quot;https://books.google.es/books/content?id=hHBf4YxMnWMC&amp;#x26;printsec=frontcover&amp;#x26;img=1&amp;#x26;zoom=1&amp;#x26;edge=curl&amp;#x26;imgtk=AFLRE70686srrc3RTlROnjENjkfFCkKi1QUib9Afdj0jUdsEG6J_zSvJCf-gKeXJN5k9Ug-IGWhQPtx6R8sVeEw3S4k0dKHkCTm2yxDzNy9da3wMb0DCpoTjsFLu9OZ93r4rhAPD6sOh&quot; alt=&quot;DDD&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The specification pattern is powerful enough to be used for: validations, queries and creation of objects that satisfies some criteria. So, take into account this post is only related to the first options: &lt;strong&gt;the validation of objects that satisfies some critaria&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;An specification is a piece of code that checks if a business rules is satisfied or not. For example, given a bug tracking system we can create two specification to check if a software project:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;has &lt;em&gt;few issues&lt;/em&gt; if the number of issues reported last month is less 10, and&lt;/li&gt;
&lt;li&gt;is &lt;em&gt;updated project&lt;/em&gt; if the date of the last solved issued it not beyond a week.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The great of specifications is we can easily combine them to create complex rules reusing the code, for example, we can create the specification &lt;em&gt;quality project&lt;/em&gt; that means a project has &lt;em&gt;few issues&lt;/em&gt; and is an &lt;em&gt;updated project&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Wikipedia has a nice image showing an UMl diagram class about the specification patter:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/8/8b/Specification_UML_v2.png&quot; alt=&quot;UML specification pattern&quot;&gt;&lt;/p&gt;
&lt;p&gt;We can see a specification is any interface that implements the &lt;code class=&quot;language-text&quot;&gt;isSatisfiedBy()&lt;/code&gt; method and has the &lt;code class=&quot;language-text&quot;&gt;and&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;or&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;not&lt;/code&gt; method to chain specifications.&lt;/p&gt;
&lt;h2&gt;How to use the NodeJS implementation ?&lt;/h2&gt;
&lt;p&gt;I have created two implementations of the pattern: asynchronous and synchronous versions.&lt;/p&gt;
&lt;p&gt;The synchronous version is fine for those in-memory validations, for example when you do not require query a database. The asynchronous version, on the other hand, is suitable for those cases in which the validation depends on an asynchronous source, like a file, a query to an API, etc.&lt;/p&gt;
&lt;p&gt;The first step to use the implementation is to include the required version (synchronous or asynchronous):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Asynchronous version&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; Specification &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;specification&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Specification&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Synchronous version&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; SpecificationSync &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;specification&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SpecificationSync&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For each business rule (or validation) you need to check, a specification must be created. Next code creates a specification that checks if a number is greater than the one indicated at the specification:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Make it a subclass of SpecificationSync base class.&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SpecificationSync&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Implement the &apos;isSatisfiedBy&apos; method.&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;isSatisfiedBy&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;n &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Later, to use the previous specification:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; greaterThan6 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;greaterThan6&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isSatisfiedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;9 is greater than 6&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The base class &lt;code class=&quot;language-text&quot;&gt;SpecificationSync&lt;/code&gt; offers the &lt;code class=&quot;language-text&quot;&gt;and&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;or&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;not&lt;/code&gt; methods we can use to chain specifications and build complex ones. For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; greaterThan6 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; greaterThan8 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; greaterThan6And8 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; greaterThan6&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;greaterThan8&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;greaterThan6And8&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isSatisfiedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;9 is greater than 6 and 8&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The asynchronous version is suitable if you need to check agains an asynchronous source, like a database, files, etc. The only difference is the way to implement the &lt;code class=&quot;language-text&quot;&gt;isSatisfiedBy()&lt;/code&gt; method, which must be use a callback, for example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;num&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; num&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Specification&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;isSatisfiedBy&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;n&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; n &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;num&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and to use it you can make via the callback:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; greaterThan6 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

greaterThan6&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isSatisfiedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;9&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; satisfies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;satisfies&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;9 is greater than 6&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Chaining specifications works in the same way as the synchronous version, simply remember the only difference is the way to use the &lt;code class=&quot;language-text&quot;&gt;isSatisfiedBy()&lt;/code&gt; method:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GreaterThan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isSatisfiedBy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; satisfies&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;satisfies&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;6 is greater than 1, 2 and 3&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Conclusions&lt;/h3&gt;
&lt;p&gt;The post presents a dual implementation for NodeJS, synchronous and asynchronous. There is no reason to use design patterns in a multi-paradigm language like JavaScript. Specification pattern can help when working with validations, simplifying reusability and allowing &lt;em&gt;validations chaining&lt;/em&gt; through specifications.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[I'm working on ClydeIO]]></title><description><![CDATA[ClydeIO is an open source API gateway and management layer based on nodejs. It is extremely flexibly, configurable and simply to extend. It is designed to simplify the development of new APIs (or simply improving existing ones) adding authentication, logging, rate limiting, etc. Note, the project is currently a proof of concept (I'm currently working to apply it in a real system) and most of the developed filters are basic implementation to demonstrate its usefulness. What is an API gateway and why I need one? The most important part when designing and implementing an API is to model your business correctly and offer a set of well defined operations accordingly with them. Unfortunately, that is only an small part of the job and it is not enough to ensure the success. As a real World system you require to secure your API, store logs, apply rate limits, etc. The task of publishing an API becomes much more complex than understanding your business, you have entered the world of security, monitoring and... the unknown !!! An API gateway is a single point of entry responsible to apply actions (like security or logging) before redirecting the request to your real-do-the-job API. We can see the gateway as a kind (or mix) of firewall and proxy and is really useful implementing microservices.  Thanks to ClydeIO you can spend your efforts implementing your business API leaving the rest of things to the gateway. The glory of ClydeIO is its simplicity and its easy to extent with new filters like: Secure an existent API Log access to any resource Rate limiting Filter request (allow/deny) depending on the query parameters Cache data or whatever you need  Because it is based on node we can use the myriad of awesome node packages out there and integrate within your filters.  Why a new system instead contribute to an existent one? I was looking for similar projects before start ClydeIO. There is plenty of services that provides same functionalities (and many more) as well as many projects with a great maturity level,Â but no one satisfies my needs. Services implies a cost for its usage that, sometimes, can be hard to calculate and in some cases requires you adaptÂ your systems (your business API) to accommodateÂ to the service requirements. Other software projects means you must be comfortable with the technology they are implemented with, mainly its programming language and database used to store configuration and information. One thing I saw in common in most of the software projects is the fact they do what they do, that is, they are prepared to make many things, do it well but are not allowed to extend the gateway easily with new requirements users can have. They are designed to make the most common things: rate limiting, security, logging, etc but it is hard to know how we can extend the gatewayÂ to send us an email when there was more than ten invalid accesses. In addition, I found some of them really complex to configure, based on monster XML configuration files. Once last comment on why I created ClydeIO: to take advantage of the node modules. There exists other API gateways implemented using NGINX server, lua, go or python language but nonetheless implemented with node. To be honest I must point here the StrongLoop LoopBack API Gateway product. Current status ClydeIO is currently a proof of concept and I have implemented a bunch of filters to test its capabilities. Currently all configuration is provided via a JSON file. That's nice and simply but not much secure when working with authentication filters that needs specify users and passwords or with a real scenario that requires manage hundred of users. Because of this I'm currently working hard trying to create the configuration module, responsible to manage the whole configuration, and designing to be easy to implement for different backends: memory, redis, mongodb, postgresql, ... I have great feeling about ClydeIO's possibilities but to be honest it is currently a personal side project I write on my few free time. I have no contributors neither sponsors. So, if you arrive to this page and are interested in the project feel free to contact with me and start helping with your money or time :) Documentation I have create the ClydeIO github organization to host all the related projects related with ClydeIO. We can differentiate among the core project, so called clydeio too and the rest of projects that are clyde's filters. The current core project documentation can be found at the project's wiki: https://github.com/clydeio/clydeio/wiki. It will probably change soon, once finished the configuration module, but the concepts remains the same. Contributions As a said, for the moment this is a personal project I develop on my free time. So don't hesitate to contact with me for any kind of support and help.]]></description><link>https://www.acuriousanimal.com/blog/2015/09/14/i-m-working-on-clydeio</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/09/14/i-m-working-on-clydeio</guid><pubDate>Mon, 14 Sep 2015 15:48:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt; is an open source API gateway and management layer based on &lt;a href=&quot;https://nodejs.org/&quot;&gt;nodejs&lt;/a&gt;. It is extremely flexibly, configurable and simply to extend. It is designed to simplify the development of new APIs (or simply improving existing ones) adding authentication, logging, rate limiting, etc.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note, the project is currently a proof of concept (I&apos;m currently working to apply it in a real system) and most of the developed filters are basic implementation to demonstrate its usefulness.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;What is an API gateway and why I need one?&lt;/h2&gt;
&lt;p&gt;The most important part when designing and implementing an API is to model your business correctly and offer a set of well defined operations accordingly with them.&lt;/p&gt;
&lt;p&gt;Unfortunately, that is only an small part of the job and it is not enough to ensure the success. As a real World system you require to secure your API, store logs, apply rate limits, etc. The task of publishing an API becomes much more complex than understanding your business, you have entered the world of security, monitoring and... the unknown !!!&lt;/p&gt;
&lt;p&gt;An API gateway is a single point of entry responsible to apply actions (like security or logging) before redirecting the request to your &lt;em&gt;real-do-the-job&lt;/em&gt; API. We can see the gateway as a kind (or mix) of firewall and proxy and is really useful implementing &lt;a href=&quot;http://microservices.io/patterns/apigateway.html&quot;&gt;microservices&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 446px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.9237668161435%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAD8klEQVQ4y3WUf0yTRxjH7215aS0tg/ctAVomv6xlDtEZcSYsWXQxus0FmL+2jqCbzqHLJHP7wwQ0OIFhBPq2b/u2Bdux1b7tKiwpUgshFeoCNEsdIC6AwEIkwUxxODJENsjt3lfKhGWXPLn3vXvuk3vu+70DMdpdEa9SBam7qeOKHdRHiXtqjio2Wz9RHH5nfYotTaHQ5WxS0lvVKDIS6U3pCTQpIM3JMvnXAEQdA0DEABDDJMtIOhrIDSQmBECbKDxEFWdd1FWrS3UVKZXaKnWR7WJqYW7GRlth4Vqq/HyGvuTMOv3ZknX60jOptngRDlBr8NZv+T7Y9Fb5KQ3B/RuVkgRaCnDwMnUAJ7W7o8HzDUJQsD9TBf6nNU90Hen6a7g3CMdu+6f7GpmJIEkDIGO2popAOpWPZ1D7SC7x9ZojGNSYsKwxFtfsTVf9BkDEpfvjgmrNfmBz12Fcjr7bLvM/vNUTmOof7HzYG+qc6pu8/iB0Ak1FsMdzxUBFvRuJQs4lf1FfLgjv4uOD2RvC365vbMvjtaxJGZgZCHbNDt5GsFDP/PC4b+rWSTQldBbli8FG6mCkemmHXDMZjVKWZWkn6xhxOp2B7+z2N7hxxmSSmOrNcWWnS170jAVOdc0P9fcs3P3lxnTvtbohf4IegGhTdpoIiZImVFBvx4aBCNbU1tYG3W439Hg80OVyLVqt1p0VFRUyI2OUhPMcfd5XfhjteLPKUcuvNa6VynlRvqTKyEO64uTGcxbcUmfJQYC/vV7vIoIutLa2zvl8PuhwOHTcomB3EKuma7BROIOtFgrZhjAQ2L/ApmfA7RywpaVl0e/3L6AIA/XcooH+Pqxaz2CDT+F/gbIlINCqUcl7iedKblxV8gIqeUdlZaXMYGSiwnlXfxp67dqdCQ3FNvPnz6QQcjoKlbxaFIvBKHWwrM5xxT7qYtkbSJSdvFhm8xrzZWtcSfEJZcvAvQuhPyAcmIew897MSMPPvyop5EPz9iwRZxscBbHaNh8e2LJsG6fNujzONF5P6hifftI9OQtvov7OHITt44/Pc3PuT4skK4DYpRwAU1wga/jbyPdyVSqIvFX15JHgHOfF5nb+3Gqvtr3w4/25x6HfIQd8OgJ54Fke+NnJNWFg7MqrN4kdztuwHgEFK28k5Hvf3Qef90wtwt5ZVPLEn/2Xhx/FIRtIzdsyl0tORCHkbs220l0RIHBaXJD3UmYHAOIL6VLcEAsiDTEA18eL8QYS4x+HK5727KabvflfHT32zIdJsnheFATBloAkV7q6Jo9Q1r9P7vtgc5IdAIKSC0gE5IJAUIImMMKSRsaVASBBauH888UpzD9fAuE/WGrE3a0Kv54AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ClydeIO&quot;
        title=&quot;ClydeIO&quot;
        src=&quot;/static/015fd655b1961127a01d013390228588/07e28/2015-09-clyde.png&quot;
        srcset=&quot;/static/015fd655b1961127a01d013390228588/19bd1/2015-09-clyde.png 163w,
/static/015fd655b1961127a01d013390228588/d3bcb/2015-09-clyde.png 325w,
/static/015fd655b1961127a01d013390228588/07e28/2015-09-clyde.png 446w&quot;
        sizes=&quot;(max-width: 446px) 100vw, 446px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt; you can spend your efforts implementing your business API leaving the rest of things to the gateway. The glory of &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt; is its simplicity and its easy to extent with new filters like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Secure an existent API&lt;/li&gt;
&lt;li&gt;Log access to any resource&lt;/li&gt;
&lt;li&gt;Rate limiting&lt;/li&gt;
&lt;li&gt;Filter request (allow/deny) depending on the query parameters&lt;/li&gt;
&lt;li&gt;Cache data&lt;/li&gt;
&lt;li&gt;or whatever you need&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; Because it is based on node we can use the myriad of awesome node packages out there and integrate within your filters.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 23.695652173913047%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA3XAAAN1wFCKJt4AAABjUlEQVQY02MQzT3AxgAGK5lApEDiDr5ZB/eIpczfyzl7/w6x0r7FYpNnLXIp71kg2b7nkXDUrPNczVtvialV7BWC6KsE62OI3sMCpu3ylnDueH5a79CLIyL7Pl1Um3t4r9GjD4c23Xy62/Plz6Ort+9e57Ru3bq/K1au8D7y4ueKPTeeeR16+nXDvIOPHG7ufa934eBzsfMH3ltkdW3jn9NXzMwQWzVLYPfr853bH59wOvDxYkvvwQOe0/Zttc5auVVp/qlddmkT18nPXrSqPn/iGrWW/XdtEhadUKnbc8O6Z8k5p8uHP645tfeF28XDn9ZMmL1Hvq0lj5OBIfwIxKlQ0LRli+69dwe33nqyy/3R1yNrl21e7bZh3bofC1et9tn35OvqPTeeeh14/Hlj/Y5rlsj6GIIOQ8yRyNvPHli9XDC3fb6Ede5aLp2W7VIzDm2xKFy4UnX6sW1myVPXSi5YujY4a/Iamfpdl80y521Ta9112cK086BsZOUsgZz2hZJmJWt4lAr2sIPMAwDsGLxcWIHQ0gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Rquest flow&quot;
        title=&quot;Rquest flow&quot;
        src=&quot;/static/b41ef3b4499edcbe7d121995a42b0783/dbb61/2015-09-clyde-dataflow.png&quot;
        srcset=&quot;/static/b41ef3b4499edcbe7d121995a42b0783/19bd1/2015-09-clyde-dataflow.png 163w,
/static/b41ef3b4499edcbe7d121995a42b0783/d3bcb/2015-09-clyde-dataflow.png 325w,
/static/b41ef3b4499edcbe7d121995a42b0783/dbb61/2015-09-clyde-dataflow.png 650w,
/static/b41ef3b4499edcbe7d121995a42b0783/6b691/2015-09-clyde-dataflow.png 975w,
/static/b41ef3b4499edcbe7d121995a42b0783/91670/2015-09-clyde-dataflow.png 1300w,
/static/b41ef3b4499edcbe7d121995a42b0783/a5044/2015-09-clyde-dataflow.png 1380w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Why a new system instead contribute to an existent one?&lt;/h2&gt;
&lt;p&gt;I was looking for similar projects before start &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt;. There is plenty of &lt;a href=&quot;http://apievangelist.com/2014/10/05/taking-a-fresh-look-at-what-open-source-api-management-architecture-is-available/&quot;&gt;services&lt;/a&gt; that provides same functionalities (and many more) as well as many projects with a great maturity level,Â but no one satisfies my needs.&lt;/p&gt;
&lt;p&gt;Services implies a cost for its usage that, sometimes, can be hard to calculate and in some cases requires you adaptÂ your systems (your business API) to accommodateÂ to the service requirements.&lt;/p&gt;
&lt;p&gt;Other software projects means you must be comfortable with the technology they are implemented with, mainly its programming language and database used to store configuration and information.&lt;/p&gt;
&lt;p&gt;One thing I saw in common in most of the software projects is the fact they do what they do, that is, they are prepared to make many things, do it well but are not allowed to extend the gateway easily with new requirements users can have. They are designed to make the most common things: rate limiting, security, logging, etc but it is hard to know how we can extend the gatewayÂ to send us an email when there was more than ten invalid accesses. In addition, I found some of them really complex to configure, based on monster XML configuration files.&lt;/p&gt;
&lt;p&gt;Once last comment on why I created &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt;: to take advantage of the node modules.&lt;/p&gt;
&lt;p&gt;There exists other API gateways implemented using NGINX server, lua, go or python language but nonetheless implemented with node. To be honest I must point here the &lt;a href=&quot;https://strongloop.com/strongblog/open-source-node-js-api-gateway/&quot;&gt;StrongLoop LoopBack API Gateway&lt;/a&gt; product.&lt;/p&gt;
&lt;h2&gt;Current status&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt; is currently a proof of concept and I have implemented a bunch of filters to test its capabilities. Currently all configuration is provided via a JSON file. That&apos;s nice and simply but not much secure when working with authentication filters that needs specify users and passwords or with a real scenario that requires manage hundred of users.&lt;/p&gt;
&lt;p&gt;Because of this I&apos;m currently working hard trying to create the configuration module, responsible to manage the whole configuration, and designing to be easy to implement for different backends: memory, redis, mongodb, postgresql, ...&lt;/p&gt;
&lt;p&gt;I have great feeling about &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt;&apos;s possibilities but to be honest it is currently a personal side project I write on my few free time. I have no contributors neither sponsors. So, if you arrive to this page and are interested in the project feel free to contact with me and start helping with your money or time :)&lt;/p&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;p&gt;I have create the &lt;a href=&quot;https://github.com/clydeio&quot;&gt;ClydeIO&lt;/a&gt; github &lt;em&gt;organization&lt;/em&gt; to host all the related projects related with ClydeIO.&lt;/p&gt;
&lt;p&gt;We can differentiate among the core project, so called &lt;a href=&quot;https://github.com/clydeio/clydeio&quot;&gt;clydeio&lt;/a&gt; too and the rest of projects that are clyde&apos;s filters.&lt;/p&gt;
&lt;p&gt;The current core project documentation can be found at the project&apos;s wiki: &lt;a href=&quot;https://github.com/clydeio/clydeio/wiki&quot;&gt;https://github.com/clydeio/clydeio/wiki&lt;/a&gt;. It will probably change soon, once finished the configuration module, but the concepts remains the same.&lt;/p&gt;
&lt;h2&gt;Contributions&lt;/h2&gt;
&lt;p&gt;As a said, for the moment this is a personal project I develop on my free time. So don&apos;t hesitate to contact with me for any kind of support and help.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to read from a writable stream (http.ServerResponse) in Node]]></title><description><![CDATA[I'm working on a personal side project (when I have free time to spend on) where a bunch of middlewares are chained to do something awesome (Take a look at ClydeIO. Note it is currently a proof of concept). Remember a middleware is nothing more than a function that receives three parameters: the , the  and the  function: The  parameter is an instance of , a readable stream, while the  parameter is an instance of , a writable stream (something similar to Java servlets). Usually a middleware reads the request, optionally attach more data or modifies it, maybe writes some content on the response and continues the execution in the next middleware invoking the  function. If any of the middlewares writes content and invokes the  method the response is sent to the client and middleware chain is aborted. Note, I'm working with Connect and not Express, but the concepts are the same.
Express uses the  method to write content, which is based in the  and  core node methods. Also Express extends with request and response object with its own methods. Now, suppose in a middleware you need to get the current content (the response body) other middlewares has been written. The response is an output stream and it is designed to have write oriented operations: write content, write headers, etc but not read operations. So how we can read the content written on a writable stream? Do not confuse the response reference we have in a middleware (or simply in a  listener), which is a writable stream, with the object we obtain when using . With  we obtain an instance of  and when listen on it for the  event we get a , a readable stream. That is, the response we obtain is a readable stream where we can read data sent from the server. In a middleware we are the server and are responsible to write data in an output/writable stream. The solution I found is override the  method. The  method is defined by the  interface and it is mandatory each writable stream class implements it. So, they idea is to override the method in a way we can store the data is written and later invoking the parent method so they what usually do: Now, the second middleware can read all the chunks of data any other middleware writes to the response and continues the normal execution of the  function invoking the original version. Note, if you need to access the response headers the solution is similar but, in this case, you need to override the methods ,  and .]]></description><link>https://www.acuriousanimal.com/blog/2015/08/31/how-to-read-from-a-writable-stream-httpserverresponse-in-node</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/08/31/how-to-read-from-a-writable-stream-httpserverresponse-in-node</guid><pubDate>Mon, 31 Aug 2015 19:05:00 GMT</pubDate><content:encoded>&lt;p&gt;I&apos;m working on a personal side project (when I have free time to spend on) where a bunch of middlewares are chained to do something awesome (&lt;em&gt;Take a look at &lt;a href=&quot;https://github.com/clydeio/clydeio&quot;&gt;ClydeIO&lt;/a&gt;. Note it is currently a proof of concept&lt;/em&gt;). Remember a middleware is nothing more than a function that receives three parameters: the &lt;code class=&quot;language-text&quot;&gt;request&lt;/code&gt;, the &lt;code class=&quot;language-text&quot;&gt;response&lt;/code&gt; and the &lt;code class=&quot;language-text&quot;&gt;next&lt;/code&gt; function:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;req&lt;/code&gt; parameter is an instance of &lt;code class=&quot;language-text&quot;&gt;http.IncomingMessage&lt;/code&gt;, a readable stream, while the &lt;code class=&quot;language-text&quot;&gt;res&lt;/code&gt; parameter is an instance of &lt;code class=&quot;language-text&quot;&gt;http.ServerResponse&lt;/code&gt;, a writable stream (something similar to Java servlets).&lt;/p&gt;
&lt;p&gt;Usually a middleware reads the request, optionally attach more data or modifies it, maybe writes some content on the response and continues the execution in the next middleware invoking the &lt;code class=&quot;language-text&quot;&gt;next()&lt;/code&gt; function. If any of the middlewares writes content and invokes the &lt;code class=&quot;language-text&quot;&gt;res.end()&lt;/code&gt; method the response is sent to the client and middleware chain is aborted.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// First middleware&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/blablabla&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;I have requested the /blablabla resource&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Continue the middleware chain&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Second middleware want to read the response content&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ???&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;Note, I&apos;m working with &lt;a href=&quot;https://github.com/senchalabs/connect&quot;&gt;Connect&lt;/a&gt; and not &lt;a href=&quot;http://expressjs.com/&quot;&gt;Express&lt;/a&gt;, but the concepts are the same.
Express uses the &lt;code class=&quot;language-text&quot;&gt;send()&lt;/code&gt; method to write content, which is based in the &lt;code class=&quot;language-text&quot;&gt;write()&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;end()&lt;/code&gt; core node methods. Also Express extends with request and response object with its own methods.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now, suppose in a middleware you need to get the current content (the response body) other middlewares has been written. The response is an output stream and it is designed to have write oriented operations: write content, write headers, etc but not read operations. &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;http://stackoverflow.com/questions/31851894/nodejs-middleware-how-to-read-from-a-writable-stream-http-serverresponse&quot;&gt;So how we can read the content written on a writable stream?&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Do not confuse the response reference we have in a middleware (or simply in a &lt;code class=&quot;language-text&quot;&gt;http.Server&lt;/code&gt; listener), which is a writable stream, with the object we obtain when using &lt;code class=&quot;language-text&quot;&gt;http.request()&lt;/code&gt;. With &lt;code class=&quot;language-text&quot;&gt;http.request()&lt;/code&gt; we obtain an instance of &lt;code class=&quot;language-text&quot;&gt;http.ClientRequest&lt;/code&gt; and when listen on it for the &lt;code class=&quot;language-text&quot;&gt;response&lt;/code&gt; event we get a &lt;code class=&quot;language-text&quot;&gt;http.IncomingMessage&lt;/code&gt;, a readable stream. That is, the response we obtain is a readable stream where we can read data sent from the server. In a middleware we are the server and are responsible to write data in an output/writable stream.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The solution I found is override the &lt;code class=&quot;language-text&quot;&gt;write()&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;write()&lt;/code&gt; method is defined by the &lt;code class=&quot;language-text&quot;&gt;stream.Writable&lt;/code&gt; interface and it is mandatory each writable stream class implements it. So, they idea is to override the method in a way we can store the data is written and later invoking the parent method so they what usually do:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-javascript line-numbers&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Second middleware want to read the response content&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_originalWrite &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;write&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Store reference to the original write method&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;write&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; encoding&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callback&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; chunk&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;_originalWrite&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; chunk&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; encoding&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callback&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, the second middleware can read all the chunks of data any other middleware writes to the response and continues the normal execution of the &lt;code class=&quot;language-text&quot;&gt;write()&lt;/code&gt; function invoking the original version.&lt;/p&gt;
&lt;p&gt;Note, if you need to access the response headers the solution is similar but, in this case, you need to override the methods &lt;code class=&quot;language-text&quot;&gt;writeHead()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;setHeader()&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;removeHeader()&lt;/code&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using random unsplash images on your website]]></title><description><![CDATA[Recently I updated my we page and one of the nice features I included on it is the fact a random image is placed in the header for each page. These images are obtained from the great unsplash, a free (do whatever you want) high-resolution photos project. As its slogan says, unsplash contains tons of really good images, both by its resolution and the photographies. To embed the unsplash images in my web site I used the unsplash.it service, its slogan says Beautiful placeholders using images from unsplash.  It was created by  David Marby and Nijiko Yonskai and the code is publicly available at the github unsplash-it repository (if you are interested it is a NodeJS based project). But what does exactly unsplash.it? Basically it returns images from unsplash project with some steroids. Retrieve an image indicating the desired width and height: https://unsplash.it/500/400 Using a square image: https://unsplash.it/500 Get a random image: https://unsplash.it/500/400?random or maybe grey styled: https://unsplash.it/g/500/400?random Obtain a list of available images: https://unsplash.it/list And retrieve a given image: https://unsplash.it/500?image=123 Maybe a bit blured: https://unsplash.it/500?image=123&blur And finally, cropping if desired: https://unsplash.it/500?image=123&gravity=east Yeah !!! unsplash.it is nice service easy and free to use.]]></description><link>https://www.acuriousanimal.com/blog/2015/08/18/using-random-unsplash-images</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/08/18/using-random-unsplash-images</guid><pubDate>Mon, 17 Aug 2015 20:08:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I updated my we page and one of the nice features I included on it is the fact a random image is placed in the header for each page. These images are obtained from the great &lt;a href=&quot;https://unsplash.com/&quot;&gt;unsplash&lt;/a&gt;, a &lt;em&gt;free (do whatever you want) high-resolution photos&lt;/em&gt; project. As its slogan says, unsplash contains tons of really good images, both by its resolution and the photographies.&lt;/p&gt;
&lt;p&gt;To embed the unsplash images in my web site I used the &lt;a href=&quot;https://unsplash.it/&quot;&gt;unsplash.it&lt;/a&gt; service, its slogan says &lt;em&gt;Beautiful placeholders using images from unsplash&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://unsplash.it/&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 70.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADC0lEQVQ4y12SXUhTYRjHz223BUGB4cd06jbdh85jfs2ZH9NtfnRTUpBEQQRdlBERdilJESV0ZSAUYnQRRlhQipEQhGioZFYXreNyus1t7mw725x/e59306wD//Oc83z83v/7niNoNDoYTeWoratHs60NLa0O2NocLNphsTbCUFYBVaEWh45m48DBIziWV4gCjR6miipYG5t5f6u9ncmJWosVglZbguJiLXS6UoiVVWhqbkVrmxMOZyfszg4ebWzIXFnNYblqDYpLjMjOL2YL6WAyV0KsqkGpwYicXBWE/PwCqNVFaRUWwWgsg6W+AXZHB5ztXWl1dKGNuahvaIT1RDOq66wMrkZWjgrZDJKTp0IuSZUPQa0uhFarg4ZJrzfCbBYhisdRU2tBY5MNLTY7d0zHQE4pV1VTh/IKkbvSlepRojdAbzChlM0LkiRhZWWFiz9LK3C7fzO5sbq6ykW19LsHHo8nk3PD9dMF6ZfEa1wsJ+zs7GBXsWgMgUAA+3NbW1t8IRqgazcvyzJcLhe8Xu8//UIqtY3t7W3enEgkEGVQek+lUjwSMBaLMSlE2xukWlyJQ2E1fjEEzQixeAIR1ixHooiyhnhyC0oimRarUZ1ikjV7POtYnP+Cb0vfsfz1B9Z9fkRYn8fnRYg5phmBbl7/BiQ6I88agpthBEObPIYzi8jMNbmbfv8RPZ0XcO18LwZu38HnpXnMLS9g6PEw5ubmkcJO2iENBkJhbAQ34Q8EWQwxoMxBBKQdpBhwdmYO1y/fwM0rtzA48BCzC5/wZuI1Lp29ihej4+kzJGAoLMPnD3CYbyOIzXCE58IyOWTnqihIJFOQ1iSMT7xEX28f3k2NY2ZxGhMf3uKM4yKePx37C9wDMKckciZHYohElb0tU/Pk5BROdXWj5/Q5PBq6h/uD/bj7oB/dJ7vxaizjkG+JDRIwxMBhAsXiGaWBtAg1jwyPoOhwHmpKzLAYRTQYRNTrRZiyivDsyWgaqLBfhT5MfJ+U/8V2QfmwHIHP64fPt8Hlz4hyVIsnk/gDyS1UF3E8nn4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;unsplash-it&quot;
        title=&quot;unsplash-it&quot;
        src=&quot;/static/84df4d32be1cb1b35446be947fdcc80b/34e8a/2015-08-17_unsplashit.png&quot;
        srcset=&quot;/static/84df4d32be1cb1b35446be947fdcc80b/19bd1/2015-08-17_unsplashit.png 163w,
/static/84df4d32be1cb1b35446be947fdcc80b/d3bcb/2015-08-17_unsplashit.png 325w,
/static/84df4d32be1cb1b35446be947fdcc80b/34e8a/2015-08-17_unsplashit.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It was created by  &lt;a href=&quot;http://dmarby.se/&quot;&gt;David Marby&lt;/a&gt; and &lt;a href=&quot;https://github.com/Nijikokun&quot;&gt;Nijiko Yonskai&lt;/a&gt; and the code is publicly available at the github &lt;a href=&quot;https://github.com/DMarby/unsplash-it&quot;&gt;unsplash-it&lt;/a&gt; repository (if you are interested it is a NodeJS based project).&lt;/p&gt;
&lt;p&gt;But what does exactly unsplash.it? Basically it returns images from unsplash project with some steroids.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Retrieve an image indicating the desired width and height: &lt;a href=&quot;https://unsplash.it/500/400&quot;&gt;https://unsplash.it/500/400&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Using a square image: &lt;a href=&quot;https://unsplash.it/500&quot;&gt;https://unsplash.it/500&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Get a random image: &lt;a href=&quot;https://unsplash.it/500/400?random&quot;&gt;https://unsplash.it/500/400?random&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;or maybe grey styled: &lt;a href=&quot;https://unsplash.it/g/500/400?random&quot;&gt;https://unsplash.it/g/500/400?random&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Obtain a list of available images: &lt;a href=&quot;https://unsplash.it/list&quot;&gt;https://unsplash.it/list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;And retrieve a given image: &lt;a href=&quot;https://unsplash.it/500?image=123&quot;&gt;https://unsplash.it/500?image=123&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Maybe a bit blured: &lt;a href=&quot;https://unsplash.it/500?image=123&amp;#x26;blur&quot;&gt;https://unsplash.it/500?image=123&amp;#x26;blur&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;And finally, cropping if desired: &lt;a href=&quot;https://unsplash.it/500?image=123&amp;#x26;gravity=east&quot;&gt;https://unsplash.it/500?image=123&amp;#x26;gravity=east&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Yeah !!! &lt;a href=&quot;https://unsplash.it/&quot;&gt;unsplash.it&lt;/a&gt; is nice service easy and free to use.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Migrating from WordPress to Jekyll]]></title><description><![CDATA[WordPress is awesome, an incredible project with thousands of plugins that does not need any presentation. What start as a blogging platform has become a powerful framework to build almost anything. All that is fine, but... recently I migrated this blog from WordPress to Jekyll. The problem for me is WordPress starts as a quick solution to have a blog but has increasingly become a two big resource to administer. I have installed plugins to manage spam, to limit access login (for security reasons), to share content on social networks, to highlight source code, to add Google Analytics code, etc. I have a tech blog. I write about programming, libraries and how to do things, accompanied by sample code. WordPress WYSIWYG editor is great but not agile to write code. On the other side the test view of the content is poor and becomes affected by the visual view each time you change between tabs. Jekyll is much simpler than WordPress. It is much more less powerful than WordPress in many aspects but if offers me what I need in a more simpler way. Jekyll is an static site generator. Opposite to WordPress, written in PHP, where each request implies a query to get data, apply some process and finally return the resultant page, Jekyll has a completely different philosophy. With Jekyll you write content in markdown syntax and applying some rules, mainly a front matter section on pages and posts. Once you agree with your content Jekyll compiles them and builds an static version of all your content ready to be hosted. For those with a GitHub account, remember if you put all the content on a repository there is no need to compile because GitHub does it for you each time you push commit. Yes, you write directly in markdown syntax on any text editor, there is no visual editor like in WordPress, but it is exactly what I need: to have as much control as I can over what I write. In fact, the writing process results quickest than using the WYSIWYG mode in WordPress, especially when I require to write code. The migration process To be honest I must admit in my case it was a bit traumatic, in part because I'm a bit tiquismiquis with my things. The steps about the migration were basically: Export your WordPress content on Tools > Export menu.  Use jekyll-import tool to create a jekyll site from the WordPress export file. The tool creates all the posts and pages but unfortunally attach to much information on the front-matter section I don't like neither want. So I must apply many modification manually on each postand, in most cases to translate from HTML to markdown syntax (using the only to-markdown translator tool). Migrate all WordPress comments to Disqus platform. For this, I need to install the Disqus Comment System plugin and have a configured account. Once you configure the plugin all the comments are migrated automatically. Here the step was a bit more cumbersome because the new blog is in a different URL. So I need to export all the Disqus discussions, update manually all the URLs and import again in the system.  Chose a jekyll theme and adapt a bit for my needs. I chose the Kasper, a Ghost's theme ported to jekyll. I changed the theme to include some more header buttons (one for each page) and add random images, from the unsplash project using the nice unsplash.it service. The result is I have a blog I feel really comfortable :)]]></description><link>https://www.acuriousanimal.com/blog/2015/08/06/migrating-from-wordpress-to-jekyll</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/08/06/migrating-from-wordpress-to-jekyll</guid><pubDate>Tue, 11 Aug 2015 09:02:00 GMT</pubDate><content:encoded>&lt;p&gt;WordPress is awesome, an incredible project with thousands of plugins that does not need any presentation. What start as a blogging platform has become a powerful framework to build almost anything.&lt;/p&gt;
&lt;p&gt;All that is fine, but... recently I migrated this blog from WordPress to Jekyll.&lt;/p&gt;
&lt;p&gt;The problem for me is WordPress starts as a quick solution to have a blog but has increasingly become a two big resource to administer. I have installed plugins to manage spam, to limit access login (for security reasons), to share content on social networks, to highlight source code, to add Google Analytics code, etc.&lt;/p&gt;
&lt;p&gt;I have a tech blog. I write about programming, libraries and how to do things, accompanied by sample code. WordPress WYSIWYG editor is great but not agile to write code. On the other side the &lt;em&gt;test&lt;/em&gt; view of the content is poor and becomes affected by the &lt;em&gt;visual&lt;/em&gt; view each time you change between tabs.&lt;/p&gt;
&lt;p&gt;Jekyll is much simpler than WordPress. It is much more less powerful than WordPress in many aspects but if offers me what I need in a more simpler way.&lt;/p&gt;
&lt;p&gt;Jekyll is an static site generator. Opposite to WordPress, written in PHP, where each request implies a query to get data, apply some process and finally return the resultant page, Jekyll has a completely different philosophy. With Jekyll you write content in markdown syntax and applying some &lt;em&gt;rules&lt;/em&gt;, mainly a front matter section on pages and posts. Once you agree with your content Jekyll &lt;em&gt;compiles&lt;/em&gt; them and builds an static version of all your content ready to be hosted.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For those with a GitHub account, remember if you put all the content on a repository there is no need to &lt;em&gt;compile&lt;/em&gt; because GitHub does it for you each time you push commit.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yes, you write directly in markdown syntax on any text editor, there is no visual editor like in WordPress, but it is exactly what I need: to have as much control as I can over what I write. In fact, the writing process results quickest than using the WYSIWYG mode in WordPress, especially when I require to write code.&lt;/p&gt;
&lt;h2&gt;The migration process&lt;/h2&gt;
&lt;p&gt;To be honest I must admit in my case it was a bit traumatic, in part because I&apos;m a bit &lt;em&gt;tiquismiquis&lt;/em&gt; with my things.&lt;/p&gt;
&lt;p&gt;The steps about the migration were basically:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Export your WordPress content on Tools &gt; Export menu.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 418px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.85167464114832%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACGElEQVQoz52TTUjTYRzHR+GlmwcJxFY6N3VTt/nX6Tb3qtuca01LDTwUURFBHrqIeApTaSIdi6KSMrNDUAkegupa0KnC7IWiwux1b5oDnfXpeWYvl6Dm4cPv9xyeD9/f86IyVCsYjAq1FhvGGgslWj0lOj3a8koKCtUMDg4RSy9z68U8t19+4M6rj9wVyF5Wub7/5hPJZJJUKoVKcfoxO3x4w52CDrZVmLJoKhXyt2gZORFl6nWC/PFHmG48o+r6UwwCWcuuzaIRuKZm+RJPsCCFm3snKOqfRN13mcLecTYcGcuS1zOG6sBZotMPeJ9Icf7hW64+eceVmTkmBJMza/3Fx3NMP5//k7C47xIFRy+g6R+nVLDx0GnyDp9hU885VPtPMXDzHiynWf26wLelRb7/5FdPepHM0kJWJqUqxebC1RzE7Q9h9wZoCoSwOb0o9XbKDEaGR0ZZWVnhcyxOLJH8K3Eh+p2w0eNje1sH4fZOPL4gzcEwdlfTmrDSxMjoSTJCGBdnJDf8C5XV4cEfahMpW6hW6rOY6qzUWh3ohDCaq1Am2rPvIJGdXZjF06kRySTrFrrFmLu79xIMt2clUipZt9Du9uFr3UFACOX4xtoGlIZG6mxOyqrMuQvNFjsSmchidwmhNXsZevF7iop1HB+OkslkhDD+vyO34m0JE4p0sKurm0AoglpTTmlFtfh6Wzk2MMRqDsIfrOSxqzGbnjIAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;export&quot;
        title=&quot;export&quot;
        src=&quot;/static/6c875ece0ffb822627ca0853b5883aaa/8c6bb/2015-08-11_wordpress_export.png&quot;
        srcset=&quot;/static/6c875ece0ffb822627ca0853b5883aaa/19bd1/2015-08-11_wordpress_export.png 163w,
/static/6c875ece0ffb822627ca0853b5883aaa/d3bcb/2015-08-11_wordpress_export.png 325w,
/static/6c875ece0ffb822627ca0853b5883aaa/8c6bb/2015-08-11_wordpress_export.png 418w&quot;
        sizes=&quot;(max-width: 418px) 100vw, 418px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;a href=&quot;https://github.com/jekyll/jekyll-import&quot;&gt;jekyll-import&lt;/a&gt; tool to create a jekyll site from the WordPress export file. The tool creates all the posts and pages but unfortunally attach to much information on the front-matter section I don&apos;t like neither want. So I must apply many modification manually on each postand, in most cases to translate from HTML to markdown syntax (using the only &lt;a href=&quot;https://domchristie.github.io/to-markdown/&quot;&gt;to-markdown&lt;/a&gt; translator tool).&lt;/li&gt;
&lt;li&gt;Migrate all WordPress comments to &lt;a href=&quot;https://disqus.com/&quot;&gt;Disqus&lt;/a&gt; platform. For this, I need to install the &lt;a href=&quot;https://wordpress.org/plugins/disqus-comment-system/&quot;&gt;Disqus Comment System&lt;/a&gt; plugin and have a configured account. Once you configure the plugin all the comments are migrated automatically. Here the step was a bit more cumbersome because the new blog is in a different URL. So I need to export all the Disqus discussions, update manually all the URLs and import again in the system.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 287px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 30.313588850174217%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABLUlEQVQY012P7U7CQBBFef+XMcEEEYREouJHjMSPH4pgAsFCoa0t2+2223KcLmKMP07u7uzOnTuN5sTH1wVZYdkai7YVaVGicuv0gP5z/s/WFKgfGsfTDUtlUJkgpps44SvNSExOLBopTZAoR7hNHXWtZn/XLoS2pVNn6KsMIwaRSml3Tmh1+7TaXR5GIzr9cwYXl1wMh7TPelzf3cqfHkfNFqfydv/wRJqXZOXOsTfUVlYuiWXlDz/mYxnx7gUEktyPU8armEWkmIcJs1DxKeoJb17IWuUYMdqndAnXbPIKu0PWtNxNVzzOAgavnzwvQiJtuHpfciv1l0XA1dhjsk7wt4abyZJ5pJF2Z/aTUAxNRV5PESw4Chlgqv0apdxr6qHS6wwO9bza/ZrV+g1FqsQ8I4YYHQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;export&quot;
        title=&quot;export&quot;
        src=&quot;/static/eebf27bc794bf3000da661c139035b91/d92cc/2015-08-13_wp_disqus_pluguin.png&quot;
        srcset=&quot;/static/eebf27bc794bf3000da661c139035b91/19bd1/2015-08-13_wp_disqus_pluguin.png 163w,
/static/eebf27bc794bf3000da661c139035b91/d92cc/2015-08-13_wp_disqus_pluguin.png 287w&quot;
        sizes=&quot;(max-width: 287px) 100vw, 287px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chose a jekyll theme and adapt a bit for my needs. I chose the &lt;a href=&quot;https://github.com/rosario/kasper&quot;&gt;Kasper&lt;/a&gt;, a Ghost&apos;s theme ported to jekyll. I changed the theme to include some more header buttons (one for each page) and add random images, from the &lt;a href=&quot;https://unsplash.com/&quot;&gt;unsplash&lt;/a&gt; project using the nice &lt;a href=&quot;https://unsplash.it/&quot;&gt;unsplash.it&lt;/a&gt; service.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The result is I have a blog I feel really comfortable :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Working with different environments on jekyll]]></title><description><![CDATA[Jekyll is an open source static site generator. It allows writing content in markdown (also HTML) using some rules, like adding some front matter on pages or posts. Later jekyll compiles all the code and generates an static version for each page and post. The benefits of having an static site are mainly speed. Contrary to other blog engines like WordPress, where each request requires server works querying data, processing and returning the page, jekyll only does that work once, when the static site is built. Jekyll is also well known by the fact it is used by GitHub. If you host your jekyll posts on a GitHub repository you don't require to compile them because GitHub does for you each time you make a commit. If you are interested on this topic see pages and take a look at pages basics. A few days ago I migrate this blog from WordPress to Jekyll. Note its source code, with all the post I wrote and will write al publicly available at https://github.com/acanimal/acuriousanimal-blog.github.io. The method I follow to write is: I write in my local version of jekyll. Once I finish an article... I run jekyll locally to see all looks fine. If all is fine... I commit the changes to the GitHub repository. This makes GitHub compiles the posts and generates the same content like me. Something I missed from the beginning was the possibility to have a different configuration depending if on the environment. When working locally I want all links and images point to my local computer, while when I upload content to GitHub I want links to be relative to GitHub hosting. Hopefully this is really easy to achieve using more than one configuration file. I have a main  where all variables are set. Next is part of my current configuration file: In addition, I have a  file I only use when working locally. This files contains all variables I want to redefine when working locally. For example: Jekyll commands allow to specify more than one configuration file. We simply must remember a variable existent in a configuration file can be overridden with a value on the second file. Having this in mind, I run jekyll locally with the next command: This produces the value of  specified at  becomes overridden by the value of  variable specified at .]]></description><link>https://www.acuriousanimal.com/blog/2015/08/04/working-with-different-environments-on-jekyll</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/08/04/working-with-different-environments-on-jekyll</guid><pubDate>Tue, 04 Aug 2015 16:02:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://jekyllrb.com/&quot;&gt;Jekyll&lt;/a&gt; is an open source static site generator. It allows writing content in markdown (also HTML) using some rules, like adding some front matter on pages or posts. Later jekyll &lt;em&gt;compiles&lt;/em&gt; all the code and generates an static version for each page and post.&lt;/p&gt;
&lt;p&gt;The benefits of having an static site are mainly speed. Contrary to other blog engines like WordPress, where each request requires server works querying data, processing and returning the page, jekyll only does that work once, when the static site is built.&lt;/p&gt;
&lt;p&gt;Jekyll is also well known by the fact it is used by GitHub. If you host your jekyll posts on a GitHub repository you don&apos;t require to compile them because GitHub does for you each time you make a commit. If you are interested on this topic see &lt;a href=&quot;https://pages.github.com/&quot;&gt;pages&lt;/a&gt; and take a look at &lt;a href=&quot;https://help.github.com/categories/github-pages-basics/&quot;&gt;pages basics&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A few days ago I migrate this blog from WordPress to Jekyll. Note its source code, with all the post I wrote and will write al publicly available at &lt;a href=&quot;https://github.com/acanimal/acuriousanimal-blog.github.io&quot;&gt;https://github.com/acanimal/acuriousanimal-blog.github.io&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The method I follow to write is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I write in my local version of jekyll. Once I finish an article...&lt;/li&gt;
&lt;li&gt;I run jekyll locally to see all looks fine. If all is fine...&lt;/li&gt;
&lt;li&gt;I commit the changes to the GitHub repository. This makes GitHub compiles the posts and generates the same content like me.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Something I missed from the beginning was the possibility to have a different configuration depending if on the environment. When working locally I want all links and images point to my local computer, while when I upload content to GitHub I want links to be relative to GitHub hosting.&lt;/p&gt;
&lt;p&gt;Hopefully this is really easy to achieve using more than one configuration file.&lt;/p&gt;
&lt;p&gt;I have a main &lt;code class=&quot;language-text&quot;&gt;_config.yml&lt;/code&gt; where all variables are set. Next is part of my current configuration file:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;A Curious Animal&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Born to be curious, born to be animal !!!&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;meta_description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;technology, gis, javascript, web, mapping, openlayers, leaflet, jquery, acuriousanimal, acanimal&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;            &lt;span class=&quot;token string&quot;&gt;&quot;http://blog.acuriousanimal.com&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;         &lt;span class=&quot;token string&quot;&gt;&quot;acanimal&quot;&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;author_description&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Computer Science, passionate programmer and an eternal rookie guitar player.&quot;&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;markdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; redcarpet
&lt;span class=&quot;token key atrule&quot;&gt;highlighter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pygments&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In addition, I have a &lt;code class=&quot;language-text&quot;&gt;_config-dev-yml&lt;/code&gt; file I only use when working locally. This files contains all variables I want to redefine when working locally. For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yaml&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-yaml line-numbers&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:4000&apos;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Jekyll commands allow to specify more than one configuration file. We simply must remember a variable existent in a configuration file can be overridden with a value on the second file. Having this in mind, I run jekyll locally with the next command:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-bash line-numbers&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; jekyll serve --config _config.yml,_config-dev.yml&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This produces the value of &lt;code class=&quot;language-text&quot;&gt;url&lt;/code&gt; specified at &lt;code class=&quot;language-text&quot;&gt;_config.yml&lt;/code&gt; becomes overridden by the value of &lt;code class=&quot;language-text&quot;&gt;url&lt;/code&gt; variable specified at &lt;code class=&quot;language-text&quot;&gt;_config-dev.yml&lt;/code&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Generate and host your own raster tiles customized with Mapbox Studio]]></title><description><![CDATA[If you have never saw maps hosted in Mapbox platform you would probablyÂ agree onÂ the quality of its designs.Â The business of Mapbox is to host and server geospatial data. For this reason, all the great tools Mapbox facilitates are oriented to help their users to prepare and work with their data. One of the providedÂ toolsÂ isÂ Mapbox Studio.Â Mapbox Studio (MbS) is a desktop application that allows to create CartoCSS themes that are later used to generate raster tiles. Briefly explained, what MbS does is to download OpenStreetMap data in vector format and render it on the fly applying the specified CartoCSS style. The result of working with MbS is not a set of tilesÂ but a style, that is, a set of rules that express which colour must be used to render roads, at which levels must labels appears and with which size, which colour must be used for ground, etc. This style can be later uploaded to Mapbox platform so that raster tiles were generated on the cloud and we can consume the tiles paying for the service.Â (Hope one day I can contract their services, they deserve by their great job). The question we can make us is: how we can generate the raster tiles locally from a given MbS style? Well, this article is about that. Continue reading. Working with Mapbox Studio and create your custom style Let's start from the beginning so download Mapbox Studio application and install on your system. Once installed execute it and you will be asked to be connected to the Mapbox platform. There are two main reasons why Mapbox requires you to register as a user. First, the power of the platform is on the cloud and the goal is you upload all your data to the servers. That includes the styles you create. Second, MbS retrieves data in vector format from Mapbox servers. When you register as a user you get an API token that identifies your requests. Each time MbS makes a request to extract data it has your token that identifies you as user. This way Mapbox can control if anyÂ user is making a bad usage of their platform.  Once logged in you will be allowed to create new map styles. The easiest way is to start using one of the starter styles created by the great Mapbox designers:  Here we have chose the Mapbox Outdoors style. In the image you can see the style code (CartoCSS which is inspered by CSS) and the resultant tiles obtaining from painting the vector information with the given style rules: CartoCSS is a Mapnik stylesheet pre-processor developed by MapBox and inspired by Cascadenik. It is like a CSS language specially developed to style maps.  Store the style with a new name somewhere on your computer, for example, . If you look at your disk you will see a  folder has been created containing a bunch of files that defines the style rules (take a look they are not dangerous). Finally, modify some properties, for example  or  colors and save to see the result:  Great !!! You just have created your first custom style. Generating raster tiles from MbS style Looking for a solution I discovered the tesseraÂ and tl tools.Â Tessera is a node based command line application. It is based in some modules from mapbox (concretely tilelive) plus others implemented by the author (Seth Fitzsimmons). The result is we can execute tessera passing a MbS defined style, open a browser pointing to a local address and see a map with the raster tiles generated with our MbS style. Similarly, tl is a node based command line tool we can execute, passing a set of options, to generate a MBTiles file or a pyramid of tiles following the well known  format. I know about both tools at the articleÂ Converting Mapbox Studio Vector Tiles to RastersÂ from Azavea Labs. How to install the tools? NOTE: You need to have NodeJS installed in your system, along with the npm package manager command line tools. I don't like to install global node packages (or at least more than the necessary) so I'm going to install the previous tools in a custom folder: {% highlight bash %} mkdir tiletools
cd tiletools
{% endhighlight %} Inside the directory execute next sentence, which install the  and  packages among others: {% highlight bash %} npm install tessera tl mbtiles mapnik tilelive tilelive-file tilelive-http tilelive-mapbox tilelive-mapnik tilelive-s3 tilelive-tmsource tilelive-tmstyle tilelive-utfgrid tilelive-vector tilejson
{% endhighlight %} You will see a hidden directory namedÂ  has been created which contains some subdirectories with the same name as the previous packages. Running tessera Let's try to run tessera for the first time. Because it is installed as a local node module execute: {% highlight bash %} ./node_modules/tessera/bin/tessera.js Usage: node tessera.js uri options uri     tilelive URI to serve Options:
   -C SIZE, --cache-size SIZE          Set the cache size (in MB)  10
   -c CONFIG, --config CONFIG          Provide a configuration file
   -p PORT, --port PORT                Set the HTTP Port  8080
   -r MODULE, --require MODULE         Require a specific tilelive module
   -S SIZE, --source-cache-size SIZE   Set the source cache size (in # of sources)  10
   -v, --version                       Show version info A tilelive URI or configuration file is required.
{% endhighlight %} Tessera requires you pass an URI so it can server its content. It accepts URIs from Mapbox hosted file, Mapnik, Tilemill, Mapbox Studio, ... Repeat again indicating the path to our previously created style indicating the protocolÂ . {% highlight bash %} ./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at http://0.0.0.0:8080/ /Users/antonio/Downloads/tiletools/nodemodules/tessera/server.js:43
        throw err;
              ^
Error: A Mapbox access accessToken is required. `export MAPBOXACCESS_TOKEN=...` to set.
...
{% endhighlight %} First seems tessera is working at port 8080 but later we get an error about . If you remember from the first section, Mapbox requires all the requests be signed with the user token. So, you need to get the access token from your account and set it as environment variable before execute tessera: {% highlight bash %} export MAPBOXACCESSTOKEN=yourtokenhere
./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at http://0.0.0.0:8080/ /Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
        throw err;
              ^
Error: Failed to find font face 'Open Sans Bold' in FontSet 'fontset-0' in FontSet
{% endhighlight %} We are close to make it work. The problem now is our MbS style is using a font we have not installed in our system. One easy, but brute force, solution is to install all Google Web Fonts on your system. For this purpose you can use the Web Font Load installation script. In my case I have installed them in the user's fonts folder . Once fonts were installed try executing tessera again: {% highlight bash %} ./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at http://0.0.0.0:8080/ /Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
        throw err;
              ^
Error: Failed to find font face 'Open Sans Bold' in FontSet 'fontset-0' in FontSet
{% endhighlight %} That' s a bit strange, we have just installed the fonts but they are not found. What is happening? Well, tessera uses mapnik to create the raster tiles and it looks for fonts in the folders specified byÂ the environment variable , so let define the variable: {% highlight bash %} export MAPNIKFONTPATH=~/Library/Fonts/
{% endhighlight %} and execute the script again: {% highlight bash %} ./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at http://0.0.0.0:8080/ /Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
        throw err;
              ^
Error: Failed to find font face 'Arial Unicode MS Regular' in FontSet 'fontset-0' in FontSet
{% endhighlight %} OMG !!! This seems a never ending story. Now we need to install the Arial Unicode font. Look for it,Â install in your system and execute tessera again: {% highlight bash %} ./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at http://0.0.0.0:8080/
{% endhighlight %} Great !!! It seems tessera is working fine. Let's go to open our browser pointing to  and see the result:  A map implemented using Leaflet web mapping library is shown, rendering raster tiles that are created in the fly. Look at the console to see the tessera output information:  We can see how tiles at current zoom, the zoom level 8, has been generated. At this point we have tessera working but what about generate a local pyramid of tiles for a given zoom levels and a given bounding box? Generating a custom pyramid of tiles with tl command line tool Before continue we need to know which bounding box we want to generate, the whole World? or only a piece. In my case I want three zoom levels (7, 8 and 9) wrapping Catalonia. There are some online tools you can use to get the bbox of a region, but one I like it the Bounding Box Tool from Klokan Technologies. The tl tool can run three main commands but are only interested in the copy one, which copies data between two providers. In our case the MbS style is one provider and the file system is the other. Run the tl command to see the available options: {% highlight bash %} ./node_modules/tl/bin/tl.js copy --help Usage: node tl.js copy   options source     source URI
sink       sink URI Options:
   -v, --version                 Show version info
   -b BBOX, --bounds BBOX        WGS84 bounding box  -180,-85.0511,180,85.0511
   -z ZOOM, --min-zoom ZOOM      Min zoom (inclusive)  0
   -Z ZOOM, --max-zoom ZOOM      Max zoom (inclusive)  22
   -r MODULE, --require MODULE   Require a specific tilelive module
   -s SCHEME, --scheme SCHEME    Copy scheme  scanline
   -i FILE, --info FILE          TileJSON copy data between tilelive providers
{% endhighlight %} So let's go to execute the command to copy data from our MbS style to the local  folder. We want to generate tiles from zoom level 7 to 9 and indicating a bounding box wrapping Catalonia. Remember the  options must be indicated as . {% highlight bash %} ./node_modules/tl/bin/tl.js copy -z 7 -Z 9 -b "0.023293972 40.4104003077 3.6146087646 42.9542303723" tmstyle://./customstyle.tm2/ file://./tiles
Segmentation fault: 11
{% endhighlight %} Ough !!! That hurts, a segmentation fault. After looking for a while I realised it seems a bug. To solve it go to  and remove the  folder dependency. It is redundant because there is one installed in parent folder. Execute the command again and see the output:  The tl tool has created a local tiles directory and generated all the raster tiles for the given zoom levels and bounding box.Â The output shows in addition the time required to generate each tile. That's all. Now we only need to host the tiles at our own servers !!!]]></description><link>https://www.acuriousanimal.com/blog/2015/07/26/generate-and-host-your-own-raster-tiles-customized-with-mapbox-studio</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/07/26/generate-and-host-your-own-raster-tiles-customized-with-mapbox-studio</guid><pubDate>Sun, 26 Jul 2015 14:47:00 GMT</pubDate><content:encoded>&lt;p&gt;If you have never saw maps hosted in Mapbox platform you would probablyÂ agree onÂ the quality of its designs.Â The business of &lt;a href=&quot;https://www.mapbox.com/&quot;&gt;Mapbox&lt;/a&gt; is to host and server geospatial data. For this reason, all the great tools Mapbox facilitates are oriented to help their users to prepare and work with their data.&lt;/p&gt;
&lt;p&gt;One of the providedÂ toolsÂ isÂ &lt;a href=&quot;https://www.mapbox.com/mapbox-studio/&quot;&gt;Mapbox Studio&lt;/a&gt;.Â Mapbox Studio (MbS) is a desktop application that allows to create &lt;a href=&quot;https://www.mapbox.com/guides/cartocss-in-studio/&quot;&gt;CartoCSS&lt;/a&gt; themes that are later used to generate raster tiles. Briefly explained, what MbS does is to download OpenStreetMap data in vector format and render it on the fly applying the specified CartoCSS style.&lt;/p&gt;
&lt;p&gt;The result of working with MbS is not a set of tilesÂ but a style, that is, a set of rules that express which colour must be used to render roads, at which levels must labels appears and with which size, which colour must be used for ground, etc. This style can be later uploaded to Mapbox platform so that raster tiles were generated on the cloud and we can consume the tiles paying for the service.Â (Hope one day I can contract their services, they deserve by their great job).&lt;/p&gt;
&lt;p&gt;The question we can make us is: &lt;em&gt;&lt;strong&gt;how we can generate the raster tiles locally from a given MbS style?&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Well, this article is about that. Continue reading.&lt;/p&gt;
&lt;h2&gt;Working with Mapbox Studio and create your custom style&lt;/h2&gt;
&lt;p&gt;Let&apos;s start from the beginning so &lt;a href=&quot;https://www.mapbox.com/mapbox-studio/&quot;&gt;download&lt;/a&gt; Mapbox Studio application and install on your system. Once installed execute it and you will be asked to be connected to the Mapbox platform.&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQ4y52RS08TURSAZ4HxD6AWTFlJ3LjoUCnzqCVEQ0ElkyoJbsQYY9KGlQuCS+j7GQmi4itxobFsjAnBGXVmStspBZq2GzWuYMFGRV2YsBCZOd47M0UKvif5ck7O47snGeKpd3JPVpodFMqLQ/PVt16l8tqnVN74cCxUjTgjKb7ZTFHPFbNmzOi5F80N5cuvLjyYfrKXOHx8cH9vQljn7lWAu7UE3FRpF303FxE/7+Edz90q9KbEr0f6rxwkGinOQo7y7+yhDLQFxQ3Et52Qgd21bWzYQzKQo8/Wmk9ctBIW5ozF4ec/0PEcUBFJRWjbYaKy5opnNGcso9ERWdvZxzt0LAuOgPDJ6r6EhR4sXMPCjrCkInDEcnCEJDgaFOH0dQVOTuTBjvL2kNGrzeEdCgv9wmdr9y+EVETWZd3XcnDuzgL0TxVh4PYCnL+/BO7xnCmVt4T0n4XoOhQ7E3PQN6nAqQl8oQLcjYJec4Trrvw7IY7OmAyuuIwuzUIPugznuKaL/kVYG2aiGehMZvWrXCa49lvhAdpjaffz76noHGqKm6ZUhw2/ULsigtoVfa6yQV6lx2ZUKsCbfbEWNyn0CDrqo3Ehe7apI/Tyi3O8BEyyAEyquAWbKoAzqcCxlAJMIg/4bzIJpW6GSc4Di3aRY72l53IL0djm3mcbflgiR9Kr5MjjZcTKD9IrNhOck1enjVg3g3fSq7bhR+Um10Azgb4GhBXRijj0n7SajobvHTYzwwGFeyUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015 07 25 at 23 43 15 1024x680&quot;
        title=&quot;Screen Shot 2015 07 25 at 23 43 15 1024x680&quot;
        src=&quot;/static/928f9885bb7091dfc023cd9b14b45a27/dbb61/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png&quot;
        srcset=&quot;/static/928f9885bb7091dfc023cd9b14b45a27/19bd1/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png 163w,
/static/928f9885bb7091dfc023cd9b14b45a27/d3bcb/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png 325w,
/static/928f9885bb7091dfc023cd9b14b45a27/dbb61/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png 650w,
/static/928f9885bb7091dfc023cd9b14b45a27/6b691/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png 975w,
/static/928f9885bb7091dfc023cd9b14b45a27/3b243/Screen-Shot-2015-07-25-at-23.43.15-1024x680.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;There are two main reasons why Mapbox requires you to register as a user. First, the power of the platform is on the cloud and the goal is you upload all your data to the servers. That includes the styles you create.&lt;/p&gt;
&lt;p&gt;Second, MbS retrieves data in vector format from Mapbox servers. When you register as a user you get an API token that identifies your requests. Each time MbS makes a request to extract data it has your token that identifies you as user. This way Mapbox can control if anyÂ user is making a bad usage of their platform.&lt;br&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACm0lEQVQ4y52Q60tTcRjHzwujF4WX6XRrHt3lnM2d4za3lWlKkZvkxirMEaLVyLBcRhkVhlBohYRQidmFbr7oJpkTka5CtHOkN1L9BSnRm8qMiJTytPP0/I5rGSpEP/jwnPM83+/3d6EiofYlzwZv7ngoPGocEV80REUxLCBRQQiLiCBEw4MDkfAQIuI36ZGZ8Fsnig2CONL4PCqEbvT0LKVonT6zsHTdVIm3Ako8c/D6odjjhyJSq7ZBcWUtrPb4oAh7JeX+hG6NZwOUen1QuLbsh5616KhlqSqNjuHeZ7M8ZLPcTLaZl3RGVrLWHJPWt/VL3uN3JM+JPuS+5GvrlbwnI5J1eytqzBLRKh6WAx1jnUhOV9NUiipDY+DsH035TjDyBTFjvlM2WDjZvf+SHLj8Sg50ibLnTFQuQ8rPIt2jsqvpqmzI42WiJR7iNXCOSVWmlqaSMVBvtU/gAJsYyOPQwoFzbye4WvrA0XQdHAd7wI7YDlyDgqP3wLWvGzU8KB5yCKyY8TltfqAjEZi/pxNWtT4AV3Mv2I70Anf4LnCHbgPfMgh8+Lyi+efAXDMHFc0XYcu5JxA41Qeb2vsh2DEAwdP9UN31FPwtVxSNsrniWTBw9g3Je+hMeTD0eBhuvZ6EjuE3cEF4C1++TcPM92kgSxRF0BotkHj3RQPju+Xm2cBXuRWqQrthY00dbK7dBTU766G2rh5C9WEIBKsVzZ9bzQ/8EB/+jAtieIJYVq4pptEzsSxEnWNCmFgGjT2DWdEQLfHEAz/FA9VabH5l7G7lCiabC6sLWPxnHSsTmOfA/qV1AmNzk8NMqbK0OdTy1DQ1zVpHc8zcO5rlxpDxhcD5+CKzsVmv9WVKeuYKClcSQiMswvwnbDwj6Rfcsph85R2QtwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015-07-25 at 23.43.26&quot;
        title=&quot;Screen Shot 2015-07-25 at 23.43.26&quot;
        src=&quot;/static/c4bef936ec3084ba5ef4c05341dc0817/dbb61/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png&quot;
        srcset=&quot;/static/c4bef936ec3084ba5ef4c05341dc0817/19bd1/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png 163w,
/static/c4bef936ec3084ba5ef4c05341dc0817/d3bcb/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png 325w,
/static/c4bef936ec3084ba5ef4c05341dc0817/dbb61/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png 650w,
/static/c4bef936ec3084ba5ef4c05341dc0817/6b691/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png 975w,
/static/c4bef936ec3084ba5ef4c05341dc0817/3b243/Screen-Shot-2015-07-25-at-23.43.26-1024x680.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Once logged in you will be allowed to create new map styles. The easiest way is to start using one of the starter styles created by the great Mapbox designers:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADdUlEQVQ4y5WSXUybVRjHXwnIFifYZa0vmhISviwGtND2bSlQwHYt7cZHqVtphJYOcQ0JqF0C65dVRoGRTZbRWWtLtwnqROVCw4U6hN4aQwL3ey92o1Z3YbIL15337+nrtsRLL/55nnOS8z+/54PZdM+V/PD16sh3P307kd3Jnr19+0ff9va2b2dnx5fNZn27u7u+zc1N39bWlu/g4IBq37e/v/8oF3V2b29vgr5xLy8vlzLSw4dkKqvzfscJB05ae/Ca0Yju7m6YzWZYbTZYrVYY6Z3dbkckEkEwGBQVCASexFgsBq/X+3dVVdWLzNMlRays+uVfG15pgcVkfKDVavMqlSpfiFqOy+u0nJjr9fp8W1ubGAvq7OzMt7e353U63YORkRHMzMzkNBqNnCkrL2crZNLfm5VKeMbeIk7XG8Lw8LDQ2z8g9A4OCrZ+u9Bvtwsmo1GgpEJXV5fQ0dEh9PX1CRaLRTAYDGR0dBShUOhPai5nJEePslKZLKfV6ZD6coskNr7Hzc++wZvvnMOQP4B3Y0uYjkahUChQX18vipKgrq4O1dXVqKysJBQA4XD4nkgokUhYqVSa4zgNVlMpkrl+AysrKzjn9+Na/Bpu0HM4HCkQIJ1OIx6Pw+12o6mpSTRubGwkhXPBkOM4OXPkyLNsRQWbU2l09HGKbKwnkUx8hGA4hCQ1W1tfxeLiLObn57G+tobrmQzOeL2g/RSHRct/XPK9f0sWCY/lVGoNrsQvkkTyMpYuzcN/3o8P0wkkPk3ivbkIps8HsLB0EdHZ93Ha6USbXg/aT9ABPTGkw5Mzsudl7HMSSU6jVuHC1UUSvRJDaCEC3/QEglc/QPSTBGbmZuF0ezE2+TZc4+M4bjtRIBMNKel/DY/JWFZSXvbbS00tWEhmHn5x6yZJpz4mg45+YjKbiMNhJxbbSTJ9YZF8dWuVbHyeIWNnPKS1tZVQQ0IJH3o8nsJO/iEaPnPocEVNbc1fOk6LOcspXHIMYWFyki7ygNgjS08PTMfN6B0YwJDrdbhcp+iy91C67sc9xDilpkt/n35SyRQ/VSRVNDT83KJ89e5wnfKOW9HMn2438AZtK6/hOJ5OjqcLzqvVKr65uUUUnS5PaXg6BHqvvuNwOO5OTU39olQqX2BKSkuLGYaRU9Uy5UU1TFlxDc3/r2ofeRT/AwfV0+tthqF/AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015-07-25 at 23.47.38&quot;
        title=&quot;Screen Shot 2015-07-25 at 23.47.38&quot;
        src=&quot;/static/8555c62ce7a37effc9ba46d7e4f1ac2c/dbb61/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png&quot;
        srcset=&quot;/static/8555c62ce7a37effc9ba46d7e4f1ac2c/19bd1/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png 163w,
/static/8555c62ce7a37effc9ba46d7e4f1ac2c/d3bcb/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png 325w,
/static/8555c62ce7a37effc9ba46d7e4f1ac2c/dbb61/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png 650w,
/static/8555c62ce7a37effc9ba46d7e4f1ac2c/6b691/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png 975w,
/static/8555c62ce7a37effc9ba46d7e4f1ac2c/3b243/Screen-Shot-2015-07-25-at-23.47.38-1024x680.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Here we have chose the &lt;em&gt;Mapbox Outdoors&lt;/em&gt; style. In the image you can see the style code (CartoCSS which is inspered by CSS) and the resultant tiles obtaining from painting the vector information with the given style rules:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.openstreetmap.org/wiki/CartoCSS&quot;&gt;CartoCSS&lt;/a&gt; is a &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/Mapnik&quot; title=&quot;Mapnik&quot;&gt;Mapnik&lt;/a&gt; &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/Stylesheet&quot; title=&quot;Stylesheet&quot;&gt;stylesheet&lt;/a&gt; pre-processor developed by &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/MapBox&quot; title=&quot;MapBox&quot;&gt;MapBox&lt;/a&gt; and inspired by &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/Cascadenik&quot; title=&quot;Cascadenik&quot;&gt;Cascadenik&lt;/a&gt;. It is like a CSS language specially developed to style maps.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADUklEQVQ4y52Ty28bVRTGZ1HEgrJAVStDcUwU6pCoz+B/gSV7ViB2tbKLIkFLWyuJ01aFVlWDVFLxkNiQsEE0FSoQO3GcpPakTuJ3Zsb2zDh+T2bsOH7EHt/5uHZKJLYc6dPR3fz0feecyzz9/M5rrt9++nTBtTDqdq1cXVx0291uj3152Wv/+y+X3UXfc3O/2hcW/rAnEgk7zwv2nR3OznHHusrz/KjH4/lsamrqdWbgrTfOfHztu/rY/Sf4/vEDzD75FrOzM/jxh8d4NHMf3zy4B6fzFuZ++RndardbaDYaaDabxyKEYH5+vmWz2c4y7717ynTho08Kt2ceoqyF2oXilp7LBvQ8VVJm9Z3ECz3G+fUdidNrlZquaRVdq1T1dqulHx4edtWmhUqlojgcDjNjHbSaLgwNlhy3voAkhUmc9xlJ+aUhpTcNUWaNVHrbYAXBCMqyoaZVIycphpAuGOX9A6Nerxu1Wo1QKMrlsup0Os3MwEC/6fz5i8pXN79EIOgj3rVlLHn/xPLKIthND4JxFj5eQFiWUM5qyGcU8LtFNF7Fpp3out4FapOTk2ZmcHDANDQ0rEw5ryOnBEmU82ErvIpAyIuN7SWEOS9YgUNIkqCm95ChQDmvollv9KDUHenOkEY+AlosZ02XLl1W7n3tQL0uEEncQDa7BTnNIhxbQpDbBJtIICSK0PIa1KyKfGGPqoT9agUHBzXSarWgqqrWm+HwsNVktX6g3L17A+UqR3jBB4663A6/gD8UgJ/nj4CSCDWjokBdypJCARro/LqxSafT6TmcmJgwMx/aLpssln5l0nkNRTVCItw62HicQpLYSCbxksJY4QhYEksoSSr4VBGqUvn3bI6BvchdYF+fpXj95jiyhVBnkwsRfyJJqDNCt0somPhoD6aSZF+tkGq5SsrVA1JvNkgXRufY6UamS9nrOezv73v7ypWR6u07N5BVJQQzOUTzOURyR53Py4jmMpCUHEhbR/fmemXgP0Xj16enp/uY02dOnR4ZsW2Mj4/uuvzrqd89K+IzL9XqqvjUvSiurz8Tn68tic9X18RoJCJGo1ExFouJ8UhcpF9OFAQhRb/kbjweD4yNjb3DnDz55gmGYcxU56je/58694px4h8FNvF7WSGOxAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015-07-25 at 23.54.20&quot;
        title=&quot;Screen Shot 2015-07-25 at 23.54.20&quot;
        src=&quot;/static/7d14da8bc929b84b9233767d305f1f9c/dbb61/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png&quot;
        srcset=&quot;/static/7d14da8bc929b84b9233767d305f1f9c/19bd1/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png 163w,
/static/7d14da8bc929b84b9233767d305f1f9c/d3bcb/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png 325w,
/static/7d14da8bc929b84b9233767d305f1f9c/dbb61/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png 650w,
/static/7d14da8bc929b84b9233767d305f1f9c/6b691/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png 975w,
/static/7d14da8bc929b84b9233767d305f1f9c/3b243/Screen-Shot-2015-07-25-at-23.54.20-1024x680.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Store the style with a new name somewhere on your computer, for example, &lt;code class=&quot;language-text&quot;&gt;customstyle&lt;/code&gt;. If you look at your disk you will see a &lt;code class=&quot;language-text&quot;&gt;customstyle.tm2&lt;/code&gt; folder has been created containing a bunch of files that defines the style rules (take a look they are not dangerous).&lt;/p&gt;
&lt;p&gt;Finally, modify some properties, for example &lt;code class=&quot;language-text&quot;&gt;@land&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;@crop&lt;/code&gt; colors and save to see the result:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.40625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADb0lEQVQ4y52T3U+bVRzHn4sZL+aF0bjULR0F6YXbYOvQv0Ljn6DxwmTNksnY3OLILBQqRVmoi/FOBrqpyMQ8faOjpaWl0PUFJqNvtB3PsEXo+wt9oTw9z9fT7iXx1l/yzTnn4nzy/f7O+THsp+pXbOzUx3qb4aLD5rxgX3TIl+xO+bJzRb5gsckXzFb59K8zcp1+Th6LxeSRSFQeDoflm5ubL3QhEolcDIVCn8zOzr7KSNvaj3304QeVvqu9+P4HDcY0oxi/PfZsP67Gre9GoVTdxC/37qBZh4d11GpVqlpL1WoVhBAkEon6yMjICUYsOSHq7pbtKZTXsfFk6dD5l5FfcLO80X6fX1zX8fYQy88/1PEmj4+vFit8JpPnk9kCX6/X+YODg6YOaaFYLKYHBgbETKe0Q9TddTbVr7iOR6EV8tBvFtybFsEVoGvYJLj8VmFMtyxMLAWEYiInxLeSQpDbFXKFklCpVIRyuUwoFPl8Pjs0NCRmJO+0ibrOdKWv9PfCsvqA6K1asIt/QGubpWctTB4Thlk3fnb6UdrNYyeRQjSebEV9HpnwPI9CoZBTKpVipqNTIjp96kz62s1euGPzxBO0wvH4AUw+Fgbffcyv/Q7N3DLuOPwo7mQRj6ewvZtFrVJtQak70uzhS6Do+DHReVkPBV6GO2ghFhcLx5oRgSeLcAb+BOuew6jegynHBoqpPDIUurvXVArFUgH7+2VC+4lsNptTKBTUobRddOrd0+krX16CK2glSz4T7B4DLC4z7s5boDF6MKz14qclCvwnh72/M9h+mqaAHGj/mrFJo9FoORwcHBQzsvPdIomkI92vuIrgzgpxrs9hwrwCtd6HUcMabhl9+FrnxRQFZrfTSD7NIrKVRDZdePF1XgJbkWXvnRW1nZQkr311GbE9V+Oe1UxUWi/5xkCl9xK1fpUMsR4yaV8n5XyRFPMlki/tk0qtSpow2sdGMzJ95UzLYVu7+G3ZuZ7SsPoGPLE1aCwBaKxBaBaerRPODdy2Pob2URSgTpqXWyXgP0XjV1Qq1UnmjTdff6un533vpc8/i4/PsFtf/Gjg+if13I1JA6eY1HLTurvc2G8z3LfTZi4c9HN+f4ALBoNcyB/i6Mhx0Wh0i45knI7eal9f33Hm6NHXjjAMI6aSUnX+T0mfM478C8gp2Jh7gedDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015-07-25 at 23.54.47&quot;
        title=&quot;Screen Shot 2015-07-25 at 23.54.47&quot;
        src=&quot;/static/50ca2991cafbf2042a25c345746d1800/dbb61/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png&quot;
        srcset=&quot;/static/50ca2991cafbf2042a25c345746d1800/19bd1/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png 163w,
/static/50ca2991cafbf2042a25c345746d1800/d3bcb/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png 325w,
/static/50ca2991cafbf2042a25c345746d1800/dbb61/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png 650w,
/static/50ca2991cafbf2042a25c345746d1800/6b691/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png 975w,
/static/50ca2991cafbf2042a25c345746d1800/3b243/Screen-Shot-2015-07-25-at-23.54.47-1024x680.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Great !!! You just have created your first custom style.&lt;/p&gt;
&lt;h2&gt;Generating raster tiles from MbS style&lt;/h2&gt;
&lt;p&gt;Looking for a solution I discovered the &lt;a href=&quot;https://github.com/mojodna/tessera&quot;&gt;tessera&lt;/a&gt;Â and &lt;a href=&quot;https://github.com/mojodna/tl&quot;&gt;tl&lt;/a&gt; tools.Â &lt;em&gt;Tessera&lt;/em&gt; is a node based command line application. It is based in some modules from mapbox (concretely tilelive) plus others implemented by the author (&lt;a href=&quot;https://github.com/mojodna&quot;&gt;Seth Fitzsimmons&lt;/a&gt;). The result is we can execute tessera passing a MbS defined style, open a browser pointing to a local address and see a map with the raster tiles generated with our MbS style.&lt;/p&gt;
&lt;p&gt;Similarly, &lt;em&gt;tl&lt;/em&gt; is a node based command line tool we can execute, passing a set of options, to generate a &lt;a href=&quot;https://www.mapbox.com/guides/an-open-platform/#mbtiles&quot;&gt;MBTiles&lt;/a&gt; file or a pyramid of tiles following the well known &lt;code class=&quot;language-text&quot;&gt;z/x/y.png&lt;/code&gt; format.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I know about both tools at the articleÂ &lt;a href=&quot;http://www.azavea.com/blogs/labs/2015/05/converting-mapbox-studio-vector-tiles-to-rasters/&quot;&gt;Converting Mapbox Studio Vector Tiles to Rasters&lt;/a&gt;Â from &lt;a href=&quot;http://www.azavea.com/&quot;&gt;Azavea&lt;/a&gt; Labs.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;How to install the tools?&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: You need to have &lt;a href=&quot;https://nodejs.org/&quot;&gt;NodeJS&lt;/a&gt; installed in your system, along with the npm package manager command line tools.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I don&apos;t like to install global node packages (or at least more than the necessary) so I&apos;m going to install the previous tools in a custom folder:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;mkdir tiletools
cd tiletools
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Inside the directory execute next sentence, which install the &lt;code class=&quot;language-text&quot;&gt;tessera&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;tl&lt;/code&gt; packages among others:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm install tessera tl mbtiles mapnik tilelive tilelive-file tilelive-http tilelive-mapbox tilelive-mapnik tilelive-s3 tilelive-tmsource tilelive-tmstyle tilelive-utfgrid tilelive-vector tilejson
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You will see a hidden directory namedÂ &lt;code class=&quot;language-text&quot;&gt;.npm_modules&lt;/code&gt; has been created which contains some subdirectories with the same name as the previous packages.&lt;/p&gt;
&lt;h3&gt;Running tessera&lt;/h3&gt;
&lt;p&gt;Let&apos;s try to run tessera for the first time. Because it is installed as a local node module execute:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tessera/bin/tessera.js&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Usage: node tessera.js [uri] [options]&lt;/p&gt;
&lt;p&gt;uri     tilelive URI to serve&lt;/p&gt;
&lt;p&gt;Options:
-C SIZE, --cache-size SIZE          Set the cache size (in MB)  [10]
-c CONFIG, --config CONFIG          Provide a configuration file
-p PORT, --port PORT                Set the HTTP Port  [8080]
-r MODULE, --require MODULE         Require a specific tilelive module
-S SIZE, --source-cache-size SIZE   Set the source cache size (in # of sources)  [10]
-v, --version                       Show version info&lt;/p&gt;
&lt;p&gt;A tilelive URI or configuration file is required.
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;Tessera requires you pass an URI so it can server its content. It accepts URIs from Mapbox hosted file, Mapnik, Tilemill, Mapbox Studio, ...&lt;/p&gt;
&lt;p&gt;Repeat again indicating the path to our previously created style indicating the protocolÂ &lt;code class=&quot;language-text&quot;&gt;tmstyle://&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at &lt;a href=&quot;http://0.0.0.0:8080/&quot;&gt;http://0.0.0.0:8080/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;/Users/antonio/Downloads/tiletools/node&lt;em&gt;modules/tessera/server.js:43
throw err;
^
Error: A Mapbox access accessToken is required. `export MAPBOX&lt;/em&gt;ACCESS_TOKEN=...` to set.
...
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;First seems tessera is working at port 8080 but later we get an error about &lt;code class=&quot;language-text&quot;&gt;MAPBOX_ACCESS_TOKEN&lt;/code&gt;. If you remember from the first section, Mapbox requires all the requests be signed with the user token. So, you need to get the access token from your account and set it as environment variable before execute tessera:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;export MAPBOX&lt;em&gt;ACCESS&lt;/em&gt;TOKEN=your&lt;em&gt;token&lt;/em&gt;here
./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at &lt;a href=&quot;http://0.0.0.0:8080/&quot;&gt;http://0.0.0.0:8080/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;/Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
throw err;
^
Error: Failed to find font face &apos;Open Sans Bold&apos; in FontSet &apos;fontset-0&apos; in FontSet
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;We are close to make it work. The problem now is our MbS style is using a font we have not installed in our system. One easy, but brute force, solution is to install all Google Web Fonts on your system. For this purpose you can use the &lt;a href=&quot;http://webfontload.com/&quot;&gt;Web Font Load&lt;/a&gt; installation script. In my case I have installed them in the user&apos;s fonts folder &lt;code class=&quot;language-text&quot;&gt;~/Library/Fonts&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Once fonts were installed try executing tessera again:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at &lt;a href=&quot;http://0.0.0.0:8080/&quot;&gt;http://0.0.0.0:8080/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;/Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
throw err;
^
Error: Failed to find font face &apos;Open Sans Bold&apos; in FontSet &apos;fontset-0&apos; in FontSet
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;That&apos; s a bit strange, we have just installed the fonts but they are not found. What is happening? Well, tessera uses mapnik to create the raster tiles and it looks for fonts in the folders specified byÂ the environment variable &lt;code class=&quot;language-text&quot;&gt;MAPNIK_FONT_PATH&lt;/code&gt;, so let define the variable:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;export MAPNIK&lt;em&gt;FONT&lt;/em&gt;PATH=~/Library/Fonts/
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and execute the script again:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at &lt;a href=&quot;http://0.0.0.0:8080/&quot;&gt;http://0.0.0.0:8080/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;/Users/antonio/Downloads/tiletools/node_modules/tessera/server.js:43
throw err;
^
Error: Failed to find font face &apos;Arial Unicode MS Regular&apos; in FontSet &apos;fontset-0&apos; in FontSet
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;OMG !!! This seems a never ending story. Now we need to install the Arial Unicode font. &lt;a href=&quot;https://code.google.com/p/tuanphamvu/downloads/detail?name=Arial%20Unicode%20MS.rar&amp;#x26;can=2&amp;#x26;q=&quot;&gt;Look for it&lt;/a&gt;,Â install in your system and execute tessera again:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tessera/bin/tessera.js tmstyle://./customstyle.tm2
Listening at &lt;a href=&quot;http://0.0.0.0:8080/&quot;&gt;http://0.0.0.0:8080/&lt;/a&gt;
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Great !!! It seems tessera is working fine. Let&apos;s go to open our browser pointing to &lt;code class=&quot;language-text&quot;&gt;http://localhost:8080&lt;/code&gt; and see the result:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 91.81916038751345%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAADyUlEQVQ4y6WUW2/TZhzGOy42pnIzdrMLPsG+xaR9BXLB5T4AGtI+wCTQytqNlgwQqzZttB095FjHZzuxc7Kd2G/SOAfn0KTtCCpiXBAuwfazNyllVGPiYpYe/WXr9e99/s97mJub+2pu1Kp/0dtvXvF6+5e7XjfS7/cjo9EoMhgMIv1BP9Ltdql6kW6vG+n1ejNNvw36g8j4z6PL4/H4iud5X87Nngufn29UCnuH4z4GwwOMRkPQgXhyfIzH48d4+uQpXkxeYDKZYPL8RM+nlb7/9ewZPDr28OAAhDgdSvtghjRrFYe0CaxG6ZXRLgaaJwU5TwyMrhbYg2JADktBfWQGztAIakflwDrSg+G4HuTtenBXcl79nndxjy25lPXRFDhv2hYpVC0wIufzMh9mTCaMlxNhppgOk2o8FG0hFBrpMF3bCVPNzbDgSWHVlcNf5EJ4g3H8W9k2vo0VmpT14QyYKSdI3lMRz8f9dG4XbJ6DUBShmjJi2ja22AQkXYFAOEiNDAodGWo1iYeqjjtM0V9Va7ieKP4D3HU2Sf4RB76T8BWXg9YQUarlINsCmL1tMGYSiiEiW5GRMVhsWOtIkk0otogVwfJXqMMb8bccMvoOMQYqcm3G1/s8KvsqnG4BmitAcHepUkjXNsG4O2AbcayTVSjtFJ1AQVQyacuds8CU/AcpuQpKdcl3OhoqIxVFGkHJk6D1eOQ9EWZfpRNJUJq7iLc2UGiz0PdERMXKCTDxGvjJ+fl50YgRs6Uga7N+tsoiR7PKN6RZtVwVzWER9b6Oal+G0Ioh426h2mWpax4/8ra//DZw6pArb5N6X4NGWF+00uD0BLg8VZEuhpEGaWswXQliKwm5kYBcS2Hb0PEDb+MmS/zbuTaun2k5u0UKLg2dMH6+JkEy03QVd1HYE2BQ52SYg+3JMBwG6ZyMqGBhIUOwyDlY4hwK7JwFxhSaYTsLtSb5ZerGauRg9VRoHQZGnadtZ2n7WWzqGpYzFm5yBEu8M9Piu4BcMUaMlgq7pfnVpgabQusDHZypYl3J4Z5UoVkRLLAE37+BnTh8J7Dc4EljVEJ1qPhyM41yU4BKirMfFtjaNCcKct64OoW9rv8GVlzF7j2yoQ0yL9POjp+vsP5vsuIvsI6/xNn+NKfF/5T9cllpToGNU+AFuZlsH05cdI8rdIuUwNs2orqH25qH6Hs0PSX3rSN8lzIGp8CP7ydu/brG/FxPZB6YG4lV65s7a9bV6KZ17aeH1tfvl3Ht7lb96srag9Pb5hzVRapL/1MXP/3s0rm/AWZHxY8dZvjwAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015 07 26 at 16 01 43&quot;
        title=&quot;Screen Shot 2015 07 26 at 16 01 43&quot;
        src=&quot;/static/93475e0853caa70a4aeb267f060319c9/dbb61/Screen-Shot-2015-07-26-at-16.01.43.png&quot;
        srcset=&quot;/static/93475e0853caa70a4aeb267f060319c9/19bd1/Screen-Shot-2015-07-26-at-16.01.43.png 163w,
/static/93475e0853caa70a4aeb267f060319c9/d3bcb/Screen-Shot-2015-07-26-at-16.01.43.png 325w,
/static/93475e0853caa70a4aeb267f060319c9/dbb61/Screen-Shot-2015-07-26-at-16.01.43.png 650w,
/static/93475e0853caa70a4aeb267f060319c9/356ef/Screen-Shot-2015-07-26-at-16.01.43.png 929w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A map implemented using Leaflet web mapping library is shown, rendering raster tiles that are created in the fly. Look at the console to see the tessera output information:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.67983367983368%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACHElEQVQ4y62UTY/SQBjHC7QLhBd567qUzpQKhf0O6s3voE28euAzeLAm3gDlJUFT1s1+iQ0nLx69u7uFIbjSxaxvMYEKlMP6DLBEswmY7jb5JTOd6a/zfzpTZo+5YL4b7x/0f3Yej63pI2tkqaPRaI71e6wOfvxSTdNUz8+/qoMvA3U4HKqTyUQdj8craN+yrIe9Xi/KeF23/PVXxQ/7B28v9L3m9E3z9aypN2e6rs8ajYb9slKZFotFu1wu25VKxa5Wq3atVvubab1et0ul0qRQKNxj4ArF4olDURBPE8m4sRXh2rFIzIjGoobH4zmG8Y//yRFwlwqDGOPWbn73TM6lCZ9OdGVJJnCPhMPhNoyfuFwuAzhZg+F2uw2O4xZChFArr+TPcAYRXqLCO91UKrUSAsYaVuMsyy6EIhJbSlYxcRaTBI53sYhJUkgSv9/vUCiCMKOYCFZ4KRQEgfh8PmdCGpkKaeTtNN+VkETgJSQYDDoUYjSPjJY1pCukwkAg4DxyNpP9p4Y08vVquPwocRQD4SKyY+G8htlFDW9khVSYU3KryCh1Zdts4so+PISN3ZcUqb0t8ySN0x04KZ1QKEQnHm/g6LI9F8JDIYj3Dono2454+3M0GTGFHaHP83zf6/WewsQe8GkNq3EQ3mcgrg/22xPovGA59pmH9WhwJjVoa/Bz0OCcanBON/EceArzZWZ5uQHuGmwBLOD6A5IOX5M8xJf9AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015 07 26 at 16 03 20&quot;
        title=&quot;Screen Shot 2015 07 26 at 16 03 20&quot;
        src=&quot;/static/7fd6122a6dd6f365ef57506522a7f15a/dbb61/Screen-Shot-2015-07-26-at-16.03.20.png&quot;
        srcset=&quot;/static/7fd6122a6dd6f365ef57506522a7f15a/19bd1/Screen-Shot-2015-07-26-at-16.03.20.png 163w,
/static/7fd6122a6dd6f365ef57506522a7f15a/d3bcb/Screen-Shot-2015-07-26-at-16.03.20.png 325w,
/static/7fd6122a6dd6f365ef57506522a7f15a/dbb61/Screen-Shot-2015-07-26-at-16.03.20.png 650w,
/static/7fd6122a6dd6f365ef57506522a7f15a/d418b/Screen-Shot-2015-07-26-at-16.03.20.png 962w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;We can see how tiles at current zoom, the zoom level 8, has been generated.&lt;/p&gt;
&lt;p&gt;At this point we have tessera working but what about generate a local pyramid of tiles for a given zoom levels and a given bounding box?&lt;/p&gt;
&lt;h3&gt;Generating a custom pyramid of tiles with tl command line tool&lt;/h3&gt;
&lt;p&gt;Before continue we need to know which bounding box we want to generate, the whole World? or only a piece. In my case I want three zoom levels (7, 8 and 9) wrapping Catalonia.&lt;/p&gt;
&lt;p&gt;There are some online tools you can use to get the bbox of a region, but one I like it the &lt;a href=&quot;http://boundingbox.klokantech.com/&quot;&gt;Bounding Box Tool&lt;/a&gt; from &lt;a href=&quot;http://www.klokantech.com/&quot;&gt;Klokan Technologies&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The tl tool can run three main commands but are only interested in the copy one, which copies data between two providers. In our case the MbS style is one provider and the file system is the other. Run the tl command to see the available options:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tl/bin/tl.js copy --help&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Usage: node tl.js copy &lt;source&gt; &lt;sink&gt; [options]&lt;/p&gt;
&lt;p&gt;source     source URI
sink       sink URI&lt;/p&gt;
&lt;p&gt;Options:
-v, --version                 Show version info
-b BBOX, --bounds BBOX        WGS84 bounding box  [-180,-85.0511,180,85.0511]
-z ZOOM, --min-zoom ZOOM      Min zoom (inclusive)  [0]
-Z ZOOM, --max-zoom ZOOM      Max zoom (inclusive)  [22]
-r MODULE, --require MODULE   Require a specific tilelive module
-s SCHEME, --scheme SCHEME    Copy scheme  [scanline]
-i FILE, --info FILE          TileJSON&lt;/p&gt;
&lt;p&gt;copy data between tilelive providers
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;So let&apos;s go to execute the command to copy data from our MbS style to the local &lt;code class=&quot;language-text&quot;&gt;tiles&lt;/code&gt; folder. We want to generate tiles from zoom level 7 to 9 and indicating a bounding box wrapping Catalonia.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Remember the &lt;code class=&quot;language-text&quot;&gt;-b&lt;/code&gt; options must be indicated as &lt;code class=&quot;language-text&quot;&gt;[minLon minLat maxLon maxLat]&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;./node_modules/tl/bin/tl.js copy -z 7 -Z 9 -b &quot;0.023293972 40.4104003077 3.6146087646 42.9542303723&quot; tmstyle://./customstyle.tm2/ file://./tiles
Segmentation fault: 11
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ough !!! That hurts, a segmentation fault. After looking for a while I realised it &lt;a href=&quot;https://github.com/mojodna/tessera/issues/9&quot;&gt;seems a bug&lt;/a&gt;. To solve it go to &lt;code class=&quot;language-text&quot;&gt;tl/node_modules/abaculus/node_modules&lt;/code&gt; and remove the &lt;code class=&quot;language-text&quot;&gt;mapnik&lt;/code&gt; folder dependency. It is redundant because there is one installed in parent folder.&lt;/p&gt;
&lt;p&gt;Execute the command again and see the output:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.67983367983368%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAABmUlEQVQ4y62UvU7CUBSA29I2NrRAKz+VzYSfh1A330Fv4urAMziIiRNpk5YyaowPYXRycXQWKJgUqJGAicYg6Y8DnosUBxcaOnzp7bn3fjn3np4SF8SM+Og87Nvv3SPP/T50XAc5joNc4Mvx0PPbJ3qxbTQajdHrcIgmkwlyXXe+JgC/T6fTA8uyRIIgGK6hKY9X15czw2i4uq579Xrdx+iAqul+rVbzVVX1NU3zYd4P5hd4hmH4iqK4lUplF4SEIMtbN5K02YPxE9BcPMOC9+1gIV8qle7y+bzN83w7Ho93INYmSdIE2itiUhRlMgzzJ0yn04NEImGKotjFQsBckeVamqZ/hcViMXphJpMZpFIpE8TRCHO5nI2FkWSI71CWZTuZTJogXV9YKBSWGUqSFI0wyDCSI5fL5XmGuMpAJ7IqYyFkGWQYhn9Fuc1ms31BEFpYCrFWCJrBOBAKcIf3cOQxtJ7FcVwfYhbQW5HlWhDuYeEGVPYYevicZdlToAq9WYXeDMMZcBKLxbYJ+FSwlML/sTVgARogfwBXtk/aD7TBpgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2015 07 26 at 16 27 56&quot;
        title=&quot;Screen Shot 2015 07 26 at 16 27 56&quot;
        src=&quot;/static/f1704bc2ed5ee13e403f31a4b4096ce1/dbb61/Screen-Shot-2015-07-26-at-16.27.56.png&quot;
        srcset=&quot;/static/f1704bc2ed5ee13e403f31a4b4096ce1/19bd1/Screen-Shot-2015-07-26-at-16.27.56.png 163w,
/static/f1704bc2ed5ee13e403f31a4b4096ce1/d3bcb/Screen-Shot-2015-07-26-at-16.27.56.png 325w,
/static/f1704bc2ed5ee13e403f31a4b4096ce1/dbb61/Screen-Shot-2015-07-26-at-16.27.56.png 650w,
/static/f1704bc2ed5ee13e403f31a4b4096ce1/d418b/Screen-Shot-2015-07-26-at-16.27.56.png 962w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The tl tool has created a local tiles directory and generated all the raster tiles for the given zoom levels and bounding box.Â The output shows in addition the time required to generate each tile.&lt;/p&gt;
&lt;p&gt;That&apos;s all. Now we only need to host the tiles at our own servers !!!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[From SublimeText to Atom text editor]]></title><description><![CDATA[I have used regularly SublimeTextÂ (v2)Â for the past year. I used it mainly to programming in JavaScript, HTML, CSS and to write in Markdown syntax (I'm sorry but to programming in Java NetBeans continues to be my preferred IDE). In that time I used a bunch of SublimeText plugins to help me in my day to day: Markdown Editing. Provides a decent Markdown color scheme (light and dark) with more robust syntax highlighting and useful Markdown editing features. Markdown Preview.Â Preview and build your markdown files quickly in your web browser. Markdown TOC. Search headings in document and insert/update TOC(Table Of Contents) to it. DocBlockr. Simplifies writing DocBlock comments in many languages, one of them JavaScript. To the previous list we need to attach the spellchecker,Â autocomplete, minimap, highlight selected text and some more greatÂ core features of SublimeText.  A week ago I start using Atom text editor (v1.0.2) so I looked for a list of similar plugins that helps me in my day to day in the same way as previous plugins on SublimeText: Minimap,Â A preview of the full source code. Replicates the minimap core feature of SublimeText. Highlight Selected:Â Double click on a word to highlight it throughout the open file. Replicated the highlight selected text core feature of SublimeText. Markdown TOC:Â Generate/updates TOC (table of contents) of headlines from parsed markdown file. DocBlockr: Designed to make writing documentation faster and easier. We need to note by default atom.io has support for markdown syntax, autocompletion and spellchecker too.]]></description><link>https://www.acuriousanimal.com/blog/2015/07/15/from-sublimetext-to-atom-text-editor</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/07/15/from-sublimetext-to-atom-text-editor</guid><pubDate>Wed, 15 Jul 2015 21:23:00 GMT</pubDate><content:encoded>&lt;p&gt;I have used regularly &lt;a href=&quot;http://www.sublimetext.com/&quot;&gt;SublimeText&lt;/a&gt;Â (v2)Â for the past year. I used it mainly to programming in JavaScript, HTML, CSS and to write in &lt;a href=&quot;https://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt; syntax (I&apos;m sorry but to programming in Java NetBeans continues to be my preferred IDE).&lt;/p&gt;
&lt;p&gt;In that time I used a bunch of SublimeText plugins to help me in my day to day:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://packagecontrol.io/packages/MarkdownEditing&quot;&gt;Markdown Editing&lt;/a&gt;. Provides a decent Markdown color scheme (light and dark) with more &lt;strong&gt;robust&lt;/strong&gt; syntax highlighting and useful Markdown editing features.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://packagecontrol.io/packages/Markdown%20Preview&quot;&gt;Markdown Preview&lt;/a&gt;.Â Preview and build your markdown files quickly in your web browser.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://packagecontrol.io/packages/MarkdownTOC&quot;&gt;Markdown TOC&lt;/a&gt;. Search headings in document and insert/update TOC(Table Of Contents) to it.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://packagecontrol.io/packages/DocBlockr&quot;&gt;DocBlockr&lt;/a&gt;. Simplifies writing DocBlock comments in many languages, one of them JavaScript.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To the previous list we need to attach the spellchecker,Â autocomplete, minimap, highlight selected text and some more greatÂ core features of SublimeText.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.828125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADWElEQVQ4y51Sy27bRhRlUsl2gz42TRXFUS05evE1JIcUXxJFinpYUhzbLepEBbLrogTyF/2F/oMFeNUgVtEunAK2nADtfwTQuugiIcXby3Hg7Evg4NyZuXN477nDnR7/nF8uTp79fvXH89fLN9HyNeLqKnrz19/Rq1d/RovFAvFb9OuLF9HLl2fR2dkiOj8/j5bLZXRxeRldIi4uLn/C3Od49g33xaef3w3C0T/heB8cLwQvnMJw/C0cH83g0eETCIaPoRtOwPWHjL3eGHPG4PenDN3+BILBFB4fPQHXC2ccfoWGpL+tCxSKpYfvt3fqSY2niUSspCm1EgFZ0txEUp1EVG2Ek9QEmlRqJNmtK0m5JscNUX832DsCarSfMkFCnZXhBFCuCutKTUxlzUm7/f20E0zStj++Ya83ZWx1BqndGbJ90+2lqhkk/f4PIDTUGbd157MCCq2o5QNPWigogahY4Hb3ECPGjjdiQJGbtWEHDNnPRcVO2t4jaPDajLudyxdqvLLCA6jySlYhE7Txkm73oOWETChjteWBhiDUzYQQbhanRHMSzx+DoJjXHopKa0V0F1CMCfJyCyzTAddygFKLrTM0RR0aH9CUDAaMU5GYidMZ4ZrOuFx+s1BtEiaIvK5UUZCYoGg2EM0CCRmHcQMBqxdxD+1hwGGmAmklgxEOpeXNuFu3c4WGSFctN4SaoK530cOsGskcADFHIMk2yMRh/DF2bmJRslKiuknXnwAvGVjhxlYBq1h1epPMlzX6iB46YDoH0LEPwNT6QFUfqOaDruEgtB7imnU1AI14KaXdJAgPgKj2jMtvbBaasr6SqQM1Xl0/bMisQkHBllFYwPbxHPfQM2JAHeMGoi5RqIsUqoKKLZtJODwEanrXHvLEeCujh1jpe2w/5kU9pv5R3N77Mfbax7Fj7ceGPohtOoxl4sbYbiwicCAxehhLqv3OC/DZiPQpt7l15x4G/2aComqxyWXmq4YPSu97MDuH0Gl/B4Y1BoP2QFO7rH1N67LnleUS2ga/NwVB1J5xn+TyX+7sNn7B53JaqQonpXJtXq7y8wc71XmhWJrfu78zLyJn8VfF7fnd4gPGX98vzbPcCubi/RPk0+1S2eI+fDnEFmLzfyK7u4G49R+xpq+Q85P4dgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;atom 1024x756&quot;
        title=&quot;atom 1024x756&quot;
        src=&quot;/static/2124e82bf93f4ece5519c396a511b567/dbb61/atom-1024x756.png&quot;
        srcset=&quot;/static/2124e82bf93f4ece5519c396a511b567/19bd1/atom-1024x756.png 163w,
/static/2124e82bf93f4ece5519c396a511b567/d3bcb/atom-1024x756.png 325w,
/static/2124e82bf93f4ece5519c396a511b567/dbb61/atom-1024x756.png 650w,
/static/2124e82bf93f4ece5519c396a511b567/6b691/atom-1024x756.png 975w,
/static/2124e82bf93f4ece5519c396a511b567/3b243/atom-1024x756.png 1024w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A week ago I start using Atom text editor (v1.0.2) so I looked for a list of similar plugins that helps me in my day to day in the same way as previous plugins on SublimeText:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://atom.io/packages/minimap&quot;&gt;Minimap&lt;/a&gt;,Â A preview of the full source code. Replicates the minimap core feature of SublimeText.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://atom.io/packages/highlight-selected&quot;&gt;Highlight Selected&lt;/a&gt;:Â Double click on a word to highlight it throughout the open file. Replicated the highlight selected text core feature of SublimeText.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://atom.io/packages/markdown-toc&quot;&gt;Markdown TOC&lt;/a&gt;:Â Generate/updates TOC (&lt;em&gt;table of contents&lt;/em&gt;) of headlines from parsed markdown file.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://atom.io/packages/docblockr&quot;&gt;DocBlockr&lt;/a&gt;: Designed to make writing documentation faster and easier.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We need to note by default atom.io has support for markdown syntax, autocompletion and spellchecker too.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The mystery of no flash session variables in Express + Passport auth]]></title><description><![CDATA[Recently I started an application using NodeJS with ExpressJS framework and decided to use passport for authenticate the users. As many other times I wanted to use flash messages so, when user authentication fails, the application shows a message informing about bad credentials.Â Nothing new on the horizon until.... OMG !!! I can't see the flash messages !!! Disclaimer: This is a really stupid history with me as starring. I like to learn from my errors and because of this I decide to write this post both as a punishment and to ensure I don't forget it again. The crime scene I was working implementing a sign up process, where the user writes its credentials and system createsÂ as a new user or returns an error message like "Sorry, but a username with that email exists" or similar. BeforeÂ introduce any code, the flow is as follows: User access the  page via GET method. Data is sent to  resource via POST method, which is responsible to: Check if data is fine, create a new user and redirected to the  page. If a user with the same email exists we redirect again to the  page (that is, using the GET method) with a flash message related to bad credentials. Note: A flash message is a variable stored within a session that is only available once, for the next request. That is if we put a flash variable and renders a page, the flash variable is available but if we render the same (or other) page again the flash variable is not present (it is destroyed). The approximate code for the previousÂ flow is as follows. First, the next code is responsible to receive the post data and register the user: {% highlight javascript %}
// process the signup form
router.post('/signup', passport.authenticate('local-signup', {
  successRedirect : '/profile', // redirect to the secure profile section
  failureRedirect : '/signup', // redirect back to the signup page if there is an error
  failureFlash : true // allow flash messages
})); The authentication is delegated to passport, which is implemented as:]]></description><link>https://www.acuriousanimal.com/blog/2015/03/30/the-mystery-of-no-flash-session-variables-in-express-passport-auth</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/03/30/the-mystery-of-no-flash-session-variables-in-express-passport-auth</guid><pubDate>Mon, 30 Mar 2015 19:09:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I started an application using &lt;a href=&quot;https://nodejs.org/&quot;&gt;NodeJS&lt;/a&gt; with &lt;a href=&quot;http://expressjs.com/&quot;&gt;ExpressJS&lt;/a&gt; framework and decided to use &lt;a href=&quot;http://passportjs.org/&quot;&gt;passport&lt;/a&gt; for authenticate the users. As many other times I wanted to use flash messages so, when user authentication fails, the application shows a message informing about bad credentials.Â Nothing new on the horizon until.... OMG !!! I can&apos;t see the flash messages !!!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Disclaimer: This is a really stupid history with me as starring.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I like to learn from my errors and because of this I decide to write this post both as a punishment and to ensure I don&apos;t forget it again.&lt;/p&gt;
&lt;h3&gt;The crime scene&lt;/h3&gt;
&lt;p&gt;I was working implementing a sign up process, where the user writes its credentials and system createsÂ as a new user or returns an error message like &quot;Sorry, but a username with that email exists&quot; or similar.&lt;/p&gt;
&lt;p&gt;BeforeÂ introduce any code, the flow is as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;User access the &lt;code class=&quot;language-text&quot;&gt;/signup&lt;/code&gt; page via GET method.&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Data is sent to &lt;code class=&quot;language-text&quot;&gt;/signup&lt;/code&gt; resource via POST method, which is responsible to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Check if data is fine, create a new user and redirected to the &lt;code class=&quot;language-text&quot;&gt;/profile&lt;/code&gt; page.&lt;/li&gt;
&lt;li&gt;If a user with the same email exists we redirect again to the &lt;code class=&quot;language-text&quot;&gt;/signup&lt;/code&gt; page (that is, using the GET method) with a flash message related to bad credentials.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: A flash message is a variable stored within a session that is only available once, for the next request. That is if we put a flash variable and renders a page, the flash variable is available but if we render the same (or other) page again the flash variable is not present (it is destroyed).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The approximate code for the previousÂ flow is as follows. First, the next code is responsible to receive the post data and register the user:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
// process the signup form
router.post(&apos;/signup&apos;, passport.authenticate(&apos;local-signup&apos;, {
successRedirect : &apos;/profile&apos;, // redirect to the secure profile section
failureRedirect : &apos;/signup&apos;, // redirect back to the signup page if there is an error
failureFlash : true // allow flash messages
}));&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The authentication is delegated to passport, which is implemented as:&lt;/p&gt;
&lt;pre class=&quot;lang:js decode:true&quot;&gt;passport.use(&apos;local-signup&apos;, new LocalStrategy({
    // by default, local strategy uses username and password, we will override with email
    usernameField : &apos;email&apos;,
    passwordField : &apos;password&apos;,
    passReqToCallback : true // allows us to pass back the entire request to the callback
},
function(req, email, password, done) {
    process.nextTick(function() {
      // find a user whose email is the same as the forms email
      // we are checking to see if the user trying to login already exists
      User.findOne({ &apos;email&apos; :  email }, function(err, user) {
          // if there are any errors, return the error
          if (err) {
            return done(err);
          }
          // check to see if theres already a user with that email
          if (user) {
            return done(null, false, req.flash(&apos;signupMessage&apos;, &apos;That email is already taken.&apos;));
          } else {
            // if there is no user with that email
            // create the user
            var user = new User();
            user.local.email    = email;
            user.local.password = user.generateHash(password);
            user.save(function(err) {
              if (err) {
                throw err;
              }
              return done(null, user);
            });
          }
      });
    });
}));
{% endhighlight %}

As you can see, if the user exists we add a flash session message with:Â `req.flash(&apos;signupMessage&apos;, &apos;That email is already taken.&apos;));`.

On the other side, we show the signup form each time user access to the `/signup` resource via GET method:

{% highlight javascript %}
router.get(&apos;/signup&apos;, function(req, res) {
  res.render(&apos;signup&apos;,  { message: req.flash(&apos;signupMessage&apos;) });
});
{% endhighlight %}

Here we are rendering the `signup` template passing a message with the value of the signupMessage message. This way if user is redirected to the form, because the signup process fails (that is, the access to theÂ `/signup` resource via POST), then the error message is shown.

### The mystery

The problem was I never get a value for the flash variable. What? Yes, I never get a value for the flash variable.

There was no error, I can&apos;t set and (in the same method) get the flash value, but I can&apos;t get value any value among different resources, that is, between GET `/signup` and POST `/signup`.

### The solution

After too much time (too many to be recognisedÂ publicly) I found my problem was with the way I initialise my sessions. What ? Yes, I said it was my fault due the way I initialise the session. This I did it:

{% highlight javascript %}
app.use(session({
  secret: config.sessionSecret,
  resave: false,
  saveUninitialized: true,
  cookie: { secure: true }
}));
{% endhighlight %}

Can you see the problem? Here goes a clue, think I was working with a `dev` profile, that is, in my local machine accessing resources without HTTPS.

_**Yes, the problem was to set theÂ `secure: true`Â  and does not access resources via HTTPS.**_

The [express-session](https://github.com/expressjs/session) middleware documentation says (yes, go to the cookie section):

&gt; Please note that `secure: true` is a **recommended** option. However, it requires an https-enabled website, i.e., HTTPS is necessary for secure cookies. **If `secure` is set, and you access your site over HTTP, the cookie will not be set**. If you have your node.js behind a proxy and are using `secure: true`, you need to set &quot;trust proxy&quot; in express.

### Conclusions

I&apos;m happy to found the problem. Right now, while I write this lines, I&apos;m at a tattoo shop waiting to be tattooed with the previous beautiful sentence.
</content:encoded></item><item><title><![CDATA[Reading/writing compressed and not compressed files in Java]]></title><description><![CDATA[Main reason for this post is trying don't repeat yourself (DRY) because, often, I fall in the recursive need to read and write compressed and not compressed files (mainly JSON and CSV). Let's to see first how to read text files. Note I'm working with (relatively small) text files so: The read methods returns an String with the whole content. I'm usingÂ  to read line by line. {% highlight java %}
private String readFile(String fileName) {
    StringBuilder sb = new StringBuilder();
    try {
        BufferedReader input = new BufferedReader(new FileReader(new File(fileName)));
        try {
            String line = null;
            while ((line = input.readLine()) != null) {
                sb.append(line);
            }
        } finally {
            input.close();
        }
    } catch (IOException ex) {
        // Handle exception
        return null;
    } }
{% endhighlight %} Note: there are more than one way to do things. InÂ the entry Best way to read a text file, where you can find many different ways to read a text file depending on your JDK version and the size of the file. Similarly to write a String to a file: {% highlight java %}
private void writeFile(String fileName, String value) {
    try {
        FileWriter fw = new FileWriter(fileName);
        BufferedWriter bw = new BufferedWriter(fw);
        bw.write(value);
        bw.close();
    } catch (IOException ex) {
        // Handle exception
    }
}
{% endhighlight %} To read/write compressed files, that is with binary data, we need to work with streams and buffers. So to read a GZIP compressed file and obtain a String: {% highlight java %}
private String readCompressedFile(String fileName) {
    try {
        GZIPInputStream gis = new GZIPInputStream(new FileInputStream(fileName));
        ByteArrayOutputStream fos = new ByteArrayOutputStream();
        byte[] buffer = new byte1024;
        int len;
        while ((len = gis.read(buffer)) != -1) {
            fos.write(buffer, 0, len);
        }
        fos.close();
        gis.close();
        return new String(fos.toByteArray());
    } catch (IOException ex) {
        // Handle exception
        return null;
    }
}
{% endhighlight %} and similarly to write a String to a GZip compressed file: {% highlight java %}
private void writeCompressedFile(String fileName, String value) {
    try {
        InputStream is = new ByteArrayInputStream(value.getBytes());
        GZIPOutputStream gzipOS = new GZIPOutputStream(new FileOutputStream(fileName));
        byte[] buffer = new byte1024;
        int len;
        while ((len = is.read(buffer)) != -1) {
            gzipOS.write(buffer, 0, len);
        }
        gzipOS.close();
        is.close();
    } catch (IOException ex) {
        // Handle exception
    }
}
{% endhighlight %} References Next you can find a couple of great links with Java code for various JDK versions: Reading and writing text files Reading and writing binary files]]></description><link>https://www.acuriousanimal.com/blog/2015/01/03/readingwriting-compressed-and-not-compressed-files-in-java</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2015/01/03/readingwriting-compressed-and-not-compressed-files-in-java</guid><pubDate>Sat, 03 Jan 2015 06:58:00 GMT</pubDate><content:encoded>&lt;p&gt;Main reason for this post is trying don&apos;t repeat yourself (&lt;a href=&quot;http://en.wikipedia.org/wiki/Don%27t_repeat_yourself&quot;&gt;DRY&lt;/a&gt;) because, often, I fall in the recursive need to read and write compressed and not compressed files (mainly JSON and CSV).&lt;/p&gt;
&lt;p&gt;Let&apos;s to see first how to read text files. Note I&apos;m working with (relatively small) text files so:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;The read methods returns an String with the whole content.&lt;/li&gt;
&lt;li&gt;I&apos;m usingÂ &lt;code class=&quot;language-text&quot;&gt;BufferedReader&lt;/code&gt; to read line by line.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;{% highlight java %}
private String readFile(String fileName) {
StringBuilder sb = new StringBuilder();
try {
BufferedReader input = new BufferedReader(new FileReader(new File(fileName)));
try {
String line = null;
while ((line = input.readLine()) != null) {
sb.append(line);
}
} finally {
input.close();
}
} catch (IOException ex) {
// Handle exception
return null;
}&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;return sb.toString();&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}
{% endhighlight %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: there are more than one way to do things. InÂ the entry &lt;a href=&quot;http://stackoverflow.com/questions/4716503/best-way-to-read-a-text-file&quot;&gt;Best way to read a text file&lt;/a&gt;, where you can find many different ways to read a text file depending on your JDK version and the size of the file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Similarly to write a String to a file:&lt;/p&gt;
&lt;p&gt;{% highlight java %}
private void writeFile(String fileName, String value) {
try {
FileWriter fw = new FileWriter(fileName);
BufferedWriter bw = new BufferedWriter(fw);
bw.write(value);
bw.close();
} catch (IOException ex) {
// Handle exception
}
}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;To read/write compressed files, that is with binary data, we need to work with streams and buffers. So to read a GZIP compressed file and obtain a String:&lt;/p&gt;
&lt;p&gt;{% highlight java %}
private String readCompressedFile(String fileName) {
try {
GZIPInputStream gis = new GZIPInputStream(new FileInputStream(fileName));
ByteArrayOutputStream fos = new ByteArrayOutputStream();
byte[] buffer = new byte[1024];
int len;
while ((len = gis.read(buffer)) != -1) {
fos.write(buffer, 0, len);
}
fos.close();
gis.close();
return new String(fos.toByteArray());
} catch (IOException ex) {
// Handle exception
return null;
}
}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;and similarly to write a String to a GZip compressed file:&lt;/p&gt;
&lt;p&gt;{% highlight java %}
private void writeCompressedFile(String fileName, String value) {
try {
InputStream is = new ByteArrayInputStream(value.getBytes());
GZIPOutputStream gzipOS = new GZIPOutputStream(new FileOutputStream(fileName));
byte[] buffer = new byte[1024];
int len;
while ((len = is.read(buffer)) != -1) {
gzipOS.write(buffer, 0, len);
}
gzipOS.close();
is.close();
} catch (IOException ex) {
// Handle exception
}
}
{% endhighlight %}&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;Next you can find a couple of great links with Java code for various JDK versions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.javapractices.com/topic/TopicAction.do?Id=42&quot;&gt;Reading and writing text files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.javapractices.com/topic/TopicAction.do?Id=245&quot;&gt;Reading and writing binary files&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Why OpenLayers3 does not render my GeoJSON?]]></title><description><![CDATA[OpenLayers3 offers the  class that allows to read data from a GeoJSON source (an URL, a JavaScript object or a text string). Maybe you, like me, has spent some time trying to understand why your GeoJSON data is not rendering properly: projection is fine, your GeoJSON is well formed and validated but OpenLayers3 doesn't return any features and so nothing is rendered in the map. What is the problem? The  class is a subclass of  that uses an  instance to read content: A source class, by definition, acts as a source of features for a vector layers, that is, it is like a container of features. Because of this, the  source is limited to read GeoJSON features and not geometries. So next GeoJSON will be ignored by OpenLayers3 (really if you use de debug version you will see an assertion message): {% highlight javascript %}
{
    "type": "Point",
    "coordinates": 
        -105.01621,
        39.57422
    
}
{% endhighlight %} While the next is a valid GeoJSON suitable to be read by the source: {% highlight javascript %}
{
    "type": "Feature",
    "geometry": {
        "type": "Point",
        "coordinates": 
            -105.01621,
            39.57422
        
    },
    "properties": {
        "name": "Some feature property"
    }
}
{% endhighlight %} Â That means we can't read GeoJSON geometries? Absolutely no, simply means source classes follows the source concept, and that means, work with features. The  format class allows to read and write features and geometries. To read a GeoJSON file composed of geometries we need to read the geometries and, manually, create a feature for each one. For example: {% highlight javascript %}
var point = {
    "type": "Point",
    "coordinates": 
        -105.01621,
        39.57422
    
}; // Read the GeoJSON geometries using the format class
var format = new ol.format.GeoJSON();
var geometry = format.readGeometry(point); // Create a feature using the geometry
var feature = new ol.Feature({
  geometry: geometry,
  propA: 'Some feature property'
}); // Add feature to the source of some vector layer
vectorLayer.getSource().addFeature(feature);
{% endhighlight %}]]></description><link>https://www.acuriousanimal.com/blog/2014/12/30/why-openlayers3-does-not-render-my-geojson</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/12/30/why-openlayers3-does-not-render-my-geojson</guid><pubDate>Tue, 30 Dec 2014 22:10:00 GMT</pubDate><content:encoded>&lt;p&gt;OpenLayers3 offers the &lt;code class=&quot;language-text&quot;&gt;ol.source.GeoJSON&lt;/code&gt; class that allows to read data from a GeoJSON source (an URL, a JavaScript object or a text string).&lt;/p&gt;
&lt;p&gt;Maybe you, like me, has spent some time trying to understand why your GeoJSON data is not rendering properly: projection is fine, your GeoJSON is well formed and validated but OpenLayers3 doesn&apos;t return any features and so nothing is rendered in the map.&lt;/p&gt;
&lt;h2&gt;What is the problem?&lt;/h2&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;ol.source.GeoJSON&lt;/code&gt; class is a subclass of &lt;code class=&quot;language-text&quot;&gt;ol.source.StaticVector&lt;/code&gt; that uses an &lt;code class=&quot;language-text&quot;&gt;ol.format.GeoJSON&lt;/code&gt; instance to read content:&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 313px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 145.04792332268372%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsSAAALEgHS3X78AAAEYklEQVRIx6VVWUijVxjNv2gSnUzHUmomow+l074UrFbmSWiRClNoS8cXKd2sIq20UnHiQEFbLC6oqA8qUcTWFdwXXCsalbivcY0xatxFaVHUvkSE2/PdGpiGTjJML4Tvev/vnvvd8517VChcxtramkhxfHz8++3t7d93dnaq7XZ7ucViKVxdXc1H/G12drYmKSnpFcrLyckRFO7GxcWFRPHg4MDAMJaWlhgOYQBm8/PzPB4dHbGCgoL7lFdbW+secGtriwOiCsP19TU7OTlhAGeolq2vrzObzcYWFxdP09PTX6O8kpIS94BdXV08NjQ03Ovs7Hy/p6fnPVTxqKio6EvQ8FZfX9/b9fX1b4aHh/OD4+LiFB5Hb2/vfy17uS5ERkZ6BhsdHXVWKgwNDUmgUQgNDVUHBgZqMFdUVVWJOFCMiYnheSkpKe4BZ2ZmeKyrqxPKysp4xwMCAlR+fn4amqelpQk1NTVCdnY2z8vNzfVc5eTkpOsSAatcF9EYz2C4Jo+FhYWB1dXVb6ApOjREl5mZqcWVb6G6u6jqfnJyMj8A0T3g6ekp7x5kUo8529jYOIMOz6HBP+fm5v6gOb791dra+oDycKDoFtDhcHDAvb29ARI2iZq0R4KGRtnu7i47Oztj7e3t794owj0gMHjC9PT0zwCdAcgCnpsVoEZEI2L3xMREq8FgeJ3yKisrBY88kjyeGlpBEHQ3c5+nP1RUVCieG4yiXq/39vHxue38FhUVpQ4JCfGjb7GxsbyypqamfwNgA//RkGX5H42IojO+rNPpZAJQKpXOLXdcX41zP4/EGX4yTEAGX/LIyAgBCGFhYbeDg4Pv0HxwcFAqLi7mueXl5cqgoKBX6RBwKi8vL8sLCwsSrE2GC0mK/zG8n/Uq4mFPBehoGqTxEzT2BPb0BJp7jApiMdebTKZvExISNKjil8PDwyxoM72tre1X3Ogx5j8g75uVlZUf0f3vyEhNpDer1cp1Rpozm80MV2FIYMfHxyRue2Ji4t3z83PH5eUlN12scY3iYAaaGK2jmA0FTNN0dXXF9vf3GU7nkcRLEdbP4OAEsAxXuQeOLuhvcmw6CLfiOZubm1zsqHSFLPwdkP4BbOsjGOjHjY2NCc3NzamYf0FXxdvWw2wfqlQqqaOjIwJrn01NTcUTVdjzNb5/OjAw8Ki7u/tDvP0HzyLc64VbhVNE8CbCB7mZRkREKOF/L9EcJivBFCSj0ShGR0crIA8RvEm4GslEAhUS+JbAo4g8cXh4WFTANShRaGlp4crXarXevr6+/HWkpqYKIFygHBr4H/NCRdNzueW6mJ+f/3y78/LyvEpLSzUgVT02Nubl7++vpueFzkuwKDW+azIyMriIs7KyPAOCn08gl3O03g5+rOAGWl40gxMLog1rDnQy/oZv2SMgNn5OwibdkahJV1A9/TPn4qaBhqXcuLhnwP7+/odQ/QrEbMYGCwBR7OYOfsC3mdFJG2z+K8rFI5Aw3OL9DUd4Ff7QrRKoAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;0d1aff07&quot;
        title=&quot;0d1aff07&quot;
        src=&quot;/static/bba2241c04fe2eb7fa94bee425a35aba/10448/0d1aff07.png&quot;
        srcset=&quot;/static/bba2241c04fe2eb7fa94bee425a35aba/19bd1/0d1aff07.png 163w,
/static/bba2241c04fe2eb7fa94bee425a35aba/10448/0d1aff07.png 313w&quot;
        sizes=&quot;(max-width: 313px) 100vw, 313px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A source class, by definition, acts as a source of features for a vector layers, that is, it is like a container of features. Because of this, the &lt;code class=&quot;language-text&quot;&gt;ol.source.GeoJSON&lt;/code&gt; source is limited to read GeoJSON features and not geometries. So next GeoJSON will be ignored by OpenLayers3 (really if you use de debug version you will see an assertion message):&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
{
&quot;type&quot;: &quot;Point&quot;,
&quot;coordinates&quot;: [
-105.01621,
39.57422
]
}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;While the next is a valid GeoJSON suitable to be read by the source:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
{
&quot;type&quot;: &quot;Feature&quot;,
&quot;geometry&quot;: {
&quot;type&quot;: &quot;Point&quot;,
&quot;coordinates&quot;: [
-105.01621,
39.57422
]
},
&quot;properties&quot;: {
&quot;name&quot;: &quot;Some feature property&quot;
}
}
{% endhighlight %}&lt;/p&gt;
&lt;h2&gt;Â That means we can&apos;t read GeoJSON geometries?&lt;/h2&gt;
&lt;p&gt;Absolutely no, simply means source classes follows the source concept, and that means, work with features.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;ol.format.GeoJSON&lt;/code&gt; format class allows to read and write features and geometries. To read a GeoJSON file composed of geometries we need to read the geometries and, manually, create a feature for each one. For example:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
var point = {
&quot;type&quot;: &quot;Point&quot;,
&quot;coordinates&quot;: [
-105.01621,
39.57422
]
};&lt;/p&gt;
&lt;p&gt;// Read the GeoJSON geometries using the format class
var format = new ol.format.GeoJSON();
var geometry = format.readGeometry(point);&lt;/p&gt;
&lt;p&gt;// Create a feature using the geometry
var feature = new ol.Feature({
geometry: geometry,
propA: &apos;Some feature property&apos;
});&lt;/p&gt;
&lt;p&gt;// Add feature to the source of some vector layer
vectorLayer.getSource().addFeature(feature);
{% endhighlight %}&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The Book of OpenLayers3]]></title><description><![CDATA[I don't remember when I start writing, I think the 2014 christmas, but what I know for sure is these months were a really busy months. Combine a full time job as a software engineering with the task of writing a book about a new technology (plus the fact I have always some other little projects in hands) is hard. Literally translating an spanish sentence Nobody said it was going to be simple.  LeanPub link: https://leanpub.com/thebookofopenlayers3 The book The book is oriented for any kind of reader with some knowledge inÂ JavaScript that requires to create web mapping applications.Â No matter if you are new to OpenLayers or an experienced user that comes from version 2, OpenLayers3 is a new redesign and rewrite of the project that requires investÂ some time to learn it again. Yes, I didn't write "spent some time" because your time understanding how to work with OpenLayers3 is not wasted time, but an investment in a new and very powerful tool. The content I tried to organise the book chapters in a natural order to understand the new architecture. Each chapter has a first section where all the theory is explained and a second one, based on examples, where you can see those concepts in action. Chapters Next is the table of contents. The Map and the View Layers Data sources and formats Vector layers Events, listeners and properties Overlays Controls and Interactions Â Where can you find it? The book has been written with the awesome LeanPub platform. Its slogan is Publish Early, Publish Often and I think I didn't follow too much it. Because of this I want to make a pre-relase, to see the readers acceptance, get your feedback and know if all this effort worthwhile. Thanks toÂ LeanPubÂ platform, once you buy a book you are allowed to download its updates freely. I will notify you when new releases are available. Please let me know everything: from mistakes in my sentences or code to costs (is it expensive or has an acceptable cost).]]></description><link>https://www.acuriousanimal.comnull</link><guid isPermaLink="false">https://www.acuriousanimal.comnull</guid><pubDate>Tue, 23 Dec 2014 22:02:00 GMT</pubDate><content:encoded>&lt;p&gt;I don&apos;t remember when I start writing, I think the 2014 christmas, but what I know for sure is these months were a really busy months. Combine a full time job as a software engineering with the task of writing a book about a new technology (plus the fact I have always some other little projects in hands) is hard. Literally translating an spanish sentence &lt;em&gt;Nobody said it was going to be simple&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 301px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.23255813953486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHqRx21nucsJBe5isOf/8QAGxAAAwEAAwEAAAAAAAAAAAAAAAECEgMQESL/2gAIAQEAAQUCdtmqPSKenXzofpLbeTj7/8QAGREBAAIDAAAAAAAAAAAAAAAAAAEhAhIT/9oACAEDAQE/AYydE1bd/8QAFxEAAwEAAAAAAAAAAAAAAAAAABAREv/aAAgBAgEBPwGGVD//xAAbEAACAwADAAAAAAAAAAAAAAAAIQEQEQIiYf/aAAgBAQAGPwLrc7AhbXgkcr//xAAdEAEAAgIDAQEAAAAAAAAAAAABADERIUFhcVHh/9oACAEBAAE/IQC57BX9JXcrAYmJOXcGfPqY3Metdojk+JuN3UCocz//2gAMAwEAAgADAAAAENTusf/EABsRAAICAwEAAAAAAAAAAAAAAAABEVEhMUFx/9oACAEDAQE/EGRndEOoSFzwj//EABcRAQEBAQAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QYDvI/8QAHhABAQACAgMBAQAAAAAAAAAAAREAITFRQYHRYaH/2gAIAQEAAT8QVJ8yEj1Ex8eBimr+YOODNl4wdjQhze3LgGzR2DgU9lC+8aQUAobn7kcQI/XzK6E7h1e+cSwVdn3heBz1hkHFz//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thebookofopenlayers3&quot;
        title=&quot;thebookofopenlayers3&quot;
        src=&quot;/static/85e2cdaabdd47ef77b762d7f9092eee8/279a8/thebookofopenlayers3.jpg&quot;
        srcset=&quot;/static/85e2cdaabdd47ef77b762d7f9092eee8/aca85/thebookofopenlayers3.jpg 163w,
/static/85e2cdaabdd47ef77b762d7f9092eee8/279a8/thebookofopenlayers3.jpg 301w&quot;
        sizes=&quot;(max-width: 301px) 100vw, 301px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LeanPub link: &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;https://leanpub.com/thebookofopenlayers3&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;The book&lt;/h2&gt;
&lt;p&gt;The book is oriented for any kind of reader with some knowledge inÂ JavaScript that requires to create web mapping applications.Â No matter if you are new to OpenLayers or an experienced user that comes from version 2, OpenLayers3 is a new redesign and rewrite of the project that requires investÂ some time to learn it again. Yes, I didn&apos;t write &quot;spent some time&quot; because your time understanding how to work with OpenLayers3 is not wasted time, but an investment in a new and very powerful tool.&lt;/p&gt;
&lt;h2&gt;The content&lt;/h2&gt;
&lt;p&gt;I tried to organise the book chapters in a natural order to understand the new architecture. Each chapter has a first section where all the theory is explained and a second one, based on examples, where you can see those concepts in action.&lt;/p&gt;
&lt;h3&gt;Chapters&lt;/h3&gt;
&lt;p&gt;Next is the table of contents.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The Map and the View&lt;/li&gt;
&lt;li&gt;Layers&lt;/li&gt;
&lt;li&gt;Data sources and formats&lt;/li&gt;
&lt;li&gt;Vector layers&lt;/li&gt;
&lt;li&gt;Events, listeners and properties&lt;/li&gt;
&lt;li&gt;Overlays&lt;/li&gt;
&lt;li&gt;Controls and Interactions&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Â Where can you find it?&lt;/h3&gt;
&lt;p&gt;The book has been written with the awesome &lt;a href=&quot;https://leanpub.com/&quot;&gt;LeanPub&lt;/a&gt; platform. Its slogan is &lt;em&gt;Publish Early, Publish Often&lt;/em&gt; and I think I didn&apos;t follow too much it. Because of this I want to make a pre-relase, to see the readers acceptance, get your feedback and know if all this effort worthwhile.&lt;/p&gt;
&lt;p&gt;Thanks toÂ &lt;a href=&quot;https://leanpub.com/&quot;&gt;LeanPub&lt;/a&gt;Â platform, once you buy a book you are allowed to download its updates freely. I will notify you when new releases are available.&lt;/p&gt;
&lt;p&gt;Please let me know everything: from mistakes in my sentences or code to costs (is it expensive or has an acceptable cost).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Books]]></title><description><![CDATA[I like learn, explain and, when time gives me a chance, write. Write and transmit knowledge is complicated and requires time, at least for me, to structure what to say and how to say it. As Albert Einstein said: If you can't explain it simply, you don't understand it well enough. The NodeJS cluster module The NodeJS cluster module is a short book, extracted from this post articles, introducing the NodeJS cluster module. NodeJS processes runs on a single process, which means it does not take advantage from multi-core systems by default. If you have an 8 core CPU and run a NodeJS program via $ node app.js it will run in a single process, wasting the rest of CPUs. Hopefully for us NodeJS offers the cluster module that contains a set of functions and properties that help us to create programs that uses all the CPUs.  LeanPub link: https://leanpub.com/thenodejsclustermodule The Book of OpenLayers3 The Book of OpenLayers3: Published on 2014, just before the first release of OpenLayers3 was release, the book covers the most important topics of this awesome web mapping library.  LeanPub link: https://leanpub.com/thebookofopenlayers3 OpenLayers Cookbook OpenLayers Cookbook: Published on 2012, this cookbook covers the most common situations of the day to day work with OpenLayers 2.]]></description><link>https://www.acuriousanimal.comnull</link><guid isPermaLink="false">https://www.acuriousanimal.comnull</guid><pubDate>Tue, 23 Dec 2014 21:54:00 GMT</pubDate><content:encoded>&lt;p&gt;I like learn, explain and, when time gives me a chance, write. Write and transmit knowledge is complicated and requires time, at least for me, to structure what to say and how to say it.&lt;/p&gt;
&lt;p&gt;As Albert Einstein said: &lt;strong&gt;&lt;em&gt;If you can&apos;t explain it simply, you don&apos;t understand it well enough&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;The NodeJS cluster module&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thenodejsclustermodule&quot;&gt;The NodeJS cluster module&lt;/a&gt; is a short book, extracted from this post articles, introducing the NodeJS cluster module. NodeJS processes runs on a single process, which means it does not take advantage from multi-core systems by default. If you have an 8 core CPU and run a NodeJS program via $ node app.js it will run in a single process, wasting the rest of CPUs.&lt;/p&gt;
&lt;p&gt;Hopefully for us NodeJS offers the cluster module that contains a set of functions and properties that help us to create programs that uses all the CPUs.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 140%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAA3XAAAN1wFCKJt4AAADc0lEQVRIx62WW0+bRxCG9881F+lVmlRVbgmhIqENF72zUIVQ6AUCLA7GBpuTbTA2xv44GOPP5miUn/WWZ6SxFlJVqtSLEZ93Z56dmZ2dIaysrGhtbU25XE75fF6FQkGbm5va2tpSsVhUqVR6Jqyxhw662GALA1ZYX1/XxsaGbTpke3tbOzs7Jru7u8/E19FxOLYwYAVO4LQYtLe3p/39fZXLZZNKpWLCN+sIOjEYBqzAB6HEIIyr1aoODg50eHg4klqtpqOjI9tDJwbDwNsQw2IQxrWjmur1ukmj0TAP0QfKATHYoYEP9woQxs1m0yRpn6rVbD1JW72rnpaWljQxMaHLy0vTOz4+NpsYGtwzNjgZwej9L++1Vcnr6/kfWmz8ZbDXP77W+Pi4MpmM3v78VoV8wQ6OocFhhNhqtSy5Yx/G9OXzF/02+0njjTf6vfxRH3+d0KsfXmlyclI/vXujD5/GVClX1DxpmhMODeQBGDkCSBh8J+3203dT+WZOxaSgUq2kzJ8Z2+dms8tZXVxcmIfow4AVSK7nDeDZ2ZnlqNvtqp/2lfZSlZKicsm6OrcdDfoDpf1UaZrq9PRU7aeDsYUBK7h3JycnSpJE5+fn6nQ6urq6MqO031P9sq7qRVXdXtfWOAzv0MUGW/cyED+nsIkSyoPBwOT29lbD4VDDh6G+PX6z77u7O93c3KjX65kuh+MpUFgBMgVJDXkeyQVwhMMA4wnf/CU89oDExc96IMm8wfn5eU1PTxt8bm7Ofi8uLmpmZsZufnV11fS4yWw2q9nZWdNDpqamRiUUoHr+2knbLqTf71sYAHn0eEyN4QWNgDAR0oSeXygRBr9hgIThQJK/vLxs3uA1QptaWFiw3F1fX48ux6EWMokkbPJDyfgNA+USHh8f9fDwoPv7+9Ff9tBBFxsvHbuUuKi9bPDS6wwllDmUkNFjDx33zh+ElU1c2JyEgoeOF5SH1eOT8JswHRZ7Nyrs+OlxOQ71AvdX4yC/DId5Uft7DnGnwe0YihHGXvQO8ieHLjbeH605eC9kgQ1O8zLwQo6FNfa8KcQwa18vGyzhe/P0RosnLn5B6LyEMcRGIyCGxvPD2z/i48BBcWMFZiPA37HPFZ9y/zSkHOKzBN3vhtR/HaM+StHBq+/G6L8N+pdDPh726LhXzwb9//2vyN9Iq2jeh7hR+gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thenodecluestermodule&quot;
        title=&quot;thenodecluestermodule&quot;
        src=&quot;/static/1de9f186b6470b6165f941e34d1108c9/135ae/thenodecluestermodule.png&quot;
        srcset=&quot;/static/1de9f186b6470b6165f941e34d1108c9/19bd1/thenodecluestermodule.png 163w,
/static/1de9f186b6470b6165f941e34d1108c9/135ae/thenodecluestermodule.png 300w&quot;
        sizes=&quot;(max-width: 300px) 100vw, 300px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LeanPub link: &lt;a href=&quot;https://leanpub.com/thenodejsclustermodule&quot;&gt;https://leanpub.com/thenodejsclustermodule&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;The Book of OpenLayers3&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;/books/the-book-of-openlayers3&quot;&gt;The Book of OpenLayers3&lt;/a&gt;: Published on 2014, just before the first release of OpenLayers3 was release, the book covers the most important topics of this awesome web mapping library.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/books/the-book-of-openlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 301px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.23255813953486%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHqRx21nucsJBe5isOf/8QAGxAAAwEAAwEAAAAAAAAAAAAAAAECEgMQESL/2gAIAQEAAQUCdtmqPSKenXzofpLbeTj7/8QAGREBAAIDAAAAAAAAAAAAAAAAAAEhAhIT/9oACAEDAQE/AYydE1bd/8QAFxEAAwEAAAAAAAAAAAAAAAAAABAREv/aAAgBAgEBPwGGVD//xAAbEAACAwADAAAAAAAAAAAAAAAAIQEQEQIiYf/aAAgBAQAGPwLrc7AhbXgkcr//xAAdEAEAAgIDAQEAAAAAAAAAAAABADERIUFhcVHh/9oACAEBAAE/IQC57BX9JXcrAYmJOXcGfPqY3Metdojk+JuN3UCocz//2gAMAwEAAgADAAAAENTusf/EABsRAAICAwEAAAAAAAAAAAAAAAABEVEhMUFx/9oACAEDAQE/EGRndEOoSFzwj//EABcRAQEBAQAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QYDvI/8QAHhABAQACAgMBAQAAAAAAAAAAAREAITFRQYHRYaH/2gAIAQEAAT8QVJ8yEj1Ex8eBimr+YOODNl4wdjQhze3LgGzR2DgU9lC+8aQUAobn7kcQI/XzK6E7h1e+cSwVdn3heBz1hkHFz//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thebookofopenlayers3&quot;
        title=&quot;thebookofopenlayers3&quot;
        src=&quot;/static/85e2cdaabdd47ef77b762d7f9092eee8/279a8/thebookofopenlayers3.jpg&quot;
        srcset=&quot;/static/85e2cdaabdd47ef77b762d7f9092eee8/aca85/thebookofopenlayers3.jpg 163w,
/static/85e2cdaabdd47ef77b762d7f9092eee8/279a8/thebookofopenlayers3.jpg 301w&quot;
        sizes=&quot;(max-width: 301px) 100vw, 301px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LeanPub link: &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;https://leanpub.com/thebookofopenlayers3&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;OpenLayers Cookbook&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/books/openlayers-cookbook&quot;&gt;OpenLayers Cookbook&lt;/a&gt;: Published on 2012, this cookbook covers the most common situations of the day to day work with OpenLayers 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;/books/openlayers-cookbook&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 302px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 123.50993377483444%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAgME/9oADAMBAAIQAxAAAAFDsnY00CBWQUymWUVAP//EABwQAAICAgMAAAAAAAAAAAAAAAADAQISExEgI//aAAgBAQABBQJceZyUZWKbKm2hiyDFpK2T0//EABcRAAMBAAAAAAAAAAAAAAAAAAABEhH/2gAIAQMBAT8B1FIstn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARIR/9oACAECAQE/AZeksstn/8QAGxAAAgIDAQAAAAAAAAAAAAAAADEBAhARIDL/2gAIAQEABj8CrmI2MYrCseZ4/8QAIBAAAgEDBAMAAAAAAAAAAAAAAAERIUFxIDFRkWGh8P/aAAgBAQABPyHqCqVVgquMJBpcE279HwQlogjyXvYNpbc6P//aAAwDAQACAAMAAAAQhNAO/8QAGREBAAIDAAAAAAAAAAAAAAAAABFhATFR/9oACAEDAQE/EMRbWp8VP//EABgRAQADAQAAAAAAAAAAAAAAAAEAEBFh/9oACAECAQE/EFE5OM1R/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFhgRBB/9oACAEBAAE/ELmweG9zUkAXrmWA28TInbU0xTdNKocoC344JH4BQCG47WbU2qtDH4z/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;openlayers-cookbook&quot;
        title=&quot;openlayers-cookbook&quot;
        src=&quot;/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg&quot;
        srcset=&quot;/static/99c01733248e8e53a81f05020d6d48cc/aca85/7843OS_OpenLayer%20Cookbook_cov_0.jpg 163w,
/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg 302w&quot;
        sizes=&quot;(max-width: 302px) 100vw, 302px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How the JavaScript heatmap implementation works?]]></title><description><![CDATA[A heatmap is a powerful way to visualise data. Given a matrix of data each value is represented by a color.Â The implementation of the heatmap algorithm is expensive in computation terms: for each grid's pixel you need to compute its colour from a set of known values. As you can thing, it is notÂ feasible to be implement it on the client side because map rendering wouldÂ be really slow.  But OpenLayers3 comes with a handy class, , which allows to render vector data as a heatmap, so the question is: how it is made? Really, the  layer uses a smart approximation to the algorithm which produces great results and is really fast. The steps can be summarised as: A gradient of colors is created as a 1x256 pixel size image. Each known value is rendered in a canvas as a grey blurred point using some radius. This produces a canvas where the blurred points can overlap each other and create more obscure zones. Something similar to this.  Finally, an image is obtained from the canvas and for each pixels a color is assigned. The color is obtained from the previous 1x256 pixel image obtained the color specified by the grey value (which goes from 0..255). The coloured image is then rendered in the map canvas, obtaining a nice effect suited to be used for density maps. The  offers some properties we can use to play better: , , ,  and . This last can be configured per feature, allowing to assign a level of importance to each feature determining in more or less measure the final color.]]></description><link>https://www.acuriousanimal.com/blog/2014/12/23/how-the-javascript-heatmap-implementation-works</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/12/23/how-the-javascript-heatmap-implementation-works</guid><pubDate>Tue, 23 Dec 2014 20:29:00 GMT</pubDate><content:encoded>&lt;p&gt;A &lt;a href=&quot;http://en.wikipedia.org/wiki/Heat_map&quot;&gt;heatmap&lt;/a&gt; is a powerful way to visualise data. Given a matrix of data each value is represented by a color.Â The implementation of the heatmap algorithm is expensive in computation terms: for each grid&apos;s pixel you need to compute its colour from a set of known values. As you can thing, it is notÂ feasible to be implement it on the client side because map rendering wouldÂ be really slow.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 68.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAADzUlEQVQ4yzWTW0ybZRjHP+92Ycyid2Y6tmSJMS4kxoRsmYcsMcRgNJpdqBcSNZnjwm3xdCFZmEYcCkzCOoYQJgVaoHwFSiktlDOldJSTCO3aQr+vh2+ltJRjgB3g52uMF+/V+77/5/n9n/8jmWNhjEtGmmNeepRFHL4PmVDGmE5A97IP70AerSuXqVv/HH28iUrlG37Z/gx38DzuqTeZj51G1r7HveBh0N+LNBRN0Rj3MO7boT0wxe1MAx1aO3bNTzL/FI8uPIVj/AbViT5x9zHl6lU8wbM8cR5jv+k4/q1sHIsX6Q+MMB8YQhqPPWEkdoArkMG+oGGIl9GgWTBFq4hdf47DT46wLOdgud9OrVqFdeVdpsbOsTCXw+7ICdbHT9Icz0WXKqQxakByxw/wiDMqhNsiKq3LV7Bpl9FtfcH13WImB3Mxrb6OYb2TocAMVcmLFG9eozz9I13zb3Fv6iylG1cp3SmgdL30f8FD+uN7GGN+qlO3BHIHRq2FntgozVoR/u+OMVxzntJMIcVrZQx68liqO43a/BIZ+SSt4a+Qly4w6Pv9P0G3JpAj+7iC+9iiYfSrDWJQTTSkOxm3vwYnJMYrX+bnVCVysACr+irJ28fZbMliozeLjDWLTduLzM2cQZoQ/nk1GA3t0j+3hl055M6yjD5koCFmwhqup2n7bSr3SihbL0OO/oBBuYkpYOYPrQRP4hyPK56H/CMkTK8gDccfY46u0BAJ0hJrp8t7i+aAXWB30/jAQnW4k2JFFFAnGdh4B31qlDnfBgZ/M7XhboyKHtdCNktyNq7Y+0g2NUrt7KfotDpMqh7nYj71mpHySDnGhUXafMsYxJsOZZuWZC3V65doV9N0zowQuXQKeeoGN4XvcjoPa7IIyRHyky48ii2k426qni51kJ6QiztBN9ZQAm/4gP5IlBE1Qn8UahN3KU1fo23eCkclHLZcqrQ29NrX1Kc+QLL7x9jUPY1d/ZVexcKoauXPpQGalqNYkntMJ6FzZZvGVEIgQcf9NeqW7mGOR3GZfsOm5CDHncLPAUH2BpJTSQmcLylZLWJ2YRan6qUuvcVwaBu7uxX7ZDs2byu9fZWYwwomZZL+8ApDsYf0psEiuu1WdZiVGSaD7/0bG0S1Q7F+ZlpWHEJ8kgnHFQzBbwlUi1hUPMPmT89ycEbCNdIqulDpUR/gFf8mIo/EQhxi0TJ0ajs44ttIHoHRFU0IwWJqfHox4QLm3B9hTNfQuFWBLSMz7c1ns+8FLOoYTkWsamSHCe1QZPchA7MJ5Fk/hr/+xhuBfwABi2/Gjr8hjQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2014 12 23 at 18 25 49 300x206&quot;
        title=&quot;Screen Shot 2014 12 23 at 18 25 49 300x206&quot;
        src=&quot;/static/4456a2913101eb03853d997924b2175e/135ae/Screen-Shot-2014-12-23-at-18.25.49-300x206.png&quot;
        srcset=&quot;/static/4456a2913101eb03853d997924b2175e/19bd1/Screen-Shot-2014-12-23-at-18.25.49-300x206.png 163w,
/static/4456a2913101eb03853d997924b2175e/135ae/Screen-Shot-2014-12-23-at-18.25.49-300x206.png 300w&quot;
        sizes=&quot;(max-width: 300px) 100vw, 300px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;But OpenLayers3 comes with a handy class, &lt;code class=&quot;language-text&quot;&gt;ol.layer.Heatmap&lt;/code&gt;, which allows to render vector data as a heatmap, so the question is: how it is made?&lt;/p&gt;
&lt;p&gt;Really, the &lt;code class=&quot;language-text&quot;&gt;ol.layer.Heatmap&lt;/code&gt; layer uses a smart approximation to the algorithm which produces great results and is really fast. The steps can be summarised as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A gradient of colors is created as a 1x256 pixel size image.&lt;/li&gt;
&lt;li&gt;Each known value is rendered in a canvas as a grey blurred point using some radius. This produces a canvas where the blurred points can overlap each other and create more obscure zones. &lt;a href=&quot;http://jsfiddle.net/mnmrze6k/1/&quot;&gt;Something similar to this&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADnklEQVQ4yz2T6VfUVRjHf6/jhcE5aPVCE6M6h6TjkhwpEhhBGBYZZE8Yh9UD5bAJg0QhiLIOdEiWDqCxhJTIIAyiIDEGsgybbDIssgSWUNZ/8OkOL3pxz3nuee7zeb73ud8rzT4b4/X2Jjs7WwwtzNM5OUnHxMTuanz8mMJbdZQ0NjIwNc7OyzUW5qZo/qme8OgoIhPi6erpZuvlOn+J+u1Xm0i3a6sxLc3TPzdLq3EM4+IC82sr/4PbRke5PzbG5u8vGJ8cRast4qyfL4EhQdT/WMuKaZZ/BGznzw1mZieRqirLMUyM8fPQMLWdndTea0X3xEC7gJihXVNTLK4tMzL8G1nXcvD28sTW9j0UCl8qysv4paWJmWdGFp9P0yKUS9naEtoGB7j14AEqtZpTcjlRKSnU6fXohcKe6WnWN1a4Iwo9/M4il3sSFxeNtriAtNQkLijP09Z6h7mZcRrr65BiLl+mobeXGqFOER6OzQfv84mTE8lXs2npaKdKp0PX30fTvbukZGZQcOMa3V33GRsdpOaHCvJyszH0PWRzY5m56XEkTWEh1aLIDM0sKUEeGIijTMZpoVQZqSJUdYHMb76muLSY6qrvyb+RS1HBdYafGpifnaBfwAy/PtqNl00zSBczMohKTkbb0EBWWRm+YWGc8ffHwdkZ+2NHcfrUkeAABQH+fqgvJfBFWAjBQQF06O5idkihgKuUEWRqNOTn5SH5K5V4BQWRU1FBUk4OMh8fzsfHE5GQgLPMFaUynKyr35KWkY4mLQVvHy/k586h69Chf6jHS8z1kM1Bjh45wqnPnZA8RNKssLSpaRdohidkZVFWW8PN8lIyrueRV1lBQ7uOiroaVFEqNALe/6SP+sbbOImmhz+yw0vuQWxMFNLHJ07sQjK1WkJjYzl8/DjmJgmadL67WU5iShL+gQFo8vOpEdByYXLzY5n91yMUJideIlGMoqW5geFBA5K7QoGzpyfxV65gjt/Zvx9bOzucXV3E4a/w8/XevZKL2KuT1FTWVDM4+pRt8WueL8zQJ5QaRwbYWl/itTC4lF5QQHJuLjGpqXxob88eSysOHrLB7bQrcbFRyGQu7LW2Zt9ea95+ax+fnXSgSLz4ygsT//79B6bVJSZM8/QaRxg1DiEpIiKIS0/Hyd2dNyws2GNlhYPjSeSeZ7gYG02i+kvc3GS8e+AAFiJvafkmoaEhtHXrebW1yubmKs09j4gUgnxDgvkPv0ij0tVrVUYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screen Shot 2014 12 23 at 18 27 17 300x190&quot;
        title=&quot;Screen Shot 2014 12 23 at 18 27 17 300x190&quot;
        src=&quot;/static/d772b2047959fa43acec731b32a29f72/135ae/Screen-Shot-2014-12-23-at-18.27.17-300x190.png&quot;
        srcset=&quot;/static/d772b2047959fa43acec731b32a29f72/19bd1/Screen-Shot-2014-12-23-at-18.27.17-300x190.png 163w,
/static/d772b2047959fa43acec731b32a29f72/135ae/Screen-Shot-2014-12-23-at-18.27.17-300x190.png 300w&quot;
        sizes=&quot;(max-width: 300px) 100vw, 300px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Finally, an image is obtained from the canvas and for each pixels a color is assigned. The color is obtained from the previous 1x256 pixel image obtained the color specified by the grey value (which goes from 0..255).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The coloured image is then rendered in the map canvas, obtaining a nice effect suited to be used for density maps. The &lt;code class=&quot;language-text&quot;&gt;ol.layer.Heatmap&lt;/code&gt; offers some properties we can use to play better: &lt;code class=&quot;language-text&quot;&gt;blur&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;radius&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;gradient&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;shadow&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;weight&lt;/code&gt;. This last can be configured per feature, allowing to assign a &lt;em&gt;level of importance&lt;/em&gt; to each feature determining in more or less measure the final color.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The Book of OpenLayers 3, completed !!!]]></title><description><![CDATA[It was a long road but finally it comes true: The Book of OpenLayers 3 is finished.  The chapter Controls and InteractionsÂ concludes the exploration of the main concepts related with OpenLayers version 3. This chapter is focused on showing how to work with the two main tools necessary to interact with the maps and its contents. New samples have been created. Remember the source code can be found at https://github.com/acanimal/thebookofopenlayers3 and a running demo is available at http://www.acuriousanimal.com/thebookofopenlayers3/. I must admit finished is not the best word to apply, OpenLayers3 is big, complex and awesome enough to write tons of chapters, but I must put a final dot and leave the typewriter... for a while :) Some of you have contact to me notifying spelling errors. I have given priority to the release of the final chapter. Please don't hesitate to contact me to notify me more error (or anything), my next release will be a maintenance version fixing all that errors. Many of you has suggested me many ideas on features to write about, so I think I will come back with a "There is more" really final chapter some day. Thanks for your confidence.]]></description><link>https://www.acuriousanimal.com/blog/2014/12/16/the-book-of-openlayers-3-completed</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/12/16/the-book-of-openlayers-3-completed</guid><pubDate>Tue, 16 Dec 2014 18:50:00 GMT</pubDate><content:encoded>&lt;p&gt;It was a long road but finally it comes true: The Book of OpenLayers 3 is finished.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 230px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAHqLktZ2HOEhYvZUtMf/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAECEhEDIf/aAAgBAQABBQJ02as6RT06+aH1E028nmIR/8QAFxEBAQEBAAAAAAAAAAAAAAAAABIRYf/aAAgBAwEBPwHVOqf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BIwv/xAAdEAABBAIDAAAAAAAAAAAAAAAQAAERIQIiYXHh/9oACAEBAAY/AtV6HoVI4VS3SyP/xAAeEAACAgICAwAAAAAAAAAAAAAAAREhMWFBcVGB4f/aAAgBAQABPyGEzXmRMfwY2PSQUEU1Oz09Du0YNGw15IDSmd2hFXZy7P/aAAwDAQACAAMAAAAQC8px/8QAGREAAgMBAAAAAAAAAAAAAAAAAAERUXEx/9oACAEDAQE/EFfpkahWMH//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QKRYn/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFRQdFhcYH/2gAIAQEAAT8QvzPICb1SRgXhQ+DvxBocNaDxFpsAHfzLuhoUdCDCh9yi/wBidq+SG1G6Ucfb1AOg2hlxGiuZ3uUDRus5mKHAp//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thebookofopenlayers3 230x300&quot;
        title=&quot;thebookofopenlayers3 230x300&quot;
        src=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg&quot;
        srcset=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/aca85/thebookofopenlayers3-230x300.jpg 163w,
/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg 230w&quot;
        sizes=&quot;(max-width: 230px) 100vw, 230px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The chapter &lt;em&gt;Controls and Interactions&lt;/em&gt;Â concludes the exploration of the main concepts related with OpenLayers version 3. This chapter is focused on showing how to work with the two main tools necessary to interact with the maps and its contents.&lt;/p&gt;
&lt;p&gt;New samples have been created. Remember the source code can be found at &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3&quot;&gt;https://github.com/acanimal/thebookofopenlayers3&lt;/a&gt; and a running demo is available at &lt;a href=&quot;http://www.acuriousanimal.com/thebookofopenlayers3/&quot;&gt;http://www.acuriousanimal.com/thebookofopenlayers3/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I must admit &lt;em&gt;finished&lt;/em&gt; is not the best word to apply, OpenLayers3 is big, complex and awesome enough to write tons of chapters, but I must put a final dot and leave the typewriter... for a while :)&lt;/p&gt;
&lt;p&gt;Some of you have contact to me notifying spelling errors. I have given priority to the release of the final chapter.&lt;/p&gt;
&lt;p&gt;Please don&apos;t hesitate to contact me to notify me more error (or anything), my next release will be a maintenance version fixing all that errors.&lt;/p&gt;
&lt;p&gt;Many of you has suggested me many ideas on features to write about, so I think I will come back with a &quot;There is more&quot; really final chapter some day.&lt;/p&gt;
&lt;p&gt;Thanks for your confidence.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Things to know when writing a book]]></title><description><![CDATA[From my short experience, let me summarize some things you must take into account when writing a book. Its is not a mechanical process, it is more related with inspiration, but we must be constant and productive. Everyday is not the best day to write It is a fact, a law of universe. You could desire write but some days your brain is not clear enough, agile enough, fresh enough to write as you like. Don't force yourself. Don't hate yourself to be unable to write as you would like. Relax. Disconnect. Put your head in another tasks. Do some sport. The best thing to do when today isn't the best day to write is not to write. Markdown notation is great Yes, markdown syntax is great. It is simple, clear and powerful. At the beginning, if you come from a complex word processor like Word, Pages, LibreOffice or similar, you feel nude, but later you will appreciate that nudity. Markdown separates your raw writes from the final visualisation. A text editor is enough People tend to drown looking for the perfect tool to make the work. My advice is don't bother you, a simple text editor is enough to write any kind of book (otherwise askÂ to the hundreds of people that have written using a typewriter). Personally, I prefer a simple text editor over a word processor, because the first isolates the content from the way to visualise it. Of course technology can improve the way we work. We have tons of text editor, classics like vimÂ or emacsÂ text editors, the new onesÂ like SublimeText,Â TextMateÂ or the Ulysses application, and also, many online text editors, like dillinger.ioÂ or StackEdit. Keep cross references organized Some kind of books, like technical books, are plenty of cross references pointing to other sections, chapters or samples.Â It is vital for the author to maintain these references updated and organized. When using markdown a tend to organize the book as follows: Each chapter in a separate file namedÂ  Put a reference on each chapter title like:  Put a reference on each section title as  These simple tips help you organize the whole book references and simplifying the process to create cross references.]]></description><link>https://www.acuriousanimal.com/blog/2014/11/15/things-to-know-when-writing-a-book</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/11/15/things-to-know-when-writing-a-book</guid><pubDate>Sat, 15 Nov 2014 11:25:00 GMT</pubDate><content:encoded>&lt;p&gt;From my short experience, let me summarize some things you must take into account when writing a book. Its is not a mechanical process, it is more related with inspiration, but we must be constant and productive.&lt;/p&gt;
&lt;h2&gt;Everyday is not the best day to write&lt;/h2&gt;
&lt;p&gt;It is a fact, a law of universe. You could desire write but some days your brain is not clear enough, agile enough, fresh enough to write as you like.&lt;/p&gt;
&lt;p&gt;Don&apos;t force yourself. Don&apos;t hate yourself to be unable to write as you would like. Relax. Disconnect. Put your head in another tasks. Do some sport.&lt;/p&gt;
&lt;p&gt;The best thing to do when today isn&apos;t the best day to write is not to write.&lt;/p&gt;
&lt;h2&gt;Markdown notation is great&lt;/h2&gt;
&lt;p&gt;Yes, markdown syntax is great. It is simple, clear and powerful.&lt;/p&gt;
&lt;p&gt;At the beginning, if you come from a complex word processor like Word, Pages, LibreOffice or similar, you feel nude, but later you will appreciate that nudity.&lt;/p&gt;
&lt;p&gt;Markdown separates your raw writes from the final visualisation.&lt;/p&gt;
&lt;h2&gt;A text editor is enough&lt;/h2&gt;
&lt;p&gt;People tend to drown looking for the perfect tool to make the work. My advice is &lt;em&gt;don&apos;t bother you&lt;/em&gt;, a simple text editor is enough to write any kind of book (otherwise askÂ to the hundreds of people that have written using a typewriter). Personally, I prefer a simple text editor over a word processor, because the first isolates the content from the way to visualise it.&lt;/p&gt;
&lt;p&gt;Of course technology can improve the way we work. We have tons of text editor, classics like &lt;a href=&quot;http://www.vim.org/&quot;&gt;vim&lt;/a&gt;Â or &lt;a href=&quot;http://www.gnu.org/software/emacs/&quot;&gt;emacs&lt;/a&gt;Â text editors, the new onesÂ like &lt;a href=&quot;http://www.sublimetext.com/&quot;&gt;SublimeText&lt;/a&gt;,Â &lt;a href=&quot;http://macromates.com/&quot;&gt;TextMate&lt;/a&gt;Â or the &lt;a href=&quot;http://www.ulyssesapp.com/&quot;&gt;Ulysses&lt;/a&gt; application, and also, many online text editors, like &lt;a href=&quot;http://dillinger.io&quot;&gt;dillinger.io&lt;/a&gt;Â or &lt;a href=&quot;https://stackedit.io&quot;&gt;StackEdit&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Keep cross references organized&lt;/h2&gt;
&lt;p&gt;Some kind of books, like technical books, are plenty of cross references pointing to other sections, chapters or samples.Â It is vital for the author to maintain these references updated and organized.&lt;/p&gt;
&lt;p&gt;When using markdown a tend to organize the book as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Each chapter in a separate file namedÂ &lt;code class=&quot;language-text&quot;&gt;chapterNumber_chapterName.md&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Put a reference on each chapter title like: &lt;code class=&quot;language-text&quot;&gt;1- Introduction {#ch1-introduction}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Put a reference on each section title as &lt;code class=&quot;language-text&quot;&gt;1.1- Some section {#sc1-some-section}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These simple tips help you organize the whole book references and simplifying the process to create cross references.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[New Overlays chapter on The Book of OpenLayers3]]></title><description><![CDATA[The Book of OpenLayers 3 has been updated !!! This book is self-published, no great editorial is behind it neither a marketing campaign, so I appreciate any shares you can make through social networks and any other media. What you can find in this new update? A new OverlaysÂ chapter. This is a short but necessary chapter that explains how we can work with overlays to place any kind of HTML located within the map. As I comment, it is a short chapter but I prefer to leave it as an independent chapter. A new sample on the Events, listeners and propertiesÂ chapter, named Styling features under the pointer. Once we know about feature styling and events, the sample demonstrates how we can change the style of the features under the pointer. The book has now 6 chapters and is 80% complete.Â Currently I continue working on a more extensive chapter called Controls and Interactions, which I hope to have finished in approximately a month. Please, don't hesitate to contact me with comments and suggestions. Your feedback is really valuable for me. Thanks for your confidence inÂ The Book of OpenLayers 3.]]></description><link>https://www.acuriousanimal.com/blog/2014/11/02/new-overlays-chapter-on-the-book-of-openlayers3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/11/02/new-overlays-chapter-on-the-book-of-openlayers3</guid><pubDate>Sun, 02 Nov 2014 09:22:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The Book of OpenLayers 3&lt;/a&gt; has been updated !!!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This book is self-published, no great editorial is behind it neither a marketing campaign, so I appreciate any shares you can make through social networks and any other media.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What you can find in this new update?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;A new &lt;em&gt;Overlays&lt;/em&gt;Â chapter&lt;/strong&gt;. This is a short but necessary chapter that explains how we can work with overlays to place any kind of HTML located within the map. As I comment, it is a short chapter but I prefer to leave it as an independent chapter.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A new sample&lt;/strong&gt; on the &lt;em&gt;Events, listeners and properties&lt;/em&gt;Â chapter, named &lt;em&gt;Styling features under the pointer&lt;/em&gt;. Once we know about feature styling and events, the sample demonstrates how we can change the style of the features under the pointer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The book has now 6 chapters and is 80% complete.Â Currently I continue working on a more extensive chapter called &lt;strong&gt;&lt;em&gt;Controls and Interactions&lt;/em&gt;&lt;/strong&gt;, which I hope to have finished in approximately a month.&lt;/p&gt;
&lt;p&gt;Please, don&apos;t hesitate to contact me with comments and suggestions. Your feedback is really valuable for me.&lt;/p&gt;
&lt;p&gt;Thanks for your confidence inÂ &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The Book of OpenLayers 3&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[7 reasons to use Yeoman's angular-fullstack generator]]></title><description><![CDATA[For my next project and, after looking for candidates and reading some hundreds of lines of documentation, I finally choose to work with the so called MEAN stack: mongodb, express, angular and node. As with any other technology ecosystem, the great number of frameworks, libraries and tools can make our choiceÂ a challenge, and JavaScript is not an exception. But for JavaScript projects we have lot of help and I decide to use the awesome Yeoman tool. Yeoman combines the power of grunt, bower, npm and adds its own salt: the generators. Yeoman generators are tasks responsible to build the initial project scaffolding. Yeoman offers an extensive set of official generators oriented to create: webapps, backbone app, chrome extension, etc but we can also found a myriad of non official generators (yes, because anyone can create a new generator to satisfy his/her needs). Within all the generators I chose angular-fullstack to create my MEAN project structure and next are my reasons: 1. Easy to install You require to have node andÂ npmÂ installed on your system. Once you have them installYeomanÂ and theÂ angular-fullstackÂ is as easy as: Once installed the generator you simply need to create a new folder and initialise your project: {% highlight bash %} mkdir my-new-project && cd $_
yo angular-fullstack app-name
{% endhighlight %} 2. Creates both client and server scaffoldings The generator generates theÂ full stackÂ of your project, both the client and server code. Your project will start well organised and prepared to create an awesome RIA application. 3. Introduces good practices in the generated code Because the generated is made by experienced developers, theyÂ applies good practices in code organisation and style programming (like the environment configuration on the server side using node). For me, this is one of the most important reasons to use this generator. Anybody knows starting with a new technology is always hard, but it is nothing when you start with four new technologies :) 4. Server side API prepared to use authentication Following best practices the code is prepared so you can easily add security to you API via a node middleware so each request requires authentication of the client side. 5. Support HTML or jade templating on client side You can use any template engine for client side but by default the generator works with HTML and Jade. I don't really like Jade too much so I always try to use EJS or similar (Warning this last sentence is the author's opinion). 6. Support for different CSS preprocessors For different opinions there are different alternatives. This wayÂ angular-fullstackÂ has support for plain CSS, Stylus, SassÂ or LESSÂ pre-processors. Choose your preferred. 7. Commands to scaffold anything With theangular-fullstackÂ you can createÂ new end points for the server side or client side components (like routes, controllers, services, filters, directives, ...) with a sentences. So, next command: {% highlight bash %} yo angular-fullstack:endpoint message
? What will the url of your endpoint to be? /api/messages
{% endhighlight %} will produce: {% highlight bash %}
server/api/message/index.js
server/api/message/message.spec.js
server/api/message/message.controller.js
server/api/message/message.model.js  (optional)
server/api/message/message.socket.js (optional)
{% endhighlight %} Â Conclusion In my opinion,Â angular-fullstackÂ is a really powerful tool that simplifies our day to day work. As always it is not the panacea, it is simply a generic tool to automatize many common tasks. Because of this we can found situations it lacks some feature.]]></description><link>https://www.acuriousanimal.com/blog/2014/10/18/7-reasons-to-use-yeomans-angular-fullstack-generator</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/10/18/7-reasons-to-use-yeomans-angular-fullstack-generator</guid><pubDate>Sat, 18 Oct 2014 10:17:00 GMT</pubDate><content:encoded>&lt;p&gt;For my next project and, after looking for candidates and reading some hundreds of lines of documentation, I finally choose to work with the so called MEAN stack: mongodb, express, angular and node.&lt;/p&gt;
&lt;p&gt;As with any other technology ecosystem, the great number of frameworks, libraries and tools can make our choiceÂ a challenge, and JavaScript is not an exception. But for JavaScript projects we have lot of help and I decide to use the awesome &lt;a href=&quot;http://yeoman.io/&quot;&gt;Yeoman&lt;/a&gt; tool. Yeoman combines the power of &lt;a href=&quot;http://gruntjs.com/&quot;&gt;grunt&lt;/a&gt;, &lt;a href=&quot;http://bower.io/&quot;&gt;bower&lt;/a&gt;, &lt;a href=&quot;https://www.npmjs.org/&quot;&gt;npm&lt;/a&gt; and adds its own salt: the generators.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Yeoman generators are tasks responsible to build the initial project scaffolding.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yeoman offers an extensive set of official generators oriented to create: webapps, backbone app, chrome extension, etc but we can also found a myriad of non official generators (yes, because anyone can create a new generator to satisfy his/her needs).&lt;/p&gt;
&lt;p&gt;Within all the generators I chose &lt;a href=&quot;https://github.com/DaftMonk/generator-angular-fullstack&quot;&gt;angular-fullstack&lt;/a&gt; to create my MEAN project structure and next are my reasons:&lt;/p&gt;
&lt;h2&gt;1. Easy to install&lt;/h2&gt;
&lt;p&gt;You require to have &lt;a href=&quot;http://nodejs.org/&quot;&gt;node&lt;/a&gt; andÂ &lt;a href=&quot;https://www.npmjs.org/&quot;&gt;npm&lt;/a&gt;Â installed on your system. Once you have them install&lt;a href=&quot;http://yeoman.io/&quot;&gt;Yeoman&lt;/a&gt;Â and theÂ &lt;a href=&quot;https://github.com/DaftMonk/generator-angular-fullstack&quot;&gt;angular-fullstack&lt;/a&gt;Â is as easy as:&lt;/p&gt;
&lt;pre class=&quot;lang:sh decode:true&quot;&gt;$ npm install -g yo
$ npm install -g generator-angular-fullstack&lt;/pre&gt;
&lt;p&gt;Once installed the generator you simply need to create a new folder and initialise your project:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;mkdir my-new-project &amp;#x26;&amp;#x26; cd $_
yo angular-fullstack [app-name]
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;2. Creates both client and server scaffoldings&lt;/h2&gt;
&lt;p&gt;The generator generates theÂ &lt;em&gt;full stack&lt;/em&gt;Â of your project, both the client and server code. Your project will start well organised and prepared to create an awesome RIA application.&lt;/p&gt;
&lt;h2&gt;3. Introduces good practices in the generated code&lt;/h2&gt;
&lt;p&gt;Because the generated is made by experienced developers, theyÂ applies good practices in code organisation and style programming (like the environment configuration on the server side using node).&lt;/p&gt;
&lt;p&gt;For me, this is one of the most important reasons to use this generator. Anybody knows starting with a new technology is always hard, but it is nothing when you start with four new technologies :)&lt;/p&gt;
&lt;h2&gt;4. Server side API prepared to use authentication&lt;/h2&gt;
&lt;p&gt;Following best practices the code is prepared so you can easily add security to you API via a node middleware so each request requires authentication of the client side.&lt;/p&gt;
&lt;h2&gt;5. Support HTML or jade templating on client side&lt;/h2&gt;
&lt;p&gt;You can use any template engine for client side but by default the generator works with HTML and Jade. I don&apos;t really like Jade too much so I always try to use EJS or similar (&lt;em&gt;Warning this last sentence is the author&apos;s opinion&lt;/em&gt;).&lt;/p&gt;
&lt;h2&gt;6. Support for different CSS preprocessors&lt;/h2&gt;
&lt;p&gt;For different opinions there are different alternatives. This wayÂ &lt;a href=&quot;https://github.com/DaftMonk/generator-angular-fullstack&quot;&gt;angular-fullstack&lt;/a&gt;Â has support for plain CSS, &lt;a href=&quot;http://learnboost.github.io/stylus/&quot;&gt;Stylus&lt;/a&gt;, &lt;a href=&quot;http://sass-lang.com/&quot;&gt;Sass&lt;/a&gt;Â or &lt;a href=&quot;http://lesscss.org/&quot;&gt;LESS&lt;/a&gt;Â pre-processors. Choose your preferred.&lt;/p&gt;
&lt;h2&gt;7. Commands to scaffold anything&lt;/h2&gt;
&lt;p&gt;With the&lt;a href=&quot;https://github.com/DaftMonk/generator-angular-fullstack&quot;&gt;angular-fullstack&lt;/a&gt;Â you can createÂ new end points for the server side or client side components (like routes, controllers, services, filters, directives, ...) with a sentences. So, next command:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yo angular-fullstack:endpoint message
[?] What will the url of your endpoint to be? /api/messages
{% endhighlight %}&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;will produce:&lt;/p&gt;
&lt;p&gt;{% highlight bash %}
server/api/message/index.js
server/api/message/message.spec.js
server/api/message/message.controller.js
server/api/message/message.model.js  (optional)
server/api/message/message.socket.js (optional)
{% endhighlight %}&lt;/p&gt;
&lt;h2&gt;Â Conclusion&lt;/h2&gt;
&lt;p&gt;In my opinion,Â &lt;a href=&quot;https://github.com/DaftMonk/generator-angular-fullstack&quot;&gt;angular-fullstack&lt;/a&gt;Â is a really powerful tool that simplifies our day to day work.&lt;/p&gt;
&lt;p&gt;As always it is not the panacea, it is simply a generic tool to automatize many common tasks. Because of this we can found situations it lacks some feature.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The Book of OpenLayers 3, released !!!]]></title><description><![CDATA[Finally I completed most of the chapters I had thought for the book. Although two chapters remains to be written, I think the current content is extensive enough to help anybody interested to lean this great new version of the OpenLayers project. The current chapters explains: The map and the view Layers Data sources and formats Vector layers Events, listeners and properties The two remaining chapters I have in mind are: Controls and interaction Overlays  Hope, this book help you to introduce to the OpenLayers version 3. Remember, thanks to the LeanPub platform, when you buy the book you can get any later update I make on it. In addition, you have 45 days for refund if you think the book does not cover your expectations. In addition, don't hesitate to contact me for any errors, misspelled words or sentences, etc. Remember, this is a self-published book. No main company is behind it and no great marketing campaign is prepared. Any help from you, talking about the book at any forum or social network will be appreciated. Finally, I would like to thankÂ my wife, Pilar, for her understanding and almost infinite patience forÂ my job, hobby and profession, the computer science.]]></description><link>https://www.acuriousanimal.com/blog/2014/10/08/the-book-of-openlayers-3-released</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/10/08/the-book-of-openlayers-3-released</guid><pubDate>Wed, 08 Oct 2014 17:31:00 GMT</pubDate><content:encoded>&lt;p&gt;Finally I completed most of the chapters I had thought for the book. Although two chapters remains to be written, I think the current content is extensive enough to help anybody interested to lean this great new version of the OpenLayers project.&lt;/p&gt;
&lt;p&gt;The current chapters explains:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The map and the view&lt;/li&gt;
&lt;li&gt;Layers&lt;/li&gt;
&lt;li&gt;Data sources and formats&lt;/li&gt;
&lt;li&gt;Vector layers&lt;/li&gt;
&lt;li&gt;Events, listeners and properties&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The two remaining chapters I have in mind are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Controls and interaction&lt;/li&gt;
&lt;li&gt;Overlays&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 230px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAHqLktZ2HOEhYvZUtMf/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAECEhEDIf/aAAgBAQABBQJ02as6RT06+aH1E028nmIR/8QAFxEBAQEBAAAAAAAAAAAAAAAAABIRYf/aAAgBAwEBPwHVOqf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BIwv/xAAdEAABBAIDAAAAAAAAAAAAAAAQAAERIQIiYXHh/9oACAEBAAY/AtV6HoVI4VS3SyP/xAAeEAACAgICAwAAAAAAAAAAAAAAAREhMWFBcVGB4f/aAAgBAQABPyGEzXmRMfwY2PSQUEU1Oz09Du0YNGw15IDSmd2hFXZy7P/aAAwDAQACAAMAAAAQC8px/8QAGREAAgMBAAAAAAAAAAAAAAAAAAERUXEx/9oACAEDAQE/EFfpkahWMH//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QKRYn/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFRQdFhcYH/2gAIAQEAAT8QvzPICb1SRgXhQ+DvxBocNaDxFpsAHfzLuhoUdCDCh9yi/wBidq+SG1G6Ucfb1AOg2hlxGiuZ3uUDRus5mKHAp//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thebookofopenlayers3 230x300&quot;
        title=&quot;thebookofopenlayers3 230x300&quot;
        src=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg&quot;
        srcset=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/aca85/thebookofopenlayers3-230x300.jpg 163w,
/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg 230w&quot;
        sizes=&quot;(max-width: 230px) 100vw, 230px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Hope, this book help you to introduce to the OpenLayers version 3.&lt;/p&gt;
&lt;p&gt;Remember, thanks to the LeanPub platform, when you buy the book you can get any later update I make on it. In addition, you have 45 days for refund if you think the book does not cover your expectations. In addition, don&apos;t hesitate to contact me for any errors, misspelled words or sentences, etc.&lt;/p&gt;
&lt;p&gt;Remember, this is a self-published book. No main company is behind it and no great marketing campaign is prepared. Any help from you, talking about the book at any forum or social network will be appreciated.&lt;/p&gt;
&lt;p&gt;Finally, I would like to thankÂ my wife, Pilar, for her understanding and almost infinite patience forÂ my job, hobby and profession, the computer science.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Announcing the release of The Book of OpenLayers 3]]></title><description><![CDATA[I just sent this words to all the people interested in the book via LeanPub and I would like to post it here too, hoping this message arrives to more people. The Book of OpenLayers3 is progressing well. It is not finished but I would like to notify you, in the next weeks, I will launch a pre-release of the book. At this moment the book contains five chapters covering the most important topics of the new architecture and design of the library. All chapters are divided in a theory section, where I explain all the concepts and involved classes, and a practice section, where I show real working examples. Remember, all the examples are also freely available at the GitHub repository: https://github.com/acanimal/thebookofopenlayers3 are right now running at: http://www.acuriousanimal.com/thebookofopenlayers3. My intention is continue writing, at least, two more chapters. One dedicated to the controls OpenLayers3 offers to interact with the map, and a second one, related to the concept of overlays. I hope to cover these two chapter in one month. Thanks to LeanPub platform, once you buy a book you are allowed to download the new updates freely. I will notify you when new releases are available. Please, do not hesitate to send me your feedback related with the book, from its content to its costs. Finally, remember this book is self published, no great publishing company is behind it and no great marketing campaigns are organised, so any comments on shared networks that publicise the book will be appreciated. Antonio Santiago (@acanimal) - #thebookofopenlayers3]]></description><link>https://www.acuriousanimal.com/blog/2014/09/23/announcing-the-release-of-the-book-of-openlayers-3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/09/23/announcing-the-release-of-the-book-of-openlayers-3</guid><pubDate>Tue, 23 Sep 2014 15:33:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;I just sent this words to all the people interested in the book via LeanPub and I would like to post it here too, hoping this message arrives to more people.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The Book of OpenLayers3 is progressing well. It is not finished but I would like to notify you, in the next weeks, I will launch a pre-release of the book.&lt;/p&gt;
&lt;p&gt;At this moment the book contains five chapters covering the most important topics of the new architecture and design of the library. All chapters are divided in a theory section, where I explain all the concepts and involved classes, and a practice section, where I show real working examples.&lt;/p&gt;
&lt;p&gt;Remember, all the examples are also freely available at the GitHub repository: &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3&quot;&gt;https://github.com/acanimal/thebookofopenlayers3&lt;/a&gt; are right now running at: &lt;a href=&quot;http://www.acuriousanimal.com/thebookofopenlayers3&quot;&gt;http://www.acuriousanimal.com/thebookofopenlayers3&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My intention is continue writing, at least, two more chapters. One dedicated to the controls OpenLayers3 offers to interact with the map, and a second one, related to the concept of overlays. I hope to cover these two chapter in one month.&lt;/p&gt;
&lt;p&gt;Thanks to LeanPub platform, once you buy a book you are allowed to download the new updates freely. I will notify you when new releases are available.&lt;/p&gt;
&lt;p&gt;Please, do not hesitate to send me your feedback related with the book, from its content to its costs.&lt;/p&gt;
&lt;p&gt;Finally, remember this book is self published, no great publishing company is behind it and no great marketing campaigns are organised, so any comments on shared networks that publicise the book will be appreciated.&lt;/p&gt;
&lt;p&gt;Antonio Santiago (&lt;a href=&quot;https://twitter.com/acanimal&quot;&gt;@acanimal&lt;/a&gt;) - &lt;a href=&quot;https://twitter.com/hashtag/thebookofopenlayers3?src=hash&quot;&gt;#thebookofopenlayers3&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 230px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAHqLktZ2HOEhYvZUtMf/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAECEhEDIf/aAAgBAQABBQJ02as6RT06+aH1E028nmIR/8QAFxEBAQEBAAAAAAAAAAAAAAAAABIRYf/aAAgBAwEBPwHVOqf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BIwv/xAAdEAABBAIDAAAAAAAAAAAAAAAQAAERIQIiYXHh/9oACAEBAAY/AtV6HoVI4VS3SyP/xAAeEAACAgICAwAAAAAAAAAAAAAAAREhMWFBcVGB4f/aAAgBAQABPyGEzXmRMfwY2PSQUEU1Oz09Du0YNGw15IDSmd2hFXZy7P/aAAwDAQACAAMAAAAQC8px/8QAGREAAgMBAAAAAAAAAAAAAAAAAAERUXEx/9oACAEDAQE/EFfpkahWMH//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QKRYn/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFRQdFhcYH/2gAIAQEAAT8QvzPICb1SRgXhQ+DvxBocNaDxFpsAHfzLuhoUdCDCh9yi/wBidq+SG1G6Ucfb1AOg2hlxGiuZ3uUDRus5mKHAp//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;thebookofopenlayers3&quot;
        title=&quot;thebookofopenlayers3&quot;
        src=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg&quot;
        srcset=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/aca85/thebookofopenlayers3-230x300.jpg 163w,
/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg 230w&quot;
        sizes=&quot;(max-width: 230px) 100vw, 230px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Releasing code samples for The Book of OpenLayers 3]]></title><description><![CDATA[Writing a book is hard, requires constance and motivation and, more important, be strong to keep them both. Least but not last you need time. Time to see the source code and learn. Time to see the examples and learn. Time to understand all the concepts and learn. Time to explain in your words what you have learnt. Today, I announced the links where you can find the online samples and code repository for The book of OpenLayers3. Code repository is open, so don't hesitate to download and contribute with new samples. The work is not complete, I need to finish the theory part of a chapter relatedÂ to vector information and write two more chapters I have in mind and, of course, create some samples to see the theory in practice. I will write another post introducing the book with a more in depth chapter description. This post is only about the code samples. Your feedback is really valuable for me !!!  About the code samples For those interested in contribute, the project for the code samples is built using the Yeoman tool, which combines Grunt and Bower,Â and the generator for web application , which offers a project skeleton with a bunch of good practices. In addition to the default plugins used by the generator, I made use of the Grunt's pluginÂ  (see here) that implement like PHP include directive. This way, I can create a page layout (with headers, footers, etc) reusable for all the pages. See the  file for more details about plugins. For the implementation I made use of the Bootstrap framework, the nice Yeti theme from Bootswatch project and the highlight.js project to highlight the samples code. See more details of project dependencies in the  file.]]></description><link>https://www.acuriousanimal.com/blog/2014/08/22/releasing-code-samples-for-the-book-of-openlayers-3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/08/22/releasing-code-samples-for-the-book-of-openlayers-3</guid><pubDate>Fri, 22 Aug 2014 21:05:00 GMT</pubDate><content:encoded>&lt;p&gt;Writing a book is hard, requires constance and motivation and, more important, be strong to keep them both. Least but not last you need time. Time to see the source code and learn. Time to see the examples and learn. Time to understand all the concepts and learn. Time to explain in your words what you have learnt.&lt;/p&gt;
&lt;p&gt;Today, I announced the links where you can find the &lt;a href=&quot;http://www.acuriousanimal.com/thebookofopenlayers3/&quot;&gt;online samples&lt;/a&gt; and &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3&quot;&gt;code repository&lt;/a&gt; for &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt;. &lt;strong&gt;Code repository is open, so don&apos;t hesitate to download and contribute with new samples&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The work is not complete, I need to finish the theory part of a chapter relatedÂ to vector information and write two more chapters I have in mind and, of course, create some samples to see the theory in practice. I will write another post introducing the book with a more in depth chapter description. This post is only about the code samples. &lt;strong&gt;Your feedback is really valuable for me !!!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 230px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.43478260869566%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQIA/9oADAMBAAIQAxAAAAHqLktZ2HOEhYvZUtMf/8QAGhAAAwEBAQEAAAAAAAAAAAAAAAECEhEDIf/aAAgBAQABBQJ02as6RT06+aH1E028nmIR/8QAFxEBAQEBAAAAAAAAAAAAAAAAABIRYf/aAAgBAwEBPwHVOqf/xAAWEQEBAQAAAAAAAAAAAAAAAAARABD/2gAIAQIBAT8BIwv/xAAdEAABBAIDAAAAAAAAAAAAAAAQAAERIQIiYXHh/9oACAEBAAY/AtV6HoVI4VS3SyP/xAAeEAACAgICAwAAAAAAAAAAAAAAAREhMWFBcVGB4f/aAAgBAQABPyGEzXmRMfwY2PSQUEU1Oz09Du0YNGw15IDSmd2hFXZy7P/aAAwDAQACAAMAAAAQC8px/8QAGREAAgMBAAAAAAAAAAAAAAAAAAERUXEx/9oACAEDAQE/EFfpkahWMH//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QKRYn/8QAHhABAAMAAgIDAAAAAAAAAAAAAQARITFRQdFhcYH/2gAIAQEAAT8QvzPICb1SRgXhQ+DvxBocNaDxFpsAHfzLuhoUdCDCh9yi/wBidq+SG1G6Ucfb1AOg2hlxGiuZ3uUDRus5mKHAp//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;The book of OpenLayers3&quot;
        title=&quot;The book of OpenLayers3&quot;
        src=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg&quot;
        srcset=&quot;/static/dc37ce643ea45e96cdfa0a1793c8cd19/aca85/thebookofopenlayers3-230x300.jpg 163w,
/static/dc37ce643ea45e96cdfa0a1793c8cd19/b8b34/thebookofopenlayers3-230x300.jpg 230w&quot;
        sizes=&quot;(max-width: 230px) 100vw, 230px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;About the code samples&lt;/h2&gt;
&lt;p&gt;For those interested in contribute, the project for the code samples is built using the &lt;a href=&quot;http://yeoman.io/&quot;&gt;Yeoman&lt;/a&gt; tool, which combines &lt;a href=&quot;http://gruntjs.com/&quot;&gt;Grunt&lt;/a&gt; and &lt;a href=&quot;http://bower.io/&quot;&gt;Bower&lt;/a&gt;,Â and the generator for web application &lt;code class=&quot;language-text&quot;&gt;generator-webapp&lt;/code&gt;, which offers a project skeleton with a bunch of good practices.&lt;/p&gt;
&lt;p&gt;In addition to the default plugins used by the generator, I made use of the Grunt&apos;s pluginÂ &lt;code class=&quot;language-text&quot;&gt;grunt-includes&lt;/code&gt; (see &lt;a href=&quot;https://github.com/vanetix/grunt-includes&quot;&gt;here&lt;/a&gt;) that implement like PHP include directive. This way, I can create a page layout (with headers, footers, etc) reusable for all the pages. See the &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3/blob/master/package.json&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;&lt;/a&gt; file for more details about plugins.&lt;/p&gt;
&lt;p&gt;For the implementation I made use of the &lt;a href=&quot;http://getbootstrap.com/&quot;&gt;Bootstrap&lt;/a&gt; framework, the nice &lt;a href=&quot;http://bootswatch.com/yeti/&quot;&gt;Yeti&lt;/a&gt; theme from &lt;a href=&quot;http://bootswatch.com&quot;&gt;Bootswatch&lt;/a&gt; project and the &lt;a href=&quot;https://highlightjs.org/&quot;&gt;highlight.js&lt;/a&gt; project to highlight the samples code. See more details of project dependencies in the &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3/blob/master/bower.json&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;bower.json&lt;/code&gt;&lt;/a&gt; file.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Leaflet and how avoid map panning on mouseout]]></title><description><![CDATA[A couple of days ago
, a friendÂ asked this simple question in a Spanish forum. The scenario is simple, you have a map and when dragging it you would like to stop the action when the mouse goes beyond the limits ofÂ the map, really beyond the  (or any other DOM element that) contains the map. The first try anyone can try could be something like: {% highlight javascript %}
// create a map in the "map" div, set the view to a given place and zoom
var map = L.map('map').setView(51.505, -0.09, 13); // add an OpenStreetMap tile layer
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
}).addTo(map); // Register event to enable/disable dragging on mouse out.
map.on('mouseout', function() {
    map.dragging.disable();
});
map.on('mouseover', function() {
    map.dragging.enable();
});
{% endhighlight %} but that has no effect. (See here) Now, remove the  listener and try again: {% highlight javascript %}
// create a map and add the layer
var map = ... // Register event to enable/disable dragging on mouse out.
map.on('mouseout', function() {
    map.dragging.disable();
});
{% endhighlight %} surprisingly, when the mouse goes out the map the dragging action continues active and once you finish dragging the  method seems to take place and you can't drag the map again. (See here). After some time looking at Leaflet source code (we aware I have done it for Leaflet 0.7.2) I found a possible solution but, first, let me do some explanation. The  class has attached hooks, like drag, or zoom actions, which provides the map with some behavior. TheÂ  class is responsible to control the dragging action. It has / methods and, more important, it uses internally aÂ  instance, which is responsible to detect and catch mouse events on the map. This way: theÂ Â catches mouse events onÂ Â the map panel (also for mouse move), makes some process and triggers some new events that are catch by theÂ Â instance theÂ Â instance makes some process and triggers the know map events  and . In addition, invoking  implies a call to  too but (I don't understand yet why), it seems not takes effect until you release the mouse button. TheÂ Â instance continues catching mouse event and informingÂ  All this say, a possible solution to stop the dragging action when the mouse goes out the map panel is to freeze the work ofÂ  Please, note the next code violates almost all the SOLID(http://en.wikipedia.org/wiki/SOLID_(object-oriented_design) principles, so don't fire me. {% highlight javascript %}
L.Draggable.prototype.freeze=false;
L.Draggable.prototype.updatePosition= function () {
    if(this._freeze) {
        return;
    } };
{% endhighlight %} The code adds a new  property to theÂ  class and redefines the  method to check the property. Now, you can freeze the mouse dragging action as: {% highlight javascript %}
map.on('mouseout', function() {
    map.dragging.draggable.freeze=true;
});
map.on('mouseover', function() {
    map.dragging.draggable.freeze=false;
});
{% endhighlight %} You can see it in action here.]]></description><link>https://www.acuriousanimal.com/blog/2014/05/12/leaflet-and-how-avoid-map-panning-on-mouseout</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/05/12/leaflet-and-how-avoid-map-panning-on-mouseout</guid><pubDate>Mon, 12 May 2014 06:31:00 GMT</pubDate><content:encoded>&lt;p&gt;A couple of days ago
, a friendÂ asked this simple question in a Spanish forum. The scenario is simple, you have a map and when dragging it you would like to stop the action when the mouse goes beyond the limits ofÂ the map, really beyond the &lt;code class=&quot;language-text&quot;&gt;div&lt;/code&gt; (or any other DOM element that) contains the map.&lt;/p&gt;
&lt;p&gt;The first try anyone can try could be something like:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
// create a map in the &quot;map&quot; div, set the view to a given place and zoom
var map = L.map(&apos;map&apos;).setView([51.505, -0.09], 13);&lt;/p&gt;
&lt;p&gt;// add an OpenStreetMap tile layer
L.tileLayer(&apos;&lt;a href=&quot;http://%7Bs%7D.tile.osm.org/%7Bz%7D/%7Bx%7D/%7By%7D.png&amp;#x27;&quot;&gt;http://{s}.tile.osm.org/{z}/{x}/{y}.png&apos;&lt;/a&gt;, {
attribution: &apos;Â© &lt;a href=&quot;http://osm.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors&apos;
}).addTo(map);&lt;/p&gt;
&lt;p&gt;// Register event to enable/disable dragging on mouse out.
map.on(&apos;mouseout&apos;, function() {
map.dragging.disable();
});
map.on(&apos;mouseover&apos;, function() {
map.dragging.enable();
});
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;but that has no effect. (&lt;a href=&quot;http://jsfiddle.net/2yvtV/1/&quot;&gt;See here&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;Now, remove the &lt;code class=&quot;language-text&quot;&gt;mouseover&lt;/code&gt; listener and try again:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
// create a map and add the layer
var map = ...&lt;/p&gt;
&lt;p&gt;// Register event to enable/disable dragging on mouse out.
map.on(&apos;mouseout&apos;, function() {
map.dragging.disable();
});
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;surprisingly, when the mouse goes out the map the dragging action continues active and once you finish dragging the &lt;code class=&quot;language-text&quot;&gt;disable()&lt;/code&gt; method seems to take place and you can&apos;t drag the map again. (&lt;a href=&quot;http://jsfiddle.net/2yvtV/2/&quot;&gt;See here&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;After some time looking at Leaflet source code (we aware I have done it for Leaflet 0.7.2) I found a possible solution but, first, let me do some explanation.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;L.Map&lt;/code&gt; class has attached &lt;em&gt;hooks&lt;/em&gt;, like drag, or zoom actions, which provides the map with some behavior.&lt;/p&gt;
&lt;p&gt;TheÂ &lt;code class=&quot;language-text&quot;&gt;L.Map.Drag&lt;/code&gt; class is responsible to control the dragging action. It has &lt;code class=&quot;language-text&quot;&gt;enable&lt;/code&gt;/&lt;code class=&quot;language-text&quot;&gt;disable&lt;/code&gt; methods and, more important, it uses internally aÂ &lt;code class=&quot;language-text&quot;&gt;L.Draggable&lt;/code&gt; instance, which is responsible to detect and catch mouse events on the map. This way:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;theÂ &lt;code class=&quot;language-text&quot;&gt;L.Draggable&lt;/code&gt;Â catches mouse events onÂ Â the map panel (also for mouse move),&lt;/li&gt;
&lt;li&gt;makes some process and triggers some new events that are catch by theÂ &lt;code class=&quot;language-text&quot;&gt;L.Map.Drag&lt;/code&gt;Â instance&lt;/li&gt;
&lt;li&gt;theÂ &lt;code class=&quot;language-text&quot;&gt;L.Map.Drag&lt;/code&gt;Â instance makes some process and triggers the know map events &lt;code class=&quot;language-text&quot;&gt;move&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;drag&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In addition, invoking &lt;code class=&quot;language-text&quot;&gt;L.Map.Drag.disable()&lt;/code&gt; implies a call to &lt;code class=&quot;language-text&quot;&gt;L.Draggable.disable()&lt;/code&gt; too but (I don&apos;t understand yet why), it seems not takes effect until you release the mouse button. TheÂ &lt;code class=&quot;language-text&quot;&gt;L.Draggable&lt;/code&gt;Â instance continues catching mouse event and &lt;em&gt;informing&lt;/em&gt;Â &lt;code class=&quot;language-text&quot;&gt;L.Map.Drag.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;All this say, a possible solution to stop the dragging action when the mouse goes out the map panel is to &lt;em&gt;freeze&lt;/em&gt; the work ofÂ &lt;code class=&quot;language-text&quot;&gt;L.Draggable.&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Please, note the next code violates almost all the [SOLID](&lt;a href=&quot;http://en.wikipedia.org/wiki/SOLID_(object-oriented_design&quot;&gt;http://en.wikipedia.org/wiki/SOLID_(object-oriented_design&lt;/a&gt;) principles, so don&apos;t fire me.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;{% highlight javascript %}
L.Draggable.prototype.&lt;em&gt;freeze=false;
L.Draggable.prototype.&lt;/em&gt;updatePosition= function () {
if(this._freeze) {
return;
}&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;this.fire(&amp;#39;predrag&amp;#39;);
L.DomUtil.setPosition(this._element, this._newPos);
this.fire(&amp;#39;drag&amp;#39;);&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;The code adds a new &lt;code class=&quot;language-text&quot;&gt;_freeze&lt;/code&gt; property to theÂ &lt;code class=&quot;language-text&quot;&gt;L.Draggable&lt;/code&gt; class and redefines the &lt;code class=&quot;language-text&quot;&gt;_updatePosition&lt;/code&gt; method to check the property.&lt;/p&gt;
&lt;p&gt;Now, you can freeze the mouse dragging action as:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
map.on(&apos;mouseout&apos;, function() {
map.dragging.&lt;em&gt;draggable.&lt;/em&gt;freeze=true;
});
map.on(&apos;mouseover&apos;, function() {
map.dragging.&lt;em&gt;draggable.&lt;/em&gt;freeze=false;
});
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;You can see it in action &lt;a href=&quot;http://jsfiddle.net/v7P8P/1/&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The book of OpenLayers3 is coming !!!]]></title><description><![CDATA[This week the beta2 version of OpenLayers3 has been released (see the OpenLayers3 is comming from Boundlessgeo blog) with great improvements on vector layers rendering and image manipulation. Similarly, The book of OpenLayers3 follows a similar progress, always one or two steps after the project evolution. Currently, you can found a sample chapter about the Map and View, both theory and practice, and I have almost finished the next chapter focused on how to work withÂ Layers. After explaining layers the natural flow is explain the Sources and Formats, which allows to load content from a great number of data sources. They are very related to layers, but I preferred to differentiate the concepts in two separated chapters. This is what I'm currently working on. What else requires to be in the book? I need to make a chapter focused on vector data, explain how to work with geometries, features and styles. Events are also important, we can listen for changes in objects and react accordingly. As you can see there are many work to be done yet and your feedback is the most valuable thing I can get at this moment.]]></description><link>https://www.acuriousanimal.com/blog/2014/02/15/the-book-of-openlayers3-is-comming</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/02/15/the-book-of-openlayers3-is-comming</guid><pubDate>Sat, 15 Feb 2014 14:55:00 GMT</pubDate><content:encoded>&lt;p&gt;This week the beta2 version of OpenLayers3 has been released (see the &lt;a href=&quot;http://boundlessgeo.com/2014/02/openlayers-3-coming/&quot;&gt;OpenLayers3 is comming&lt;/a&gt; from Boundlessgeo blog) with great improvements on vector layers rendering and image manipulation.&lt;/p&gt;
&lt;p&gt;Similarly, &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt; follows a similar progress, always one or two steps after the project evolution.&lt;/p&gt;
&lt;p&gt;Currently, you can found a sample chapter about the &lt;em&gt;Map and View&lt;/em&gt;, both theory and practice, and I have almost finished the next chapter focused on how to work withÂ &lt;em&gt;Layers&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;After explaining layers the natural flow is explain the &lt;em&gt;Sources and Formats&lt;/em&gt;, which allows to load content from a great number of data sources. They are very related to layers, but I preferred to differentiate the concepts in two separated chapters. This is what I&apos;m currently working on.&lt;/p&gt;
&lt;p&gt;What else requires to be in the book? I need to make a chapter focused on vector data, explain how to work with geometries, features and styles. Events are also important, we can listen for changes in objects and react accordingly.&lt;/p&gt;
&lt;p&gt;As you can see there are many work to be done yet and your feedback is the most valuable thing I can get at this moment.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Randomatic, to generate random sequences]]></title><description><![CDATA[This is my own implementation of a tool to generate random character sequences:Â RanomaticÂ !!! Why is it useful for? Really not much, simply helps me generate random password. Allow uppercase, lowercase letters, numbers and other non ASCII characters Easy to use Mobile ready  Source code: https://github.com/acanimal/Randomatic
Demo: http://www.acuriousanimal.com/Randomatic/]]></description><link>https://www.acuriousanimal.com/blog/2014/01/27/randomatic-to-generate-random-sequences</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/01/27/randomatic-to-generate-random-sequences</guid><pubDate>Mon, 27 Jan 2014 19:39:00 GMT</pubDate><content:encoded>&lt;p&gt;This is my own implementation of a tool to generate random character sequences:Â &lt;a href=&quot;http://www.acuriousanimal.com/Randomatic/&quot;&gt;Ranomatic&lt;/a&gt;Â !!!&lt;/p&gt;
&lt;p&gt;Why is it useful for? Really not much, simply helps me generate random password.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Allow uppercase, lowercase letters, numbers and other non ASCII characters&lt;/li&gt;
&lt;li&gt;Easy to use&lt;/li&gt;
&lt;li&gt;Mobile ready&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/Randomatic/&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 410px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 134.63414634146343%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAAEY0lEQVRIx5VWaU9UVxi+/6OtUBAYZnEWQBALrQMMMMOWMBqoLMHWhtaEAgM4RKsURBBkkYIsoyKIQiwB0aam39pUcaCzMQuyxKoomlg+1PBFQHj6nqOQ0gCFkzw57z33Pc99zrucGUGbnIqMrByEhkciPOIARFIlJPJgKILD+CxVhPA1Zcg+yJQh8BfLESBRbAqhqrYB/f390B9Mw6H0TOR8cRRpGdk0f4XPM7KQlpmNzOwjOJp7DPq0wxDLlOtImf1vCPKgUKhCwhFIjoEyFeSqUK6MrTNbptzL1UkVwXw9QCJfI2LKxbSH7WM2JxQxkuB9kNDRFEQsU+0lhMJXJIOXnxheu8XYHSiHKnQ/X2dgYVDQngAi8faTwNtfAn/6CPugsIccauoacKH5Ippb29FmMqG1w4TyyiqUnizDd2UVKCwuxbnz9WhtN6GppQ0Xmppx6XInKqtqYDxxCmUVZ5HzZe67GLIvP3v8DFuNhYUFzMzMbOkz+oeF1IohSClGNZ31MN29grY7Jg5mN3a0oPpcPeoam3DydDlHXUMTnaYRte/B7OraejQ2teBYXiE/tiBWBuFwXxaMZiPyf8uH4VcDDNZChGZH4sMPRPhYJIFPgJQgW4vXf8Fi7SdW8DxwwkMDaSiwF6BgJB9FZgPyPXmI+FoNsSgEyrD9PFnbgZgnhcojNS8d2m9TEJOrJegQ840OGn0SPomM5lndExS2JVZ9xKtZ1mn10MalQkeIj01FjDoJickHodEmgsV4u4S8bORkpFCXqONImS4RGl0SosiOTUiGWqPdkcK1OkzRp0OXooeO+jo6LoEKVgV/KlpW9KvOq0W9GdYIWcWnZ+YgLiEFUbE6TqrWkNp4UhqbwLvo/1SuI2S9+ll0PCKjYhGh1vBjfhoVhwN8jqU+DuekW2V39b2UbiPBl2psl6+IejaQVzqzd/mI8JFPAF/zYs/bAfl7k79w3HgCXd3X0NbegR9aLqKdevlKZxcuE9o6LqF/4BaGbv+EwVu3MTh0Z0MMDA7h57u/4Hx9I4Tevj68fPEcDscYJicn4Rn3wOVyYWp6Gm6PG3+/fo3tDrvdAaGruxtutwvmUQusVgvsRDw25oCNXo6OjuD57CyWl5fx9u3bTbGwuMgJ790fhtBzvRcPH45jzOnEg+H7nIgpdTgcRDyG5ZUV7rzyft5oMFI2hh+YIVy/0YupqUmYR0bgJFIbETmJyOGw07Mb8/Pza4Sbka4j7KYjTz96xNUwlXaujM12mM1mzL54uTPCq11dcI+P8zharXa6KEeJaAQWiwVP6VJd2emRr/X08KyygFosVng8Ljhdbjjsdjwhwrm5uXUKN8I6ws7Oqzx2VpuNFFphs9kJ72xWBq9e/cWzvEiZXFpa2hBv3ixwwt/vUZZv3vyRfi+eYnJqiidnYmICTx7/CQ+FgJXMTsaY0wUhI+sIikqMMBQbUVh0nFACQ0kp8g3FhBKcLq8knNkSp74/g4qz1fzPwD8oq2fjFJpungAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screenshot 01272014 083748 PM&quot;
        title=&quot;Screenshot 01272014 083748 PM&quot;
        src=&quot;/static/3a9a857a8848d72905c25b1fb639cbb6/9fff5/Screenshot-01272014-083748-PM.png&quot;
        srcset=&quot;/static/3a9a857a8848d72905c25b1fb639cbb6/19bd1/Screenshot-01272014-083748-PM.png 163w,
/static/3a9a857a8848d72905c25b1fb639cbb6/d3bcb/Screenshot-01272014-083748-PM.png 325w,
/static/3a9a857a8848d72905c25b1fb639cbb6/9fff5/Screenshot-01272014-083748-PM.png 410w&quot;
        sizes=&quot;(max-width: 410px) 100vw, 410px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Source code: &lt;a href=&quot;https://github.com/acanimal/Randomatic&quot;&gt;https://github.com/acanimal/Randomatic&lt;/a&gt;
Demo: &lt;a href=&quot;http://www.acuriousanimal.com/Randomatic/&quot;&gt;http://www.acuriousanimal.com/Randomatic/&lt;/a&gt; &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Sample chapter for The book of OpenLayers3 is out !!!]]></title><description><![CDATA[A couple of days ago I release the sample chapter for The book of OpenLayers3. I will appreciate all your feedback, comments, ideas, ... The chapter is dedicated to two of the main concepts within the OpenLayers3, the map and the view. While in previous versions the map was the central piece that controls from layers or controls to the way the map is visualized, that is, the extension and projection to be used, in OpenLayers3 these responsibilities has been decouples. The map continues being responsible to contain layers, controls or (the new) overlays, but there is a new concept, the view, responsible to determine how the map is visualize. So the view is who determines the visible map extent, center location or projection. Take into account OpenLayers3 is in active development so things can vary slightly until the final release of OpenLayers3 and this book. Help me promoting the book and remember I'm waiting for your comments.]]></description><link>https://www.acuriousanimal.com/blog/2014/01/25/sample-chapter-for-the-book-of-openlayers3-is-out</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/01/25/sample-chapter-for-the-book-of-openlayers3-is-out</guid><pubDate>Sat, 25 Jan 2014 11:08:00 GMT</pubDate><content:encoded>&lt;p&gt;A couple of days ago I release the sample chapter for &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt;. I will appreciate all your feedback, comments, ideas, ...&lt;/p&gt;
&lt;p&gt;The chapter is dedicated to two of the main concepts within the OpenLayers3, the map and the view. While in previous versions the map was the central piece that controls from layers or controls to the way the map is visualized, that is, the extension and projection to be used, in OpenLayers3 these responsibilities has been decouples. The map continues being responsible to contain layers, controls or (the new) overlays, but there is a new concept, the view, responsible to determine how the map is visualize. So the view is who determines the visible map extent, center location or projection.&lt;/p&gt;
&lt;p&gt;Take into account OpenLayers3 is in active development so things can vary slightly until the final release of OpenLayers3 and this book.&lt;/p&gt;
&lt;p&gt;Help me promoting the book and remember I&apos;m waiting for your comments.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SublimeText plugins for writing a book in markdown]]></title><description><![CDATA[I'm currently involved on writing The book of OpenLayers3 using the great LeanPub platform.
  LeanPub has many benefits (I should write a post some day talking about) and one of them are you write the book using the markdown notation (really a slightly extended dialect) and they generate automatically your book in PDF, ePub and mobi formats.]]></description><link>https://www.acuriousanimal.com/blog/2014/01/09/sublimetext-plugins-for-writing-a-book-in-markdown</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/01/09/sublimetext-plugins-for-writing-a-book-in-markdown</guid><pubDate>Thu, 09 Jan 2014 18:48:00 GMT</pubDate><content:encoded>&lt;p&gt;I&apos;m currently involved on writing &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt; using the great LeanPub platform.
LeanPub has many benefits (I should write a post some day talking about) and one of them are you write the book using the &lt;a href=&quot;http://daringfireball.net/projects/markdown/&quot;&gt;markdown&lt;/a&gt; notation (really a slightly extended dialect) and they generate automatically your book in PDF, ePub and mobi formats.&lt;/p&gt;
&lt;p&gt;At first, writing a book using markdown notation can seem too much effort or a hipsters&apos;Â fashion but, in my experience, it is better than to use a WYSIWYG text processor. In software engineering words, &lt;strong&gt;decouple the content from its representation is a win&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;To write the book in markdown notation I&amp;apos;m using the powerful &lt;a href=&quot;http://www.sublimetext.com/&quot;&gt;SublimeText&lt;/a&gt; editor and I&amp;apos;m mainly using the next three plugins specially designed to work with markdown.&lt;/p&gt;
&lt;h3&gt;MarkdownEditing&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://sublime.wbond.net/packages/MarkdownEditing&quot;&gt;MarkdownEditing&lt;/a&gt; recognizes the markdown syntax and provides a nice theme for its syntax highlighting. You can make the window full screen and write in free distraction mode.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 101.23456790123457%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7CAAAOwgEVKEqAAAACTklEQVQ4y51UyY7bMAyd//+yosA0Hu+xY8ub5CWxc+ghN7F8tBWP0QQoengQRUmPuz5ut9tjHEZKk8RmWUZJklDXaZqmSTCO419Yz1Z5GAbs7bIsdL1ef38IIR8YrW3XddT3vaBtWzLGUNM0BH3XtSy3otdaC6BvmprvD0dCFvDQqqqSS/M8v8Tyas9ELB8J4TY8hEcgdB5ADw/ZA1rPtKzu3EVR17WFU8y1E8LDNYw1LBAZ0z9D0xJ2xzp9IHQ5hMdCyMIDVqqqsiBha3LRATqgdSvrQFzXzWbAoDivc4jQNkvPPEF+BXe2hXokRBuwZYvqwuJ3QOfaYwtP9u5c8m/MnkOEjHwopWzLIZRlSUVRcApqqtWFtEqpb3LSjZIwlcJ5iftPcOjHolyvE12K0rbDRPflGPIsIfJlfoBH8HB7/D5kuA0rGi2xtQ2Sz4USaG3e9uaWS3u/33cPkRNUGaG6KmMFQOiq+w5wBrlmR1ZCwxueY+t5HgVBQGmaUhzHlOc5ZlzmOwxDWaGPokhWB75nYZgd2qo8TiiCRSEQruldlSFrTJFAv8fu4Twvj5or+On9sGHqkR/49OtnRIEf0jnN6Zxc6JxfKGMgJeiCFxAPed0nJUkj639G9HXyyfciOp1OdA48KjnUIgN5zJ3wj4RIbJbltizWHivKYu01XlVVyFqK7i0s+vGZQ7QNJgXV+l9sP9XeNviC8D25HpRWwfC3ivo6I13G1JvuMIaQtwY/9iEqhM8BgKdOBmDo+77hPXT8xuKXARlPiHxfmJQ/MLW7e4H1o6sAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;light&quot; title=&quot;light&quot; src=&quot;/static/d212dfafa2e13c9f288347e46ba4cf98/dbb61/light.png&quot; srcset=&quot;/static/d212dfafa2e13c9f288347e46ba4cf98/19bd1/light.png 163w,
/static/d212dfafa2e13c9f288347e46ba4cf98/d3bcb/light.png 325w,
/static/d212dfafa2e13c9f288347e46ba4cf98/dbb61/light.png 650w,
/static/d212dfafa2e13c9f288347e46ba4cf98/c2c20/light.png 729w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;MarkdownPreview&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://sublime.wbond.net/packages/Markdown%20Preview&quot;&gt;MarkdownPreview&lt;/a&gt; creates a HTML version of the content ready to be previewed in the browser, this way you can get a better idea of how your content is growing. Also any changes on the markdown document can be easy updated in the browser refreshing the page.&lt;/p&gt;
&lt;h3&gt;MardownTOC&lt;/h3&gt;
&lt;p&gt;I write each chapter in a separate file. As it grows it is more complicated to see which sections and subsections I have created.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://sublime.wbond.net/packages/MarkdownTOC&quot;&gt;MarkdownTOC&lt;/a&gt; help me with this situation creating (and updating) automatically on top of the document a list with the headers of the markdown document.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;./images/demo.gif&quot; alt width=&quot;810&quot; height=&quot;689&quot;&gt;&lt;/p&gt;
&lt;h3&gt;Spellchecker&lt;/h3&gt;
&lt;p&gt;The book is written in English language and (I consider) my English is really poor so I have&amp;#xA0;&lt;span style=&quot;font-size: 16px; line-height: 1.5;&quot;&gt;activated the &lt;a href=&quot;http://www.sublimetext.com/docs/2/spell_checking.html&quot;&gt;spell checking&lt;/a&gt;&amp;#xA0;to avoid great and infamous mistakes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Due my language limitations I&amp;apos;m worried repeating too much the same introductory words or making the reading tedious, so I&amp;apos;m opened to any writing suggestions, corrections and improvements. No doubt to talk with me.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Feedback for The book of OpenLayers3]]></title><description><![CDATA[Finally I have decided to use LeanPub as the platform to publish my book. Here you can see the public page with a description about it: The book of OpenLayers3. Hope within a couple of weeks I can publish a sample chapter.]]></description><link>https://www.acuriousanimal.com/blog/2014/01/02/feedback-for-the-book-of-openlayers3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2014/01/02/feedback-for-the-book-of-openlayers3</guid><pubDate>Thu, 02 Jan 2014 11:44:00 GMT</pubDate><content:encoded>&lt;p&gt;Finally I have decided to use &lt;a href=&quot;https://leanpub.com/&quot;&gt;LeanPub&lt;/a&gt; as the platform to publish my book. Here you can see the public page with a description about it: &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt;. Hope within a couple of weeks I can publish a sample chapter.&lt;/p&gt;
&lt;h3&gt;Â What do I need from you?&lt;/h3&gt;
&lt;p&gt;What I need right now are your feedback, your opinions and reviews.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;What do you think about the book description?&lt;/li&gt;
&lt;li&gt;Do you like the cover image?&lt;/li&gt;
&lt;li&gt;How much would you be willing to pay for it?&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I need you to be critical with mine to make a good job.&lt;/p&gt;
&lt;p&gt;Thanks !!!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Professional purposes for the new year 2014]]></title><description><![CDATA[With the arrival of each new year everybody has new great purposes and new goals to achieve. I'm not talking from the personal point of view but the professional too: practice more sport, to quit smoke, read some book, learn a new programming language, ...]]></description><link>https://www.acuriousanimal.com/blog/2013/12/30/professional-purposes-for-the-new-year-2014</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/12/30/professional-purposes-for-the-new-year-2014</guid><pubDate>Mon, 30 Dec 2013 11:51:00 GMT</pubDate><content:encoded>&lt;p&gt;With the arrival of each new year everybody has new great purposes and new goals to achieve. I&apos;m not talking from the personal point of view but the professional too: practice more sport, to quit smoke, read some book, learn a new programming language, ...&lt;/p&gt;
&lt;p&gt;I&apos;m not an exception so, for this new year 2014, I have done my list of professional purposes:&lt;/p&gt;
&lt;h4&gt;Finish The book of OpenLayers3&lt;/h4&gt;
&lt;p&gt;The OpenLayers3 is beta stage but it is clear it will continue being one of the most important open source project within the GIS world. Because of this I start writing a book titled &lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The book of OpenLayers3&lt;/a&gt;, which tries to be a mix between a beginner&apos;s book plus a cookbook. For the moment I have almost finished two chapters and implemented some code examples.&lt;/p&gt;
&lt;h4&gt;Create an Android application&lt;/h4&gt;
&lt;p&gt;Currently the two most important mobile platforms are iOS and Android. My purpose if to be up to date so I want to start learning Android and create some kind of &quot;simple&quot; application, no matter which functionality, no matter if there are hundred of application equal or better. The goal is to learn Android and demonstrate it making a real application.&lt;/p&gt;
&lt;h4&gt;Continue working in the X-Project&lt;/h4&gt;
&lt;p&gt;Although I call it the X-Project, because for the moment it has no name, I have spent tons of hour working on it. The goal is to create a tool in the way of Evernote or Dragdis, which with the user can capture quickly and easily content in the web to allow organza and share later. Yes I know there are others that make this, there are others that are really big (like Evernote) but I&apos;m not worried about it. I have an idea. I know my idea is slightly different from others and can mark the difference. I know my idea can win. I have implemented a first version of API for the server and my purpose for this year is to create a functional prototype of the application (the client side) to present it and start looking for funds and a team.Â So here we go !!!&lt;/p&gt;
&lt;p&gt;All these is too much work for a single person and also combining it with a full time job. So I will take it easy (there is no other way).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The book of OpenLayers3]]></title><description><![CDATA[I was thinking on it for a long time, but due a lack of free time I never started. Finally I can officially say I have start writing The book of OpenLayers3.]]></description><link>https://www.acuriousanimal.com/blog/2013/12/24/the-book-of-openlayers3</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/12/24/the-book-of-openlayers3</guid><pubDate>Tue, 24 Dec 2013 16:31:00 GMT</pubDate><content:encoded>&lt;p&gt;I was thinking on it for a long time, but due a lack of free time I never started. Finally I can officially say I have start writing &lt;em&gt;The book of OpenLayers3&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;More probably it will be a hard task, because OpenLayers3 is still in heavy development process and currently it is in beta status. But... no one said it will be easy.&lt;/p&gt;
&lt;p&gt;OpenLayers3 is a completely rewritten version with the goal to create an up to date library, mobile ready out of the box and making use of the current best technologies.&lt;/p&gt;
&lt;p&gt;My previous experience writing the &lt;a title=&quot;OpenLayers Cookbook&quot; href=&quot;//openlayers-cookbook&quot;&gt;OpenLayers Cookbook&lt;/a&gt;Â for &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;Packt Publishing&lt;/a&gt;&lt;b&gt;Â &lt;/b&gt;was really great and, after declining an offer to rewrite it for the OpenLayer3 version, I was thinking on the possibility to write a new book.&lt;/p&gt;
&lt;p&gt;Although the experience was good, I found the cookbook format a bit restrictive in the way I could write. It is a cookbook so it is oriented to explain concrete situations with a concrete format, and that was the problem for me.&lt;/p&gt;
&lt;p&gt;When I write I like to do it taking the role of a person that must teach to another one with less knowledge. I like to situate the reader andÂ explain why things are how they are, and that requires more prose than it could be written in a cookbook.&lt;/p&gt;
&lt;p&gt;I don&apos;t want to be formal. I don&apos;t want to follow any book conventions, I simply want to write in a way I think is natural to learn, in the order I consider is more logic to understand the tool.&lt;/p&gt;
&lt;p&gt;Because of this, I finally chose to write the book by myself. It is on its early stage but it would be a mix between a beginners book and a cookbook, accompanied with a set of code examples.Â It is the XXI century so my intention is to offer it as an ebook. I&apos;m not sure which platform to use (maybe &lt;a href=&quot;https://leanpub.com/&quot;&gt;LeanPub&lt;/a&gt;) neither the price for it.&lt;/p&gt;
&lt;p&gt;So this is the time to help me suggesting me things to explain, examples to add, etc.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using more than one property file in Spring MVC]]></title><description><![CDATA[Spring is one of the most important, powerful and also complex frameworks in the actual Java panorama.]]></description><link>https://www.acuriousanimal.com/blog/2013/12/10/using-more-than-one-property-file-in-spring-mvc</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/12/10/using-more-than-one-property-file-in-spring-mvc</guid><pubDate>Tue, 10 Dec 2013 21:27:00 GMT</pubDate><content:encoded>&lt;p&gt;Spring is one of the most important, powerful and also complex frameworks in the actual Java panorama.&lt;/p&gt;
&lt;p&gt;Unfortunately for me, I&apos;m very forgetful so it is worth to write a post-reminder to increment the possibilities I never forget again something like this.&lt;/p&gt;
&lt;h3&gt;Using property files in Spring&lt;/h3&gt;
&lt;p&gt;Since Spring 3, the use of properties in our code was made really simple thanks to the placeholders.&lt;/p&gt;
&lt;p&gt;Supposing a property file &lt;code&gt;my_config_1.properties&lt;/code&gt;Â with next content:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;prop1=Some property with some value
prop2=Some number here&lt;/pre&gt;
&lt;p&gt;It is enough to add the next configuration element in our servlet configuration XML file:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;context:property-placeholder location=&quot;classpath:my_config_1.properties&quot;/&amp;gt;&lt;/pre&gt;
&lt;p&gt;Later, at any place of our program we can easily get the properties using &lt;code&gt;@Value&lt;/code&gt; annotation:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;@Value(&quot;${prop1}&quot;)
private String myProperty;&lt;/pre&gt;
&lt;h3&gt;And what if you have more than one property files?&lt;/h3&gt;
&lt;p&gt;Supposing we have a second property file &lt;code&gt;my_config_2.properties&lt;/code&gt; with the values:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;second_file_prop=This comes from the second file&lt;/pre&gt;
&lt;p&gt;Spring allows to specify more than one properties file adding a new placeholder:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;context:property-placeholder location=&quot;classpath:my_config_1.properties&quot;/&amp;gt;
&amp;lt;context:property-placeholder location=&quot;classpath:my_config_2.properties&quot;/&amp;gt;&lt;/pre&gt;
&lt;p&gt;The problem comes when you try to use the property from the second file, using &lt;code&gt;@Value(&quot;${second_file_prop}&quot;)&lt;/code&gt;, Spring will throw an exception saying it can find the &lt;code&gt;second_file_prop&lt;/code&gt; value. This is because Spring try to find the property in the first file and if it does not find it throws an error.&lt;/p&gt;
&lt;p&gt;To avoid this ugly effect we need to use the &lt;code&gt;ignore-unresolvable&lt;/code&gt; attribute in the placeholder:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;context:property-placeholder location=&quot;classpath:my_config_1.properties&quot; ignore-unresolvable=&quot;true&quot;/&amp;gt;
&amp;lt;context:property-placeholder location=&quot;classpath:my_config_2.properties&quot;/&amp;gt;&lt;/pre&gt;
&lt;p&gt;This way if Spring does not find a property in the first file it will continue looking at the second one.&lt;/p&gt;
&lt;h3&gt;The order&lt;/h3&gt;
&lt;p&gt;In addition, the placeholder element can use the &lt;code&gt;order&lt;/code&gt; attribute that determines the order in which Spring must look at the files. So a good way to express the previous configuration is:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;context:property-placeholder location=&quot;classpath:my_config_1.properties&quot; order=&quot;1&quot;Â ignore-unresolvable=&quot;true&quot;/&amp;gt;
&amp;lt;context:property-placeholder location=&quot;classpath:my_config_2.properties&quot; order=&quot;2&quot;Â ignore-unresolvable=&quot;true&quot;/&amp;gt;&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[Symfony2, Doctrine, FOSUserBundle and fixtures for functional testing]]></title><description><![CDATA[I have an application built with Symfony2 framework which uses the Doctrine2 ORM for persistence.
The issue is I need to make functional tests
allowing to purge and initialize the database with doctrine fixtures. class MyFixtures implements FixtureInterface, ContainerAwareInterface { }]]></description><link>https://www.acuriousanimal.com/blog/2013/10/17/symfony2-doctrine-fosuserbundle-and-fixtures-for-functional-testing</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/10/17/symfony2-doctrine-fosuserbundle-and-fixtures-for-functional-testing</guid><pubDate>Thu, 17 Oct 2013 20:21:00 GMT</pubDate><content:encoded>&lt;p&gt;I have an application built with Symfony2 framework which uses the Doctrine2 ORM for persistence.
The issue is I need to make &lt;a href=&quot;http://symfony.com/doc/current/book/testing.html#functional-tests&quot;&gt;functional tests&lt;/a&gt;
allowing to purge and initialize the database with doctrine fixtures.&lt;/p&gt;&lt;/p&gt;
&lt;h3&gt;Before to start&lt;/h3&gt;
&lt;p&gt;In the project I have used the &lt;a href=&quot;https://github.com/FriendsOfSymfony/FOSUserBundle&quot;&gt;FosUserBundle&lt;/a&gt;, to allow better user login, registration, etc andÂ &lt;a href=&quot;http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html&quot;&gt;DoctrineFixturesBundle&lt;/a&gt;, which allow to fill a database with fixtures based on our Doctrine entities.&lt;/p&gt;
&lt;p&gt;To load doctrine fixtures into database you need to execute the command line:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;php app/console doctrine:fixtures:load&lt;/pre&gt;
&lt;p&gt;That means for each test you need to clean up the database and load the fixtures manually.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Our objective is the automate this process before executing each test.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3&gt;Doctrine fixtures and the creation of FOSUserBundle users&lt;/h3&gt;
&lt;p&gt;Because we are using Doctrine fixtures we need a class that implementsÂ &lt;code&gt;FixtureInterface&lt;/code&gt; interface (see &lt;a href=&quot;http://symfony.com/doc/current/bundles/DoctrineFixturesBundle/index.html#writing-simple-fixtures&quot;&gt;documentation&lt;/a&gt;). The problem is we want to create FOSUserBundle user instances and that requires we have access to the container to get a reference to the user management service, so we need to set access to the container too. Nothing we can&apos;t find in the documentation:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;
&lt;p&gt;class MyFixtures implements FixtureInterface, ContainerAwareInterface {&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;/**
 * @var ContainerInterface
 */
private $container;

/**
 * {@inheritDoc}
 */
public function setContainer(ContainerInterface $container = null) {
    $this-&amp;amp;gt;container = $container;
}

public function load(ObjectManager $manager) {

    $userManager = $this-&amp;amp;gt;container-&amp;amp;gt;get(&amp;#39;fos_user.user_manager&amp;#39;);

    // Create a new user
    $user = $userManager-&amp;amp;gt;createUser();
    $user-&amp;amp;gt;setUsername(&amp;#39;user&amp;#39;);
    $user-&amp;amp;gt;setEmail(&amp;#39;user@domain.com&amp;#39;);
    $user-&amp;amp;gt;setPlainPassword(&amp;#39;user_password&amp;#39;);
    $user-&amp;amp;gt;setEnabled(true);

    $manager-&amp;amp;gt;persist($user);
    $manager-&amp;amp;gt;flush();&amp;lt;/pre&amp;gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;The test class&lt;/h3&gt;
&lt;p&gt;In your test class you need to define the &lt;code&gt;setUp&lt;/code&gt; method that is responsible to prepare the database fixtures.&lt;br /&gt;
The setup method makes two important things, first purge the tables on the database to remove any previous changes make by previous tests and, second, initialize the database with a set of fixtures.&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;class YourTestClass extends WebTestCase {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;private $em;

/**
 * Set up database and fixtures before each test
 */
public function setUp() {

    $client = self::createClient();
    $container = $client-&amp;amp;gt;getKernel()-&amp;amp;gt;getContainer();
    $em = $container-&amp;amp;gt;get(&amp;#39;doctrine&amp;#39;)-&amp;amp;gt;getManager();

    // Purge tables
    $purger = new \Doctrine\Common\DataFixtures\Purger\ORMPurger($em);
    $executor = new \Doctrine\Common\DataFixtures\Executor\ORMExecutor($em, $purger);
    $executor-&amp;amp;gt;purge();

    // Load fixtures
    $loader = new \Doctrine\Common\DataFixtures\Loader;
    $fixtures = new \Path\To\Your\Fixtures\MyFixtures();
    $fixtures-&amp;amp;gt;setContainer($container);
    $loader-&amp;amp;gt;addFixture($fixtures);
    $executor-&amp;amp;gt;execute($loader-&amp;amp;gt;getFixtures());
}

...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Note how&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;we need to inject a reference to the container in the fixtures class.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;It is necessary to make it by hand. The dependency isn&apos;t injected automatically because we are running a PHPUnit test, not a Symfony2 application.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A visual exploration of the Nobel Prize history]]></title><description><![CDATA[After some time in mind, finally I have got some free time to spend creating a web page to show the information related to Nobel Prizes.]]></description><link>https://www.acuriousanimal.com/blog/2013/08/15/a-visual-exploration-of-the-nobel-prize-history</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/08/15/a-visual-exploration-of-the-nobel-prize-history</guid><pubDate>Thu, 15 Aug 2013 18:19:00 GMT</pubDate><content:encoded>&lt;p&gt;After some time in mind, finally I have got some free time to spend creating a web page to show the information related to Nobel Prizes.&lt;/p&gt;
&lt;p&gt;After discovering&amp;#xA0;&lt;a href=&quot;http://www.nobelprize.org/nobel_organizations/nobelmedia/nobelprize_org/developer/&quot;&gt;Nobel Prize&lt;/a&gt; web site offers an API to query both prizes and laureates from the beginning of the history of the prizes I was thinking in the creating of a kind of dynamic infography to allow explore the information in a useful and simplified way.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/nobel-prize-explorer&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 80.93264248704664%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADOElEQVQ4y21UyY7cVBT1D/IDrLKFFStWZMOCBSwSsoyEWBAlCgI1iVAiotBqQoeuUEn1UF2Jy7NdnspTeXZ5qsN9r9RNFLB09K6f7z3vvDtYiKIQcRyDPcMwYJNmyIsCaV6QnSKntaoqlCVDibpuMI47YLejdeTohxEtoSMIlmXicrFAGAQo6i0OT2V8d3iJ32cSTuYSTNPG2vOgGyZWpoHjuYpfpgq+eTbHzcen+IJw6/kljhYGns0NCK7rQpZlFKSqarb46eVb3H46x9OphIMTEX8TqaFpUBQFiyWRTZa4e7jAx98f4+ajGT7/+TU+fTDBZw8n+OrJOYQkSWDbNqKIrj10uHPwBz768gfcuH2Abx+/wvk7hZNZuobfpiLuHy9xsbTxiFTWaY43koMnbzQ8fCnhwV9LCG1doC4LbLct8bV4fjLDJ7d+xI2v7+FwMoNt6pCJUFNVGIYL3/GxWnlI1gmyMMWvr1TcfyHixYUOx/MhyF4GN8rQty1P+IoIDM2kYAu2ZUEhIpYSyzRRbnLkcYa1nyCNEqjkNzlX6IA1giDmxRXunYQ4Mwuq8Y4Tsusx6JpOakI4Kx8a2RrlcWWtEAcR2ryC57hcuamruJBNzCSTvpHCukjRtQ1vm6bZEzJFEsGlqwVOTIotepcgiiLtOdjQVdmBkiRBVWRM5yL+PBOhUEoEyfbpJJX6LUff91SciEuP4whhGKEsamRZhpR6koF1Q5qV3J8hIxR5hjDJEKQVBGpRTsTAmnTfvDUHI9rtdvi/hzV3RzFd12MY//UR3ndiweMHBCzwaiIGmgTm03YdDMuGubL5ZGVFxWvAIDCHKxU8kMaPfWDrODKbkYy0NV4Hdf0A3aOxrDtsqgGy32DhNEjKfq9wT8otVNsOcdHyA3riyOoBWzI25KwFDS7tCufUFUunwJmeYqpsoLg5NI9yWrXvE+5VrjclXosuTiUXRzMNR2esJTzMVR+ThYNT2cc7zYXrh/DDBI4fYU1rQJPG8n5NeLW27Zbbtk+V3mT8qqydKvpxjEOPpq5oa7j+O/G4cbzm+A8hz+MHhWH7JREmGf3SshzbtuN7V0UaKKalSespt/8A6zynCUfg2V0AAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Screenshot 08142013 042534 PM&quot; title=&quot;Screenshot 08142013 042534 PM&quot; src=&quot;/static/4b9411d45989e44b1f60901f551ee724/dbb61/Screenshot-08142013-042534-PM.png&quot; srcset=&quot;/static/4b9411d45989e44b1f60901f551ee724/19bd1/Screenshot-08142013-042534-PM.png 163w,
/static/4b9411d45989e44b1f60901f551ee724/d3bcb/Screenshot-08142013-042534-PM.png 325w,
/static/4b9411d45989e44b1f60901f551ee724/dbb61/Screenshot-08142013-042534-PM.png 650w,
/static/4b9411d45989e44b1f60901f551ee724/5c933/Screenshot-08142013-042534-PM.png 965w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;A short description of the application&lt;/h2&gt;
&lt;p&gt;The goal of the application is to show the Nobel Prizes data in useful ways in addition to search laureates by filtering data. The application offers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Colorpleth map: to see the number of laureates depending on the born or died country&lt;/li&gt;
&lt;li&gt;Line chart, to show the number of prizes and laureates by year&lt;/li&gt;
&lt;li&gt;Column chart, to show prizes and laureates grouped by category and&lt;/li&gt;
&lt;li&gt;Column chart, to show how prizes are shared by laureates&lt;/li&gt;
&lt;li&gt;Table, with laureates information (prize, year, category and motivation)&lt;/li&gt;
&lt;li&gt;A nice tour to know how to work with the application&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To filter information and reduce the amount of data in the laureates table, the idea is to go from top to bottom and select on each chart the desired information. This way, each time we select a country in the colorpleth map the rest of the charts and the laureates table are updated to show information related with that country. If we select a year in the line chart, the chart above it are updated to reflect the information for that year.&lt;/p&gt;
&lt;h2&gt;How was it made?&lt;/h2&gt;
&lt;p&gt;Once I had the idea I started exploring libraries to create the charts.&lt;/p&gt;
&lt;p&gt;Initially I though in &lt;a href=&quot;http://d3js.org/&quot;&gt;D3&lt;/a&gt;, which is an awesome and super powerful library, both to create the map and the charts. Unfortunately, D3 is too much &lt;em&gt;low level&lt;/em&gt; library for my needs and I require to create my own little chart libraries to reuse components.&lt;/p&gt;
&lt;p&gt;For the colorpleth map, after some exercises using D3 (from this nice &lt;a href=&quot;http://techslides.com/d3-world-maps-tooltips-zooming-and-queue/&quot;&gt;post&lt;/a&gt;) I finally decide to make use of &lt;a href=&quot;http://leafletjs.com&quot;&gt;Leaflet&lt;/a&gt;, which is tiny JavaScript library specifically designed to make &lt;em&gt;simple&lt;/em&gt; maps. Also I found a nice &lt;a href=&quot;http://leafletjs.com/examples/choropleth.html&quot;&gt;tutorial to create a colorpleth map&lt;/a&gt; that was a plus in my decision.&lt;/p&gt;
&lt;p&gt;Next was to explore D3 derived chart libraries, like &lt;a href=&quot;http://nickqizhu.github.io/dc.js/&quot;&gt;dc.js&lt;/a&gt;,&amp;#xA0;&lt;a href=&quot;http://nvd3.org/&quot;&gt;nvd3&lt;/a&gt; or &lt;a href=&quot;http://www.oesmith.co.uk/morris.js/&quot;&gt;morris.js&lt;/a&gt;. After some test I discard them because lake of need requirements or documentation to use them properly. The final choice was &lt;a href=&quot;http://www.highcharts.com/&quot;&gt;HighCharts&lt;/a&gt;, a really powerful library to create almost any kind of chart. It is really easy to create charts, add tooltips, control selection, etc and has a free license for non commercial apps.&lt;/p&gt;
&lt;p&gt;Finally, I was thinking in the bottom laureates table. Initially I code it using a standard HTML table and adding and removing entries using jQuery. But after some headaches I change to &lt;a href=&quot;https://datatables.net/&quot;&gt;DataTables&lt;/a&gt; which is a really powerful tool to create tables both from table tag or an external content loaded via AJAX.&lt;/p&gt;
&lt;h2&gt;Contribute&lt;/h2&gt;
&lt;p&gt;The Nobel Prize app is a simply exercise to test some different tools and try to produce a useful utility.&lt;/p&gt;
&lt;p&gt;As always you can find the code at my &lt;a href=&quot;https://github.com/acanimal/nobel-prize-explorer&quot;&gt;GitHub&lt;/a&gt; account and contribute with improvements. A demo is also available at: &lt;a herf=&quot;http://www.acuriousanimal.com/nobel-prize-explorer/&quot;&gt;http://www.acuriousanimal.com/nobel-prize-explorer&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The OpenLayers fallen and Leaflet arise... sure???]]></title><description><![CDATA[I wrote this post some months ago, before I publish the OpenLayers Cookbook, but I never published it thinking it could start a flame war instead a constructive thread.]]></description><link>https://www.acuriousanimal.com/blog/2013/05/05/the-problem-with-openlayers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/05/05/the-problem-with-openlayers</guid><pubDate>Sun, 05 May 2013 16:59:00 GMT</pubDate><content:encoded>&lt;p&gt;I wrote this post some months ago, before I publish the OpenLayers Cookbook, but I never published it thinking it could start a flame war instead a constructive thread.&lt;/p&gt;
&lt;p&gt;Today, after a twitter conversation (thanks &lt;a href=&quot;http://twitter.com/Starefossen&quot;&gt;@Starefossen&lt;/a&gt;
  &lt;a href=&quot;http://twitter.com/brymcbride&quot;&gt;@brymcbride&lt;/a&gt;
  &lt;a href=&quot;http://twitter.com/erilem&quot;&gt;@erilem&lt;/a&gt;
  &lt;a href=&quot;http://twitter.com/mourner&quot;&gt;@mourner&lt;/a&gt; and
  &lt;a href=&quot;http://twitter.com/LeafletJS&quot;&gt;@LeafletJS&lt;/a&gt;) I think it is time to publish it.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 513px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 116.5692007797271%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEM0lEQVQ4y3VVyW4jVRStz2DDN7Bp+IXmB4AdEmKB1GJD2HQkpDS9Qtmw6A9ASHTEtIlgwQZCRCcYJ7YTl4eUh7LLU9nl2S6PiXM459mOrBZYurrvvXrvDueee2398N23OHz+BU7++B1F14XfbqNBaXU6GA6HGI1GGI9DjKnDkHo8NjIaDTd6hOl0hvl8bu5bB08/x97HH+DnH7+HW60iWsjjolRCIp+DnUziOmnDcRwjmUwGtm0jnc4gnUkjm80icXWFWq2GDgOQcSvLD04mhQIN6KNtp9BqNlHnpXq9Dt/3Ua1U0KDWwxrP6vWGOW82fXOnwu/SYTiBhc1vMpmgzVSnsxnuVisji+USi8UCS2ql9H+iO5LpdAqrxPSUit+gZ6bsKzJ69MplDHs9jDc4vm5kRscyIBG2EpPy/v4+3n38GCevXhG/Is7TaURvbvAPdZzObDrI5nKoeB4qdFimI6/imfTLPGsFgTGuDI3Bo6MjPHt2wEcOUoUCrgh+2i3CKblIFYtIUwS+spDE43G4dNRj9N1uF/1+30Qpgybl1f1qjSEBHfDSjIdzpcIUZrq0ubhNca1nRm/PZOzB4GQ8R3dYR9D24WQdYtlAfzBAl8bnfLCYzR4w29W768lEWE7WPExWT/Cb+xlKfgmRXIE4FpAiPhGmGvfKuCZuWcJQ4Hk2q7TJvxvHwODk1txUYfP8Lhisom+j0IyQa1XErq6RIJlLBLtarxldofESC1GV5kOPTjyvQhxdFOnU4x0ZUpWVtrVa3gOEUYcuW69JUqulFluK/Eeqr8uWPgbDequJIlneYfnHgyFC8Y6yBXoL/m4RdtdbZ7qrQKznnz7Bh2++gZ9++RVppvZnPIazWAwOcVJ6ajVFrVZrsGCiitZqvyBose2qpi0HLKQpyuH+U3zy9ls4u4zAH43R4GF3PEKr1UKbDS/iqiUDap2Jd9rLibScBEHbGFOkVm/EkcS+HfS66PJBjw87rQCh2k24MBXppXp2g9mSD7f75abfZcyk/OKrr3H0zUtELi4RIxViHE+nXNtuCZV2AI8YVxlpkw46TLe1WQeMqMNCKvI1DIyUEVuHB1/io/ffw1kijkte/puYJSgX5N6Fk8MVx1qUjs7Y27Zaj/NR3+L5PJLcRyIRJBmE5qQcWiOGqfwF/mUigQbTNpOZICttTRtVPuReKYUS7c0k5/TW3Q0HDQ/v7u5ML6t1RBeDCzG5vb012Oy22WzDtQcaab3DQVOU8/NzHB8fcxSVTVeUOQvdsoc8u6DLiob0GvLyrYbu/T1WFDOAOVS01rk5Y2DG4N7eHt559Ah/RaNIkwrXNGgz/Rjb7IY8K7H6CTq6IfguMSoS53ynjXK/hwL3Kf4NVAiHjMmopeY+PT0ln+qm0dV+OQ5UNX+Bf1gO1yKyRBWt1tZE1trfEF58VC30+xfv7po4OTLkCAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;twitter_leaflet_ol&quot; title=&quot;twitter_leaflet_ol&quot; src=&quot;/static/ebcbd96cae8745fbc8b210842a7e56dc/e5f70/twitter_leaflet_ol.png&quot; srcset=&quot;/static/ebcbd96cae8745fbc8b210842a7e56dc/19bd1/twitter_leaflet_ol.png 163w,
/static/ebcbd96cae8745fbc8b210842a7e56dc/d3bcb/twitter_leaflet_ol.png 325w,
/static/ebcbd96cae8745fbc8b210842a7e56dc/e5f70/twitter_leaflet_ol.png 513w&quot; sizes=&quot;(max-width: 513px) 100vw, 513px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;OpenLayers&lt;/h2&gt;
&lt;p&gt;OpenLayers is a great project. I think it is the most complete GIS project for creating web mapping applications. Its completeness makes it also a bit complex, but a complexity that is necessary.&lt;/p&gt;
&lt;p&gt;OpenLayers allows to use raster and vector layers. Respect vector layers we can load data from different data sources (files, WFS servers, ...) and with different formats (GML, GeoJSON, KML, ...). OpenLayers allows to render geometries using different technologies (SVG or Canvas) in a way transparent to the user. Its design tries to follow as close as possible the standard concepts of features, geometries, attributes and tries to implement most of them (WMS, WFS, SLD, ...).&lt;/p&gt;
&lt;p&gt;In summary, OpenLayers tries to offer all the things a complete GIS project could need. Its desing has made having all this in mind and results in a big and complex architecture but, take into account, which is necessary to give response to all the requirements.&lt;/p&gt;
&lt;h2&gt;Leaflet&lt;/h2&gt;
&lt;p&gt;On the other hand we found a project like Leaflet, designed from the beginning with a philosophy close to Â &quot;&lt;em&gt;make it without complexity&lt;/em&gt;&quot; orÂ &quot;&lt;em&gt;offer only that things required to create a simple maps&lt;/em&gt;&quot;.&lt;/p&gt;
&lt;p&gt;Leaflet offers raster layers (from a tiled source), vector layers, markers and popups and, every day, a growing set of plugins adding more features to it: read GeoJSON files, clustering strategy, etc.&lt;/p&gt;
&lt;p&gt;Leaflet is much more lightweight and, to create a simple map, it is more simple to use.&lt;/p&gt;
&lt;h2&gt;The secret behind the fame of Leaflet&lt;/h2&gt;
&lt;p&gt;IMO Leaflet has two main aspects that has made it the perfect option to be used in thousands of web pages: its &lt;em&gt;look and feel&lt;/em&gt; and its &lt;em&gt;coding style&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The Leaflet L&amp;amp;F is better than OpenLayers: buttons and layer switcher (among others) looks like an actual and fresh project instead like an almost 10 years old project like OpenLayers.&lt;/p&gt;
&lt;p&gt;The Leaflet coding style is actual. The use of short namespaces and the chaining functions style (something like jQuery) makes it feel like a modern projectÂ and, probably, easier to use than OpenLayers.&lt;/p&gt;
&lt;h2&gt;What about Leaflet plugins?&lt;/h2&gt;
&lt;p&gt;Many of you can think &quot;&lt;em&gt;what about the plugins?&lt;/em&gt;&quot; It is known one of the key aspects of Leaflet is the fact it offers a base code on which develop other plugins to make the platform better and greater. Yes, that is nice but is not always true.&lt;/p&gt;
&lt;p&gt;For me, the growing set of Leaflet plugins remember theÂ myriadÂ of jQuery plugins. Most of them are great, awesome, but not all of them follow the same rules. Every developer can create plugins without a common design or architecture integration.&lt;/p&gt;
&lt;p&gt;For example, the &lt;a href=&quot;https://github.com/Leaflet/Leaflet.markercluster&quot;&gt;Leaflet.markercluster&lt;/a&gt; plugin (from Dave Leaver &lt;a href=&quot;https://twitter.com/daveleaver&quot;&gt;@daveleaver&lt;/a&gt;) is an awesome plugin that allows to make the same as the cluster strategy on OpenLayers, that is, group &quot;points&quot; which are too close and can overlap each other.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;I must to say I start coding the &lt;a href=&quot;//2012/09/06/animatedcluster-demo-site-updated-to-work-with-openlayers-2-12&quot;&gt;AnimatedCluster strategy&lt;/a&gt; for OpenLayers after seen the Dave&apos;s work, which I consider superior to mine.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The Leaflet.markercluster version is based in the concept of markers while the AnimatedCluster follow the more standard concept of &lt;em&gt;feature&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;To style markers in the Leaflet.markercluster you need to implement aÂ &lt;code&gt;iconCreateFunction&lt;/code&gt; and pass to the constructor which must be responsible to set the CSS style for each marker depending on the number of points it clusters (see theÂ &lt;a href=&quot;http://leaflet.github.io/Leaflet.markercluster/dist/leaflet.markercluster-src.js&quot;&gt;&lt;code&gt;_defaultIconCreateFunction&lt;/code&gt;&lt;/a&gt; as a sample).&lt;/p&gt;
&lt;p&gt;In the AnimatedCluster we have all the power of the features, geometries and styles OpenLayers offers us. We can create a vector layer, assign the AnimatedCluster strategy to it with some rules to style and automatically our layer will act as a cluster layer (please read the post &lt;a title=&quot;Animated marker cluster strategy for OpenLayers&quot; href=&quot;//2012/08/19/animated-marker-cluster-strategy-for-openlayers&quot;&gt;Animated marker cluster Strategy for OpenLayers&lt;/a&gt; for more detailed explanation).&lt;/p&gt;
&lt;p&gt;The fact OpenLayers is designed with many requirements in mind allow to work with a set of well designed pieces, like vector layers, features, geometries, styles, protocols and formats. But in contrast it adds some rigidness to implement new features that must conform the &quot;global&quot; rules.&lt;/p&gt;
&lt;p&gt;On the other hand, Leafet lacks from a &quot;global&quot; design and, because of this, two similar plugins can follow to different implementation without the option of &quot;reuse concepts&quot; (think in another plugins that styles markers). But this lackÂ of &quot;global design&quot; is what makes Leaflet be more flexible than OpenLayers.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;IMO, both OpenLayers and Leaflet are great tools for different (but also similar)Â purposes.Â I consider Leaflet ideal for web pages with relatively simple maps (to create great visualizations with markers, popups, etc) but for a more GIS oriented solution I have no doubt of using OpenLayers.&lt;/p&gt;
&lt;p&gt;Having that in mind it is easy to see there are a bigger number of sites requiring something like Leaflet instead of OpenLayers. The 90% of users requires a &quot;simple map solution&quot; instead a GIS solution. Having that in mind it is easy to see we are comparing a &quot;simple map solution&quot; with a GIS solution and I ask you: why?&lt;/p&gt;
&lt;p&gt;As developer we have the pleasure to have two great tools on our bag. It is our responsibility to use the appropriateÂ one on each situation.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SimplyWrite, a free web distraction writing tool]]></title><description><![CDATA[I like to write and I like programming so the obvious consequence were to write some tool to write.Â More or less this is the history of SimplyWrite.]]></description><link>https://www.acuriousanimal.com/blog/2013/04/29/simplywrite-a-free-web-distraction-writing-tool</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/04/29/simplywrite-a-free-web-distraction-writing-tool</guid><pubDate>Mon, 29 Apr 2013 19:26:00 GMT</pubDate><content:encoded>&lt;p&gt;I like to write and I like programming so the obvious consequence were to write some tool to write.Â More or less this is the history of &lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;&amp;#xA0;is a free web distraction writing tool that&amp;#xA0;recognizes the lightweight markup language&amp;#xA0;&lt;a href=&quot;http://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt;,&amp;#xA0;an easy-to-read, easy-to-write plain format which allow to enrich the text.&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 40.25%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVQoz4WR6W6DMBCEef9na8XlGBOMDzB3gPQJpvZGpKlK1B+jAe/up1k7ajuLae4xTj153zs459B1zp91/yrM3NbJ+4B5GRDZRtHP/rVSw4UJxLFAkgpYW6Px9eBnMkZSfd1mbPtCipyzaFrtDxcCClGAFxyFd1kJSCmg1JUGz9TS7PxUdJD3+w3j2IGxBFn64T1DwXNwzlB5sDE1tJZ/ZO1PQgIeZAJOjtbNcwljfbPxKexD1qqTlcOV6HPgRgkd8jJDWiWI5SeYSlDqC0mZEq0ffrfyE3h8hITD4CAkwzVAFAevMwjFoG31SBySGfn2UX4Bg4dnH4aW7jKkncg7n8LQYN83VH9V6HsFfgMSyEk+wVgDyAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;simplywrtie2&quot; title=&quot;simplywrtie2&quot; src=&quot;/static/02c5b2ad0f6f38990170bb7f21e070b0/dbb61/simplywrtie2.png&quot; srcset=&quot;/static/02c5b2ad0f6f38990170bb7f21e070b0/19bd1/simplywrtie2.png 163w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/d3bcb/simplywrtie2.png 325w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/dbb61/simplywrtie2.png 650w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/8ff1e/simplywrtie2.png 800w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Auto show/hide of menus to allow a clean working area.&lt;/li&gt;
&lt;li&gt;Show &lt;em&gt;working&lt;/em&gt; and &lt;em&gt;total&lt;/em&gt; timer. &lt;em&gt;Total timer&lt;/em&gt; counts the time since you open &lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;. &lt;em&gt;Working timer&lt;/em&gt; counts the time you have set active the &lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;&amp;#xA0;page.&lt;/li&gt;
&lt;li&gt;Count lines, words and characters.&lt;/li&gt;
&lt;li&gt;Export your writes to a new page, ready to be saved.&lt;/li&gt;
&lt;li&gt;Allow to configure font family and size.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;&amp;#xA0;stores all your writes on the client side. It makes use of the HTML5&amp;#xA0;&lt;a href=&quot;http://www.html5rocks.com/en/features/storage&quot;&gt;local storage&lt;/a&gt;&amp;#xA0;feature so no server is required.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;&lt;p&gt;Be careful with this feature. You can lost your data if you manually clean the broswer cached data and also browser cleans the local storage area automatically when the space used&amp;#xA0;grown over some value (like 500mb).&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The source code of &lt;a href=&quot;https://github.com/acanimal/SimplyWrite&quot;&gt;SimplyWrite is available at GitHub&lt;/a&gt; under MIT license. Feel free to contribute.&lt;/p&gt;
&lt;h2&gt;The Design&lt;/h2&gt;
&lt;p&gt;I would like to specially mention the fact the &lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;&amp;#xA0;design was made by my friend &lt;a href=&quot;http://guillemsevilla.cat/&quot;&gt;Guillem Sevilla&lt;/a&gt; (&lt;a href=&quot;https://twitter.com/gllmsvll&quot;&gt;@gllmsvll&lt;/a&gt;) a great&amp;#xA0;minimalism&amp;#xA0;designer !!!&lt;/p&gt;
&lt;h2&gt;Technology&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite&lt;/a&gt;&amp;#xA0;has been a nice challenge for me. It gives me the&amp;#xA0;opportunity&amp;#xA0;to work with the next tools:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span style=&quot;line-height: 13px;&quot;&gt;&lt;a href=&quot;http://gruntjs.com/&quot;&gt;grunt&lt;/a&gt;, the awesome JavaScript task runner. It allows, among others, to minimize and concatenate files.&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/backbone-boilerplate/grunt-bbb&quot;&gt;grunt-bbb&lt;/a&gt;, the grunt Backbone Boilerplate Build extension. Simplifies the work with Backbone framework.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://backbonejs.org/&quot;&gt;backbone&lt;/a&gt;, a lightweight MVC framework.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/tbranyen/backbone.layoutmanager&quot;&gt;backbone.layoutmanager&lt;/a&gt;, an extension of backbone to improve the work with views.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://codemirror.net/&quot;&gt;CodeMirror&lt;/a&gt;, an awesome code editor component for the browser.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://twitter.github.io/bootstrap/&quot;&gt;Bootstrap&lt;/a&gt;, a front-end framework used for the UIX.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[OpenLayers Cookbook]]></title><description><![CDATA[Packt Publishing has recently announced the publication ofÂ OpenLayers Cookbook, my first work as a technical bookÂ author. OpenLayersÂ is one of the most complete and powerful open source JavaScript libraries for displaying map data in web browsers, providing an API for building rich web-based geographic applications similar to Google Maps and Bing Maps. The book provides 60 practical examples to understand the main topics to create web mapping applications based on OpenLayers. ItÂ is for GIS-related professionals who have basic knowledge of web technologies, and wish to start or gain in-depth knowledge of creating web mapping applications. The book covers the mainÂ concepts about maps, layers, controls, protocols, events, important tile providers and WMS servers and is divided in the next set of chapters:  Chapter 1: Web Mapping Basics_   Chapter 2: Adding Raster Layers_   Chapter 3: Working with Vector Layers_   Chapter 4: Working with Events_   Chapter 5: Adding Controls_   Chapter 6: Theming_   Chapter 7: Styling Features_   Chapter 8: Beyond the Basics_ The chapter organization tries to follow the natural set of step required to learn OpenLayers from the beginning. Chapter 1 introduces the map related concepts, how it contains layers and how they can be handled. Chapters 2 and 3 shows how to work with the two kinds of layers: raster and vector. Chapters 4 and 5 describe the importance of events in web applications, the mechanism offered by OpenLayers and the main set of controls the framework implements. The chapters 6 and 7 are centered on changing the look and feel of our maps in addition to improve the look of vector features. Finally, the chapter 8 show some advanced concepts on how we can extend OpenLayers. The process of writing a book is really complex and in addition to the author (that is me) many other people are related to it. By this reason, I would like to thank to the people atÂ Packt Publishing:Â Usha Iyer,Â Kedar Bhat,Â Joel Goveya,Â Joyslita DsouzaÂ andÂ Madhuri DasÂ (sorry if I miss someone), to my awesome reviewers:Â David Burgoon,Â Mohammad MotamediÂ (thanks Mohammad for your great review),Â Jorge Sanz,Â Srinivas Shanmugam,Â Davor ZelicÂ andÂ Richard Zijlstra, to my own folks who always encourage me and, most important, to my wife who suffers my addiction to computer science. Finally, thanks to all the readers of the book. I hope the book was what they expect from it. No doubt to write here asking for help. Thanks to all !!! Other materials Book is accompanied by a RIA application (implemented with the Dojo Toolkit) allowing to run and show all the recipes of the book. It is freely available at myÂ Openlayers-Cookbook GitHub repository. You can see the application in action online. Fell free to contribute. Additionally, I have a presentation summarizing the main concepts of OpenLayers at the repositoryÂ OpenLayers-PresentationÂ and can be seen also online at OpenLayers online presentation. Reviews What others say about the book: 1st Book Review : OpenLayers Cookbook  Reviews at Amazon.com  OpenLayers Cookbook review  Book Review: OpenLayers Cookbook  OpenLayers Cookbook]]></description><link>https://www.acuriousanimal.comnull</link><guid isPermaLink="false">https://www.acuriousanimal.comnull</guid><pubDate>Wed, 03 Apr 2013 16:26:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://www.packtpub.com/&quot;&gt;Packt Publishing&lt;/a&gt; has recently announced the publication ofÂ &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;OpenLayers Cookbook&lt;/a&gt;, my first work as a technical bookÂ author.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://openlayers.org/&quot;&gt;OpenLayers&lt;/a&gt;Â is one of the most complete and powerful open source JavaScript libraries for displaying map data in web browsers, providing an API for building rich web-based geographic applications similar to Google Maps and Bing Maps.&lt;/p&gt;
&lt;p&gt;The book provides 60 practical examples to understand the main topics to create web mapping applications based on OpenLayers. ItÂ is for GIS-related professionals who have basic knowledge of web technologies, and wish to start or gain in-depth knowledge of creating web mapping applications.&lt;/p&gt;
&lt;p&gt;The book covers the mainÂ concepts about maps, layers, controls, protocols, events, important tile providers and WMS servers and is divided in the next set of chapters:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.packtpub.com/application-development/openlayers-cookbook&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 302px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 123.50993377483444%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAgME/9oADAMBAAIQAxAAAAFDsnY00CBWQUymWUVAP//EABwQAAICAgMAAAAAAAAAAAAAAAADAQISExEgI//aAAgBAQABBQJceZyUZWKbKm2hiyDFpK2T0//EABcRAAMBAAAAAAAAAAAAAAAAAAABEhH/2gAIAQMBAT8B1FIstn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARIR/9oACAECAQE/AZeksstn/8QAGxAAAgIDAQAAAAAAAAAAAAAAADEBAhARIDL/2gAIAQEABj8CrmI2MYrCseZ4/8QAIBAAAgEDBAMAAAAAAAAAAAAAAAERIUFxIDFRkWGh8P/aAAgBAQABPyHqCqVVgquMJBpcE279HwQlogjyXvYNpbc6P//aAAwDAQACAAMAAAAQhNAO/8QAGREBAAIDAAAAAAAAAAAAAAAAABFhATFR/9oACAEDAQE/EMRbWp8VP//EABgRAQADAQAAAAAAAAAAAAAAAAEAEBFh/9oACAECAQE/EFE5OM1R/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFhgRBB/9oACAEBAAE/ELmweG9zUkAXrmWA28TInbU0xTdNKocoC344JH4BQCG47WbU2qtDH4z/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;openlayers-cookbook&quot;
        title=&quot;openlayers-cookbook&quot;
        src=&quot;/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg&quot;
        srcset=&quot;/static/99c01733248e8e53a81f05020d6d48cc/aca85/7843OS_OpenLayer%20Cookbook_cov_0.jpg 163w,
/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg 302w&quot;
        sizes=&quot;(max-width: 302px) 100vw, 302px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Chapter 1: Web Mapping Basics_  &lt;/li&gt;
&lt;li&gt;Chapter 2: Adding Raster Layers_  &lt;/li&gt;
&lt;li&gt;Chapter 3: Working with Vector Layers_  &lt;/li&gt;
&lt;li&gt;Chapter 4: Working with Events_  &lt;/li&gt;
&lt;li&gt;Chapter 5: Adding Controls_  &lt;/li&gt;
&lt;li&gt;Chapter 6: Theming_  &lt;/li&gt;
&lt;li&gt;Chapter 7: Styling Features_  &lt;/li&gt;
&lt;li&gt;Chapter 8: Beyond the Basics_&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The chapter organization tries to follow the &lt;em&gt;natural&lt;/em&gt; set of step required to learn OpenLayers from the beginning. Chapter 1 introduces the map related concepts, how it contains layers and how they can be handled. Chapters 2 and 3 shows how to work with the two kinds of layers: raster and vector. Chapters 4 and 5 describe the importance of events in web applications, the mechanism offered by OpenLayers and the main set of controls the framework implements. The chapters 6 and 7 are centered on changing the look and feel of our maps in addition to improve the look of vector features. Finally, the chapter 8 show some advanced concepts on how we can extend OpenLayers.&lt;/p&gt;
&lt;p&gt;The process of writing a book is really complex and in addition to the author (that is me) many other people are related to it. By this reason, I would like to thank to the people atÂ &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;Packt Publishing&lt;/a&gt;:Â &lt;em&gt;Usha Iyer&lt;/em&gt;,Â &lt;em&gt;Kedar Bhat&lt;/em&gt;,Â &lt;em&gt;Joel Goveya&lt;/em&gt;,Â &lt;em&gt;Joyslita Dsouza&lt;/em&gt;Â andÂ &lt;em&gt;Madhuri Das&lt;/em&gt;Â (sorry if I miss someone), to my awesome reviewers:Â &lt;em&gt;David Burgoon&lt;/em&gt;,Â &lt;em&gt;Mohammad Motamedi&lt;/em&gt;Â (thanks Mohammad for your great review),Â &lt;em&gt;Jorge Sanz&lt;/em&gt;,Â &lt;em&gt;Srinivas Shanmugam&lt;/em&gt;,Â &lt;em&gt;Davor Zelic&lt;/em&gt;Â andÂ &lt;em&gt;Richard Zijlstra&lt;/em&gt;, to my own folks who always encourage me and, most important, to my wife who suffers my addiction to computer science.&lt;/p&gt;
&lt;p&gt;Finally, thanks to all the readers of the book. I hope the book was what they expect from it.&lt;/p&gt;
&lt;p&gt;No doubt to write here asking for help. Thanks to all !!!&lt;/p&gt;
&lt;h3&gt;Other materials&lt;/h3&gt;
&lt;p&gt;Book is accompanied by a RIA application (implemented with the &lt;a href=&quot;http://dojotoolkit.org/&quot;&gt;Dojo Toolkit&lt;/a&gt;) allowing to run and show all the recipes of the book. It is freely available at myÂ &lt;a href=&quot;https://github.com/acanimal/Openlayers-Cookbook&quot;&gt;Openlayers-Cookbook GitHub repository&lt;/a&gt;. You can see the &lt;a href=&quot;http://acanimal.github.com/Openlayers-Cookbook/&quot;&gt;application in action&lt;/a&gt; online. Fell free to contribute.&lt;/p&gt;
&lt;p&gt;Additionally, I have a presentation summarizing the main concepts of OpenLayers at the repositoryÂ &lt;a href=&quot;https://github.com/acanimal/OpenLayers-Presentation&quot;&gt;OpenLayers-Presentation&lt;/a&gt;Â and can be seen also online at &lt;a href=&quot;http://acanimal.github.com/OpenLayers-Presentation/&quot;&gt;OpenLayers online presentation&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Reviews&lt;/h3&gt;
&lt;p&gt;What others say about the book:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.geowebdeveloper.com/2012/10/05/1st-book-review-openlayers-cookbook/&quot;&gt;1st Book Review : OpenLayers Cookbook&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.amazon.com/OpenLayers-Cookbook-Perez-Antonio-Santiago/product-reviews/1849517843/ref=dp_top_cm_cr_acr_txt?ie=UTF8&amp;#x26;showViewpoints=1&quot;&gt;Reviews at Amazon.com&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://amercader.net/blog/2012/10/openlayers-cookbook-review&quot;&gt;OpenLayers Cookbook review&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://www.geowebguru.com/book-reviews/294-book-review-openlayers-cookbook&quot;&gt;Book Review: OpenLayers Cookbook&lt;/a&gt;&lt;br&gt;
&lt;a href=&quot;http://geomaticblog.net/2012/10/11/openlayers-cookbook/&quot;&gt;OpenLayers Cookbook&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The Book: GeoServer Beginner's Guide]]></title><description><![CDATA[GeoServer is one of the most importants open source geospatial servers nowadays. Implemented in Java, based on the powerful GeoTools libraries, GeoServer offers a great degree of interporability publishing data from major spatial data sources using Open Geospatial Consortium (OGC) standards.]]></description><link>https://www.acuriousanimal.com/blog/2013/04/01/the-book-geoserver-beginners-guide</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/04/01/the-book-geoserver-beginners-guide</guid><pubDate>Mon, 01 Apr 2013 13:25:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://geoserver.org/display/GEOS/Welcome&quot;&gt;GeoServer&lt;/a&gt; is one of the most importants open source geospatial servers nowadays. Implemented in Java, based on the powerful &lt;a href=&quot;http://www.geotools.org/&quot;&gt;GeoTools&lt;/a&gt; libraries, GeoServer offers a great degree of interporability publishing data from major spatial data sources using &lt;em&gt;Open Geospatial Consortium&lt;/em&gt; (&lt;a href=&quot;http://www.opengeospatial.org/&quot;&gt;OGC&lt;/a&gt;) standards.&lt;/p&gt;
&lt;p&gt;Hopefully, for those who work or start working with GeoServer, recently&amp;#xA0;&lt;a href=&quot;http://www.packtpub.com/&quot;&gt;Packt Publishing&lt;/a&gt; has released a new book titled &lt;a href=&quot;http://link.packtpub.com/OanwYr&quot;&gt;GeoServer Beginner&amp;apos;s Guide&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://link.packtpub.com/OanwYr&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 302px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 123.50993377483444%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCAwX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAFZpK7OLhcTVk9LeMw0gP/EAB0QAAICAgMBAAAAAAAAAAAAAAECABEDExIgISL/2gAIAQEAAQUCx+JVE/UxmlGRQN9Ti81vNT9P/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAESEBH/2gAIAQMBAT8B5lstn//EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQIBAT8BaZNEIf/EABwQAAICAgMAAAAAAAAAAAAAAAABETEgISIyQf/aAAgBAQAGPwJEtplM9OUmmUyjrh//xAAfEAACAgIBBQAAAAAAAAAAAAAAAREhMUFREGGBkaH/2gAIAQEAAT8hd1pTFeBnsWT9BiKsuGMeXTg0RoS6j8jbln7HyGb6/wD/2gAMAwEAAgADAAAAEMAKTf/EABkRAQACAwAAAAAAAAAAAAAAAAEAEBEhYf/aAAgBAwEBPxBWdQGjlP/EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQIBAT8QYeMEn//EAB8QAQACAgICAwAAAAAAAAAAAAEAESExQYFRYZGhsf/aAAgBAQABPxBesa68b19SkwFhkHAdw8t000uAQnANfYTHenZA9ZlMVtpHfxAg0MbFdXDKKM5VAuBeiP7jGf/Z&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;6686OS cov&quot; title=&quot;6686OS cov&quot; src=&quot;/static/095a8c367d371ed6b4e693733f97b73a/c2f1e/6686OS_cov.jpg&quot; srcset=&quot;/static/095a8c367d371ed6b4e693733f97b73a/aca85/6686OS_cov.jpg 163w,
/static/095a8c367d371ed6b4e693733f97b73a/c2f1e/6686OS_cov.jpg 302w&quot; sizes=&quot;(max-width: 302px) 100vw, 302px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Written by &lt;a href=&quot;http://www.linkedin.com/in/stefanoiacovella&quot;&gt;Stefano Iacovella&lt;/a&gt;, with contributions from &lt;a href=&quot;http://www.linkedin.com/in/brianwyoungblood&quot;&gt;Brian Youngblood&lt;/a&gt;, the book guide us on the main topics to work with GeoServer, through the next list of chapters:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Chapter 1: GIS Fundamentals&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 2: Getting Started with GeoServer&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 3: Exploring the Administrative Interface&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 4: Accessing Layers&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 5: Adding Your Data&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 6: Styling Your Layers&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 7: Creating Simple Maps&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 8: Performance and Caching&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 9: Automating Tasks: GeoServer REST Interface&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 10: Securing GeoServer Before Production&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 11: Tuning GeoServer in a Production Environment&lt;/em&gt;&lt;br&gt;
&lt;em&gt; Chapter 12: Going Further: Getting Help and Troubleshooting&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Despite of its title, the book is great from newbies to those with intermediate&amp;#xA0;knowledges on GeoServer, and also put some efforts on advance topics, like performance and configuration for production environment chapters.&lt;/p&gt;
&lt;p&gt;Personally, I like the way Stefano writes: simply, plain and, most important, making clear complex questions. In addition, the&amp;#xA0;book is plenty of samples and figures which help us to understand better what is talking on.&lt;/p&gt;
&lt;p&gt;Conceptually, we can divide the book in three sections: introduction (chapter 1, 2 and 3), basic or common usage (chapters 4, 5, 6 and 7) and advanced topics (chapter 8, 9, 10 and 11).&lt;/p&gt;
&lt;p&gt;The book introduces us in the GIS world &amp;#xA0;(chapter 1)&amp;#xA0;starting with an introduction of many related topics: projections, coordinate systems, modeling information, etc. After this, it shows how to install GeoServer (chapter 2) in two different operating systems: Ubuntu Linux and Windows and finally, passed to show the main aspects of the administrative interface of GeoServer (chapter 3).&lt;/p&gt;
&lt;p&gt;From here, the book covers the main aspect on how to access, add and serve data (chapter 4 and 5), how to style to serve them in a better way (chapter 6) and basic samples on how to create maps against GeoServer using Google Maps, OpenLayers and Leaflet libraries.&lt;/p&gt;
&lt;p&gt;The third block, concentrates improving the performance of the server using the GeoWebCache system (chapter 8), administer GeoServer via its REST interface (chapter 9), securing its access and administration (chapter 10) and tune it up ready for a production environment (chapter 11).&lt;/p&gt;
&lt;p&gt;The book is mainly oriented to WMS but dedicates the chapter 12 to talk specifically on WFS and WCS, also supported by GeoServer.&lt;/p&gt;
&lt;p&gt;Without a doubt, GeoServer Beginner&amp;apos;s Guide is a book must be on your working table.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Things I learned creating a jQuery Plugin (Part II)]]></title><description><![CDATA[This post is the continuation of the seriesÂ Things I learned creating a jQuery Plugin. } } }; }]]></description><link>https://www.acuriousanimal.com/blog/2013/02/25/things-i-learned-creating-a-jquery-plugin-part-ii</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/02/25/things-i-learned-creating-a-jquery-plugin-part-ii</guid><pubDate>Mon, 25 Feb 2013 21:22:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is the continuation of the seriesÂ &lt;a title=&quot;Things I learnt creating a jQuery Plugin (Part I)&quot; href=&quot;//2013/01/15/things-i-learned-creating-a-jquery-plugin-part-i&quot;&gt;Things I learned creating a jQuery Plugin&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In the first part we have seen how the structure of a jQuery plugin must be, the plugin entry point (so called wrapper function) and how we can control theÂ behaviorÂ of a method as a getter or setter.&lt;/p&gt;
&lt;h2&gt;Define default options&lt;/h2&gt;
&lt;p&gt;Your plugin more probably will accept different set of options to allow some configuration. For these reason it is important to define a set of default options which will be applied in cases where no options are specified by the user. Place it within the jQuery wrapper function is a good practice:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;//
// Default options
//
$.fn[pluginName].defaults = {
    opt_A: &quot;&quot;
};&lt;/pre&gt;
&lt;h2&gt;Encapsulate your plugin code&lt;/h2&gt;
&lt;p&gt;A good practice is to encapsulate the logic of our plugin within a function, this way our plugin&apos;s entry point function can easily initialize or call the right method.&lt;/p&gt;
&lt;p&gt;For example, in a really simple wrapper function, that simply initializes a plugin&apos;s instance on each selected element, we could write something like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName] = function(options) {
    return this.each(function() {
        new Plugin(this, options);
    });
}&lt;/pre&gt;
&lt;h3&gt;The plugin constructor&lt;/h3&gt;
&lt;p&gt;The main part of your plugin is the constructor function. Usually this function is responsible to initialize the plugin, store a reference to the selected element or merge the passed options with the default ones:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;function Plugin(element, options) {
    // Store references to the selected element
    this.el = element;
    this.$el = $(element);
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Merge passes options with defaults
this.options = $.extend({}, $.fn[pluginName].defaults, options);

// ...other code here...

// Initialize the plugin instance
this.init();&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;Prototype your plugin&lt;/h3&gt;
&lt;p&gt;Once the &lt;code&gt;Plugin&lt;/code&gt; function is defined we can modify its prototype adding all the desired methods we want for our plugin.&lt;/p&gt;
&lt;p&gt;There are a couple of methods are a good practice to implement:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A &lt;code&gt;init&lt;/code&gt; method, which initializes each plugins instance: creating new DOM elements, registering listeners, etc&lt;/li&gt;
&lt;li&gt;A &lt;code&gt;destroy&lt;/code&gt; method, responsible to free any resource used by the plugin: extra elements, unregister listeners, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Other methods can be created within your plugin&apos;s prototype but remember the convention: &lt;em&gt;Use method names starting with underscore for those methods we want to be private&lt;/em&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;If you remember the first part of this series, what really happens is when you call a plugin&apos;s method, the wrapper function of our plugin checks if the method&apos;s name starts with underscore and if so then avoids the call.&lt;/p&gt;&lt;/blockquote&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;//
// Plugin prototype
//
Plugin.prototype = {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;//
// Initialize the plugin instance
//
init: function() {
    ...
},

//
// Free resources
//
destroy: function() {
    ...
},

//
// Public method
//
publicMethod: function() {
    ...
},

//
// Private method (it starts with an underscore)
//
_privateMethod: function() {
    ...
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;A note on the &lt;code&gt;destroy&lt;/code&gt; method&lt;/h3&gt;
&lt;p&gt;As we have commented, the &lt;code&gt;destroy&lt;/code&gt; method must free any resource used by the plugin instance, like extra created elements, unregister listeners, etc&lt;/p&gt;
&lt;p&gt;If you remember the first article, you will notice that the plugin&apos;s instance is stored within the selected DOM element where the plugin is applied:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName] = function(options) {
    var args = arguments;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;if (options === undefined || typeof options === &amp;#39;object&amp;#39;) {
    // Creates a new plugin instance, for each selected element, and
    // stores a reference withint the element&amp;#39;s data
    return this.each(function() {
        if (!$.data(this, &amp;#39;plugin_&amp;#39; + pluginName)) {
            $.data(this, &amp;#39;plugin_&amp;#39; + pluginName, new Plugin(this, options));
        }
    });
}

...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;That occurs in the line:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.data(this, &apos;plugin_&apos; + pluginName, new Plugin(this, options));&lt;/pre&gt;
&lt;p&gt;So, the last action in your &lt;code&gt;destroy&lt;/code&gt; method must be always remove the plugin&apos;s instance reference from the element&apos;s data. This can easily done using the reference to the DOM element stored in the plugin instance:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;//
// Free resources
//
destroy: function() {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Remove elements, unregister listerners, etc

// Remove data
this.$el.removeData();&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;Allow the use of callbacks in our plugin&lt;/h2&gt;
&lt;p&gt;It is common jQuery plugins allows to register callback functions to be called when an event or action is generated by the plugins. For example, in the &lt;a href=&quot;http://www.acuriousanimal.com/tagger.js&quot;&gt;tagger&lt;/a&gt; plugin the user can be notified when a new tag is added, removed, clicked, etc.&lt;/p&gt;
&lt;p&gt;Next lines shows the initialization of the tagger plugin setting the parameter &lt;code&gt;fieldSeparator&lt;/code&gt; to a value different from the default options value and registering a callback function for the &lt;code&gt;onTagAdded&lt;/code&gt; event:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#inputID&apos;).tagger({
  fieldSeparator: &apos;|&apos;
  onTagsAdded: function(tags) {
    console.log(&apos;Added new tag: &apos;+tags+&apos;\n&apos;);
  }
});&lt;/pre&gt;
&lt;p&gt;To achieve this we need to make to main steps:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;span style=&quot;line-height: 13px;&quot;&gt;Define a default and empty callback function in the plugins default options.&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;At some place of our plugin&apos;s code make a call to the callback function.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Continuing with the sample of the &lt;a href=&quot;http://www.acuriousanimal.com/tagger.js&quot;&gt;tagger&lt;/a&gt; plugin, its default options looks like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;//
// Default options
//
$.fn[pluginName].defaults = {
    fieldSeparator: &quot;,&quot;,
    readOnly: false,
    // Callback invoked when user calls the &apos;tags&apos; method
    onTagsAdded: function() {
    },
    // Callback invoked when user calls the &apos;remove&apos; method
    onTagsRemoved: function() {
    },
    // Callback invoked when user calls the &apos;clear&apos; method.
    // Note: Internally the &apos;clear&apos; method uses the &apos;remove&apos;.
    onClear: function() {
    },
    // Callback invoked when the user click a tag label
    onClick: function() {
    }
};&lt;/pre&gt;
&lt;p&gt;Later, in the method responsible to add new tags to the tag list, a call is made to the &lt;code&gt;onTagsAdded&lt;/code&gt; function:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;// Adds one or more tags
// ...
//
tags: function(tags) {
      ...
      // Call the callback
      this.options.onTagsAdded.call(this, tags);
      ...
    }
},&lt;/pre&gt;
&lt;blockquote&gt;&lt;p&gt;Note how we have forced to set the &lt;code&gt;this&lt;/code&gt; object and passed the value of the new added tag to the callback function.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Ok, this is the end. A short series of two articles to introduce the main concepts to creating jQuery plugins isn&apos;t a bad thing when you are looking for help starting with jQuery and custom plugin development.&lt;/p&gt;
&lt;p&gt;Let&apos;s try to summarize the main points we have seen in this couple of posts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Understand the importance of entry point to your plugin. This is handled in a new function on the &lt;code&gt;$.fn&lt;/code&gt; object and is responsible to (or can) control: plugin initialization, call to setter or getter methods, simulate private methods, etc.&lt;/li&gt;
&lt;li&gt;Encapsulate your plugin&apos;s functionalities in a prototyped function&lt;/li&gt;
&lt;li&gt;Store, if needed, a reference to the DOM element where your plugin is applied to.&lt;/li&gt;
&lt;li&gt;Remember to implement a &lt;code&gt;destroy&lt;/code&gt; method responsible to free all the resources used by your plugin&lt;/li&gt;
&lt;li&gt;Create a default options object that serves as a base to extend it with the options specified by the user&lt;/li&gt;
&lt;li&gt;Keep calm and remember try and error is a (necessary) way to learn&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;The web is plenty of great information:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.jquery.com/Plugins/Authoring&quot;&gt;http://docs.jquery.com/Plugins/Authoring &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.websanova.com/tutorials/jquery/the-ultimate-guide-to-writing-jquery-plugins&quot;&gt;http://www.websanova.com/tutorials/jquery/the-ultimate-guide-to-writing-jquery-plugins&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://jqueryboilerplate.com/&quot;&gt;http://jqueryboilerplate.com/ &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/zenorocha/jquery-plugin-patterns&quot;&gt;https://github.com/zenorocha/jquery-plugin-patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/&quot;&gt;http://coding.smashingmagazine.com/2011/10/11/essential-jquery-plugin-patterns/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns&quot;&gt;http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[AnimatedCluster pan related bug... fixed !!!]]></title><description><![CDATA[If you regularlyÂ follow this blog and are web mapping developer that works with OpenLayers, (too much coincidences???) probably you know about theÂ theÂ Animated marker cluster strategy for OpenLayersÂ I created some time ago.]]></description><link>https://www.acuriousanimal.com/blog/2013/02/08/animatedcluster-pan-related-bug-fixed</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/02/08/animatedcluster-pan-related-bug-fixed</guid><pubDate>Fri, 08 Feb 2013 17:59:00 GMT</pubDate><content:encoded>&lt;p&gt;If you regularlyÂ follow this blog and are web mapping developer that works with OpenLayers, (too much coincidences???) probably you know about theÂ theÂ &lt;a href=&quot;/2012/08/19/animated-marker-cluster-strategy-for-openlayers/&quot;&gt;Animated marker cluster strategy for OpenLayers&lt;/a&gt;Â I created some time ago.&lt;/p&gt;
&lt;p&gt;Unfortunally, the last version (v0.2) has a ugly &lt;a href=&quot;https://github.com/acanimal/AnimatedCluster/issues/2&quot;&gt;bug&lt;/a&gt;. The code works fine when you change the zoom level but clusters are not updated when you pan the map.&lt;/p&gt;
&lt;p&gt;I&amp;apos;m happy to say right now I have uploaded a new version (v0.3) which fixes this bug on my &lt;a href=&quot;https://github.com/acanimal/AnimatedCluster&quot;&gt;GitHub repository&lt;/a&gt;. Basically, now the code controls if the action is a zoom change or a pan movement and updates and animates the clusters&amp;#xA0;accordingly. That is, if you pan the map the clusters on the current level are recomputed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Take into account this can cause the features where clustered in different clusters&lt;/strong&gt;, so you can see how bubbles changes its position and number of features within it.&lt;/p&gt;
&lt;p&gt;In addition, the demo page has been updated with the new version. Check it !!!&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 49.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACaklEQVQozx2S21PaQByF+f/71pnO1GmnHTv1RmWUyK0igiQg19whIYFwTcSAURxbp09fVx/2YWd/++3Zc05Kn7eYrMYsogXBcs5oPqY+ahGsNfzIoDi4QVJtfju3uJFKc9xHCzxGocUiHrKKB+we7thuZ+ySNal46xNuBtzFDubMpeFbXDster5D0a5TshQqepOB12Pjn7AKZZ62DvHW4zn2WMY2j8k9K7GPYp9UzW2SbNdsHlYMpxXCoEiwmgtVKjnVIq9peNY+SWGPRD7k3/VnnibfmAtQMjtlF7V4vNPYrZv0JyqpC23AaiIRRTLRXUAyl/CcNGV9SF5vI1kabj3L3/QHNtcSi6HMOsiQLBSmW5d11CaZHvAwzdDyK6SymoHq1ngKDrlfVrD9G9raV3KaxYXZoGC2CUdpfKfK4vqI59IPNnaTjXvCTkkLdSsegjpDp0hHPyaVE1+SNB3NvWUp/8TtfqdnnL4Dc6qBaUm8NjOstSL3Iqw/Vwcsyod0RzU2jX3CTo24fMylZSMZDVJvHr1BLwTAKR4Q6p94rB+hXWY4t3TaRpGZcsJL5SPPSoGkeiJC6ovV4HaYw88fsaxmKI/6yGbpTaEhgPo79Nywcf0aL84X4nGesqjKmTp8T3vo/eJJOcO/rVByZGRdBKYPULoXtIwr6k4f05aEQksmb7RFmjpZkWrHzAqTz1mKtEuGQUHvUjG7tAdFXmt7+HKJstcS8z1xpgqfu6JmBuG9yzhyBNDoiJd670BJqKxbHVGLfRSzRlbYUNA18qpOwXbxlBLtapasaYp5VdwTVvUNKkJxf6Ljhl3+A/zpqlKC00DYAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;animatedcluest&quot; title=&quot;animatedcluest&quot; src=&quot;/static/a79a7b5e446c5cc9bb74f21f6eaa7a2d/135ae/animatedcluest-300x149.png&quot; srcset=&quot;/static/a79a7b5e446c5cc9bb74f21f6eaa7a2d/19bd1/animatedcluest-300x149.png 163w,
/static/a79a7b5e446c5cc9bb74f21f6eaa7a2d/135ae/animatedcluest-300x149.png 300w&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks to all the great people that has sent me their&amp;#xA0;experiences&amp;#xA0;when using the AnimatedCluster !!!&lt;/p&gt;&lt;/blockquote&gt;</content:encoded></item><item><title><![CDATA[Things I learnt creating a jQuery Plugin (Part I)]]></title><description><![CDATA[jQuery is one of the most used JavaScript libraries, if not the most used one, which allows to make great things with the big set of little tools it offers to the web developers: HTML/DOM manipulation, CSS manipulation, HTML event methods, effects and animations, AJAX, utilities, ... }; };]]></description><link>https://www.acuriousanimal.com/blog/2013/01/15/things-i-learned-creating-a-jquery-plugin-part-i</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/01/15/things-i-learned-creating-a-jquery-plugin-part-i</guid><pubDate>Tue, 15 Jan 2013 22:31:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://jquery.com/&quot;&gt;jQuery&lt;/a&gt; is one of the most used JavaScript libraries, if not the most used one, which allows to make great things with the big set of little tools it offers to the web developers: HTML/DOM manipulation, CSS manipulation, HTML event methods, effects and animations, AJAX, utilities, ...&lt;/p&gt;&lt;/p&gt;
&lt;p&gt;One of the key aspects of jQuery is the possibility to extend it with newÂ functionalities, so called &lt;em&gt;plugins&lt;/em&gt;. For those who has a basic knowledge of jQuery and want or need to create a new jQuery plugin this post tries to be a helping summary of good things to take into account.
&lt;h2&gt;Before to start&lt;/h2&gt;
&lt;p&gt;Because of the flexibility and powerful of the language, the Perl community is proud of his &lt;em&gt;Tim Today&lt;/em&gt; motto, Â that is:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;There&apos;s more than one way to do it&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;You can consider the same for JavaScript, that&apos;s true. The fact JavaScript is not an object oriented language but a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript#Prototype-based_programming&quot;&gt;prototype based language&lt;/a&gt; allows to follow the OOP paradigm in many different ways. Looking for a template code to create a jQuery plugin I found tons and not all following the same conventions and ideas.&lt;/p&gt;
&lt;p&gt;Here I present a mix of the most accepted templates and its key aspects.&lt;/p&gt;
&lt;h2&gt;The code&lt;/h2&gt;
&lt;p&gt;Accompanying the article you can findÂ the self documented version of the boilerplate code at my &lt;a href=&quot;https://github.com/acanimal/jQuery-Plugin-Boilerplate&quot;&gt;GitHub repository&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Where to start&lt;/h2&gt;
&lt;p&gt;If you are planning to create a jQuery plugin, the first places I suggest you to start reading is the &lt;a href=&quot;http://docs.jquery.com/Plugins/Authoring&quot;&gt;Plugins/Authoring&lt;/a&gt; section of the project documentation. It is a great starting resource but in the real live you will find soon you need to know a bit more of that.&lt;/p&gt;
&lt;hr /&gt;
&lt;h2&gt;Using a jQuery plugin&lt;/h2&gt;
&lt;p&gt;Suppose we have a jQuery plugin called &lt;code&gt;beautyLink&lt;/code&gt;, that transform a normal link (the &lt;code&gt;&amp;lt;a&amp;gt;&lt;/code&gt; element) into a really nice one changing the font family, text and background color. So we need to include it in our page before start using it:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;script type=&quot;text/javascript&quot; src=&quot;jquery.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script type=&quot;text/javascript&quot; src=&quot;jquery-beautylink.js&quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;p&gt;The conventional way to create and apply it on an element would be:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink();&lt;/pre&gt;
&lt;p&gt;or, if you want to apply on each link of the current page:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;a&apos;).beautyLink();&lt;/pre&gt;
&lt;p&gt;Later, to change the text color to red we could invoke a plugin&apos;s public method like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink(&apos;color&apos;, &apos;red&apos;);&lt;/pre&gt;
&lt;p&gt;or to retrieve the current text color:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink(&apos;color&apos;);&lt;/pre&gt;
&lt;p&gt;that is, the &lt;code&gt;color&lt;/code&gt; method can act as a setter or getter depending if we pass a value or not.&lt;/p&gt;
&lt;h2&gt;Creating a new plugin&lt;/h2&gt;
&lt;p&gt;All right, we know how to use a plugin but we want to create a new one. The first step we need to do is to create a new JavaScript file where to place our code. As a good practice this file must contain a documentation header section with the plugin&apos;s name, version, author contact information, license, etc&lt;/p&gt;
&lt;p&gt;When we include the JavaScript file in a web page we need the code to be auto-executed so the plugin can be registered within the jQuery. To do so all the JavaScript code in the file must be inside the code:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;(function($, window, document, undefined) {
  // The code here
})(jQuery, window, document);&lt;/pre&gt;
&lt;p&gt;This way, the code of our plugin will receive a reference to the jQuery library, the window and the document and, also, an undefined reference on the &lt;code&gt;undefined&lt;/code&gt; parameter that we can use to compare undefined values (wow, that was too much undefineds in a sentence).&lt;/p&gt;
&lt;h2&gt;The wrapper function&lt;/h2&gt;
&lt;p&gt;To create a jQuery plugin we need to register a new function in the &lt;code&gt;jQuery.fn&lt;/code&gt; object. This is an array where jQuery stores references to all available or included plugins in the current page. To add a new one simply write something like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;jQuery.fn.myPlugin = function(options) {
  // Do your awesome plugin stuff here
};&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;jQuery.fn[&apos;myPlugin&apos;] = function(options) {
  // Do your awesome plugin stuff here
};&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;The function you define here is the entry point to your plugin. It is a wrapper function that must handle the plugins initialization orÂ invocationÂ to any plugin&apos;s method.&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;How to distinguish the action?&lt;/h3&gt;
&lt;p&gt;The question is, how do we implement the plugin&apos;s wrapper function to distinguish if it must initialize the plugin or call a method? The answer is in the &lt;code&gt;options&lt;/code&gt; parameter.&lt;/p&gt;
&lt;p&gt;When we instantiate a plugin without passing any argument the &lt;code&gt;options&lt;/code&gt; parameter is &lt;code&gt;undefined&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink();&lt;/pre&gt;
&lt;p&gt;If we instantiate passing any argument the &lt;code&gt;options&lt;/code&gt; parameter is an &lt;code&gt;Object&lt;/code&gt;:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink({
  someOption: &apos;a&apos;,
  someOther: 123
});&lt;/pre&gt;
&lt;p&gt;Finally, if we are calling a plugin&apos;s method like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink(&apos;color&apos;, &apos;red&apos;);&lt;/pre&gt;
&lt;p&gt;then the &lt;code&gt;options&lt;/code&gt; parameter is an array with two elements &lt;code&gt;[&apos;color&apos;, &apos;red&apos;]&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;The starter code for the wrapper function&lt;/h2&gt;
&lt;p&gt;With the above in mind, we can write the base code for the wrapper function:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName] = function(options) {
    var args = arguments;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;if (options === undefined || typeof options === &amp;#39;object&amp;#39;) {
    // Creates a new plugin instance

} else if (typeof options === &amp;#39;string&amp;#39; &amp;amp;amp;&amp;amp;amp; options[0] !== &amp;#39;_&amp;#39; &amp;amp;amp;&amp;amp;amp; options !== &amp;#39;init&amp;#39;) {
    // Call a public pluguin method (not starting with an underscore) and different
    // from the &amp;#39;init&amp;#39; one

}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;Chainable or not chainable&lt;/h2&gt;
&lt;p&gt;jQuery is famous (and powerful) by its chainable way to work, that is, a call to a method returns a reference to the same element so we can make another call. For example:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#someID&apos;)
  .parents(&quot;.pane&quot;)
  .animate({ opacity: &quot;hide&quot; }, &quot;slow&quot;);&lt;/pre&gt;
&lt;p&gt;or applied to our plugin:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;)
  .beautyLink(&apos;color&apos;, &apos;red&apos;)
  .beautyLink(&apos;backgroundColor&apos;, &apos;black&apos;);&lt;/pre&gt;
&lt;p&gt;We must think which of our methods must be chainable and which ones not. For example, &lt;strong&gt;the getter methods must break the chainability&lt;/strong&gt;. In our case we want a call to:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink(&apos;color&apos;);&lt;/pre&gt;
&lt;p&gt;returns the &lt;code&gt;red&lt;/code&gt; value and not a reference to the element to make another call.&lt;/p&gt;
&lt;h3&gt;Implementing chainability&lt;/h3&gt;
&lt;p&gt;When the wrapper function &lt;code&gt;$.fn[pluginName]&lt;/code&gt; is called the this reference points to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the selected DOM element, like when using:
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;#linkID&apos;).beautyLink(&apos;color&apos;, &apos;red&apos;);&lt;/pre&gt;
&lt;p&gt;or&lt;/li&gt;
&lt;li&gt;a list of selected DOM elements, like when using:
&lt;pre class=&quot;prettyprint&quot;&gt;$(&apos;a&apos;).beautyLink(&apos;color&apos;, &apos;red&apos;);&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next code shows a very basic wrapper function that initializes a Plugin instance for each selected element. This results in a chainable call that returns a reference to the same element ready to make another chained call:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName] = function(options) {
    return this.each(function() {
        new Plugin(this, options);
    });
}&lt;/pre&gt;
&lt;h3&gt;Avoiding chainability&lt;/h3&gt;
&lt;p&gt;The solution to avoid a method were chainable is easy, simply doesn&apos;t write the &lt;code&gt;this.each()&lt;/code&gt; and execute code on the first occurrence, that is, the &lt;code&gt;this[0]&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;This will be more clear in the final code.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;The jQuery.data() function&lt;/h2&gt;
&lt;p&gt;We make use of the &lt;code&gt;$.data()&lt;/code&gt; function in our code so a short explanation is required.&lt;br /&gt;
The &lt;a href=&quot;http://api.jquery.com/jQuery.data/&quot;&gt;&lt;code&gt;$.data()&lt;/code&gt;&lt;/a&gt; function allows to store arbitrary data on an element (or get is value).&lt;/p&gt;
&lt;p&gt;It is important because we store a reference to the Plugin instance on each element it is applied. This allow us to check if an element has already applied a plugin or we need to instantiate it. This will be clarified in the final wrapper function code.&lt;/p&gt;
&lt;h2&gt;The backbone wrapper function code&lt;/h2&gt;
&lt;p&gt;With all the above in mind, we can write our final plugin&apos;s wrapper function. To summarize:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;span style=&quot;line-height: 13px;&quot;&gt;If plugin is called without arguments, then the plugin is initialized and a reference is stored in the DOM element.&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;If a plugin&apos;s method is called and it isn&apos;t a getter method, then the method is called maintaining chainability.&lt;/li&gt;
&lt;li&gt;If a plugin&apos;s method is called and it is a getter method, then we return a value and break the chainability.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName] = function(options) {
    var args = arguments;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;if (options === undefined || typeof options === &amp;#39;object&amp;#39;) {
    // Creates a new plugin instance, for each selected element, and
    // stores a reference withint the element&amp;#39;s data
    return this.each(function() {
        if (!$.data(this, &amp;#39;plugin_&amp;#39; + pluginName)) {
            $.data(this, &amp;#39;plugin_&amp;#39; + pluginName, new Plugin(this, options));
        }
    });
} else if (typeof options === &amp;#39;string&amp;#39; &amp;amp;amp;&amp;amp;amp; options[0] !== &amp;#39;_&amp;#39; &amp;amp;amp;&amp;amp;amp; options !== &amp;#39;init&amp;#39;) {
    // Call a public pluguin method (not starting with an underscore) for each
    // selected element.
    if (Array.prototype.slice.call(args, 1).length == 0 &amp;amp;amp;&amp;amp;amp; $.inArray(options, $.fn[pluginName].getters) != -1) {
        // If the user does not pass any arguments and the method allows to
        // work as a getter then break the chainability so we can return a value
        // instead the element reference.
        var instance = $.data(this[0], &amp;#39;plugin_&amp;#39; + pluginName);
        return instance[options].apply(instance, Array.prototype.slice.call(args, 1));
    } else {
        // Invoke the speficied method on each selected element
        return this.each(function() {
            var instance = $.data(this, &amp;#39;plugin_&amp;#39; + pluginName);
            if (instance instanceof Plugin &amp;amp;amp;&amp;amp;amp; typeof instance[options] === &amp;#39;function&amp;#39;) {
                instance[options].apply(instance, Array.prototype.slice.call(args, 1));
            }
        });
    }
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Take into account, we have also defined an array where to specify which method can act as getters when they are invoked without any argument:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;$.fn[pluginName].getters = [&apos;someGetterMethod&apos;];&lt;/pre&gt;
&lt;h2&gt;To be continue...&lt;/h2&gt;
&lt;p&gt;We have seen the basis on how to create a jQuery plugin and learnt about the importance of the wrapper function, which is the entry point to our plugin.&lt;br /&gt;
In the next post I will explain how we can organize our plugin code, the responsible to implement functionality, how to create private and public method, etc.&lt;/p&gt;
&lt;p&gt;Continuation article &lt;a title=&quot;Things I learned creating a jQuery Plugin (Part II)&quot; href=&quot;//2013/02/25/things-i-learned-creating-a-jquery-plugin-part-ii.html&quot;&gt;Things I learned creating a jQuery Plugin (Part II)&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[OpenLayers, create a checkboard layer to know the tile names using Google Charts API]]></title><description><![CDATA[Pyramid tiles are used by many providers as a more efficient way (than WMS server) to provide images. The idea is simple, we have zoom levels and on every level we have NxN tiles of a specific size (typically 256x256 pixels). Google, Yahoo, Bing or OpenStreetMaps are samples of tile providers. }); });]]></description><link>https://www.acuriousanimal.com/blog/2013/01/11/openlayers-create-a-checkboard-layer-to-know-the-tile-names-using-google-charts-api</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/01/11/openlayers-create-a-checkboard-layer-to-know-the-tile-names-using-google-charts-api</guid><pubDate>Fri, 11 Jan 2013 11:02:00 GMT</pubDate><content:encoded>&lt;p&gt;Pyramid tiles are used by many providers as a more efficient way (than WMS server) to provide images. The idea is simple, we have zoom levels and on every level we have NxN tiles of a specific size (typically 256x256 pixels). Google, Yahoo, Bing or OpenStreetMaps are samples of tile providers.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 53.32555425904317%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAb/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAbKYLo6QxBr/xAAZEAADAQEBAAAAAAAAAAAAAAABAgMAEiH/2gAIAQEAAQUCpQIEsCcxLMnugx4//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BGf/EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQIBAT8B0oU//8QAGxAAAgEFAAAAAAAAAAAAAAAAAAEhEBESMWH/2gAIAQEABj8C6WdMm5JNn//EABwQAAICAgMAAAAAAAAAAAAAAAERACEQMUFRYf/aAAgBAQABPyEa7aDjyi/RhjRLlytWht2RQn//2gAMAwEAAgADAAAAED8P/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EAXGTL//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QQaRq/8QAHRABAAICAgMAAAAAAAAAAAAAAREhADFBcRCBkf/aAAgBAQABPxAkUeOHbbrCBbQeb0+ECutKdvzWGGnHPWKxpclwVWf/2Q==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;pyramid&quot; title=&quot;pyramid&quot; src=&quot;/static/b059065f3b10b7264b4e25c0f9689e0f/a111b/pyramid.jpg&quot; srcset=&quot;/static/b059065f3b10b7264b4e25c0f9689e0f/aca85/pyramid.jpg 163w,
/static/b059065f3b10b7264b4e25c0f9689e0f/0954f/pyramid.jpg 325w,
/static/b059065f3b10b7264b4e25c0f9689e0f/a111b/pyramid.jpg 650w,
/static/b059065f3b10b7264b4e25c0f9689e0f/82b3b/pyramid.jpg 857w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Here, we are going to create a new OpenLayers layer that will show a checkboard with the name of the tile, all this with the help of&amp;#xA0;the Google Charts API.&lt;/p&gt;
&lt;p&gt;We need to take into account every provider uses a different pyramid tile notation, that means the same tile can be named [level=1,x=0,y=0] by one provider and named [level=1,x=0,y=1] by another.&lt;/p&gt;
&lt;p&gt;Next code is based on OpenLayers.TMS layer, which follow the&amp;#xA0;&lt;a href=&quot;http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification&quot;&gt;OSGeo TMS&lt;/a&gt;&amp;#xA0;specification.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 541px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 103.88170055452865%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA9hAAAPYQGoP6dpAAACAklEQVQ4y2WUR47CQBBFff8TIcQZWCAhEEnkHE3GGObZD5oZphbmd1f8VdVEz19yv9+TJHn+k9Vq1Wg0Wq1Ws9lst9v1ev12uz0ejwgdP2maApbLJWoAx8dbVOFfKBTK5XKxWCQKN9PpNEJ3vV5JiN16vR4OhyiSXI7Ho4CKdrudR4wx63a7o9EowieUGsfxYrEwM9/T6WRdyOVyCVWAS6US+bPMBCbqdrvFmco5UhJG5/MZzA3RccCS0GBApVLpdDrfmefzudlCZoVAluA9mWlblnm/33OGDJ79fp9OnnKBGz5i6qI6ADfbXLDMMmMdMs9ms8ATU1PxxUfCiHPKRiVndHEucjaEDpvNJnBWixgoy+wBEDhbi5zNI2exPXs5QwYdVwRmeuZBIHZ5C3O2L+BAJyvbGXLAwiE50sPhYAa+JKBAqZo/c5aD/XRJnKdlo2IxsZYz2HXk/lV2+hZmRuUuuVvlqsozbIQlZM68kl6vR5+ICq5Wq4DBYAB5JknbUfEFTyaTeS7sP7tJCRGbwDBsBka1Wg3AEf5EcUMgDKYFYWGc2WtUdj8sCSRthG+OLzd8Zfsp2yUxJM50G2uATxIfMAbw54amoP2zJJyN5JKEFlKnfXJUAX9GZT9dKTz5u/HFOl43V1Jf/y0v5yC+J8B4PObFOm2ELtJhZsElmHDe/wD1v7ob6RbYdQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Tms&quot; title=&quot;Tms&quot; src=&quot;/static/14c073366a4b28425bc34d1daba41bbd/50336/Tms.png&quot; srcset=&quot;/static/14c073366a4b28425bc34d1daba41bbd/19bd1/Tms.png 163w,
/static/14c073366a4b28425bc34d1daba41bbd/d3bcb/Tms.png 325w,
/static/14c073366a4b28425bc34d1daba41bbd/50336/Tms.png 541w&quot; sizes=&quot;(max-width: 541px) 100vw, 541px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I have divided the code in two TMS subclasses. The first one is responsible to draw the&amp;#xA0;&lt;em&gt;checkboard&lt;/em&gt;&amp;#xA0;and the second one to&amp;#xA0;draw the tile name on top every tile. The checkboard layer makes use of Google Chart API to generate black tiles.&lt;/p&gt;
&lt;div id=&quot;highlighter_552708&quot;&gt;
&lt;pre class=&quot;lang:js decode:true&quot;&gt;OpenLayers.Layer.Checkboard = OpenLayers.Class(OpenLayers.Layer.TMS, {&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;getURL: function (bounds) {
	var res = this.map.getResolution();
	var z = this.map.getZoom();
	var limit = Math.pow(2, z);
	var x = Math.round((bounds.left - this.maxExtent.left) / (res *this.tileSize.w));
	var y = Math.round((this.maxExtent.top - bounds.top) / (res *this.tileSize.h));

	if (y &amp;amp;lt; 0 || y &amp;amp;gt;= limit) {
	return &amp;quot;&amp;quot;;
	} else {
		x = ((x % limit) + limit) % limit;
		var tilename = &amp;quot;&amp;quot;;
		if( (x+y)%2==0 ) {
			tilename = &amp;quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;amp;;chs=256x256&amp;amp;amp;chf=bg,s,ffffffff&amp;amp;amp;chld=FFFFFF|12|h|000000|b||&amp;quot;;
		} else {
			// no tile
		}
		return tilename;
	}
},

CLASS_NAME: &amp;quot;OpenLayers.Layer.Checkboard&amp;quot;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;});&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Next is the code that return the tile names:&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&quot;highlighter_917884&quot;&gt;
&lt;pre class=&quot;lang:js decode:true &quot;&gt;OpenLayers.Layer.Tilenames = OpenLayers.Class(OpenLayers.Layer.TMS, {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;getURL: function (bounds) {
	var res = this.map.getResolution();
	var z = this.map.getZoom();
	var limit = Math.pow(2, z);
	var x = Math.round((bounds.left - this.maxExtent.left) / (res *this.tileSize.w));
	var y = Math.round((this.maxExtent.top - bounds.top) / (res *this.tileSize.h));

	if (y &amp;amp;lt; 0 || y &amp;amp;gt;= limit) {
	return &amp;quot;&amp;quot;;
	} else {
		x = ((x % limit) + limit) % limit;

		var tilename = &amp;quot;&amp;quot;;
		if( (x+y)%2==0 ) {
			tilename = &amp;quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;amp;;chs=256x256&amp;amp;amp;chld=FFFFFF|12|h|000000|b||&amp;quot;;
		} else {
			tilename = &amp;quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;amp;;chs=256x256&amp;amp;amp;chld=000000|12|h|FFFFFF|b||&amp;quot;;
		}
		tilename = tilename + &amp;quot;(&amp;quot;+z+&amp;quot;/&amp;quot;+x+&amp;quot;/&amp;quot;+y+&amp;quot;)&amp;quot;;
		return tilename;
	}
},

CLASS_NAME: &amp;quot;OpenLayers.Layer.Tilenames&amp;quot;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;});&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[OpenLayers, how compute the tile "name" under the mouse]]></title><description><![CDATA[I have working on a web page using OpenLayers which among others shows aÂ 
  OpenStreetMapÂ layer.
  The issue is I need to move the mouse over the map and print on a label the tileÂ nameÂ 
  in the form ofÂ z/x/y, for example,Â 5/15/10. });]]></description><link>https://www.acuriousanimal.com/blog/2013/01/01/openlayers-how-compute-the-tile-name-under-the-mouse</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2013/01/01/openlayers-how-compute-the-tile-name-under-the-mouse</guid><pubDate>Tue, 01 Jan 2013 10:53:00 GMT</pubDate><content:encoded>&lt;p&gt;I have working on a web page using OpenLayers which among others shows aÂ 
&lt;a href=&quot;http://www.openstreetmap.org/&quot;&gt;OpenStreetMap&lt;/a&gt;Â layer.
The issue is I need to move the mouse over the map and print on a label the tileÂ &lt;em&gt;name&lt;/em&gt;Â 
in the form ofÂ &lt;strong&gt;z/x/y&lt;/strong&gt;, for example,Â &lt;strong&gt;5/15/10&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The approach to done this is:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;register a listener to the OpenLayersÂ &lt;em&gt;map&lt;/em&gt;Â instance andÂ then, for every mouse event triggered,&lt;/li&gt;
&lt;li&gt;get the lonlat and translate it from current map projection to theÂ &lt;a href=&quot;http://spatialreference.org/ref/epsg/4326/&quot;&gt;EPSG:4326 (WGS84)&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;pre class=&quot;lang:js decode:true &quot;&gt;map.events.register( &apos;mousemove&apos;, this, function(evt){
	var lonlat = new OpenLayers.LonLat(0, 0);
	if(evt){
		lonlat = map.getLonLatFromPixel(evt.xy);
		lonlat.transform(this.map.getProjectionObject(), newOpenLayers. Projection(&quot;EPSG:4326&quot;) );
	}
	tileX = long2tile(lonlat.lon, map.getZoom());
	tileY = latg2tile(lonlat.lat, map.getZoom());
	tileZ = map.getZoom();
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Print the tilez, tilex and tiley values&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;});&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;To compute the tile X,Y grid coordinate from latlon you can use next functions (obtained fromÂ &lt;a href=&quot;http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#X_and_Y&quot;&gt;OpenStreetMaps&lt;/a&gt;Â site):&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;pre class=&quot;lang:js decode:true &quot;&gt;// Functions to compute tiles from lat/lon
functionÂ long2tile(lon,zoom) {
	returnÂ (Math.floor((lon+180)/360*Math.pow(2,zoom)));
}
functionÂ lat2tile(lat,zoom)Â  {
	returnÂ (Math.floor((1-Math.log(Math.tan(lat*Math.PI/180) + 1/Math.cos(lat*Math.PI/180))/Math.PI)/2 *Math.pow(2,zoom)));
}Â 
&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[tagger, a jQuery Plugin to manage tags]]></title><description><![CDATA[jQuery is widely used in the web world. Since its creation it was quickly adopted by many programmers mainly due its easily of us and extension capabilities.]]></description><link>https://www.acuriousanimal.com/blog/2012/12/26/tagger-a-jquery-plugin-to-manage-tags</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/12/26/tagger-a-jquery-plugin-to-manage-tags</guid><pubDate>Wed, 26 Dec 2012 17:51:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://jquery.com/&quot;&gt;jQuery&lt;/a&gt; is widely used in the web world. Since its creation it was quickly adopted by many programmers mainly due its easily of us and extension capabilities.&lt;/p&gt;
&lt;p&gt;I used jQuery in many projects and for many different things, thanks to the legion of existing plugins I always found a solution to my issues... since today.&lt;/p&gt;
&lt;p&gt;I was looking for plugins to manage tags. Of course I found many alternatives but no one likes me. Some of them lake from desired methods, others was based on&amp;#xA0;additional&amp;#xA0;libraries (like &lt;a href=&quot;http://jqueryui.com/&quot;&gt;jQueryUI&lt;/a&gt;) where I want a more simple solution, some others was too complex to change its style or, other times, simply I found its code them too much complex for something I consider more simple to do.&lt;/p&gt;
&lt;h2&gt;The problem&lt;/h2&gt;
&lt;p&gt;I was developing a web site using &lt;a href=&quot;http://twitter.github.com/bootstrap&quot;&gt;Twitter Bootstrap&lt;/a&gt; framework and I needed a jQuery plugin to manage tags. The requirement was the plugin has a look and feel based on the Bootstrap components: labels, icons,&amp;#xA0;buttons, etc&lt;/p&gt;
&lt;p&gt;After looking for a couple of days, testing some plugins and looking on its source code I realize neither of them likes me, so I start developing my custom alternative.&lt;/p&gt;
&lt;h2&gt;The &lt;em&gt;tagger&lt;/em&gt; plugin&lt;/h2&gt;
&lt;p&gt;In a boast of originality&amp;#xA0;I called the plugin &lt;em&gt;tagger&lt;/em&gt; and it can works in two modes (read or write mode) depending on if you want to simply show some tags or you want to change the tags list adding or removing.&lt;/p&gt;
&lt;p&gt;To remove a tag you can simply click the remove icon on each tag and to add new tags you must click the plus sign. This makes a little form opens with an input text element where you can write the desired tags to add to the list.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 542px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 29.88929889298893%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA60lEQVQY04VOy06EQBDkR/0fv8Av8QQreiCwM/JShBhcEwKOwMgEGAcGWWBtdhMTD6t16K7qpKpaCcMQIWTb9v0K7LouSLTdgvB9f5qmw3koy7LAWn5jno/zT+dqTtPUcRzof/D9IHiKoghkHL94npckCTSf4n4M8xp9OB2UpmkIIWVZFkWR5zmlNMsyxhghb5zzf5qHYWjbVggBs+/7pm2klEfeQW5d14xVNRdcjrwfv+YlJtKOu08h9/tRgT9VVTUMQ9M0jBBwjPFG0yzL0vUb0zTvbvXH513Vdu8fNbRdXdOLy50bvLKKfgNWy0numzC+bAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;tagger&quot; title=&quot;tagger&quot; src=&quot;/static/6d65c792e22e9c53d28175f72c2d380f/67648/tagger.png&quot; srcset=&quot;/static/6d65c792e22e9c53d28175f72c2d380f/19bd1/tagger.png 163w,
/static/6d65c792e22e9c53d28175f72c2d380f/d3bcb/tagger.png 325w,
/static/6d65c792e22e9c53d28175f72c2d380f/67648/tagger.png 542w&quot; sizes=&quot;(max-width: 542px) 100vw, 542px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Documentation&lt;/h2&gt;
&lt;p&gt;I have prepared a special web page that acts as &lt;a href=&quot;http://www.acuriousanimal.com/tagger.js/&quot;&gt;documentation page&lt;/a&gt; and shows the plugin in action.&lt;/p&gt;
&lt;h2&gt;Source Code&lt;/h2&gt;
&lt;p&gt;This weekend project is open and free, so feel free to contribute with new features and improvements. You can find at my GitHub&amp;#xA0;repository&amp;#xA0;&lt;a href=&quot;https://github.com/acanimal/tagger.js&quot;&gt;tagger&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[OpenLayers presentation and OpenLayers Cookbook examples code update]]></title><description><![CDATA[A few months after the release of the OpenLayers Cookbook I have been working on a presentation about OpenLayers for @geoinquiets at Barcelona (BCN) that will be celebrated the next DecemberÂ 20th (see the event here) at the offices of Cantera-Tech.]]></description><link>https://www.acuriousanimal.com/blog/2012/12/04/openlayers-presentation-and-openlayers-cookbook-sample-code-update</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/12/04/openlayers-presentation-and-openlayers-cookbook-sample-code-update</guid><pubDate>Tue, 04 Dec 2012 20:29:00 GMT</pubDate><content:encoded>&lt;p&gt;A few months after the release of the &lt;a href=&quot;//2012/09/02/openlayers-cookbook-is-out&quot;&gt;OpenLayers Cookbook&lt;/a&gt; I have been working on a presentation about OpenLayers for &lt;a href=&quot;http://twitter.com/geoinquiets&quot;&gt;@geoinquiets&lt;/a&gt; at Barcelona (BCN) that will be celebrated the next DecemberÂ 20th (see the event &lt;a href=&quot;http://www.eventbrite.es/event/4934313665/eorg?ebtv=C&quot;&gt;here&lt;/a&gt;) at the offices of &lt;a href=&quot;http://www.cantera-tech.com/es/&quot;&gt;Cantera-Tech&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Both the presentation and source code examples materials are freely available at my repository on &lt;a href=&quot;https://github.com/acanimal&quot;&gt;GitHub&lt;/a&gt; as open projects and I would like you contribute to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;OpenLayers Cookbook Examples&lt;/strong&gt;:&amp;#xA0;&lt;a href=&quot;https://github.com/acanimal/Openlayers-Cookbook&quot;&gt;https://github.com/acanimal/Openlayers-Cookbook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OpenLayers&amp;#xA0;Presentation&lt;/strong&gt;:&amp;#xA0;&lt;a href=&quot;https://github.com/acanimal/OpenLayers-Presentation&quot;&gt;https://github.com/acanimal/OpenLayers-Presentation&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The presentation is available online at&amp;#xA0;&lt;a href=&quot;http://acanimal.github.com/OpenLayers-Presentation&quot;&gt;http://acanimal.github.com/OpenLayers-Presentation&lt;/a&gt; and the cookbook examples at &lt;a href=&quot;http://acanimal.github.com/Openlayers-Cookbook&quot;&gt;http://acanimal.github.com/Openlayers-Cookbook&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Please take into account some examples do not work because there is no backend PHP server to serve some required content.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;About the OpenLayers Cookbook Examples&lt;/h2&gt;
&lt;p&gt;The OpenLayers Cookbook was released with a set of samples showing almost all the recipes in the book in action.&lt;/p&gt;
&lt;p&gt;I built the samples as a RIA application with a menu bar for each chapter which allows to select te recipe to load and allowing to show the related source of each recipe.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://acanimal.github.com/Openlayers-Cookbook/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 57.09090909090909%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVQoz11S2XKbQBDk//8lZcm6bCWxktiOD12ADkDoQohDdxASSH7p9C4klcpD1+4OO73dPSheuMbSD3E8xsRRrqfTCWciOZ//rqIecx/HXONTdj+O8/WEKO9VbHeDKIqQpGc2xEiSM/b86B8OEh6x4vePNMU1SZCmxCXB9ZLi43rB9ZrKvVjFWfF9H4eNj93aQxAs0LIMVDpd3LY7uO10UGi38W4a6Nsj6IYJY2LDnk2wcGfY+C626yX2W/avlggJxXIdSeYHLvrTMcpdFWVVRSVHudvFeD5lLAtoJBuRLPRcrEIXG/bs2RvtAvzaBrzjQnkYDqWClmniQe/hs6qj0s3ISlT6YgwRUYHAkY2rcAmf5D2St20LjjuXih0qbtKF8oNEwtYXkj33B5jMpng3DBRpt0R1jV5P1lw2boIldqGH+WKGmqaiykcb/R57dTTZ8zQ0MkJhq0CCNyo9UcWBaixnintdk6S3xLdeH+GSmZH01RxK9fXczZ2mSYcd284ISyQT2dX50sJzpLUNs7nnRfGYiEGQB7S6Zk5t00Jd01HNo7lTNdS4fzRzhUJFjc0FTtamsohTfxwOZF3YqqmafHBG2xbzEg8LVZV/hldlBJ6YcoNDuWm15C8iMGO4wtKnvFZkvsVOW+Z8p2VTvxG1P8jv3DRb+KoPoKiOg+fRCD/pvzmZYM7Qn3h+4fl/PI9seU/sX4k3e5zVLQvfByaejCl+A9PJC4W3aW8IAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ol source code examples&quot; title=&quot;ol_source_code_examples&quot; src=&quot;/static/d38900ab58157bc659b355fcf4eed11f/2cf63/ol_source_code_examples.png&quot; srcset=&quot;/static/d38900ab58157bc659b355fcf4eed11f/19bd1/ol_source_code_examples.png 163w,
/static/d38900ab58157bc659b355fcf4eed11f/d3bcb/ol_source_code_examples.png 325w,
/static/d38900ab58157bc659b355fcf4eed11f/2cf63/ol_source_code_examples.png 550w&quot; sizes=&quot;(max-width: 550px) 100vw, 550px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;To create the application I used &lt;a href=&quot;http://dojotoolkit.org/&quot;&gt;Dojo Toolkit&lt;/a&gt;&amp;#xA0;because it is a great JavaScript framework with a nice set of rich and homogeneous widgets.&lt;/p&gt;
&lt;p&gt;As any piece of software, the book samples requires some updates from time to time and, because of this I decide to upload the source code to GitHub and update it to&amp;#xA0;the version 1.1.&lt;/p&gt;
&lt;p&gt;Next are some of the improvements you will find:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use of&amp;#xA0;&lt;a href=&quot;http://dojotoolkit.org/&quot;&gt;Dojo Toolkit&lt;/a&gt;&amp;#xA0;from Google CDN (&lt;code&gt;&amp;lt;script src=&amp;quot;//ajax.googleapis.com/ajax/libs/dojo/1.8.0/dojo/dojo.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Updated Dojo version to 1.8&lt;/li&gt;
&lt;li&gt;Updated OpenLayers version to 2.12&lt;/li&gt;
&lt;li&gt;Source code updated to use Dojo 1.8 syntax (using HTML5&amp;#xA0;&lt;code&gt;data&lt;/code&gt;&amp;#xA0;attribute) instead old one (non standar&amp;#xA0;&lt;code&gt;dojoType&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Source code highlighted via&amp;#xA0;&lt;a href=&quot;http://codemirror.net/&quot;&gt;CodeMirror&lt;/a&gt;&amp;#xA0;project.&lt;/li&gt;
&lt;li&gt;Use of relative paths to load data files (attached to the project).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To run the samples you need download the code and put within your local web server (take a look to the &lt;a href=&quot;https://github.com/acanimal/Openlayers-Cookbook#how-to-run-the-examples-&quot;&gt;documentation&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Remember, you are welcome to contribute and create new recipes !!!&lt;/p&gt;
&lt;h2&gt;About the OpenLayers Presentation&lt;/h2&gt;
&lt;p&gt;As a said at the beginning, I have the opportunity to make a presentation for the&amp;#xA0;&lt;a href=&quot;http://twitter.com/geoinquiets&quot;&gt;@geoinquiets&lt;/a&gt;&amp;#xA0;folks at Barcelona.&lt;/p&gt;
&lt;p&gt;But who are the GeoInquiets? Well, we are (I like to include me) a bunch of enthusiast and professionals related with GIS close to Barcelona.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: The GeoInquiets initiative has been&amp;#xA0;successfully&amp;#xA0;replicated in other hispanic places like: Madrid, Buenos Aires, Valencia, Tenerife, Galicia, C&amp;#xF3;rdoba, Cantabria, ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://acanimal.github.com/OpenLayers-Presentation&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.090909090909086%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVQoz61RTUvDQBDt/z94Eryot/SQEMEmWqHtxXiwREQpKjXRYtGw6a5ms8lmNx9NnRi1lopC6DAss8N78+ajlabpoqm1NkAuy/Jv3K+AFeV/S9SY2ipylmUQIYQYY1BISskTEQSBlGmSCPgCKIoi13Xh5Zzneb5ULopCCKFpWqfTMQyze3zkOmOl3VYUBZK2bVvWmeM4hmnquq6qqmVZUCKO42XbIAUpjGcewm9MUoKw74Uh5TzhLMir7nLBIxaGmBBKKXSxMnM979Uk3jp82j7x9waz3b7fu6bKKdnvo53uy8E5Edm8Qq5vuybTSAxvUO/i+W6CRw9k9EgGl97w1r+fvo6ngUiL751t6M4/LrGYV15++GfwlVwjw6maK9eXbGbve1ProBEk4A8AAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ol presentation&quot; title=&quot;ol-presentation&quot; src=&quot;/static/be795eefb2fe7a460bb47a27a15c61e3/2cf63/ol-presentation.png&quot; srcset=&quot;/static/be795eefb2fe7a460bb47a27a15c61e3/19bd1/ol-presentation.png 163w,
/static/be795eefb2fe7a460bb47a27a15c61e3/d3bcb/ol-presentation.png 325w,
/static/be795eefb2fe7a460bb47a27a15c61e3/2cf63/ol-presentation.png 550w&quot; sizes=&quot;(max-width: 550px) 100vw, 550px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The presentation was made using simply HTML technologies to maximize its portability and avoid proprietary formats. Croncretely, I used the next set of tools to generate it::&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/imakewebthings/deck.js&quot;&gt;deck.js&lt;/a&gt;: A JavaScript library for building modern HTML presentations.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/iros/deck.js-codemirror&quot;&gt;deck.js-codemirror&lt;/a&gt;&amp;#xA0;extension: Allows you to embed codemirror code snippets in your slides&lt;/li&gt;
&lt;li&gt;All UML class diagrams have been made with the free and online&amp;#xA0;&lt;a href=&quot;http://yuml.me/diagram/scruffy/class/draw&quot;&gt;yUML&lt;/a&gt;&amp;#xA0;tool.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Again, remember it is open sourced so you can contribute and use to make your own presentations.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Projections, projections, projections]]></title><description><![CDATA[Create a map of the earth isn't an easy problem. Projections basically tries to solve the problem of how to 3D element on a 2D surface. Tons of papers have beenÂ writtenÂ about this problem but a nice place to start is the wikipedia entry about Map Projections.]]></description><link>https://www.acuriousanimal.com/blog/2012/10/24/projections-projections-projections</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/10/24/projections-projections-projections</guid><pubDate>Wed, 24 Oct 2012 17:55:00 GMT</pubDate><content:encoded>&lt;p&gt;Create a map of the earth isn&apos;t an easy problem. Projections basically tries to solve the problem of how to 3D element on a 2D surface.&lt;/p&gt;
&lt;p&gt;Tons of papers have beenÂ writtenÂ about this problem but a nice place to start is the wikipedia entry about &lt;a href=&quot;http://en.wikipedia.org/wiki/Map_projection&quot;&gt;Map Projections&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 395px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 42.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQozwElAtr9ANHIx9PLysnBwbSuraympa2oprixsMO6uci/v8e+vcS6ucS5ucW6usS6uci+vsrAv8q/v8K3tcO4t7WsqwBzb296d3ayqai1rKywqKe0q6qzqqm7sLC7srLDtbfiz9fh0tnez9Xk0dfUxsy0p6y3parWxszg0dfJu8AACQgLCw0Oc25surOxp6Ceq6Sisaint66twrm4louNal1km5GZvbK6lYePeXF1ZFxigHB5zsHKnZOah3uAAEZFR0VER3Fsa7KsqpuWlKSenKKcm7CnpsnAv3tvcBkIDKyapNrH0Yp2fhsLEKuYoefR3HBdYyESFCQYGQAeHR4lIyR+enm8tbOxqqm0rKu1rau0qqq8tLObj5GjkJfy4uvv3ujq1N+dkZiun6bMt8E1IiZcS1CPfoQAIB4gJCMjdnJwvLWzsKinsquptKyrtKyqsaqo0sPHnYuSrJyk7dzn5s/a4tTeVERJzbjDm4mRoI6W49PcAAAAAAAAAFtYVsO8ubmwr7uysbuysbyysrawrsq7vuHL1tnG0OfU3vLb5ubW4My8xPTc6fLf6fXj7tbEzQAvLC4tKyuYkpDGvrzAtrbBuLfCuLfAtrXJwcCXjI0yISZ+cHXp2uSijpZ9b3WShIulkZpmVVpKPUFZSk0Am5WUm5WUopyanpeVn5iWn5eWn5iXnZaVpqCfd25uGwwPNykrZllbMiEjIRQWKh0fLx8hJxcZHxMUNSkq01Y7s08WD/wAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Cylindrical projection&quot; title=&quot;Cylindrical projection&quot; src=&quot;/static/77b52223c4ca0689ed8d51a78ae6cd71/a4a4a/Usgs_map_miller_cylindrical.png&quot; srcset=&quot;/static/77b52223c4ca0689ed8d51a78ae6cd71/19bd1/Usgs_map_miller_cylindrical.png 163w,
/static/77b52223c4ca0689ed8d51a78ae6cd71/d3bcb/Usgs_map_miller_cylindrical.png 325w,
/static/77b52223c4ca0689ed8d51a78ae6cd71/a4a4a/Usgs_map_miller_cylindrical.png 395w&quot; sizes=&quot;(max-width: 395px) 100vw, 395px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Some time ago I seen a awesome video from the project &lt;a href=&quot;http://www.win.tue.nl/~vanwijk/myriahedral/&quot;&gt;Unfolding the Earth: Myriahedral Projections&lt;/a&gt;. On it, the author divides the sphere into a myriahedron (a &lt;a href=&quot;http://en.wikipedia.org/wiki/Polyhedron&quot;&gt;polyhedron&lt;/a&gt; with a very large number of faces) which allows to unfold the sphere in many different map projections.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.youtube.com/watch?v=b1xXTi1nFCo&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 642px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 60.436137071651096%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACdUlEQVQoz32Ty0tUYRiHp3Hc5KKlC/+DSIRw06ZFRROEXUCCVhURtCjUFkGg6ChFBFGbChIXGRSIpNJoXrJx8IIz6TT345kz4w0xtfE+6lzOOU/fnJHoMrb4cd7zfrzP994+k8ViwWQyYbNVA+ukUlNoegxNy0nXc9K0qCFVjeSkKSSTYRETp7r6hsGwWAow/Q1MCqCqRkGPoosgVVUMQCYjC4nLtOy5TDo9xe5uUMSsUFV1/SDgGmkBBIXN7TCJpACTzUyBrPQZNrZlkVlI+GX29rLfH/mB9Q1VBjCxE+KzP0Kb081CrJfNdS+ZlERib5r1NT/zUjvvHS68czHUdLbkVQHMU3Kjrcq47e2Qj9q2CM12J3PjjxgY6cPu8jA5YWfV95Qdz31efejH1h7ii897cA/r6u4ys77MG0eQF/0yzz96aO3qorFD4V1PN8pQLZ7BJ3T2ttHcOYDD2Ubv6AgbmTj3aq7lKbn+DjpLjIZCdLplWhwyUdczugc7eNnjFtk2MT70msc987Q6JYY8k/iVbyLDBZFhnh42GD1cZnXNizQvMx4OEAh8os/tomV4ju6xUYa/OrBPxBiTZGKLIRJbE/9OufAPYJxUMkhGNHtzM8D09ymCswqBWQlPTBK2xOKKj+0tP1raz64x5fhvQME6VLhfclONcZhdCU2PCDtirIamir0T+4cazoncWum6Ih6BtD/lHNBsNmM6UmA2fh4+uG2kn9gJGq/ll8QCpw3JwhZKyYY/60skAiJmiZqamwajqOgwppMlJZwoLubisaPcunqFigvnsZ49xTnrGazW0//V5csVVFZeorz8OKWlpZSVlfET5oivcyyoCekAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Unfolding the Earth Myriahedral projections1&quot; title=&quot;Unfolding the Earth - Myriahedral projections&quot; src=&quot;/static/4195ef432b281e98e7bc86ab9e66602d/b582c/Unfolding-the-Earth-Myriahedral-projections1.png&quot; srcset=&quot;/static/4195ef432b281e98e7bc86ab9e66602d/19bd1/Unfolding-the-Earth-Myriahedral-projections1.png 163w,
/static/4195ef432b281e98e7bc86ab9e66602d/d3bcb/Unfolding-the-Earth-Myriahedral-projections1.png 325w,
/static/4195ef432b281e98e7bc86ab9e66602d/b582c/Unfolding-the-Earth-Myriahedral-projections1.png 642w&quot; sizes=&quot;(max-width: 642px) 100vw, 642px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Recently I could seen another nice experiment at the &lt;a href=&quot;http://bl.ocks.org/&quot;&gt;bl.ocks.org&lt;/a&gt; site. The &lt;a href=&quot;http://bl.ocks.org/3711652&quot;&gt;Projection Transitions&lt;/a&gt; is an great map work example implemented with &lt;a href=&quot;http://d3js.org/&quot;&gt;D3.js&lt;/a&gt; library which shows an animated transition of map projections.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://bl.ocks.org/3711652&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 99.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADoUlEQVQ4y1VU23abOhD1///BWatpYoMBc78jEAZzN3ZW27RJnOb0fMs+I5k0yYPWCKTZ2nPZs7rxCiish5J1UNKWbI8N2U3aSaulFTbZck5LZe974beRPtf9bVRhdRNW2PIZ22KCyo9kRzR7HyX30VQB5moHnTV0NsszsVRpJ+hc7Ce535LvHZFYfQ329HH9uWEDzChGxza4rw38mW386i0YrIaRVbCTBGpOIHkvH98lmWQvCdH3OmkEwxqbYsY6P8LwfRjWFpZvISgYLpODh96hMDt6cKAH+yvTpISaHdBVPuIipbAPUJIKN8mA1caLUdYMacnAEw1ZqCCPVJgZx/fOwVA5lJ8BejkhzhOYaYEgDdEXOv6cXDwONuaDg6kJEWYxVopt40zhPfUmfh8dfOtcuIEFNwnpkRw7RjmmEF3GMOUb/GhNPI82LmIdfbwcXfyePUqNjYEeWd0ERD+tYWUFfnU7/Bxc9JWHmhmUH6oqP0GNSySBgrFQCMzBI+X1bT0PJu4bC1pEoUecikJV1vZnys+IsXavhSBgKw6J2SABTXosJcDIW6NKVZxLFT8bXYI/NAbS2KSWa7DOhgVQVLmc4TCOqbLgJDHu8pnydoJSHFEWHr41Jiq2I5ZbNLlBXbDDQ7tDWzpUlIbuHmXvSkBRctE6wlmjntODAFHiQRPtQf9Y5uK81/DY6jgUO1lhK9/DigJsHZvapYZGhNafAGWDjlD4GV7O8dgoODcu9LzDujjBJvYP1Roxi7ChFlOo1TRGinKp1XwX2yjHbXzASshFoGsLS0FddP+8N9DW4cJ+hsVbDFyXwOJhkSaR34hfi7mvUnyN288hSxmRs84OKHPnKrO/7CfJVpx/lJtRdHCLPXxe4i4sP4esSgACzEhqMVv0O/0FEFYyy8eF5VHmXYSvSunV74DaomdxSRxKjS5DQF2c1lR5ReSPAEUeBbAitT1I4Nu0f8vhaXG45m9LoblpvOR1lqEGFFJccnRNgq4OwPcJ7rsA59bDPa32kGCXcqGUCgbvwcoEnIeouIexspHmkRwaRt5ipmq/jBbJzcLr0ZZWfAupvkw2yc/Bf7OJOAux+uKXshVeJ5MuW6QUoWcaCDRB9LSk2ejhXwJ5nlxazge77Mc3a9M4y7H6J2iQ0BAQLz2N75c4qaMofPzoXTnG3kAuHwAvy93LAmgkBVaqFyIqSzzRGLosl16EpQvCinCuzp8BLx8ABYlXiuzAbfwPsGrvm/ZqqQAAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Projection Transitions 300x298&quot; title=&quot;Projection Transitions&quot; src=&quot;/static/017a0dc4549f3fa309e4f84f24b3ea25/135ae/Projection-Transitions-300x298.png&quot; srcset=&quot;/static/017a0dc4549f3fa309e4f84f24b3ea25/19bd1/Projection-Transitions-300x298.png 163w,
/static/017a0dc4549f3fa309e4f84f24b3ea25/135ae/Projection-Transitions-300x298.png 300w&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Don&amp;apos;t you think D3 is becoming a great project? I think I need to get some time to spend on it.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Things seen last week]]></title><link>https://www.acuriousanimal.com/blog/2012/10/19/things-seen-this-october-2012</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/10/19/things-seen-this-october-2012</guid><pubDate>Fri, 19 Oct 2012 16:01:00 GMT</pubDate><content:encoded>&lt;h2&gt;Web &amp;amp; Dessign&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhqx&quot;&gt;Launcher&lt;/a&gt; - Wordpress responsive theme that allows visitors know estimated time remaining in launching your site.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhr0&quot;&gt;Shaken Grid (Lite)&lt;/a&gt; - Wordpress gridded theme thatÂ usesÂ &lt;a href=&quot;http://masonry.desandro.com/&quot;&gt;jQuery Masonry&lt;/a&gt;Â which â€œarranges elements vertically then horizontally according to a grid.â€&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhr4&quot;&gt;HTML5PLEASE&lt;/a&gt; - Look up HTML5, CSS3, etc features, know if they are ready for use, and if so find out how you should use them â€“ with polyfills, fallbacks or as they are.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhr5&quot;&gt;Animated Buttons&lt;/a&gt; - Samples of buttons made with CSS3 Transitions and Animations&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/betj&quot;&gt;Pure CSS Under Construction GIF&lt;/a&gt; - The modern icon implementation&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bgtk&quot;&gt;Pictonic Font Icons&lt;/a&gt; - 230 free icons: social, sharing, browsers, operating systems, etc&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bes3&quot;&gt;CSS2LESS&lt;/a&gt; - Translates your CSS files to LESS notation.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhrc&quot;&gt;Application Icon Set&lt;/a&gt; -Â The Application Icon Set by Matt Gentile consists of 120 pixel-perfect icons in three different sizes (16px, 32px and 64px) and it comes in three formats (PSD, PNG and CSH). The icons are vector shapes so you can scale them to any size.&lt;/p&gt;
&lt;h2&gt;GIS&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://bl.ocks.org/3711652&quot;&gt;Projection Transitions&lt;/a&gt; - 2D animation projections transitions.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.youtube.com/watch?v=b1xXTi1nFCo&quot;&gt;Unfolding the Earth - Myriahedral projections&lt;/a&gt; - Awesome video animation among many map projections.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhr8&quot;&gt;GeoJSONLint&lt;/a&gt; - Validate your GeoJSON data files.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bfw3&quot;&gt;OpenGeo Suite 3.0 Released!&lt;/a&gt; - A new version of this great open source suite.&lt;/p&gt;
&lt;h2&gt;Programming&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhm8&quot;&gt;Using Java as Native Linux Apps&lt;/a&gt;Â - Java utilities to calling C routines, create daemon processes, packaging, command line interfaces, etc&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bfwp&quot;&gt;Measuring Agile Scrum Development with Velocity&lt;/a&gt; - Short video tutorial that defines Velocity and explains how to measure the capacity of projects in Agile Scrum Development.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bfwk&quot;&gt;LinkedIn Moved From Rails To Node: 27 Servers Cut And Up To 20x Faster&lt;/a&gt; - Article about how LinkedIn has moved from Rails to Node.js&lt;/p&gt;
&lt;h2&gt;Curiosities&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhqb&quot;&gt;This Land Is Mine&lt;/a&gt; - Musical cartoon movieÂ about the Israeli/Palestinian conflict.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhq6 &quot;&gt;iPod&lt;/a&gt; - A nice create tribute to Steve Jobs&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://kcy.me/bhq0 &quot;&gt;DC vs Marvel Infographic&lt;/a&gt; - Compare movies revenues&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://nanoworkout.com/&quot;&gt;Nano Workout&lt;/a&gt; - Original site with tons of shortÂ exercisesÂ for our health.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Improved performance on the AnimatedCluster for OpenLayers]]></title><description><![CDATA[Yes, now I'm really proud to present the AnimatedCluster strategy for OpenLayers. Some time ago I created an AnimatedCluster strategy for OpenLayers that extends the basic Cluster strategy,
  animating cluster when user changes the zoom. {% highlight javascript %}
for(var i=0; i<this.features.length; ++i) {
    feature = this.featuresi; }
{% endhighlight %}]]></description><link>https://www.acuriousanimal.com/blog/2012/10/09/improved-performance-on-the-animatedcluster-for-openlayers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/10/09/improved-performance-on-the-animatedcluster-for-openlayers</guid><pubDate>Tue, 09 Oct 2012 21:42:00 GMT</pubDate><content:encoded>&lt;p&gt;Yes, now I&apos;m really proud to present the AnimatedCluster strategy for OpenLayers. Some time ago I created an &lt;a title=&quot;Animated marker cluster strategy for OpenLayers&quot; href=&quot;//2012/08/19/animated-marker-cluster-strategy-for-openlayers.html&quot;&gt;AnimatedCluster strategy for OpenLayers&lt;/a&gt; that extends the basic Cluster strategy,
animating cluster when user changes the zoom.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 491px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.951120162932796%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQozzWQ20/acBiG+zfvchdeGHeIS5YsuGTuoMm2bKg4Tm0RgZ4oKqf+Dj1BC7S0HAq0hYIyo0scZi557748ed/vIdypo4/BzfV8sYi8YDoJp8tl2BkNZ0HQ8zx94N6swmDZN8euZPeBbTctq2H14OTSj/pE/kKlRbSMhsaoEQTOKpwNxq6o6VWb5U22JGvz0BX72SRkSma6hKVUE6clSXJr9hATAkJlXF+vxmicn3j2wJcpRRC0rj6UcqpIAowtsyDLJGzQKldASABC3cBBf9jXDgnOvMJjdjWfRuEk8md9v1mzxQvlahVOnNE4h2AGAArCTUigFmBl1n5uoG/rRGyRjxFFVWMVJfAnUej7gTvxB5EHo9azxbgSzty60SYlSP+DIcgjaBr0SPjxO7UXVgsEq6kpSW6b52vrfderqBPOcdtDq7hyj6at7YaGOKjlHmsxDVAKq82K+BB/dU19XPCnj3BSknWTuRt8mrqK54zmgTcLloopNsA+CaXHzUCm9TypFRgsh+qBw+4Pya/38ZcbWMtIzYJqDN3GjbkVOtyt87ZnMTwuedpWCfJZKFMA0QpHqiIPm1H3xdQTZFNT6+cEo2kkABmASvjStxMdu6mgPagINbShPlOoSUJEQZAFcg7IRqsXdHBkacBnrYX52JwFYKMkI8GSbvdANUzsWSLntbZ1fMxAg0Qb21Ie6rpyuGrt3qVj9+SHqHa25n8+wZvHaACSCF0K1O3JG4d753RPRrXiMv76is2mN86AUsUZSz+es6k5932d2/8T3yFYXacQojF+iiyfSdBtxa4HB0uVf0juGlWaNMs5DLJIo2STaemeuRMZXxbdDsFAeMxxvwTh9H+OyhW+WjXAWU96YYKi3lZKavy0zGxOCYE/4YVi+bBWzeGG8RceAHQncVcMrQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;anim cluster 212&quot; title=&quot;anim_cluster_212&quot; src=&quot;/static/99b77975e6572caeaaff6c1247689f7a/3bb78/anim_cluster_212.png&quot; srcset=&quot;/static/99b77975e6572caeaaff6c1247689f7a/19bd1/anim_cluster_212.png 163w,
/static/99b77975e6572caeaaff6c1247689f7a/d3bcb/anim_cluster_212.png 325w,
/static/99b77975e6572caeaaff6c1247689f7a/3bb78/anim_cluster_212.png 491w&quot; sizes=&quot;(max-width: 491px) 100vw, 491px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The problem with the previous version is the code makes some computations for all the clusters, no matter if they are inside or outside the map&apos;s viewport.&lt;/p&gt;
&lt;h2&gt;The problem&lt;/h2&gt;
&lt;p&gt;This issues is clearly reproducible in the old version. Zoom in until cluster contains one or two features and you will see a degradation of the animation.&lt;/p&gt;
&lt;p&gt;Now, compare with the &lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster&quot;&gt;new improved version&lt;/a&gt;, which supports 50.000 features without problem (at least on my computer :) ).&lt;/p&gt;
&lt;h2&gt;How do I improve it?&lt;/h2&gt;
&lt;p&gt;The solution was easy, only manage the animation of those clusters inside the map&apos;s viewport:&lt;/p&gt;
&lt;p&gt;{% highlight javascript %}
for(var i=0; i&amp;#x3C;this.features.length; ++i) {
feature = this.features[i];&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Check if the feature&amp;#39;s geometry is on the map&amp;#39;s viewport,
// if so then manages it, otherwise ignore.
if(this.layer &amp;amp;&amp;amp; this.layer.map) {
    var screenBounds = this.layer.map.getExtent();
    var featureBounds = feature.geometry.getBounds();
    if(!screenBounds.intersectsBounds(featureBounds)) {
        continue;
    }
}
...&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}
{% endhighlight %}&lt;/p&gt;
&lt;p&gt;Yes, it can seem obvious, but I have needed some time before I realized about this fact (dummy?)&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;GitHub source code &lt;a href=&quot;https://github.com/acanimal/AnimatedCluster&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;GitHub demo source code &lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster/&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[OpenLayers Cookbook pirated... but you can continue buying it !!!]]></title><description><![CDATA[Approximately a month ago my book OpenLayers Cookbook was released by PacktPublishingÂ and today I found it is available at many sites of debatable reputation. Really I'm surprising by the velocity of this alternative publication process :)]]></description><link>https://www.acuriousanimal.com/blog/2012/09/27/openlayers-cookbook-pirated-but-you-can-continue-buying-it</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/27/openlayers-cookbook-pirated-but-you-can-continue-buying-it</guid><pubDate>Thu, 27 Sep 2012 20:40:00 GMT</pubDate><content:encoded>&lt;p&gt;Approximately a month ago my book &lt;a title=&quot;OpenLayers Cookbook is out !!!&quot; href=&quot;//2012/09/02/openlayers-cookbook-is-out&quot;&gt;OpenLayers Cookbook&lt;/a&gt; was released by &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;PacktPublishing&lt;/a&gt;Â and today I found it is available at many sites &lt;del&gt;of debatable reputation&lt;/del&gt;.&lt;/p&gt;
&lt;p&gt;Really I&apos;m surprising by the velocity of this alternative publication process :)&lt;/p&gt;
&lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;
&lt;img class=&quot;alignleft&quot; src=&quot;./images/7843OS_OpenLayer%20Cookbook_cov_0.jpg&quot; alt=&quot;&quot;
width=&quot;125&quot; height=&quot;151&quot; /&gt;&lt;/a&gt;
&lt;p&gt;Honestly, I hope all these sites have many downloads, that means the book is interesting for many people.&lt;/p&gt;
&lt;p&gt;Hopefully, for all of you that are contrary to piracy the book continues available at legal sites ready to be bought for a few dollars&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Architexa product review]]></title><description><![CDATA[Architexa product is an Eclipse plugin from Architexa.comÂ company. As their web site say:]]></description><link>https://www.acuriousanimal.com/blog/2012/09/23/review-of-architexa-product</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/23/review-of-architexa-product</guid><pubDate>Sun, 23 Sep 2012 13:30:00 GMT</pubDate><content:encoded>&lt;p&gt;Architexa product is an Eclipse plugin from &lt;a href=&quot;http://www.architexa.com/&quot;&gt;Architexa.com&lt;/a&gt;Â company. As their web site say:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Architexa helps you understand and document large/complex Java code bases within Eclipse&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;and allowing to create and explore diagrams that make sense.&lt;/p&gt;
&lt;a href=&quot;http://www.architexa.com/&quot; rel=&quot;http://www.architexa.com/&quot;&gt;
  &lt;img class=&quot;alignleft&quot; src=&quot;./images/logo-main2.gif&quot; alt width=&quot;299&quot; height=&quot;57&quot;&gt;&lt;/a&gt;
  
&lt;p&gt;I have tried it really little but the conclusions are clear: Architexa is a tool with a great potential.&lt;/p&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;Installing Architexa is really easy because it is prepared as any other Eclipse plugin (see the &lt;a href=&quot;http://www.architexa.com/learn-more/install&quot;&gt;install&lt;/a&gt; section).&lt;/p&gt;
&lt;p&gt;I&amp;apos;m using Eclipse 4.2 (Juno) and the steps were:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go to &lt;code&gt;Help &amp;gt; Install new software&lt;/code&gt; and add a new place called architexa with the URL: &lt;code&gt;http://update.architexa.com/4.2/client&lt;/code&gt;.&lt;br&gt;
&lt;a href=&quot;./images/2012/09/architexa_02.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 100.56980056980056%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAACyElEQVQ4y31UW1PTQBTOP1ZUChXwf3hhACnKFFrhQV4YEYfRccYXfWAK2kuS3U2ym9smTZuE3vw2vYii7nzz5TS7Z8853zmpVi6XVldKpeUHjx7eX1tbfbLxeGO9DOM/WF8vl1aW7y0tabZt6bphWayj690kyW/Umvx7jceKO8y7+Ma0tN/v93rgLEuTpIvV6yV5lt3kuCf/xXk2mBt5Lzaa7XaLaI5tISy31YIdhkGa9iMZwggCHxwq9vFwfekFklmcnh3To2fBxZEmsef7YIlzYQCOpOSOYzGqYDGmmFJmX7Xs65b1vW0bxEEYRhHZYr4r4kgOR6N5TeO7pQ6Hg3FR7mg07PeTNE2Rkea6LrEF+P3b48r2ZrW6f1Ddr1R29m6hsrvz4vlT8O7LrbN3p1AEMmVZpg2Hw0kR6+PpSa36ql4/qNcO3tQPAdjgWq1aO6yC91/vbW9tnp+fLdLRBoNZPpAk8L3AsUJXZN0o7cosidNYjrJ0MhoMsz4xjVbzBxT5zbmodIwahGN5limYKaghqO4yk1M98ngq/dh3iSN05nhBMJovDWK2Wk2I6gqB5iTduBtHipWhWAjOLCtwaNz4El1+jpiOt91Y4phGTJMQ0/fgy4UQsQyLboHDggNKzHZH53rT+3QiPhwHnWt1pQzRIC3BSOZqnvIsBTAhIPUsRg+ErcF0ssYTIM3ztJhIQBOtRjFjxGYUnQfQfcYI5zbu9lyOvCghmAlmGtTouMLBeyQFaHbjq4ll6ABOQHFojirAqNx17FbbvLwmALOcwHfREzhPobk2VZ6mbhgd3eiosCoypRRCeHEUdiN0R4KgELDwVM5IW00vIzM3SqBQ4UwAwZ3CB57yttvMOS6uLHh2Yh7hzzh/cZ42BulNNViIEc3f3EaxKxc/8U/ioLa7QbDHHXQAmXMUgY8QTblqNAzdcDmH/q7gPwHaICszj7H9YgAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;architexa 02&quot; title=&quot;architexa_02&quot; src=&quot;/static/b380e9582a413336d67fbc61e1e5f2bd/dbb61/architexa_02.png&quot; srcset=&quot;/static/b380e9582a413336d67fbc61e1e5f2bd/19bd1/architexa_02.png 163w,
/static/b380e9582a413336d67fbc61e1e5f2bd/d3bcb/architexa_02.png 325w,
/static/b380e9582a413336d67fbc61e1e5f2bd/dbb61/architexa_02.png 650w,
/static/b380e9582a413336d67fbc61e1e5f2bd/79997/architexa_02.png 702w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Select the Architexa plugin and click next button until installation is done.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Really easy, don&amp;apos;t you?&lt;/p&gt;
&lt;p&gt;After Eclipse restarts you will be asked for a valid Architexa user. Go to the &lt;a href=&quot;http://www.architexa.com/learn-more/register&quot;&gt;registration&lt;/a&gt; page and register for a free license. That&amp;apos;s all.&lt;/p&gt;
&lt;h2&gt;Exploring a project&lt;/h2&gt;
&lt;p&gt;To test Architexa I have opened a relatively small &lt;a title=&quot;Downloading files from AEMET FTP server with Java and Apache Commons Net&quot; href=&quot;//2011/03/06/downloading-files-from-aemet-ftp-server-with-java-and-apache-commons-net&quot;&gt;maven project&lt;/a&gt;, which allows to download files from an FTP server. It haven&amp;apos;t a great domain model neither thousand of classes but has all the necessary to test the basic Architexa capabilities.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Layered diagrams&lt;/li&gt;
&lt;li&gt;Class diagrams&lt;/li&gt;
&lt;li&gt;Sequence diagrams&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;The bad&lt;/h2&gt;
&lt;p&gt;Before to continue, I must say Architexa seems to me a product with a great potential, but on the other hand it leaves me with bad feelings.&lt;/p&gt;
&lt;p&gt;I prefer to comment all the bad things first so the good things comes later and the reader was left with a good feeling.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The Architexta web site is IMO horrible and much more the personal area of each user (&lt;a href=&quot;http://my.architexa.com/&quot;&gt;http://my.architexa.com/&lt;/a&gt;). In addition it seems not much stable, at least for me the profile and setting sections fails with a 500 server error.&lt;/li&gt;
&lt;li&gt;Once Architexa is installed it needs to build an index from your code. Initially I don&amp;apos;t built the index (when the tool ask me to do it) and after importing the project and building it by hand, it seems not work properly. For some reason my index was corrupted and I need to remove and import the project a couple of times before it woks.&lt;/li&gt;
&lt;li&gt;The layered, class and sequence diagrams are powerful tools but the way to explore and navigate could be a bit more intuitive. In addition the shapes and colors used could be improved.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see the bad things are almost all related to design and visual aspects, not to the product&amp;#xA0;functionality. Nothing a good web designer can solve.&lt;/p&gt;
&lt;p&gt;My opinion for Architexa guys is:&amp;#xA0;&lt;strong&gt;Architexa is a great product so make it looks like a great product&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Working with the diagrams&lt;/h2&gt;
&lt;p&gt;Because the project is a small the most useful diagrams has been the class and sequence diagrams.&lt;/p&gt;
&lt;p&gt;In the case of class diagram I added some classes related to the task to download and read radar files. Once a class is added to the diagram you can make actions like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;select which methods can be visible in the diagram&lt;/li&gt;
&lt;li&gt;navigate from a method to other classes (&lt;em&gt;show called method&lt;/em&gt;)&lt;/li&gt;
&lt;li&gt;show which classes references a method (&lt;em&gt;show calling method&lt;/em&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks to this actions you can explore the classes and its dependencies in both directions.&lt;br&gt;
&lt;a href=&quot;./images/2012/09/architexa_04.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 31.20494335736354%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+UlEQVQY02VQa2+DMAzk//+5TYI9WtqkaUKghoRBAJU87GX9sE3b6T6crTvLdkEPINJ//G7G6CW0tW4qXjOtx+U+bmsRkw+4I30bMaWQKCJF+mmSD0EbKzo4K8WUzkJaKJoeSn6tmLjosRnmzW+8bd+Veq6PrLlZF4xb7WanMC3oHLqFFkfO054nFtqYp/JYHfj52nEN7r6clK5OvKzZUajLrZfmJj8ERDDUWxosmSw2XL/CAb3HPe+ZKMR8GoUhQZ9gQJCueZGs4kzOMKSej92rELl8k3LaH+E/T4oYTTKZFk137xmocyvV1EEA3srycMqsajbMYzZ/Av1QUlBqXiTHAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;architexa 04&quot; title=&quot;architexa_04&quot; src=&quot;/static/27d019c6b221794d6d5e87f0e1670933/dbb61/architexa_04.png&quot; srcset=&quot;/static/27d019c6b221794d6d5e87f0e1670933/19bd1/architexa_04.png 163w,
/static/27d019c6b221794d6d5e87f0e1670933/d3bcb/architexa_04.png 325w,
/static/27d019c6b221794d6d5e87f0e1670933/dbb61/architexa_04.png 650w,
/static/27d019c6b221794d6d5e87f0e1670933/4c710/architexa_04.png 971w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The sequence diagram works in a similar way, you start adding a class or method and, for example, given a method add all the used methods from the same class or from other classes:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2012/09/architexa_05.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 68.18181818181819%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz42S204jMQyG+/4vg0AsQnu3F0i74g5pqx5QOU7nkDaTYSZnJ9m/mQIF1BW+iBzLn2P/zkS8/Gbbs5fu75b/qth5WZ4KMWXNz4pd1PXpll9z/qcsT9bVOeOXTfMDPm9vNu1VWZ1NrB20bkNw1klthDEdkbW2l0po3SForYSjVIfTmB6ncxpxKcXEubRaIU+llIYhGuOMMSHEGENKMb3a7h7Cx2vcwU2DOCG0XMTZjFV14Rwqk8STWiFvzCaiNxik97SD23Yfms0SY4Q0+Hd34f6+UnoI2UB670cfbN9TUcQP8Hyeum7vLxbx4YH1vYAA47OHsFK02YTPsBB7f7mMj4+1VINHt3lgwDEbhlAqYNj/wOhcQ2TM/3XmrCUdhdH2dMpT8jG+Zx+qjVpH4dvbWBSbrmtzt8EYqutPq6Kjgs3n0BNqqRG2NnAeD1fl3JdVQcPRX63yqiCYp1HkrNr7qp6ewvhJMEzIMD0/69xUlDKgdjpiEIIoTrxP67UZfxjqIZS+bf8AnxEpx6W8XhUAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;architexa 05&quot; title=&quot;architexa_05&quot; src=&quot;/static/9fcdf7869d8741717c835645f26ba350/dbb61/architexa_05.png&quot; srcset=&quot;/static/9fcdf7869d8741717c835645f26ba350/19bd1/architexa_05.png 163w,
/static/9fcdf7869d8741717c835645f26ba350/d3bcb/architexa_05.png 325w,
/static/9fcdf7869d8741717c835645f26ba350/dbb61/architexa_05.png 650w,
/static/9fcdf7869d8741717c835645f26ba350/98e90/architexa_05.png 946w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Finally, in the layered diagram I have added some classes to see its dependencies. Easily we can see the classes and the packages they belong to.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;./images/2012/09/architexa_03.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 575px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 60.69565217391304%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7klEQVQoz3WSC2+iQBDH+f5f4xLvFCsgL5XXAlZpK1cBreejqMDy8EEx1sNqc3drvTZpTCe/bP47mf/MZrLY3y9iv8+fn7ebzeZ4fP2qBsu2ebLIfT+L41PpR6Rpul6tV6t1lmWbi0DJPM+xabDo3IcqGBjGJIReFPonoiCOYZLAOA6iyP+ffCMMUSYMggC1wJ7SvecfYPzHh0cPHrzg4MNXb/Y0m2bD0Xru5TA8BvBwBoYHCPMwXCZJvN1usTh+Gf4czrvm3La8M47t3sgP7ZYJdLdruZZ9Zmpbg07PNLPxBE320cux5WLfbwNdBaCuCqwgMA2BqYusbPC4LX7rKz/68vczA6XQ0+jb2/jxMYIwQKtA5henpTfqMk8rDCkwZANBk1KTI2ypeC+Wuu+gq63yd3fJZ3Nbl5Vmg9U5WuaqEsdoOk/15IIlFRH224lwlKKjXZh7LR00ZJlXBFYUWVFgpesa66ikDShHpSyFdABlg6qj4I7GfTKv0GTjWgQ3NKVTJKiSgCTkypWE42KlopTLEklqiFJZ0bjqQ5PrdBLXfTcnyd5UtRqjVK8EAq+R5TqB8yeB14gShzRNiEgUC1WZLJsSaxjx5GPbafp7PPTdoTsdzy6YnxhNkZ6N5+5oNvrlTSbLKFqi77fb7f4BuOlcu0SjqZIAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;architexa 03&quot; title=&quot;architexa_03&quot; src=&quot;/static/a40683bf1d0a767bed82b704b0ecf7f2/2cbf8/architexa_03.png&quot; srcset=&quot;/static/a40683bf1d0a767bed82b704b0ecf7f2/19bd1/architexa_03.png 163w,
/static/a40683bf1d0a767bed82b704b0ecf7f2/d3bcb/architexa_03.png 325w,
/static/a40683bf1d0a767bed82b704b0ecf7f2/2cbf8/architexa_03.png 575w&quot; sizes=&quot;(max-width: 575px) 100vw, 575px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In addition, on any diagram you can select a class or method and navigate directly to the source code to see the corresponding lines of code.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;As I commented previously Architexa is a tool with a great potential. It can help team members to understand better how code works or documenting processes.&lt;/p&gt;
&lt;p&gt;As a future features I would like to suggest its integration with the&amp;#xA0;debugger. First the possibility to highlight the current executed method on the class or sequence diagram. Second, the possibility to allow to create a diagram step by step while&amp;#xA0;debugging, that is, selecting which methods or classes we want to add to the sequence diagram while advancing step by step in the code.&lt;/p&gt;
&lt;p&gt;Congratulations to the Architexa team for their product !!!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Creating static maps in OpenLayers using PhantomJS]]></title><description><![CDATA[Many times in a web mapping application it is desired to save a picture with the current map information.Those who works with Google Maps API has also the <a href="https://developers.google.com/maps/documentation/staticmaps/" Static Maps API, which works similarly than Google Maps but produces static images. if (system.args.length < 4 || system.args.length > 6) {
    console.log('Usage: rasterize_element.js URL filename selector paperwidth*paperheight|paperformat zoom');
    console.log('  paper (pdf output) examples: "5in7.5in", "10cm20cm", "A4", "Letter"');
    phantom.exit(1);
} else {
    address = system.args1;
    output = system.args2;
    selector = system.args3;
    page.viewportSize = { width: 600, height: 600 };
    if (system.args.length > 3 && system.args2.substr(-4) === ".pdf") {
        size = system.args3.split('*');
        page.paperSize = size.length === 2 ? { width: size0, height: size1, margin: '0px' }
                                           : { format: system.args3, orientation: 'portrait', margin: '1cm' };
    }
    if (system.args.length > 4) {
        page.zoomFactor = system.args4;
    }
	console.log("Loading page...");
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
        } else {
            window.setTimeout(function () {
                console.log("Getting element clipRect...");
                var clipRect = page.evaluate(function (s) {
	                var cr = document.querySelector(s).getBoundingClientRect();
	                return cr;
                }, selector); }]]></description><link>https://www.acuriousanimal.com/blog/2012/09/17/creating-static-maps-in-openlayers-using-phantomjs</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/17/creating-static-maps-in-openlayers-using-phantomjs</guid><pubDate>Mon, 17 Sep 2012 15:30:00 GMT</pubDate><content:encoded>&lt;p&gt;Many times in a web mapping application it is desired to save a picture with the current map information.Those who works with Google Maps API has also the &amp;#x3C;a href=&quot;&lt;a href=&quot;https://developers.google.com/maps/documentation/staticmaps/&quot;&gt;https://developers.google.com/maps/documentation/staticmaps/&lt;/a&gt;&quot;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Static Maps API&lt;/a&gt;, which works similarly than Google Maps but produces static images.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, next call:&lt;/p&gt;
&lt;pre class=&quot;lang:default decode:true&quot;&gt;http://maps.googleapis.com/maps/api/staticmap?center=Brooklyn+Bridge,New+York,NY&amp;amp;zoom=13&amp;amp;size=600x300&amp;amp;maptype=roadmap
&amp;amp;markers=color:blue%7Clabel:S%7C40.702147,-74.015794&amp;amp;markers=color:green%7Clabel:G%7C40.711614,-74.012318
&amp;amp;markers=color:red%7Ccolor:red%7Clabel:C%7C40.718217,-73.998284&amp;amp;sensor=false&lt;/pre&gt;
&lt;p&gt;produces the image:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACCElEQVQozw3O6XKaQAAAYN7/JTrTaX90NCqhHomxVlOVY1nkWGBZYC8Ojda0SVqNE0P7PcGnlDymiUcyptnHHrxcO+9t81iR/ka6xVqvciQ44jmquY+c6Rfjre88MpYQYnAeK5zhlCaSEQ3+UZ3Llf0+W7MdW0mZiMlAhDZnMU3DmpkG0D+bTUDIVgRh/oOGfaWgwUZizsKWdbyG5y5sdNjy3I7kGePxdsMYDbjM92I1B8kAPhe5W8psE0028UQxEF/69N6vu3bTg/9XFwiuAFAzb4TB10qgMrNkcBvBsQZfPVJXAtf4fov6ZcGUJdFW8UwFbhccevA8hDseTwtBd2SK5x9vFvHI2mrGoWWcWubZT/imxCUaF7nHGVL0VGtbT134V3VOqvPWMXczy6L+t/kSXOlP06VhowwlVA9KzXiMMd4yWIZ3hSCc+krX3ozArqc/qvCsri8qOExMb6SzL1aj2jXz2lv44Sfu03QN/DQlOHemLDYlw5XESgdcRs6vHngdrI/a+tJxGs3YXzunNmyAvRCJnuGVRJMi7HN3INyhbd0nCSpYVIpIUe2XDmyG3nkR1C3rMvP2fkTU1V5zTgKNq9yRHDMSErxI0+8Z0vfS5rlPE78qImUEt5r9cucehs7zEP5+kCgi4tMtdbF8wGOReTyPJY3yzOUiSLFnLieL+Y1jLWw4/Qc7k/FUUs3JEQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;staticmap&quot; title=&quot;staticmap&quot; src=&quot;/static/5c6905da9ced05657e71db71d19939ba/34e8a/staticmap.png&quot; srcset=&quot;/static/5c6905da9ced05657e71db71d19939ba/19bd1/staticmap.png 163w,
/static/5c6905da9ced05657e71db71d19939ba/d3bcb/staticmap.png 325w,
/static/5c6905da9ced05657e71db71d19939ba/34e8a/staticmap.png 600w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Unfortunately, using libraries other than Google Maps, like OpenLayers or Leaflet, there is no similar solution. Probably the best, simple and powerful one, is to install a plugin on your browser to take screenshots. But well.. I think that does not deserve to write a post :p&lt;/p&gt;
&lt;h2&gt;How to render a web page element to an image?&lt;/h2&gt;
&lt;p&gt;After writing my last post (&lt;a title=&quot;Taking web page screenshots&quot; href=&quot;//2012/09/15/taking-web-page-screenshots&quot;&gt;Taking Web Page Screenshots&lt;/a&gt;), where I show to to take a screenshot of a whole page, I was thinking on using PhantomJS to render only a portion of a page to an image.&lt;/p&gt;
&lt;p&gt;The PhantomJS&amp;apos;s &lt;code&gt;WebPage&lt;/code&gt; object has a &lt;code&gt;clipRect&lt;/code&gt; property which determines the portion of the web page that must be rendered. With this in mind we can see a solution could be:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Get the bounding rectangle of the desired DOM element to be rasterized.&lt;/li&gt;
&lt;li&gt;Set the &lt;code&gt;clipRect&lt;/code&gt; property&lt;/li&gt;
&lt;li&gt;Render the page to a file.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For that purpose I have prepared a little JavaScript application to run with PhantomJS. Its usage is as follows:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;./bin/phantomjs ./examples/rasterize_element.js URL output_file selector&lt;/pre&gt;
&lt;p&gt;For example, the next execution against the demo of &lt;a title=&quot;Animated marker cluster strategy for OpenLayers&quot; href=&quot;//2012/08/19/animated-marker-cluster-strategy-for-openlayers&quot;&gt;Animated Cluster Strategy for OpenLayers&lt;/a&gt; selecting the first map:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;./bin/phantomjs ./examples/rasterize_element.js http://www.acuriousanimal.com/AnimatedCluster map.png &amp;apos;#map1&amp;apos;&lt;/pre&gt;
&lt;p&gt;Produces the image:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2012/09/map.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 36.23188405797102%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA+wAAAQ6wGnS/xvAAABvklEQVQozw2PW3PSUBSF+f9vfXVQR2udtnZaKaGl5aYNyKUhnJwQwjVcEggJCUUUXz/P25o9a639rUzTdvCCIet4SrjdILwhP0dtRqsp0u/w5OhovQGlkYkfWUy2NsvYZxXbpOmOMJmxSzz2qU+0XZBpuCZBPGGXevR9k9a4hzlXBbakKE00q02rrzGzqiTGew79K45+hTgZcQh10shgv4+I0jGTpUumNrRZ+S77ZMpSfU/ml+w3BmUp0UzBfc+haz1xyp/x9qJxqN9zHJwRRIJt2CZd67ytivwJisz8NpmiPcZyHzn4d4SbEeFa4vQ/UO6ZPFoGuX4TYRZIS1kS7SOb1xrBvMnv+QPhssFmt+BtU2br5XDH12QqjqOCkmBWIJ7dYLtFDPucguySF101u0M4fMYPWkwmr5wqXzn9uGHh1ZT+zGEk+ee8YA5eaYtLMtXBgFxXBR2XeeWOQM8ylVfo9RdypkPPuefUvOBUOufYUbp+q3y3PPU7ePYn7EaJ8HuWZyn4JqQqVISampcXgsovXZku+CuviSpfeBh0eBQGddFgbb5jL+rEhk5N1ilbgqps0lIQC0Vcnhrq3uI/+zvhbk8D2m4AAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;map&quot; title=&quot;map&quot; src=&quot;/static/1298dd89e4cf00985df32f8681b383b6/dbb61/map.png&quot; srcset=&quot;/static/1298dd89e4cf00985df32f8681b383b6/19bd1/map.png 163w,
/static/1298dd89e4cf00985df32f8681b383b6/d3bcb/map.png 325w,
/static/1298dd89e4cf00985df32f8681b383b6/dbb61/map.png 650w,
/static/1298dd89e4cf00985df32f8681b383b6/7e0ae/map.png 828w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Next is the whole code of the program (called &lt;code&gt;rasterize_element.js&lt;/code&gt; and based on the &lt;code&gt;rasterize.js&lt;/code&gt; application attached on the PhantomJS package):&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Note: The code is accesible at &lt;a href=&quot;https://gist.github.com/3732624&quot;&gt;GitHub:Gist&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;pre class=&quot;lang:js decode:true prettyprint &quot;&gt;var page = require(&amp;apos;webpage&amp;apos;).create(),
    system = require(&amp;apos;system&amp;apos;),
    address, output, size;&lt;/pre&gt;
&lt;p&gt;if (system.args.length &amp;#x3C; 4 || system.args.length &gt; 6) {
console.log(&apos;Usage: rasterize_element.js URL filename selector [paperwidth*paperheight|paperformat] [zoom]&apos;);
console.log(&apos;  paper (pdf output) examples: &quot;5in&lt;em&gt;7.5in&quot;, &quot;10cm&lt;/em&gt;20cm&quot;, &quot;A4&quot;, &quot;Letter&quot;&apos;);
phantom.exit(1);
} else {
address = system.args[1];
output = system.args[2];
selector = system.args[3];
page.viewportSize = { width: 600, height: 600 };
if (system.args.length &gt; 3 &amp;#x26;&amp;#x26; system.args[2].substr(-4) === &quot;.pdf&quot;) {
size = system.args[3].split(&apos;*&apos;);
page.paperSize = size.length === 2 ? { width: size[0], height: size[1], margin: &apos;0px&apos; }
: { format: system.args[3], orientation: &apos;portrait&apos;, margin: &apos;1cm&apos; };
}
if (system.args.length &gt; 4) {
page.zoomFactor = system.args[4];
}
console.log(&quot;Loading page...&quot;);
page.open(address, function (status) {
if (status !== &apos;success&apos;) {
console.log(&apos;Unable to load the address!&apos;);
} else {
window.setTimeout(function () {
console.log(&quot;Getting element clipRect...&quot;);
var clipRect = page.evaluate(function (s) {
var cr = document.querySelector(s).getBoundingClientRect();
return cr;
}, selector);&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;            page.clipRect = {
                top:    clipRect.top,
                left:   clipRect.left,
                width:  clipRect.width,
                height: clipRect.height
            };
            console.log(&amp;quot;Rendering to file...&amp;quot;);
            page.render(output);
            phantom.exit();
        }, 200);
    }
});&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;Alternatives and references&lt;/h2&gt;
&lt;p&gt;Of course I&apos;m not the first one that has explore this issue. A nice &lt;a href=&quot;https://gist.github.com/1501173&quot;&gt;snippet&lt;/a&gt;Â from &lt;a href=&quot;https://github.com/n1k0&quot;&gt;n1k0&lt;/a&gt; can be found at &lt;a href=&quot;https://gist.github.com/&quot;&gt;GitHub:Gist&lt;/a&gt;. It does more or less the same as the code shown in this post.&lt;/p&gt;
&lt;p&gt;Another alternative is the use of &lt;a href=&quot;http://casperjs.org/&quot;&gt;CasperJS&lt;/a&gt;. As its home page says:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;CasperJS is an open sourceÂ &lt;strong&gt;navigation scripting &amp;amp; testing utility&lt;/strong&gt;Â written in Javascript and based onÂ &lt;a href=&quot;http://www.phantomjs.org/&quot;&gt;PhantomJS&lt;/a&gt;Â â€” the scriptable headlessÂ &lt;a href=&quot;http://www.webkit.org/&quot;&gt;WebKit&lt;/a&gt;Â engine. It eases the process ofÂ &lt;strong&gt;defining a full navigation scenario&lt;/strong&gt;Â and provides usefulÂ &lt;strong&gt;high-level functions, methods &amp;amp; syntactic sugar&lt;/strong&gt;Â for doing common tasks such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;defining &amp;amp; ordering browsingÂ &lt;a href=&quot;http://casperjs.org/quickstart.html&quot;&gt;navigation steps&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;filling &amp;amp; submittingÂ &lt;a href=&quot;http://casperjs.org/api.html#casper.fill&quot;&gt;forms&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://casperjs.org/api.html#casper.click&quot;&gt;clicking&lt;/a&gt;Â &amp;amp; following links&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;capturingÂ &lt;a href=&quot;http://casperjs.org/api.html#casper.captureSelector&quot;&gt;screenshots&lt;/a&gt;Â of a page (or part of it)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://casperjs.org/api.html#tester&quot;&gt;testing&lt;/a&gt;Â remote DOM&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://casperjs.org/logging.html&quot;&gt;logging&lt;/a&gt;Â events&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://casperjs.org/api.html#casper.download&quot;&gt;downloading&lt;/a&gt;Â resources, including binary ones&lt;/li&gt;
&lt;li&gt;writingÂ &lt;a href=&quot;http://casperjs.org/testing.html&quot;&gt;functional test suites&lt;/a&gt;, saving results as JUnit XML&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/n1k0/casperjs/blob/master/samples/&quot;&gt;scraping&lt;/a&gt;Â Web contents&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;With CasperJS capturing a page element is as easy as:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;casper.start(&apos;http://www.weather.com/&apos;, function() {
    this.captureSelector(&apos;weather.png&apos;, &apos;.twc-story-block&apos;);
});
casper.run();&lt;/pre&gt;</content:encoded></item><item><title><![CDATA[Taking web page screenshots]]></title><description><![CDATA[Recently I have worked on system that requires to take web page screenshots. Not only a screenshot of the whole page but of a concrete element. Looking on the net I have found many solutions for this problems, which can be classified in to categories: if (system.args.length < 3 || system.args.length > 5) {
    console.log('Usage: rasterize.js URL filename paperwidth*paperheight|paperformat zoom');
    console.log('  paper (pdf output) examples: "5in7.5in", "10cm20cm", "A4", "Letter"');
    phantom.exit(1);
} else {
    address = system.args1;
    output = system.args2;
    page.viewportSize = { width: 600, height: 600 };
    if (system.args.length > 3 && system.args2.substr(-4) === ".pdf") {
        size = system.args3.split('*');
        page.paperSize = size.length === 2 ? { width: size0, height: size1, margin: '0px' }
                                           : { format: system.args3, orientation: 'portrait', margin: '1cm' };
    }
    if (system.args.length > 4) {
        page.zoomFactor = system.args4;
    }
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
        } else {
            window.setTimeout(function () {
                page.render(output);
                phantom.exit();
            }, 200);
        }
    });
}]]></description><link>https://www.acuriousanimal.com/blog/2012/09/15/taking-web-page-screenshots</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/15/taking-web-page-screenshots</guid><pubDate>Sat, 15 Sep 2012 14:12:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I have worked on system that requires to take web page screenshots. Not only a screenshot of the whole page but of a concrete element.&lt;/p&gt;
&lt;p&gt;Looking on the net I have found many solutions for this problems, which can be classified in to categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Local applications&lt;/em&gt;: I mean a screen capture program or a plugin for your browser (both Chrome and FireFox has some nice plugins for this).&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Online services&lt;/em&gt;: There are some online services that offers possibility to get a screenshots (like &lt;a href=&quot;http://url2png.com/&quot;&gt;url2png&lt;/a&gt;), test your web site on different browsers (like &lt;a href=&quot;http://browsershots.org/&quot;&gt;browsershots&lt;/a&gt;&amp;#xA0;or &lt;a href=&quot;https://browserling.com/&quot;&gt;browserling&lt;/a&gt;) or even an API to automatize the task to capture a web page (like &lt;a href=&quot;http://www.thumbalizr.com/&quot;&gt;thumbalizer&lt;/a&gt; or &lt;a href=&quot;http://url2png.com/&quot;&gt;url2png&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;The solution&lt;/h2&gt;
&lt;p&gt;There are alternatives but I like to go beyond the easy solutions and try things, so, after looking a bit more I found a powerful solution:&amp;#xA0;&lt;a href=&quot;http://phantomjs.org/&quot;&gt;PhantomJS&lt;/a&gt;.&lt;a style=&quot;color: #ff4b33; line-height: 24px;&quot; href=&quot;./images/2012/09/phantomjs-logo.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 240px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 33.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABcklEQVQY002QW0sCURSFz1hmEJFgoVNZKZrQhQpK53pmzmXGsKL+SC8iCD2WhNpFC7sgRaHUk0VURDcIIqK3Hnrr17S1kGCx+Diss9l7IYsTU5VMaYYzwilmBFOKKalDU5T8vdB/zIiOxoeD4uiId2oyEvBjXYH/HCvcUBk1KIjV/Zfrzkxm6hZWuaHBCNQ1PS1cP6Hn947FpXC/SDlR5hPyfIJh1VZithLlqsR0BcACSTMGBBbmtMQsTEEdyTT6/EYfX86D4z5351Tcbr1/ER5eu7d2fZlc71rWUyp7CqXe1XVfbtu3UezJF1tunwKpdFyOIle+iN4+0eOb4+JOHPRPxOOebMGd2UTVK3R+I1Qu28pnzsOKUL10nNaE05pr76S9UB5IrcAuyLmcdOwcOPaPUL44FItSrBnEwATuZg1RjREAOFGjpsKobHPZtqAuDmuPhYNicMg7HA5FQoYc5VAM0aFMbmpWQxBqeB2aDBko7AfyBHkZTGFepwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;phantomjs logo&quot; title=&quot;phantomjs-logo&quot; src=&quot;/static/7bb0a01d4a086e21ec464038298d31ed/0783d/phantomjs-logo.png&quot; srcset=&quot;/static/7bb0a01d4a086e21ec464038298d31ed/19bd1/phantomjs-logo.png 163w,
/static/7bb0a01d4a086e21ec464038298d31ed/0783d/phantomjs-logo.png 240w&quot; sizes=&quot;(max-width: 240px) 100vw, 240px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Oh,&amp;#xA0;wonderful, but.. what is PhantomJS and what is it good for?&lt;/p&gt;
&lt;p&gt;As the project page says:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;PhantomJS is a headless WebKit with JavaScript API. It has&amp;#xA0;&lt;strong&gt;fast&lt;/strong&gt;&amp;#xA0;and&amp;#xA0;&lt;strong&gt;native&lt;/strong&gt;&amp;#xA0;support for various web standards: DOM handling, CSS selector, JSON, Canvas, and SVG.&lt;br&gt;
PhantomJS is created by&amp;#xA0;&lt;a href=&quot;http://twitter.com/AriyaHidayat&quot;&gt;Ariya Hidayat&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This means you have all the powerful of a WebKit based browser within a program, so you can use it for: headless website testing, site scraping, page rendering, network monitoring, ...&lt;/p&gt;
&lt;h2&gt;How to use PhantomJS to take a web page screenshot?&lt;/h2&gt;
&lt;p&gt;Go to the &lt;a href=&quot;http://phantomjs.org/download.html&quot;&gt;project page&lt;/a&gt; and download the binary package . In my case I download the Linux 64-bit system.&lt;/p&gt;
&lt;p&gt;PhantomJS is a command line tool and, once&amp;#xA0;and&amp;#xA0;uncompressed the previous package, you will find it in the &lt;code&gt;bin/phantomjs&lt;/code&gt;. As a command tool the usage looks like:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;./phantomjs [options] script.[js|coffee] [script argument [script argument ...]]&lt;/pre&gt;
&lt;p&gt;You can get more usage information with: &lt;code&gt;./phantomjs --help&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;PhantomJS accepts programs coded in JavaScript or CoffeeScript and, hopefully, the package comes with a &lt;code&gt;examples&lt;/code&gt; folder which is full of examples in both languages.&lt;/p&gt;
&lt;p&gt;One of the sample programs is the rasterize.[js|coffee] which shows how we can rasterize a web page to an image file.&lt;br&gt;
The program usage is:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;./phantomjs rasterize.js URL filename [paperwidth*paperheight|paperformat] [zoom]&lt;/pre&gt;
&lt;p&gt;And the whole program code is:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var page = require(&amp;apos;webpage&amp;apos;).create(),
    system = require(&amp;apos;system&amp;apos;),
    address, output, size;&lt;/pre&gt;
&lt;p&gt;if (system.args.length &amp;#x3C; 3 || system.args.length &gt; 5) {
console.log(&apos;Usage: rasterize.js URL filename [paperwidth*paperheight|paperformat] [zoom]&apos;);
console.log(&apos;  paper (pdf output) examples: &quot;5in&lt;em&gt;7.5in&quot;, &quot;10cm&lt;/em&gt;20cm&quot;, &quot;A4&quot;, &quot;Letter&quot;&apos;);
phantom.exit(1);
} else {
address = system.args[1];
output = system.args[2];
page.viewportSize = { width: 600, height: 600 };
if (system.args.length &gt; 3 &amp;#x26;&amp;#x26; system.args[2].substr(-4) === &quot;.pdf&quot;) {
size = system.args[3].split(&apos;*&apos;);
page.paperSize = size.length === 2 ? { width: size[0], height: size[1], margin: &apos;0px&apos; }
: { format: system.args[3], orientation: &apos;portrait&apos;, margin: &apos;1cm&apos; };
}
if (system.args.length &gt; 4) {
page.zoomFactor = system.args[4];
}
page.open(address, function (status) {
if (status !== &apos;success&apos;) {
console.log(&apos;Unable to load the address!&apos;);
} else {
window.setTimeout(function () {
page.render(output);
phantom.exit();
}, 200);
}
});
}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Probably the most important sentences are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The inclusion of the webpage module:
&lt;pre class=&quot;prettyprint&quot;&gt;var page = require(&amp;apos;webpage&amp;apos;).create();&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Load the web page with &lt;code&gt;open&lt;/code&gt;function:
&lt;pre class=&quot;prettyprint&quot;&gt;page.open(address, function (status) { ...};&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Render the web page to a file with the &lt;code&gt;render&lt;/code&gt;function:
&lt;pre class=&quot;prettyprint&quot;&gt;page.render(output);&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note also in the rasterize.js source code the &lt;code&gt;page.viewportSize&lt;/code&gt; is defined to be &lt;code&gt;600x600&lt;/code&gt; which is equivalent as we where navigating a page with a screen resolution of &lt;code&gt;600x600&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Lets to to see a sample and take a screenshot of this blog site:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;./bin/phantomjs ./examples/rasterize.js http://acuriousanimal.com/blog acanimal_blog.png&lt;/pre&gt;
&lt;p&gt;This makes a screenshot of the whole blog site. Here I attached a modified version of the&amp;#xA0;image with lot less resolution of the original, but you can get an idea of the powerful of PhantomJS.:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 164px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 280.4878048780488%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA4CAYAAAD959hAAAAACXBIWXMAAA+wAAAQ6wGnS/xvAAAHiklEQVRYw7VXSWiU2Rb+HdrpqSi4ERS1wUX3W+lKQRRdCArivPBpko1LV4obQRQV2yTaLkRQxHnEEQec5ykiPtrY6XSSylSpef5rTKUyfH2+U3WrK3aM7aPfD4dz77n3nnume875LXzj19fX1w9//lnNzc148+YNXr9+rfD8+XO8ePECHz58QENDA169eoVHjx7h3bt3aG9vH5SZMty8eTMIGzduxIoVK7B8+XKsWbMGu3btQkVFBebPn4+ZM2diyZIlOHDggB7q7e39soQ1NTV4+fIlnj17hocPH+LOnTu4d++eSvXgwQMdE7hODXp6eopSDgRWR0cHqHY8HtfN3d3dxQNdXV3famJY27dvV7Vu3bqlhFwupyoZtXgJabyIYNYGApXQTHjQgDlMMPNS+mBMLfzDn8XQqK2tVXA4HPj06ROamprUrrRvIBBAW1ubjrm3vr4e2WxW1TNq9nPK6dOnsW3bNmzduhV79uzB4cOHUV1djd27d+PkyZO4fPkyDh48iHPnzmHfvn3YsmULbNseMNhVQobDsWPHcOTIEZw5cwbXrl3D0aNHcejQIQ2j8+fP4/jx47h//z6uXr2qoXPz5k3cvn1bL2ttbe0Xm9aVK1dw4sQJXLhwQQ/xMKUk0/fv3+PUqVOoqqrC48ePcfHiRdTV1ekl3HP27FnEYrF+cWldv35dX8WmTZuwY8cOZc5LyJBBThUZNl9730WGdAbf7927d1VFvpyamrf6euiYGzduiM1iRbVKGZh5Py+n02l9JclkEhynUikkBYij0aiu+fx++Hw+RCIR+GUcDAYVc50qh0IheDwejVUrHA7D6/XCJ9Du8qDdH0eTx0aLJwqvzw+HK4TfnBG4/SEEA349yLAxAV76mlTCzs5OlYbSUbJozEZYJInZcQFbcSQaE2liSCQSCgwbSkbpiTknZDIZWLyRtmKuc7lcihkKpHPOgHYJkM6xzoVOrUhzOp1wu906prYWb+EiJwMZeZBcOmBOtKgu1abKRnQCDW6cYsa8lECncM6zXDcmUAmNuM0tLaqas8MFh9MvarnRIjSnM68i37nD0aw0moTvm3R6mzx4CYWymETzt8SFkHdOXAxvbuc8k2Fo2YiLJAmhGccw1Hie54oq85WsXbtW6kc5/rN+A9ZvKP8TygQKtA1leVhfVoGysjKUS70pLy+XMekVWLFyJZisrR9+/Dcsy/pH4PvvZ8C6LO/2p32VUtF+xn5JW1VVlZoM8lCpqaxaaTIWWnVhvbKyUoFjntu7dy8uXbr0f8jYTFtMpryBCVQlEuDt1SpxVRE4379/f3Fs1nmOvmASthYtWqT6jxw58m/ZaejQoV9cmz17Nqxly5Zh/PjxmDp1KiZMmKCMx44dizFjxuBfo0ZixHffYdSoUZg4caKuE7g+btw4jBgxAsOGDVNMhgsWLIC1ePFiDB8+vLiRzAeTbMiQIV+UcM6cObA+fvyozRETKhsjYtOaPBf6kydP8PTpU8WlwJJAzORM4B4ma4tRX5qCzLtk0uRLYK4r7Qw+7xQIJjeql/kWzbsk5rsm8H2SZhLD14DZnMJZ69atw+TJkzFjxgxMnz69CNOmTVNMZxmYMmWKghkbOvdOmjQJq1atgrVw4UI16OjRo9Vb9C49zTGdRLqBr4XU3LlzYc2bN08ndL9ZMDE5WMwNBLNmzYK1c+dOMBZXr16tIq+UrEEwc2IDZs4O93NYunSptjSWKaH0EquZ8SALDr3HbJ4o5EdWNu7lmOvEjArTpKqX2V2x0DBUmCx5iJgHiE154JwXmrGhkyn3mXKqhd6URN5msjQlMUAJzZhMuU8bgsKc2HRkFmPNlE1TK4hNOSU0NjZqTWEJNXvy9cap+9hPcp3xqHWZRLYaxTpcwIZxvkDlGZKRqd88w4fhL7QqlNKiuKZUEhswRYjqsjzyJZg5TcT9AzZLpXXVvGHzlAJSGonj8YQ2TCyV3B/RddbpEPzS74SCoeL/i5VvdPLdPQqeyrduxNIZ9FEKgR7Zo38JhTm6dZlDnjVdRL+aEpXam5UQqGvyibQpvHVF0BFN4pdgGi12FjkJla5cVhr5NDqcXQilO2Bnov072O7uHr25V8Dp9cAW9d7XtonqNp44PHD4o3jnjqE+KMGdYEglxbsxNDsycMbq4Y05+zP0hlLwh9PoFYl7U3Ko0K3+L7+8qnJraxsCYnB2YF6RkLbLb5BkWvoPkj9agIJ51ZZ9/Rhb7FzdEoserzRIbi+y4qCcGD6b61Ho6u4t4Dzkuv9c49jQeo1TAnYn6lwJtInh/XYXnMEkfNEM3OEU2gJJeKPiADFLszeuY0KrP6Fz0rnfIeNMNp8grCZ3FG9/D+B3VwxBOwO/MIsksvDHMgjGOxEQHBB6WMaeSBrhRKeYpe+LtrT84Th+67DRIAz/2xzGx9aIzGN42xBAbZuMxaNkFk9LmAhOZHJF9T7/R1EJfRIev7bHtPP/RZg1um1VgcwaZNziy6vXKOvtgbx6VNWWC2jHv/z4dGZzcnsOqc6cSpEWW6QEeIB0SkS6nerScbIzvz+azJYwLHnLA1jiWyLwL7+3fwBlJ3hsYpu8KQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;acanimal blog little&quot; title=&quot;acanimal_blog_little&quot; src=&quot;/static/6bbd03c7dee5159730885f3af8f517c5/63ea9/acanimal_blog_little.png&quot; srcset=&quot;/static/6bbd03c7dee5159730885f3af8f517c5/19bd1/acanimal_blog_little.png 163w,
/static/6bbd03c7dee5159730885f3af8f517c5/63ea9/acanimal_blog_little.png 164w&quot; sizes=&quot;(max-width: 164px) 100vw, 164px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div&gt;
&lt;/div&gt;</content:encoded></item><item><title><![CDATA[PhoneGap on iOS: an stupid advertisement using the "create" command line tool]]></title><description><![CDATA[Some days ago I start my first mobile application. Nothing awesome, it is a simply excuse to test jQuery Mobile and PhoneGap frameworks. This post is not oriented to describe my impressions, that would be another day, but describe an stupid headache I have when trying to install the PhoneGap framework in my MacOSX.]]></description><link>https://www.acuriousanimal.com/blog/2012/09/11/phonegap-on-ios-an-stupid-advertisement-using-the-create-command-line-tool</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/11/phonegap-on-ios-an-stupid-advertisement-using-the-create-command-line-tool</guid><pubDate>Tue, 11 Sep 2012 14:20:00 GMT</pubDate><content:encoded>&lt;p&gt;Some days ago I start my first mobile application. Nothing awesome, it is a simply excuse to test &lt;a href=&quot;http://jquerymobile.com/&quot;&gt;jQuery Mobile &lt;/a&gt;and &lt;a href=&quot;http://phonegap.com/&quot;&gt;PhoneGap&lt;/a&gt; frameworks.&lt;/p&gt;
&lt;p&gt;This post is not oriented to describe my impressions, that would be another day, but describe an stupid headache I have when trying to install the PhoneGap framework in my MacOSX.&lt;/p&gt;
&lt;p&gt;Lets go. IÂ have coded my application like a normal web application, then I have follow the steps described &lt;a href=&quot;http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS&quot;&gt;here&lt;/a&gt;Â to install the PhoneGap with XCode. All right, now is the moment to set up my project with the &lt;code&gt;create&lt;/code&gt; command line tool and... wait !!!&lt;/p&gt;
&lt;pre class=&quot;prettyprint lang-bsh&quot;&gt;./create ~/Documents/Personal\ Projects/Viendo com.acanimal.Viendo Viendo&lt;/pre&gt;
&lt;p&gt;and the result is:&lt;/p&gt;
&lt;pre class=&quot;prettyprint lang-bsh&quot;&gt;usage: cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] source_file target_file
cp [-R [-H | -L | -P]] [-fi | -n] [-apvX] source_file ... target_directory&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;create&lt;/code&gt; tool is a simple bash script that copies the content from &lt;code&gt;template/project&lt;/code&gt; to the specified destination, see:&lt;/p&gt;
&lt;pre class=&quot;prettyprint lang-bsh&quot;&gt;
...
# copy the files in; then modify them
cp -R $BINDIR/templates/project $PROJECT_PATH
...
&lt;/pre&gt;
&lt;p&gt;where &lt;code&gt;$PROJECT_PATH&lt;/code&gt; points to the destination folder we have specified previously.&lt;/p&gt;
&lt;p&gt;I tried to escape the command, add double quotes, etc without much success and finally my I&apos;m-not-a-hacker-solution has been to change the name of the destination folder to &lt;code&gt;PersonalProjects&lt;/code&gt; (without whitespaces) (Really I don&apos;t remember why I put a whitespace in the name I never use whitespaces in the names).&lt;/p&gt;
&lt;p&gt;If any good command line user arrives here, please send me some alternative. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[AnimatedCluster demo site updated to work with OpenLayers 2.12]]></title><description><![CDATA[Not an awesome post but for any interested in the AnimatedCluster strategy I have updated the demo site to work properly with OpenLayers 2.12.]]></description><link>https://www.acuriousanimal.com/blog/2012/09/06/animatedcluster-demo-site-updated-to-work-with-openlayers-2-12</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/06/animatedcluster-demo-site-updated-to-work-with-openlayers-2-12</guid><pubDate>Thu, 06 Sep 2012 17:50:00 GMT</pubDate><content:encoded>&lt;p&gt;Not an awesome post but for any interested in the &lt;a href=&quot;//2012/08/19/animated-marker-cluster-strategy-for-openlayers.html&quot;&gt;AnimatedCluster strategy&lt;/a&gt; I have updated the demo site to work properly with OpenLayers 2.12.&lt;/p&gt;
&lt;p&gt;In version 2.12 symbolizer are richest than in 2.11 and required to set the&amp;#xA0;&lt;code&gt;labelOutlineWidth&lt;/code&gt; property to some low value to show the labels fine:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var lowRule = new OpenLayers.Rule({
    filter: new OpenLayers.Filter.Comparison({
        type: OpenLayers.Filter.Comparison.LESS_THAN,
        property: &amp;quot;count&amp;quot;,
        value: 15
    }),
    symbolizer: {
        fillColor: colors.low,
        fillOpacity: 0.9,
        strokeColor: colors.low,
        strokeOpacity: 0.5,
        strokeWidth: 12,
        pointRadius: 10,
        label: &amp;quot;${count}&amp;quot;,
        labelOutlineWidth: 1,
        fontColor: &amp;quot;#ffffff&amp;quot;,
        fontOpacity: 0.8,
        fontSize: &amp;quot;12px&amp;quot;
    }
});&lt;/pre&gt;
&lt;p&gt;See in action:&lt;br&gt;
&lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 491px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.951120162932796%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQozzWQ20/acBiG+zfvchdeGHeIS5YsuGTuoMm2bKg4Tm0RgZ4oKqf+Dj1BC7S0HAq0hYIyo0scZi557748ed/vIdypo4/BzfV8sYi8YDoJp8tl2BkNZ0HQ8zx94N6swmDZN8euZPeBbTctq2H14OTSj/pE/kKlRbSMhsaoEQTOKpwNxq6o6VWb5U22JGvz0BX72SRkSma6hKVUE6clSXJr9hATAkJlXF+vxmicn3j2wJcpRRC0rj6UcqpIAowtsyDLJGzQKldASABC3cBBf9jXDgnOvMJjdjWfRuEk8md9v1mzxQvlahVOnNE4h2AGAArCTUigFmBl1n5uoG/rRGyRjxFFVWMVJfAnUej7gTvxB5EHo9azxbgSzty60SYlSP+DIcgjaBr0SPjxO7UXVgsEq6kpSW6b52vrfderqBPOcdtDq7hyj6at7YaGOKjlHmsxDVAKq82K+BB/dU19XPCnj3BSknWTuRt8mrqK54zmgTcLloopNsA+CaXHzUCm9TypFRgsh+qBw+4Pya/38ZcbWMtIzYJqDN3GjbkVOtyt87ZnMTwuedpWCfJZKFMA0QpHqiIPm1H3xdQTZFNT6+cEo2kkABmASvjStxMdu6mgPagINbShPlOoSUJEQZAFcg7IRqsXdHBkacBnrYX52JwFYKMkI8GSbvdANUzsWSLntbZ1fMxAg0Qb21Ie6rpyuGrt3qVj9+SHqHa25n8+wZvHaACSCF0K1O3JG4d753RPRrXiMv76is2mN86AUsUZSz+es6k5932d2/8T3yFYXacQojF+iiyfSdBtxa4HB0uVf0juGlWaNMs5DLJIo2STaemeuRMZXxbdDsFAeMxxvwTh9H+OyhW+WjXAWU96YYKi3lZKavy0zGxOCYE/4YVi+bBWzeGG8RceAHQncVcMrQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;anim cluster 212&quot; title=&quot;anim_cluster_212&quot; src=&quot;/static/99b77975e6572caeaaff6c1247689f7a/3bb78/anim_cluster_212.png&quot; srcset=&quot;/static/99b77975e6572caeaaff6c1247689f7a/19bd1/anim_cluster_212.png 163w,
/static/99b77975e6572caeaaff6c1247689f7a/d3bcb/anim_cluster_212.png 325w,
/static/99b77975e6572caeaaff6c1247689f7a/3bb78/anim_cluster_212.png 491w&quot; sizes=&quot;(max-width: 491px) 100vw, 491px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[OpenLayers Cookbook is out !!!]]></title><description><![CDATA[I'm proud to announce it. My first work as author of a technical book sees the light.Â After some months of work (really hard work combined with my day to day job), finally the book is out:]]></description><link>https://www.acuriousanimal.com/blog/2012/09/02/openlayers-cookbook-is-out</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/09/02/openlayers-cookbook-is-out</guid><pubDate>Sun, 02 Sep 2012 11:49:00 GMT</pubDate><content:encoded>&lt;p&gt;I&apos;m proud to announce it. My first work as author of a technical book sees the light.Â After some months of work (really hard work combined with my day to day job), finally the book is out:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;./images/7843OS_OpenLayer%20Cookbook_cov_0.jpg&quot; alt=&quot;OpenLayers Cookbook&quot; width=&quot;125&quot; height=&quot;151&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;NOTE: You can read the first chapter &lt;a href=&quot;http://www.packtpub.com/sites/default/files/9781849517843-Chapter-01.pdf?utm_source=packtpub&amp;amp;utm_medium=free&amp;amp;utm_campaign=pdf&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;The book is a practical book written in a cookbook style. I tried to find and describe the common recipes anybody can use or can need in a day to day work. Of course, the OpenLayers library and JavaScript language are great enough to be described in a single book.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;The recipes level goes from beginner to intermediate users with some touches for advanced users.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;Writing a book can be done by a single man, but the proces to publish one is enough complex to be made by a single person.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;There are lot of persons I need to thank. To the people at &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;Packt Publishing&lt;/a&gt;:Â &lt;em&gt;Usha Iyer&lt;/em&gt;,Â &lt;em&gt;Kedar Bhat&lt;/em&gt;,Â &lt;em&gt;Joel Goveya&lt;/em&gt;, &lt;em&gt;Joyslita Dsouza&lt;/em&gt; andÂ &lt;em&gt;Madhuri Das&lt;/em&gt;Â (sorry if I miss someone). To my awesome reviewers:Â &lt;em&gt;David Burgoon&lt;/em&gt;,Â &lt;em&gt;Mohammad Motamedi&lt;/em&gt; (thanks Mohammad for your great review),Â &lt;em&gt;Jorge Sanz&lt;/em&gt;,Â &lt;em&gt;Srinivas Shanmugam&lt;/em&gt;,Â &lt;em&gt;Davor Zelic&lt;/em&gt; andÂ &lt;em&gt;Richard Zijlstra&lt;/em&gt;. To my own folks who always encourage me and, of course, to my wife who suffers my addiction to computer science. Thanks to all this work has been possible.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;Finally, thanks to all the readers of the book. I hope the book was what they expect from it.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;No doubt to write here asking for help. Thanks to all !!!&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;</content:encoded></item><item><title><![CDATA[Animated marker cluster strategy for OpenLayers]]></title><description><![CDATA[Yes, this posts talks about my implementation of a cluster strategy that animates clusters when changing the zoom level. So, if you are one of those don't like to read the blog posts from others and like the action, you can go directly to see AnimatedCluster demoÂ page. or to the github repository to see the source code.]]></description><link>https://www.acuriousanimal.com/blog/2012/08/19/animated-marker-cluster-strategy-for-openlayers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/08/19/animated-marker-cluster-strategy-for-openlayers</guid><pubDate>Sun, 19 Aug 2012 16:32:00 GMT</pubDate><content:encoded>&lt;p&gt;Yes, this posts talks about my implementation of a &lt;strong&gt;cluster strategy that animates clusters when changing the zoom level&lt;/strong&gt;. So, if you are one of those don&apos;t like to read the blog posts from others and like the action, you can go directly to see &lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster/&quot;&gt;AnimatedCluster demoÂ page&lt;/a&gt;. or to the &lt;a href=&quot;https://github.com/acanimal/AnimatedCluster&quot;&gt;github repository&lt;/a&gt; to see the source code.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Read this post if you want to know how the sample works.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/AnimatedCluster/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 49.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQozx3RW3OaQAAFYP7/9K0PbaftTDOTMWmSxohcNCZABFGQsLss14UIGAQUEEmnTftW0x/wzZlzDgXX2mrz9Fys4ywl60gmi3gLwxyNnOnQtO/8uV+YamTCmIS5va7dvHK7fdE0SbcvqV0d5rVbVr6V+GpkC57+GPq8I9/aMxHNvdBoovPNZtbVXlWTlyrIardtd1lD8iqkHgK1bbb1PnOT+zwerzYpbQIWYA6CCH878J9b5eyv+PEQn6SV3aZXL4XelrArVT0CFAPdzYouyllervZrmvg/JsjjoD60IZnevF68qyTm2Zd3cX+fzZOabItFm/SapK+GIkUDCwQPXXy+ywQnknTwlYE2Y6ljrBXkMnSljdB7uT2t3EXjnXfz/mGbN7Hk+pwGLykWQgZCFMwzpRcYJ4Z1fcQsQDYe/plfl2i8I9rr5DQVLkAg1OrpdimWwtXYdhhrdsTgv7e90VlufThMz+Bdf4CRjkbp7Psv4f1Phd9LlxMEJCSrHrdie6lMTwJTxRx1DDni4zwDyyaR9Nv/sn3iJ752A9yxM/XD607pE00c+4qCHA7a6pLRsCj7pu0MKA4rnKVzENLANjB9SAZZzI+QxSPjHhtLl38VP5HZ7YQsOPDII3OIjYcAF1UQ5h7FWjqLHtk3DBW87FYnMp4O3q6CrAlHTvAks5o0pC3MgreCQxOJRAExCgvjH1OF5PD0P4RZAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;animatedcluest&quot; title=&quot;animatedcluest&quot; src=&quot;/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png&quot; srcset=&quot;/static/793ea5b78fbfa1ed276e1e9096dd9be1/19bd1/animatedcluest.png 163w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/d3bcb/animatedcluest.png 325w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png 600w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Next, you can find a descriptions on how the implementation works. I have tried to be has much OpenLayers compliant as possible, without using any other framework, library or classes outside the OpenLayers and following its design of concepts.&lt;/p&gt;
&lt;p&gt;It is necessary to make a short introduction of concepts about OpenLayers, like vector layers and strategies, so the reader can understand more in depth the implementation.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;NOTE: It was only tested with OpenLayers 2.11 !!!&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;Some background&lt;/h2&gt;
&lt;p&gt;Many time ago (at the end of 2011 year) I saw a great question in stackoverflow about &lt;a href=&quot;http://gis.stackexchange.com/questions/17250/how-to-create-animated-cluster-markers-in-openlayers-leaflet/18594&quot;&gt;How to Create Animated Cluster Markers in OpenLayers/Leaflet?&lt;/a&gt; and, also, a similar one about &lt;a href=&quot;http://stackoverflow.com/questions/6641919/openlayers-nice-marker-clustering&quot;&gt;OpenLayers, nice marker clustering&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Everybody knows &lt;a href=&quot;http://en.wikipedia.org/wiki/A_picture_is_worth_a_thousand_words&quot;&gt;&lt;em&gt;a picture&amp;#xA0;is&amp;#xA0;worth&amp;#xA0;a&amp;#xA0;thousand words&lt;/em&gt;&lt;/a&gt; and when working with data visualization this is not an exception. It is not only important the look but the feel and having a nice animation of features while changing the zoom level is something visually funny and attractive.&lt;/p&gt;
&lt;p&gt;On that days, I was completely busy involved on writing the book&amp;#xA0;&lt;a href=&quot;//2012/06/28/openlayers-cookbook/&quot;&gt;OpenLayers Cookbook&lt;/a&gt;. Initially I think to put hands on and try to implement a solution in OpenLayers, so it can serve as another recipe for the book.&amp;#xA0;Unfortunately, &amp;#xA0;I had no much time to spent in that challenge and I forget it to concentrate writing the book with a bunch of more practical recipes.&lt;/p&gt;
&lt;p&gt;A month ago, Dave Leaver answers in the forum pointing to its &lt;a href=&quot;//2012/08/12/awesome-clustered-markers-in-leaflet/&quot;&gt;awesome clustered marker&lt;/a&gt; implementation for Leaflet, which I must say is terrific.&lt;/p&gt;
&lt;p&gt;Fortunately for the community, the implementation animated cluster for Leaflet was like a kick on my ass, it was what I need to start the challenge :)&lt;/p&gt;
&lt;p&gt;Last&amp;#xA0;week I start working in an implementation for OpenLayers. Spending my few nigh time on it and after some tries and errors, today I&amp;apos;m able to publish the source code and documentation in addition to this post to the masses.&lt;/p&gt;
&lt;h2&gt;A short Vector Layer class description&lt;/h2&gt;
&lt;p&gt;In OpenLayers, when you want to render any feature within a map yo need to previously create a vector layer:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;);&lt;/pre&gt;
&lt;p&gt;Vector layers are one of the most complex and powerful kind of layers within the OpenLayers and because of this there is a great&amp;#xA0;ecosystem&amp;#xA0;of classes related with the vector layers:&lt;/p&gt;
&lt;p&gt;[caption id=&amp;quot;&amp;quot; align=&amp;quot;aligncenter&amp;quot; width=&amp;quot;384&amp;quot;]&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 564px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 77.12765957446808%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADBklEQVQ4y4VUXUiTURg+3779uNZ0hiIMDUEIuxHspktxXQjNLgxjdNOFFQhRtDVQwzsXsbxQklhX60IkRS9SJH9i5lAvFP/d5tyfv3POrQlLEEk7Pec4ZdTCDw7ve96/c973ec5HyF9fW1sboZQKTN/Y2HgTDofdfr//eyAQ+La2tuZYXFz8BBf39/b2kks/u93OCkqYvre39xU6jcViNJlM0sPDQ7q6uvrjvGBnZ+flBePxOLHZbDxhdHT0LpZ1cnLSAtnS39/f0t3dXcd8xcXFxOFwZC4ik8m4zMrKurBptVoFRHamcKlUehGYm5vLpUKhODOgBXFzc1NcWloSE4mEmDpdXVhYeB0zlNXU1OQbDAZNT0+PQqfTaTEBGXzagoICNYvFjEW32y2yOuhCyHRhJZY6ba9K0+VpOou58k/2ysrK/fX19Ue7u7vVg4ODDc3NzdU47VY0Gn06MzNT19fX93J6evr2/Pz8zampKfPIyMgLxBswv1KLxXLP6XSaAJ5+eXn58dDQ0A0SiURCR0dHDD0GKJ2bm3u/vb39gelohaML6fR6vc+YDRSip6enFPT5uLOzY2E2+HguDnxFXC7XZ/AruLCw4PV4PInh4WEzbmMKBoNR2AJIDE9MTNiA9AMU20JHfuREcEMj/M99Pl8c83fhhlsDAwMGkuKUoNFo1EqlMi9tGtdKSkpyioqKJOcxWBLscxjSqRhJeXm5FOxgbBAzAZLX1NQkjI2NseT8dAcQ51IURZVer+doosszFJVKldVqFfgeyQTUENKQk6aWhhmqqqqErq4u8h+kzz/FhSYIAqmvr+d6bW1tTmVlZVlFRUUZOMdaIyaTifva29tlmOdV+EuNRmN2R0eHFK9GNTs7q0Z8aWtrq6qxsfGMRiA0uxEJhUKvgdhPgJME2mZmOz4+5vNCMR2oFQYoIQARHR8ffwi62MGIGEAJ4efhgd1H5HI5mwUviBfzDm+Zgg4USL9ltpOTE94i9nfYTwII/9rf36dA+Qm4+uXg4ICiIEUttn7/ARI3wYzpxS9VAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;978c1a0a&quot; title=&quot;978c1a0a&quot; src=&quot;/static/1ad4692207a03601b7cfaac25c0d7ebd/e7ab2/978c1a0a.&quot; srcset=&quot;/static/1ad4692207a03601b7cfaac25c0d7ebd/4e7fd/978c1a0a. 163w,
/static/1ad4692207a03601b7cfaac25c0d7ebd/16a03/978c1a0a. 325w,
/static/1ad4692207a03601b7cfaac25c0d7ebd/e7ab2/978c1a0a. 564w&quot; sizes=&quot;(max-width: 564px) 100vw, 564px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt; Approximated conceptual model[/caption]&lt;/p&gt;
&lt;h3&gt;Features and Geometries&lt;/h3&gt;
&lt;p&gt;A vector layer is nothing more than a container for features, which are real world observations: a city, a river, a mountain peak, a country, a continent, ... all these are features. In addition, a feature can have a set of attributes like: population, length, height, etc.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABp0lEQVQoz3VRS5PTMAzu//8BXDhw4sphmWXowJYOCyz7SGnJrt2kjftOk9hZO3Ucu06ToDaFAzP7jUYjWZL1SepgjCljSZJM53PnCQ3H4+V6DW78MqIoStMUIdRhjDUnEEovh6MrhNM8B7eu6+YFtCH4ogNNwKv2xtqKC1MU1X5fa10pVRljtS4KrffGNFVVQcbhAGVggt5utx1EZj/8yWgZZdKjyUWWfclzzFg3SS6t5ae0WmrtzBe30wDE3YTQ51zsToN7Mhutop30GX0vRE8pTOnHOP5QlqLluVPFdzT+hvDXR3Tr+Urrc/GR9t8xCgXEjoa1B6PL03uzk9JooF0bpYwqgDSMYq2N/hUDZgl9d/Pzs+t64bY7HHaHbrqLVqu3nv8qTT9R1g/I69X6DeN3/Uf/4v7h5rfbgdW3GxRKrTkPuUilBL3hQhvVHJY6x1UZVofE6klppqVlm2cRy9wj5Hyq/w7TOsXe3pGwj4gXcz9i1/7i2lus+K7NOZ6KECKl5AAhWgE8C5FlWURpf/Cr5wwe8NjBuDcYXDnOUxBACBYxmUz+AMefJ6m+XNbXAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;GeometryClasses&quot; title=&quot;GeometryClasses&quot; src=&quot;/static/d22d48c8daf7038a21b83380f40cf048/dbb61/GeometryClasses.png&quot; srcset=&quot;/static/d22d48c8daf7038a21b83380f40cf048/19bd1/GeometryClasses.png 163w,
/static/d22d48c8daf7038a21b83380f40cf048/d3bcb/GeometryClasses.png 325w,
/static/d22d48c8daf7038a21b83380f40cf048/dbb61/GeometryClasses.png 650w,
/static/d22d48c8daf7038a21b83380f40cf048/c2dea/GeometryClasses.png 652w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Each feature can be&amp;#xA0;visualized&amp;#xA0;in a&amp;#xA0;different&amp;#xA0;way and this way is determined by a geometry associated with the feature. Points, LineString, Polygons, .. are different kinds of geometries we can use to visualize a feature.&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;// This code adds a point feature to a vector layer
var pointGeometry = new OpenLayers.Geometry.Point(px, py);
var pointFeature = new OpenLayers.Feature.Vector(pointGeometry);
vector.push([pointFeatures]);&lt;/pre&gt;
&lt;h3&gt;Renderers and Styles&lt;/h3&gt;
&lt;p&gt;Browsers can have support for different technologies: &lt;a href=&quot;http://en.wikipedia.org/wiki/Canvas_element&quot;&gt;Canvas&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/Scalable_Vector_Graphics&quot;&gt;SVG&lt;/a&gt;, etc. So to make the process of draw geometries in the map independent from the vector layer, OpenLayers has the concept of renderer. A renderer is a special kind of class responsible to draw a geometry using a concrete technology.&lt;/p&gt;
&lt;p&gt;Next code creates a new vector layer where we are specifying OpenLayers tries to render features using Canvas capabilities at first instance or otherwise using SVG technology.&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;, {
    renderers: [&amp;apos;Canvas&amp;apos;,&amp;apos;SVG&amp;apos;]
});&lt;/pre&gt;
&lt;p&gt;In addition, a feature (or the vector layer itself) can have a style associated that is used by the renderer to draw the geometry that represents a feature. This way we can have cities rendered as blue points with radius 10px and mountain peaks rendered as brown points with radius 7px.&lt;/p&gt;
&lt;h3&gt;Protocols and Formats&lt;/h3&gt;
&lt;p&gt;A vector layer can have a protocol class associated with it. Protocols are special classes that knows how to read/write features from different sources and uses Format classes to read/write data in a specific format. For example: we can load features using the HTTP protocol from a GeoJSON or KML file.&lt;/p&gt;
&lt;p&gt;Protocols and format classes makes the vector layer independent from the data source.&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &amp;quot;world_cities.json&amp;quot;,
        format: new OpenLayers.Format.GeoJSON()
    })
});&lt;/pre&gt;
&lt;p&gt;Previous code creates a new vector layer that load data via HTTP from a GeoJSON format file.&lt;/p&gt;
&lt;h3&gt;Strategies&lt;/h3&gt;
&lt;p&gt;A vector layer can have one or more strategies attached to it. An strategy is a kind of class that, once activated, makes&amp;#xA0;&lt;em&gt;things&lt;/em&gt;&amp;#xA0;on the vector layer without layer knows what is happening.&lt;/p&gt;
&lt;p&gt;Examples of strategies are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;OpenLayers.Strategy.Fixed&lt;/code&gt;, which loads the content of a data source attached to the vector layer only once. This is usually used to load a data file in a vector layer, because it is only required to be loaded once.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OpenLayers.Strategy.Box&lt;/code&gt;, which loads content from a data source each time the bounding box of the viewport changed. This strategy is useful for vector layers that loads content from a WFS server and needs to update its contents every time the BBOX changes.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &amp;quot;world_cities.json&amp;quot;,
        format: new OpenLayers.Format.GeoJSON()
    }),
    strategies: [new OpenLayers.Strategy.Fixed()]
});&lt;/pre&gt;
&lt;p&gt;The previous code creates a vector layer that load data from a GeoJSON file. The Fixed strategy allows to load the file content once and only once, no mater if viewport BBOX changes.&lt;/p&gt;
&lt;h2&gt;The cluster strategy&lt;/h2&gt;
&lt;p&gt;When a vector layer contains tons of features and, they are rendered as points, an ugly effect can appear in our map. Depending on the zoom level and the point radius the points can be rendered overlapping each others.&lt;/p&gt;
&lt;p&gt;One of the most useful strategies offered by OpenLayers is the &lt;code&gt;OpenLayers.Strategy.Cluster&lt;/code&gt;. Given the set of features withint a layer and a zoom level, this strategy computes the distance among the features and clusters them so no cluster overlaps any other.&lt;/p&gt;
&lt;p&gt;Next figures show a sample without and with applying the cluster strategy to a set of features within a vector layer:&lt;/p&gt;
&lt;p&gt;[caption id=&amp;quot;attachment_790&amp;quot; align=&amp;quot;aligncenter&amp;quot; width=&amp;quot;600&amp;quot;]&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 49.5%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVQoz0WQXXOaQBSG+f2ZtonGNHXiaLVOaqfJJGOAhWWhiaZoorIsoOInIMLuEs10pn+g6E1nzsU5F88873mFDZ8kPIxZGKexGy7MBZ4mo4D6xnQo27bsmr20ZcWPJHJndBjzWfA22O3DP+802Y2FgJO3/Nhvxptpf+E9z3HHt7XxSHJeVM9Ug2tIP3Zpw83E1a6f7Vfv+zifv+8Z3c0E5D9FO8vPOis6WSRTQjWR9CXsSNgDyxvEzhE/h/QMbD/pyaXJmh1ac7kaZVYeWRDtUXfb6tGmmbZe3r5rURN6Zh5YIhYMf6DsFLKixosGLXeS2jNtEAaMtJwvT0ldEDHR1vdddqUkBTmsAufloLWxPNVhfIXoATOyz4gXVfbB5M10P+nTlkJP1E1dkHKJjdXwG2JfdFrR1g+AEMnywLzdy+qv9KfNZCO9fEqraNUG2wJMi4+7Moy+ym4/h/GBx1hdAj270HkBzCXRcpWpgWhF5xeIlRA/06JrgF1teaus7hC7+BXcQh8JEiZHmEhkqG4rPd7MbTC4EbGjEEtdiJCd5j8rqxvDsbr2THZetagqx0VjfScA51Um1sGPXdlXdVZ6ZjV1DnK4443Q+DdkBUhLSthQvJ5kE9WxFHeAg8k86+Xw4D887kB+AoJr8RhHPjYHNzVl2ZZsJ+9fPGZ8wCMc2v5m8g+7O9aPe1ETEwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;nocluster&quot; title=&quot;nocluster&quot; src=&quot;/static/ed469868ad86d331b827feecac7c12f7/34e8a/nocluster.png&quot; srcset=&quot;/static/ed469868ad86d331b827feecac7c12f7/19bd1/nocluster.png 163w,
/static/ed469868ad86d331b827feecac7c12f7/d3bcb/nocluster.png 325w,
/static/ed469868ad86d331b827feecac7c12f7/34e8a/nocluster.png 600w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt; Without cluster strategy[/caption]&lt;/p&gt;
&lt;p&gt;[caption id=&amp;quot;attachment_791&amp;quot; align=&amp;quot;aligncenter&amp;quot; width=&amp;quot;600&amp;quot;]&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5ElEQVQozy2RZ3aqQACF2f9a3kl8kY7IUFSIyBTGAQSV4tAUzRJCcvL/fuc2oR4TPpTtUJe8oWW+yaOihyfOTLaXEVaPbtzrtMK4wtf+2N+v/SN7TbfX89ZNqcDH7D5dvqYaXum+YE4WuhlW41CNA+XouQUI+Fs8GM0TNhN+PptpKl8T/3q1/JEKIPNvD3K703ObFR1N2lBGSEJEhNg6rfxSw7VFehUOIu1XxbhLB7saSfdIyiEVRBSx1j8NbtptiiFwctuI58BQxKFz1oLm3a8Xu2YRceXYgqzbzhrcqknvftYrQYTIu1jJAEi79i7uEvsiIhKOJOoEpXHgul8rqDLi1iCt2rRsuBds1AP+YaSWICEkQrjJA3BZWrlk0t28kwSJma5wJ7Fufe4OtANR7di5RThApY1q2yhECX/OMPzlic4cr/wHK9Ngs3mkH3f2WdlV//FN3/O3VQo0hK1c0xPbPosgVwy2nWEs/SyEReLb5Xs+etnomKf1Moo1HDksJLWJamCkwCZkjRKV+uvLYl18bAtXUGNfnhvOPIwVBmC3TNqtRvcSRG58WNHowBe7CzAzW/mRYY2ECoY5z+oxFhQSyvgvuZaApAOAhR8Q/R6GFRRvCk+hGxFB+a8glkmIrhRXh29hoeYRr99tWwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;cluster&quot; title=&quot;cluster&quot; src=&quot;/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/34e8a/cluster.png&quot; srcset=&quot;/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/19bd1/cluster.png 163w,
/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/d3bcb/cluster.png 325w,
/static/f7e8999de0fd9fda1e6f6e61bf60d7b3/34e8a/cluster.png 600w&quot; sizes=&quot;(max-width: 600px) 100vw, 600px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt; With cluster strategy[/caption]&lt;/p&gt;
&lt;p&gt;The code required for the second figure is:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;, {
    protocol: new OpenLayers.Protocol.HTTP({
        url: &amp;quot;world_cities.json&amp;quot;,
        format: new OpenLayers.Format.GeoJSON()
    }),
    strategies: [
        new OpenLayers.Strategy.Fixed(),
        new OpenLayers.Strategy.Cluster()
    ]
});&lt;/pre&gt;
&lt;h3&gt;How the cluster strategy works?&lt;/h3&gt;
&lt;p&gt;The cluster strategy instance holds a reference to the vector layers features. In addition each time the zoom level changes, it computes a set of clusters each one containing some number of features.&lt;/p&gt;
&lt;p&gt;The clusters are nothing more than point geometry features with a new &lt;code&gt;count&lt;/code&gt; attribute (an holding references to the features it contains).&lt;/p&gt;
&lt;p&gt;In addition the cluster strategy, removes the &amp;quot;original&amp;quot; set of features from the vector layers and adds the computed clusters to it.&lt;/p&gt;
&lt;h2&gt;So (IMO)... What is the problem with the cluster strategy?&lt;/h2&gt;
&lt;p&gt;Really there is no problem with cluster strategy, it works like a charm. From my point of view the problem is related with the user experience, more concretely to the look and feel.&lt;/p&gt;
&lt;p&gt;IMO, the ugly effect with cluster strategy is done when the user changes the zoom level of the map. The clusters are computed again and they are drawn fine but without a nice animation that indicates the user the new cluster division or merge.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Once can think no matter the look and feel of a bunch features on the screen, but I think &lt;em&gt;if we can have a good&amp;#xA0;functionality&amp;#xA0;with a nice experience that is twice better than only as good functionality&lt;/em&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;How to use the AnimatedCluster&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;OpenLayers.Strategy.AnimatedCluster&lt;/code&gt; class is a subclass of &lt;code&gt;OpenLayers.Strategy.Cluster&lt;/code&gt; class so it inherits all the properties and extends some features.&lt;br&gt;
The usage is as easy as the cluster strategy. When you create a vector layer you need to pass an instance of OpenLayers.Strategy.AnimatedCluster in the strategies property:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var vector = new OpenLayers.Layer.Vector(&amp;quot;Features&amp;quot;, {
    ...
    strategies: [
        new OpenLayers.Strategy.Fixed(),
        new OpenLayers.Strategy.AnimatedCluster({
            distance: 45,
            animationMethod: OpenLayers.Easing.Expo.easeOut,
            animationDuration: 10
        })
    ],
    ...
});&lt;/pre&gt;
&lt;h3&gt;Properties&lt;/h3&gt;
&lt;p&gt;In addition to the inherited properties distance and threshold the AnimatedCluster offers a two new ones:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;animationMethod&lt;/code&gt;: The tweening method to use. By default if is&amp;#xA0;&lt;code&gt;OpenLayers.Easing.Expo.easeOut&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;animationDuration&lt;/code&gt;: The duration of the tween in number of steps. By default it is 20.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;How the AnimatedCluster works?&lt;/h2&gt;
&lt;p&gt;Like its parent class the animated cluster strategy holds a reference to the features of the vector layer and each the zoom level changes the next steps takes place:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Store a reference to the previous computed cluster (that related with the previous zoom level we come from)&lt;/li&gt;
&lt;li&gt;Compute the new cluster&lt;/li&gt;
&lt;li&gt;Start a tween to animate from the previous to the new cluster positions.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These means animated cluster makes use of an extra array of clustered features (the previous one) but its size is relatively small, so there is no performance problem. In addition and, in the same way the cluster strategy does, the animated cluster only the computes the new cluster&lt;/p&gt;
&lt;p&gt;The animation is a bit cumbersome. If we zoom in the view, it means we go to a level with &amp;#xA0;more clusters than the previous one, that is, a cluster at level N becomes M clusters at level N+1.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 273px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 95.23809523809523%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsSAAALEgHS3X78AAADWklEQVQ4yzVUSY/jRBT2D+cGHLhwhjsHRkKtniROGgI9DU02x7uTeKv11WI7dpLpE0IDiJcEpHeosvyWb3nljKJoFESTOL7HNImncewmsXs7j6NoleyPUmkiVcmhZMfWfjy1fatVzZ1XP13EO9cLn/zI3YSjTTDahmMvHPvXeFj7y91uOGuoWI8lKIhK6Fp0TCkunbIgmgqaEZKRPKmzuMiSMt3lay9bp/nzMs7Tw6lvRMk6o/rBkpzCjjZU1QVz2gYYY5ZCr7UG/na2rZCNYFDTclPIPRM5aSrecmGZsFR2Ek7aCM3Hq8CpC2KlVJSbRuestp0USlCghPEsICzH32RvlWnE0IKpOc7cUlnn1WzhO4ZwQRnPa6NkXTMjJaNcCDgfvLflDKIYr02ju6MBYB3oTmktZVWSuRc7UnDOmTXcMsYpz3c1gOlT/893X/793Wd/TL+VlKRZ3ShVVZRUvMjJL6/pbH2l0+FS9L3uNfSdoZIjHN6aSzj/5/vPPz18/emHr0y170zTKji3Ji4qdxU8rv1JFKGWDgeutETCO6slE5pBuSfpKrw8fvPXuy/eXt6DlMezvrTqkOdIEio/S5JpklyT+5NCSC2TWgoEb3D2tJ6/JIck70Q5DNaCUIwbCT964SgI0T/opfH26ginAUD3nFstjDAaWpzfWMuVpMAArAFMBi7dRfTeC67OS5KFv9/FVRTkTq+NqjhUghQMq7RCnDqcn5cHqgVcLVEJJHy6ihDnZBvN1sF0E7746fM2cYaTbYwCVFery7HppOyPyLfUyNBJt3gWnBKa5NVkE0xWwdOrPw7DkR+OwtDpBzNY1YIwFs0AQ6+GRqOmrYHBqAE1JCxMD5OV74bX5qjQbWduhOlGXhp11EJJfumsbZVEtUAcj9oSgELsU7Ja7JbRHkme/L9w7l0qdBetKQMOGkrCRIH2Qc8JrdVwtOi52TKaeuE0uuXcA6XKMjdNnKdtPFr7s21UMjr0Bnc12dV5TWrO9lX9e5KNg/Ceg21RqkkYTxarh/mHyW9LB2EgAPz6wUutUNmhctfhoxegjPetvrXCVyH+KYjjfZEfqiI77LYx3RfOf1WT+DlIvHX66yL5Oc5wMDe8AbshRLbmyy0pSculJRyX92PfnK35F+MCuwum+j5tAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;zoom1&quot; title=&quot;zoom1&quot; src=&quot;/static/fdcb4e05be74b76f139f3602c74197c4/1df8f/zoom1.png&quot; srcset=&quot;/static/fdcb4e05be74b76f139f3602c74197c4/19bd1/zoom1.png 163w,
/static/fdcb4e05be74b76f139f3602c74197c4/1df8f/zoom1.png 273w&quot; sizes=&quot;(max-width: 273px) 100vw, 273px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt; &amp;#xA0;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 306px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 91.83006535947712%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAADaElEQVQ4yxWT+2/bVBzF/W+DxjSGNBBIaEKISQiGUNRSyhjq+qBCFSptty5tk9ixHduJfd9PX7+aJlPWLhrfSt+f7Ouvzz2fczxdEJYTVTCV01JQwxmeYcO5ImhwceWHAZdsECZFOpOzvCnVvLOzaZz4kZLM6ypNcNE6VTnhLG+MQmnBCtQ2SmGUxunEn+STmdRMC1JxXkvRaGUVL0vhNU4LQSidXrfmpisrJxlGTSXbToe+f3Haz4IxwznIoTmpjIT3gmBFOSzyhKAI5WEcGs2aSgtJDYhmM0JySUkxKyLQjIhzykhWctbUyjrWtqqupNfWmgvmKmkNExwzGCHGkwnGWVfZaho2r35yxztZlsFvF60F8XEUaEnqWnlKM6lg6HWrcZ76QWDTYROfd7Vsars6/Pnj5qOPW4/55TE4u+isNZKgqZJEG+YZRaVCJTzKijhI0MXrDy++ue19tujvVYtucbZ9u/H4dvvJTR5Yp2F1GAV1Kbtawy08zUgY+gRlcZJcjUP+5nC98XC9+ejd0S9d/Ga1891q/4dmcgVgOCdpkkR+gNFMGw5OeXWlYawRUhIpaWP5zdnL5f6zMji/23m63vx89cfXfBJqJZSmzqhWm1JxY5kUxAOTwjAY+SPQ70qZ04K9Pnj317fXJy/fHz2/+/XT1e73jSyuK6MVBbbzzoDPEIpaC680orT8npOTiKFZmi1++3L9+5MPW1/Iy1M3Op0b3C3a1knJSVWpplGQs1IxJ7jXlQrsh5WAzjluGK//2Vg8/8RuPdVpbpq6xeNl+rYzQkuG0LSrVWtVVykA5CnFQT2sqO29Es0YhObiYK/v7yX2bZP777e/uus9WJ7vWiWTOGQUd6XunO5HE68gCFBzRgnCHOgJHg7jYJCdkT//1T19ebTuPVz3Hiz+/nEcBUkUpHE0Hg9P+v2d4xPItpSKa8UrzdtGz1sD2PI8pSKjBkImlmcvFgfP6mwESTSMlUIWWfHf5fhgMPLyaQKhWUIlrISOAP3l3NW15BROMU7hFjxPseZKI8oxpgU+74fHw/Bw5HuKCIlZVUrjmJEUulkaYIgYI4RgKSgMp8RZdm9VLaF8wSTZvRq8Ggy9OAqtYtYKcK4yHL6M47HvD6NJDG2BDkHmXcURQSCGoIISjDEapdn+YPQ/7Yij6vB9xZkAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;zoom2&quot; title=&quot;zoom2&quot; src=&quot;/static/966f6799151c27af24c4c3ebe72aecba/66332/zoom2.png&quot; srcset=&quot;/static/966f6799151c27af24c4c3ebe72aecba/19bd1/zoom2.png 163w,
/static/966f6799151c27af24c4c3ebe72aecba/66332/zoom2.png 306w&quot; sizes=&quot;(max-width: 306px) 100vw, 306px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The vice-versa occurs for zoom out actions, we go to a new level with less clusters than the previous one, that is, M clusters at level N becomes 1 cluster at level N-1.&lt;/p&gt;
&lt;h2&gt;Things to take into account with the AnimatedCluster&lt;/h2&gt;
&lt;p&gt;There are two important things to understand and take into account when working with the AnimateCluster.&lt;/p&gt;
&lt;p&gt;First, the animation is made using the &lt;code&gt;OpenLayers.Tween&lt;/code&gt;&amp;#xA0;class OpenLayers offers. This class is used to make animation when map panning and offers basic actions to make animations.&lt;/p&gt;
&lt;p&gt;Unfortunately, the class does not allows specify the animation duration in second but in steps. You must know that the &lt;code&gt;OpenLayers.Tween&lt;/code&gt; wait 10 milliseconds between steps (see documentation for the &lt;code&gt;OpenLayers.Tween.INTERVAL&lt;/code&gt; property), so a duration of 50 steps means the animation is made in 500 milliseconds.&lt;/p&gt;
&lt;p&gt;Second, each animation steps implies to redraw the vector layer again, to refresh the new position of the clusters. As you can see this has a direct performance impact.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;To be the first implementation I proudly enough of the work but I am aware of the improvements it can be made.&lt;br&gt;
Any help will be appreciated.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Awesome clustered markers in Leaflet]]></title><description><![CDATA[Some time ago someone asked at gis.stackexchange.comÂ for nice cluster marker implementation, both for Leaflet or
  OpenLayers, something similar
  to Redfin.
  A couple of weeks ago I discover a great implementation for Leaflet, the
  Leaflet.markercluster from Dave Leaver.]]></description><link>https://www.acuriousanimal.com/blog/2012/08/12/awesome-clustered-markers-in-leaflet</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/08/12/awesome-clustered-markers-in-leaflet</guid><pubDate>Sun, 12 Aug 2012 08:14:00 GMT</pubDate><content:encoded>&lt;p&gt;Some time ago someone asked at &lt;a href=&quot;http://gis.stackexchange.com/questions/17250/how-to-create-animated-cluster-markers-in-openlayers-leaflet/18594&quot;&gt;gis.stackexchange.com&lt;/a&gt;Â for nice cluster marker implementation, both for &lt;a href=&quot;http://leaflet.cloudmade.com/&quot;&gt;Leaflet&lt;/a&gt; or
&lt;a href=&quot;http://openlayers.org/&quot;&gt;OpenLayers&lt;/a&gt;, something similar
to &lt;a href=&quot;http://www.redfin.com/homes-for-sale#!disp_mode=M&amp;amp;market=socal&amp;amp;region_id=16904&amp;amp;region_type=6&amp;amp;v=6&quot;&gt;Redfin&lt;/a&gt;.
A couple of weeks ago I discover a great implementation for Leaflet, the
&lt;a href=&quot;https://github.com/danzel/Leaflet.markercluster&quot;&gt;Leaflet.markercluster&lt;/a&gt; from Dave Leaver.&lt;/p&gt;
&lt;p&gt;It is simply awesome !!! &lt;a href=&quot;http://danzel.github.com/Leaflet.markercluster/example/marker-clustering-realworld.50000.html&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 574px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 71.08013937282229%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACt0lEQVQozyWRyW8cRRTG+69F4hCJIydAKAdkKSekSBxCAowIKMSgbFY2J5INjgMZz8Qde5ae6aW6a6/u2qt7JpaogVIdnt7TV9/3fpUEg62m5N4X6xcj3HJvqTfI4IVFM6vgILlkQIqKoaLDDYFrL2ivqdewtzgJBmqRs7MDkU/o9LCbn5jeoINv28d7oe9eL0aATraWWw1K/rfqqpP6Xs3OBhM9YGLIERl/Ehz0vaVPbuDXPwnZBr7ybBUcflXcqaPYtFzO7md7qD7+s7hT8fGgiVNNgsE5LZ4jMKdo5TTSdCnxzGliNfQKeokqPI6GLS0Fy72qr5zYOtZbtIstGLCmI2hN4U7MaMHpOq4U79Zxrma/zK4TfmlE7TWOgGLa8J9yJ9Z4GnAqYGa7bBMqcfp7mx4aRaJJHA8ec7bUklwNsrcwaPQ/qlhH88QrIH/7XLx7ipbf4fSr7vC2+mc/XH30XnpNgiWmw7g4JWDidMRGvZPOsGBERJRgBLrywrKco5TCqXIuDMqcjOyHZ0oxVK8w78D0a5Te8MHb7Fjsf2kFMO3SyTpR1V2+utmAsmkKlh516eFma+RfI50+64MIgZuzB/LNj0bXvMWWZmb6cLCUTD+D87uJwS9Mvc9xqTS1b39un99UEn3cqiGI+PYwSDt91L29zyUXkwOevhKK95Yo+h4U82Rwbe863UEpIKWI8bYTtRZlBBMsDQYFz3eF5/roe/TyVr/RTtVNmYOqTiI3p2Bd1yCempIP37BsJFvmJQhkHna/3fR9qyN/QykuTDkmYD65WMxXRbLZqIiUYHh5OasqSNYPaPHS2taBCf7hmmouhr4N+RuZjykFgWfNrU/zs+McwHfv04T9cT222pZUZQVARWhnFMfNktQL15xjMI9ri0d78vRXqSiDGS/OG1AU62wxS/8F3Pzpo4gRd0wAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;Screenshot from 2012 08 11 202356&quot; title=&quot;Screenshot from 2012-08-11 20:23:56&quot; src=&quot;/static/05d6214c7f51538730dbe512db60b27c/ed75b/Screenshot-from-2012-08-11-202356.png&quot; srcset=&quot;/static/05d6214c7f51538730dbe512db60b27c/19bd1/Screenshot-from-2012-08-11-202356.png 163w,
/static/05d6214c7f51538730dbe512db60b27c/d3bcb/Screenshot-from-2012-08-11-202356.png 325w,
/static/05d6214c7f51538730dbe512db60b27c/ed75b/Screenshot-from-2012-08-11-202356.png 574w&quot; sizes=&quot;(max-width: 574px) 100vw, 574px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Features&lt;/h2&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/danzel/Leaflet.markercluster&quot;&gt;Leaflet.markercluster&lt;/a&gt;Â plugin for Leaflet is documented enough on its web page, so I&apos;m not going to repeat it here, but I would like to make a short summary of its features.&lt;/p&gt;
&lt;h3&gt;Add/remove&lt;em&gt; mark&lt;/em&gt;&lt;em&gt;er&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;&lt;/em&gt;Â We can easily add or remove marker with the methods &lt;code&gt;addLayer&lt;/code&gt; and &lt;code&gt;removeLayer&lt;/code&gt;. For example:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;markers.addLayer( new L.Marker(new L.LatLng(lat, lon), { title: title }) );&lt;/pre&gt;
&lt;h3&gt;Events&lt;/h3&gt;
&lt;p&gt;We have available the eventsÂ &lt;code&gt;clusterclick&lt;/code&gt;,Â &lt;code&gt;clustermouseover&lt;/code&gt;,Â &lt;code&gt;clustermouseout&lt;/code&gt; andÂ &lt;code&gt;zoomend&lt;/code&gt; to interact with the new layer.&lt;/p&gt;
&lt;h3&gt;Options&lt;/h3&gt;
&lt;p&gt;TheÂ &lt;a href=&quot;https://github.com/danzel/Leaflet.markercluster&quot;&gt;Leaflet.markercluster&lt;/a&gt;Â plugin has some nice options, which by default they are set as:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;options: {
 maxClusterRadius: 60,
 iconCreateFunction: null,
 spiderfyOnMaxZoom: true,
 showCoverageOnHover: true,
 zoomToBoundsOnClick: true
 },&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;maxClusterRadius&lt;/em&gt;:&lt;/strong&gt; All the markers within this radius becomes a cluster.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;iconCreateFunction&lt;/em&gt;:&lt;/strong&gt; Allows to customize the icons for the clusters. (See more &lt;a href=&quot;https://github.com/danzel/Leaflet.markercluster#customising-the-clustered-markers&quot;&gt;here&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;spiderfyOnMaxZoom&lt;/em&gt;:&lt;/strong&gt; When you click a cluster at the bottom zoom level we spiderfy it so you can see all of its markers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;showCoverageOnHover&lt;/em&gt;:&lt;/strong&gt; When you click a cluster we zoom to its bounds.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;zoomToBoundsOnClick&lt;/em&gt;:&lt;/strong&gt; When you mouse over a cluster it shows the bounds of its markers.&lt;/li&gt;
&lt;/ul&gt;
&lt;div&gt;&lt;span style=&quot;font-size: medium;&quot;&gt;&lt;span style=&quot;line-height: 24px;&quot;&gt;To change the default values simply specify the values when instantiation the cluster group:&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var markers = new L.MarkerClusterGroup({
 maxClusterRadius: 100,
 spiderfyOnMaxZoom: true,
 showCoverageOnHover: false,
 zoomToBoundsOnClick: true
});&lt;/pre&gt;
&lt;/div&gt;
&lt;div&gt;&lt;/div&gt;
&lt;h2&gt;A short note&lt;/h2&gt;
&lt;p&gt;Many posts ago I write about &lt;a href=&quot;//2011/11/14/open-alternaties-to-google-maps&quot;&gt;Open Alternatives to Google Maps&lt;/a&gt;Â where I talk about the nice Leaflet project, finishing with the sentence: &lt;em&gt;Believe me, put an eye on this project, it has many more to say&lt;/em&gt;. And seems this great marker cluster is one of that thins to say :) In addition, I was seeing lot of activity about the Leaflet project, much more than on OpenLayers.&lt;/p&gt;
&lt;p&gt;Do not confuse please, I&apos;m talking about activity related to news where many web pages are changing from Google Maps API to Leaflet. I know the OpenLayers community is make a great job, as always, on the next major release of the project, OpenLayers 3.0, with a great amount of improvements.&lt;/p&gt;
&lt;p&gt;At this moment, the comparison between Leaflet and OpenLayers is something like comparing the clothes to go to run or an armor to go to a battle. Â What I want to say is OpenLayers is a big and complex project but, because of this, it allows to do almost anything you can need in a GIS application. On the other hand Leaflet is a more agile and lightweight project, designed to to only a bunch of things. While OpenLayers allows to access tile server (TMS or WMTS), WMS, WFS, etc Leaflet is designed to access TMS (like OpenStreetMap, CloudMade tiles, etc).&lt;/p&gt;
&lt;p&gt;The summary is Leaflet implements the 10% (to say a number) of things implements OpenLayers but that 10% is the required to do the most common things for a weg application.&lt;/p&gt;
&lt;h2&gt;Challenge !!!&lt;/h2&gt;
&lt;p&gt;Who wants to create an awesome cluster implementation for OpenLayers?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Projects & Works]]></title><description><![CDATA[Like any other restless minds I do a lot of things but,Â unfortunately, Â I am in enough wars to not finish most of them. Feel free to explore this section to know a bit more about my work. Presentations Introduction to Node & Express Resilient PHP applications with Phystrix Webpack, the not another task runner tool Git, a short introduction with some pictures OpenLayers Presentation Brief introduction to Dojo Widgets creation Projects The Book of OpenLayers3 Examples The Nobel Prize AnimatedCluster Strategy OpenLayers Cookbook Examples SimplyWrite Stickies Contributions Heatmap Presentations Introduction to Node & Express Short intro to main JS concepts, like asynchronous programming and event loop, NodeJS and Express framework. Resilient PHP applications with Phystrix Introductory talk to resilient application. Our applications must be able to adapt to third party failures and recover quickly from them. You will see why configuring timeouts is not enough to protect your system and what better tools exists. We will explain briefly Hystrix concepts and introduce an alternative for PHP called Phystrix. Webpack, the not another task runner tool This slideshow describes what is and the main features of webpack, a module bundler tool: You can also view at slid.es Git, a short introduction with some pictures This is a short introduction about Git version control system describing the main topics: You can also view at slid.es OpenLayers Presentation A free and online presentation about the main concepts and design of the OpenLayers mapping library. Read more...  Brief introduction to Dojo Widgets creation Dojo Toolkit is a great JavaScript framework. It is has a powerful and homogeneous API and offers a rich set of visual components (so called widgets, like buttons, tabs, grids, trees, ...) that makes it perfect to build RIA (Rich Internet Applications). One of the key features of the Dojo is the possibility to create new widgets to simplify the development of complex applications. This is a introductory presentation to the custom widgets development. Read more... Projects The Book of OpenLayers3 Examples The Book of OpenLayers3 contains an extensive set of samples that helps better understand of the concepts explained. The examples source code are freely available at https://github.com/acanimal/thebookofopenlayers3 github repository. You can find a hosted version too at http://www.acuriousanimal.com/thebookofopenlayers3.  The Nobel Prize After discoveringÂ Nobel PrizeÂ web site offers an API to query both prizes and laureates from the beginning of the history of the prizes, I was thinking in the creating of a kind of dynamic infography to allow explore the information in a useful and simplified way.  AnimatedCluster Strategy Working with vector data, many times we need to render a big number of points. In this situations the Cluster strategy is really helpful allowing to group point and avoiding collisions or overlapping.
 The AnimatedCluster strategy is an improvement of the original Cluster, allowing to animate the clusters when the user changes the zoom level. Read more...  OpenLayers Cookbook Examples For the OpenLayers Cookbook I wrote a set of examples so the readers can also see in action and play with the code results.
 The initial work was placed at the PacktPublishing web site freely available. But, because nothing is forever, I made some improvements and changes in the original code. Read more...  SimplyWrite SimplyWriteÂ is a free web distraction writing tool thatÂ recognizes the lightweight markup languageÂ Markdown,Â an easy-to-read, easy-to-write plain format which allow to enrich the text..Â Read more...  Stickies Storing sticky notes on your machine with HTML5 and IndexedDBStickies was developed to have my custom sticky board where to place my notes. Similarly to SimplyWrite it makes use of IndexedDB capabilities so all the notes are stored in your local machine instead on a server.Â Read more...  Contributions Heatmap Heatmap is a library to create density maps. It helps to visualize and quicly understand some kind of data, like temperatures in a map, number most click zones in a web pages, etc - Read more...]]></description><link>https://www.acuriousanimal.comnull</link><guid isPermaLink="false">https://www.acuriousanimal.comnull</guid><pubDate>Mon, 06 Aug 2012 12:34:00 GMT</pubDate><content:encoded>&lt;p&gt;Like any other restless minds I do a lot of things but,Â unfortunately, Â I am in enough wars to not finish most of them.&lt;/p&gt;
&lt;p&gt;Feel free to explore this section to know a bit more about my work.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#presentations&quot;&gt;Presentations&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction-to-node--express&quot;&gt;Introduction to Node &amp;#x26; Express&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#resilient-php-applications-with-phystrix&quot;&gt;Resilient PHP applications with Phystrix&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#webpack-the-not-another-task-runner-tool&quot;&gt;Webpack, the not another task runner tool&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#git-a-short-introduction-with-some-pictures&quot;&gt;Git, a short introduction with some pictures&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#openlayers-presentation&quot;&gt;OpenLayers Presentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#brief-introduction-to-dojo-widgets-creation&quot;&gt;Brief introduction to Dojo Widgets creation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#projects&quot;&gt;Projects&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#the-book-of-openlayers3-examples&quot;&gt;The Book of OpenLayers3 Examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#the-nobel-prize&quot;&gt;The Nobel Prize&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#animatedcluster-strategy&quot;&gt;AnimatedCluster Strategy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#openlayers-cookbook-examples&quot;&gt;OpenLayers Cookbook Examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#simplywrite&quot;&gt;SimplyWrite&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#stickies&quot;&gt;Stickies&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#contributions&quot;&gt;Contributions&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#heatmap&quot;&gt;Heatmap&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h1&gt;Presentations&lt;/h1&gt;
&lt;h2&gt;Introduction to Node &amp;#x26; Express&lt;/h2&gt;
&lt;p&gt;Short intro to main JS concepts, like asynchronous programming and event loop, NodeJS and Express framework.&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/node-express/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2&gt;Resilient PHP applications with Phystrix&lt;/h2&gt;
&lt;p&gt;Introductory talk to resilient application. Our applications must be able to adapt to third party failures and recover quickly from them. You will see why configuring timeouts is not enough to protect your system and what better tools exists. We will explain briefly Hystrix concepts and introduce an alternative for PHP called Phystrix.&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/resiliency-php-apps/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;h2&gt;Webpack, the not another task runner tool&lt;/h2&gt;
&lt;p&gt;This slideshow describes what is and the main features of webpack, a module bundler tool:&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/webpack/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;em&gt;You can also view at &lt;a href=&quot;http://slides.com/acanimal/webpack#/&quot;&gt;slid.es&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;Git, a short introduction with some pictures&lt;/h2&gt;
&lt;p&gt;This is a short introduction about Git version control system describing the main topics:&lt;/p&gt;
&lt;iframe src=&quot;//slides.com/acanimal/git/embed&quot; width=&quot;576&quot; height=&quot;420&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;em&gt;You can also view at &lt;a href=&quot;http://slides.com/acanimal/git#/&quot;&gt;slid.es&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h2&gt;OpenLayers Presentation&lt;/h2&gt;
&lt;p&gt;A free and online presentation about the main concepts and design of the OpenLayers mapping library. &lt;a href=&quot;/2012/12/04/openlayers-presentation-and-openlayers-cookbook-sample-code-update&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://acanimal.github.com/OpenLayers-Presentation&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.090909090909086%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVQoz61RTUvDQBDt/z94Eryot/SQEMEmWqHtxXiwREQpKjXRYtGw6a5ms8lmNx9NnRi1lopC6DAss8N78+ajlabpoqm1NkAuy/Jv3K+AFeV/S9SY2ipylmUQIYQYY1BISskTEQSBlGmSCPgCKIoi13Xh5Zzneb5ULopCCKFpWqfTMQyze3zkOmOl3VYUBZK2bVvWmeM4hmnquq6qqmVZUCKO42XbIAUpjGcewm9MUoKw74Uh5TzhLMir7nLBIxaGmBBKKXSxMnM979Uk3jp82j7x9waz3b7fu6bKKdnvo53uy8E5Edm8Qq5vuybTSAxvUO/i+W6CRw9k9EgGl97w1r+fvo6ngUiL751t6M4/LrGYV15++GfwlVwjw6maK9eXbGbve1ProBEk4A8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ol presentation&quot;
        title=&quot;ol presentation&quot;
        src=&quot;/static/be795eefb2fe7a460bb47a27a15c61e3/2cf63/ol-presentation.png&quot;
        srcset=&quot;/static/be795eefb2fe7a460bb47a27a15c61e3/19bd1/ol-presentation.png 163w,
/static/be795eefb2fe7a460bb47a27a15c61e3/d3bcb/ol-presentation.png 325w,
/static/be795eefb2fe7a460bb47a27a15c61e3/2cf63/ol-presentation.png 550w&quot;
        sizes=&quot;(max-width: 550px) 100vw, 550px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Brief introduction to Dojo Widgets creation&lt;/h2&gt;
&lt;p&gt;Dojo Toolkit is a great JavaScript framework. It is has a powerful and homogeneous API and offers a rich set of visual components (so called widgets, like buttons, tabs, grids, trees, ...) that makes it perfect to build RIA (&lt;em&gt;Rich Internet Applications&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;One of the key features of the Dojo is the possibility to create new widgets to simplify the development of complex applications. This is a introductory presentation to the custom widgets development. &lt;a href=&quot;/2012/07/08/brief-introduction-to-dojo-widgets-creation&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Projects&lt;/h1&gt;
&lt;h2&gt;The Book of OpenLayers3 Examples&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://leanpub.com/thebookofopenlayers3&quot;&gt;The Book of OpenLayers3&lt;/a&gt; contains an extensive set of samples that helps better understand of the concepts explained.&lt;/p&gt;
&lt;p&gt;The examples source code are freely available at &lt;a href=&quot;https://github.com/acanimal/thebookofopenlayers3&quot;&gt;https://github.com/acanimal/thebookofopenlayers3&lt;/a&gt; github repository. You can find a hosted version too at &lt;a href=&quot;http://www.acuriousanimal.com/thebookofopenlayers3&quot;&gt;http://www.acuriousanimal.com/thebookofopenlayers3&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/thebookofopenlayers3/&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 425px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.1764705882353%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTElEQVQoz32SWW/TUBCF82MR0CKxCME7ElUlUl54QfyIgghhKSpLBYI0rdKWSk1a2jRN7NSO7di+XrLY/szEKaVPWDo6c2fuzJw745KrImwvQLc8bD8UW2EOFQM3wHIVhuMXHAU+vjdE+W7BrmPhDW2ydApZcomSP8pxBZ5goDLCJMcR2wpz7Fh8Uc5Q2A7BVimunNU0J0hzIrkbCY8yYXImeU7J/LqEUb2Js/4Q7fUN3PV79N8sFvZ59Ra9ygL96iKdV9fpvryGWV3A+nAbZ+0Ozse7eJ/u431+gLu2iNosU1KNF6gfy6j6M4KfZbzvywWHtRVBmag2s58Qb64UCItzmeHGY8FScTeoPUV9e0S485ySGyZ4UYbjjxkGU9wwxVFT/Dgjlyf8BVeQ/welZDphOhmTpsm/AJkMO2EyHjEexQWL4xJpMmUUR8xyr/qz2VI0w0Dv63iuw8B20AyTIJqNGPHJRpWSoiNZYCJN06LhZDKRTXsk4pt9I4mPx+O5QuNcp9s5YaCfsbG3x2ptk85gUARVEM0LJBma7YuyiwLjicTComkRl4JxHM8LOpaB2T9j97DF+51dKo0GXdsmkVd8OWjT0nVaWh97OCQOVZHUtXx+d3VC+Sdty+Kop8nr7HlBe2BwfHLM2+0G7xo7rNbrtC8UHp+2pdEBv5pNTK3DwdEhgagZiZr+WZt9EVHZ2qZS32Kr1bpQaFv0tB7N01OanQ5HmkYQz5aQYRp9TBmJZZwzEJiiYppmxUx1yen0euy325xoOqbnF+P4AyIqK7NJAs+pAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;demo&quot;
        title=&quot;demo&quot;
        src=&quot;/static/54aa71eefb60f3de725dc454fdd68347/a67b6/thebookofopenlayers3_demo.png&quot;
        srcset=&quot;/static/54aa71eefb60f3de725dc454fdd68347/19bd1/thebookofopenlayers3_demo.png 163w,
/static/54aa71eefb60f3de725dc454fdd68347/d3bcb/thebookofopenlayers3_demo.png 325w,
/static/54aa71eefb60f3de725dc454fdd68347/a67b6/thebookofopenlayers3_demo.png 425w&quot;
        sizes=&quot;(max-width: 425px) 100vw, 425px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;The Nobel Prize&lt;/h2&gt;
&lt;p&gt;After discoveringÂ &lt;a href=&quot;http://www.nobelprize.org/nobel_organizations/nobelmedia/nobelprize_org/developer/&quot;&gt;Nobel Prize&lt;/a&gt;Â web site offers an API to query both prizes and laureates from the beginning of the history of the prizes, I was thinking in the creating of a kind of dynamic infography to allow explore the information in a useful and simplified way.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/nobel-prize-explorer/&quot;&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 80.93264248704664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADOElEQVQ4y21UyY7cVBT1D/IDrLKFFStWZMOCBSwSsoyEWBAlCgI1iVAiotBqQoeuUEn1UF2Jy7NdnspTeXZ5qsN9r9RNFLB09K6f7z3vvDtYiKIQcRyDPcMwYJNmyIsCaV6QnSKntaoqlCVDibpuMI47YLejdeTohxEtoSMIlmXicrFAGAQo6i0OT2V8d3iJ32cSTuYSTNPG2vOgGyZWpoHjuYpfpgq+eTbHzcen+IJw6/kljhYGns0NCK7rQpZlFKSqarb46eVb3H46x9OphIMTEX8TqaFpUBQFiyWRTZa4e7jAx98f4+ajGT7/+TU+fTDBZw8n+OrJOYQkSWDbNqKIrj10uHPwBz768gfcuH2Abx+/wvk7hZNZuobfpiLuHy9xsbTxiFTWaY43koMnbzQ8fCnhwV9LCG1doC4LbLct8bV4fjLDJ7d+xI2v7+FwMoNt6pCJUFNVGIYL3/GxWnlI1gmyMMWvr1TcfyHixYUOx/MhyF4GN8rQty1P+IoIDM2kYAu2ZUEhIpYSyzRRbnLkcYa1nyCNEqjkNzlX6IA1giDmxRXunYQ4Mwuq8Y4Tsusx6JpOakI4Kx8a2RrlcWWtEAcR2ryC57hcuamruJBNzCSTvpHCukjRtQ1vm6bZEzJFEsGlqwVOTIotepcgiiLtOdjQVdmBkiRBVWRM5yL+PBOhUEoEyfbpJJX6LUff91SciEuP4whhGKEsamRZhpR6koF1Q5qV3J8hIxR5hjDJEKQVBGpRTsTAmnTfvDUHI9rtdvi/hzV3RzFd12MY//UR3ndiweMHBCzwaiIGmgTm03YdDMuGubL5ZGVFxWvAIDCHKxU8kMaPfWDrODKbkYy0NV4Hdf0A3aOxrDtsqgGy32DhNEjKfq9wT8otVNsOcdHyA3riyOoBWzI25KwFDS7tCufUFUunwJmeYqpsoLg5NI9yWrXvE+5VrjclXosuTiUXRzMNR2esJTzMVR+ThYNT2cc7zYXrh/DDBI4fYU1rQJPG8n5NeLW27Zbbtk+V3mT8qqydKvpxjEOPpq5oa7j+O/G4cbzm+A8hz+MHhWH7JREmGf3SshzbtuN7V0UaKKalSespt/8A6zynCUfg2V0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Screenshot 08142013 042534 PM&quot;
        title=&quot;Screenshot 08142013 042534 PM&quot;
        src=&quot;/static/4b9411d45989e44b1f60901f551ee724/dbb61/Screenshot-08142013-042534-PM.png&quot;
        srcset=&quot;/static/4b9411d45989e44b1f60901f551ee724/19bd1/Screenshot-08142013-042534-PM.png 163w,
/static/4b9411d45989e44b1f60901f551ee724/d3bcb/Screenshot-08142013-042534-PM.png 325w,
/static/4b9411d45989e44b1f60901f551ee724/dbb61/Screenshot-08142013-042534-PM.png 650w,
/static/4b9411d45989e44b1f60901f551ee724/5c933/Screenshot-08142013-042534-PM.png 965w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;AnimatedCluster Strategy&lt;/h2&gt;
&lt;p&gt;Working with vector data, many times we need to render a big number of points. In this situations the Cluster strategy is really helpful allowing to group point and avoiding collisions or overlapping.
The AnimatedCluster strategy is an improvement of the original Cluster, allowing to animate the clusters when the user changes the zoom level. &lt;a href=&quot;/2012/08/19/animated-marker-cluster-strategy-for-openlayers&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACE0lEQVQozx3RW3OaQAAFYP7/9K0PbaftTDOTMWmSxohcNCZABFGQsLss14UIGAQUEEmnTftW0x/wzZlzDgXX2mrz9Fys4ywl60gmi3gLwxyNnOnQtO/8uV+YamTCmIS5va7dvHK7fdE0SbcvqV0d5rVbVr6V+GpkC57+GPq8I9/aMxHNvdBoovPNZtbVXlWTlyrIardtd1lD8iqkHgK1bbb1PnOT+zwerzYpbQIWYA6CCH878J9b5eyv+PEQn6SV3aZXL4XelrArVT0CFAPdzYouyllervZrmvg/JsjjoD60IZnevF68qyTm2Zd3cX+fzZOabItFm/SapK+GIkUDCwQPXXy+ywQnknTwlYE2Y6ljrBXkMnSljdB7uT2t3EXjnXfz/mGbN7Hk+pwGLykWQgZCFMwzpRcYJ4Z1fcQsQDYe/plfl2i8I9rr5DQVLkAg1OrpdimWwtXYdhhrdsTgv7e90VlufThMz+Bdf4CRjkbp7Psv4f1Phd9LlxMEJCSrHrdie6lMTwJTxRx1DDni4zwDyyaR9Nv/sn3iJ752A9yxM/XD607pE00c+4qCHA7a6pLRsCj7pu0MKA4rnKVzENLANjB9SAZZzI+QxSPjHhtLl38VP5HZ7YQsOPDII3OIjYcAF1UQ5h7FWjqLHtk3DBW87FYnMp4O3q6CrAlHTvAks5o0pC3MgreCQxOJRAExCgvjH1OF5PD0P4RZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;animatedcluest&quot;
        title=&quot;animatedcluest&quot;
        src=&quot;/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png&quot;
        srcset=&quot;/static/793ea5b78fbfa1ed276e1e9096dd9be1/19bd1/animatedcluest.png 163w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/d3bcb/animatedcluest.png 325w,
/static/793ea5b78fbfa1ed276e1e9096dd9be1/34e8a/animatedcluest.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;OpenLayers Cookbook Examples&lt;/h2&gt;
&lt;p&gt;For the OpenLayers Cookbook I wrote a set of examples so the readers can also see in action and play with the code results.
The initial work was placed at the PacktPublishing web site freely available. But, because nothing is forever, I made some improvements and changes in the original code. &lt;a href=&quot;/2012/12/04/openlayers-presentation-and-openlayers-cookbook-sample-code-update&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 550px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.09090909090909%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJUlEQVQoz11S2XKbQBDk//8lZcm6bCWxktiOD12ADkDoQohDdxASSH7p9C4klcpD1+4OO73dPSheuMbSD3E8xsRRrqfTCWciOZ//rqIecx/HXONTdj+O8/WEKO9VbHeDKIqQpGc2xEiSM/b86B8OEh6x4vePNMU1SZCmxCXB9ZLi43rB9ZrKvVjFWfF9H4eNj93aQxAs0LIMVDpd3LY7uO10UGi38W4a6Nsj6IYJY2LDnk2wcGfY+C626yX2W/avlggJxXIdSeYHLvrTMcpdFWVVRSVHudvFeD5lLAtoJBuRLPRcrEIXG/bs2RvtAvzaBrzjQnkYDqWClmniQe/hs6qj0s3ISlT6YgwRUYHAkY2rcAmf5D2St20LjjuXih0qbtKF8oNEwtYXkj33B5jMpng3DBRpt0R1jV5P1lw2boIldqGH+WKGmqaiykcb/R57dTTZ8zQ0MkJhq0CCNyo9UcWBaixnintdk6S3xLdeH+GSmZH01RxK9fXczZ2mSYcd284ISyQT2dX50sJzpLUNs7nnRfGYiEGQB7S6Zk5t00Jd01HNo7lTNdS4fzRzhUJFjc0FTtamsohTfxwOZF3YqqmafHBG2xbzEg8LVZV/hldlBJ6YcoNDuWm15C8iMGO4wtKnvFZkvsVOW+Z8p2VTvxG1P8jv3DRb+KoPoKiOg+fRCD/pvzmZYM7Qn3h+4fl/PI9seU/sX4k3e5zVLQvfByaejCl+A9PJC4W3aW8IAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ol_source_code_examples&quot;
        title=&quot;ol_source_code_examples&quot;
        src=&quot;/static/d38900ab58157bc659b355fcf4eed11f/2cf63/ol_source_code_examples.png&quot;
        srcset=&quot;/static/d38900ab58157bc659b355fcf4eed11f/19bd1/ol_source_code_examples.png 163w,
/static/d38900ab58157bc659b355fcf4eed11f/d3bcb/ol_source_code_examples.png 325w,
/static/d38900ab58157bc659b355fcf4eed11f/2cf63/ol_source_code_examples.png 550w&quot;
        sizes=&quot;(max-width: 550px) 100vw, 550px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;SimplyWrite&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite/&quot;&gt;SimplyWrite&lt;/a&gt;Â is a free web distraction writing tool thatÂ recognizes the lightweight markup languageÂ &lt;a href=&quot;http://en.wikipedia.org/wiki/Markdown&quot;&gt;Markdown&lt;/a&gt;,Â an easy-to-read, easy-to-write plain format which allow to enrich the text..Â &lt;a href=&quot;/2013/04/29/simplywrite-a-free-web-distraction-writing-tool&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 40.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVQoz4WR6W6DMBCEef9na8XlGBOMDzB3gPQJpvZGpKlK1B+jAe/up1k7ajuLae4xTj153zs459B1zp91/yrM3NbJ+4B5GRDZRtHP/rVSw4UJxLFAkgpYW6Px9eBnMkZSfd1mbPtCipyzaFrtDxcCClGAFxyFd1kJSCmg1JUGz9TS7PxUdJD3+w3j2IGxBFn64T1DwXNwzlB5sDE1tJZ/ZO1PQgIeZAJOjtbNcwljfbPxKexD1qqTlcOV6HPgRgkd8jJDWiWI5SeYSlDqC0mZEq0ffrfyE3h8hITD4CAkwzVAFAevMwjFoG31SBySGfn2UX4Bg4dnH4aW7jKkncg7n8LQYN83VH9V6HsFfgMSyEk+wVgDyAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;simplywrtie2&quot;
        title=&quot;simplywrtie2&quot;
        src=&quot;/static/02c5b2ad0f6f38990170bb7f21e070b0/dbb61/simplywrtie2.png&quot;
        srcset=&quot;/static/02c5b2ad0f6f38990170bb7f21e070b0/19bd1/simplywrtie2.png 163w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/d3bcb/simplywrtie2.png 325w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/dbb61/simplywrtie2.png 650w,
/static/02c5b2ad0f6f38990170bb7f21e070b0/8ff1e/simplywrtie2.png 800w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Stickies&lt;/h2&gt;
&lt;p&gt;Storing sticky notes on your machine with HTML5 and IndexedDBStickies was developed to have my custom sticky board where to place my notes. Similarly to SimplyWrite it makes use of IndexedDB capabilities so all the notes are stored in your local machine instead on a server.Â &lt;a href=&quot;/2011/08/12/local-storage-storing-sticky-notes-on-your-machine-with-html5&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 65.12667660208643%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVQoz1VQW08aQRTef9qkT/bB1gdTa2KLWhPTm6htsbU2wYd6wWrrJbq4iiywsMtNFhCsVNEit0Vbdhf3Mjuz0wFqUr/58mXOyZxz5nyU17tD0zsM411dXVleXvR4lrqcmpx0OiecTuf09HQnT7hwl4tULBaLRPh4PB4MBvxtsAcHLNH9fR/D7DEMs+/zsaw/EOCCQeGWPFGWDVAQQoRQR23bRhhrGN90VMM2ueidJDb0lKquK/K2qmwp8lZL3bTtBmX9AwCANFFq1Ynz4tD5maNyOQrNcVOfAeAGItyouwv5e7nMg0y69zj3qFbts0DuTrFtKyfHDj7ckxH7EvGHUv0xBE7TbJHJjSZNRz/6U261OYKhA6Ehw8hT3ToATBNAGynZ9DDr6znK9p/9HLiSBiGYMoEulG88qWNX6HQ2fLpXykekvNzatcxqu9iGNu7ui7XL0lgu01vI90t1h6EPA30SQLCcKo9vCC5/ZiaQexs89xSRrGPiU9uwhExv1z54625WmuGyc5vcIi3MXf8eQWDQ1F4By9zISe8OsrOhwme+6D4sf7vQFd1AEFBk5Gbp/Qv+/nz1yfyvfrr8hi67CjXB0GKmwRl6wkLWUro5tlt5uVd57Zc8F+h7Cco6QNCiiMW71XmXOLBQGv1SGVlqPlszn8qwjiEGlm1ZmOx1pRqVP1q1qVebWl01Gi3DBIDkKRsZ60XvVPrTqjq8ooyuaWNflecN/RIBaAINAJ2YCS0yB0BoQYuwHXbR/nbLkpuku32tomsFXqlQQggQC/H/ICGx9DZpd0CJoniUOUrGk5EQL4SjUSHOJU4CyR+BRJ4LRwQ+Em4fLhI/ZJMnoajIceQdL4qpdFr8C+LVjs/tHDjoAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;stickies&quot;
        title=&quot;stickies&quot;
        src=&quot;/static/d418fe783db3ea3ac9b595047993343a/dbb61/stickies.png&quot;
        srcset=&quot;/static/d418fe783db3ea3ac9b595047993343a/19bd1/stickies.png 163w,
/static/d418fe783db3ea3ac9b595047993343a/d3bcb/stickies.png 325w,
/static/d418fe783db3ea3ac9b595047993343a/dbb61/stickies.png 650w,
/static/d418fe783db3ea3ac9b595047993343a/ef3f5/stickies.png 671w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Contributions&lt;/h1&gt;
&lt;h2&gt;Heatmap&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.patrick-wied.at/static/heatmapjs/&quot;&gt;Heatmap&lt;/a&gt; is a library to create density maps. It helps to visualize and quicly understand some kind of data, like temperatures in a map, number most click zones in a web pages, etc - &lt;a href=&quot;/2011/06/09/a-heatmaps-layer-for-openlayers/&quot;&gt;Read more&lt;/a&gt;...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41.904761904761905%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACDElEQVQozxWS20/aABTG+18vS3w1Ghd1m9u84UQBRUVALlJsKVBoaaG0tFwrCnIZccu2h2Xvv3WPJ/nO9/tyzieUtQnGuMvk54BMaUm6OkHueRwqIzItH9npctlJs5ONo5pn9KYzUp6LM/f48+s3TjB3Zznmkx/48zFCSqlQM7/TGKw4bycxnAZPqwVf62myTYuw4XGqONyoNu2ug/WUR59lWC7+UlpcEO/JFEdFpLHOeLFESKj31PVvDP0pzXmZ1eqFgf9KrSSTVk1ClS57sonvz3idTnB9jyvboGW2gx2bxqPGTW0RJM5SbVYQssoh8ksBw3VZTl/oBsbbOYc1N8ZeSeNa7ZFwmowmz4huAskbE6o9kmjGqQ+cALQg6T7woFlo+jVCVAlxNTzFGz5TsEXCosVOtcDb3nu+FG1iFYeWN6Iz8yi0RA4MkVtzFGhbiJ0gZXDLnGZzWe1w354ibEoKMVln18xwYqmE7RTp0oCjtM1mUWG7aOL0+8henrteDmmgkhh+JtLIEDVc4t0Ebzon7PZP2JSSCO+UDLFaiA/1s4DiklR0RM1gS7vmWG1wXLEQvQafWjfUfBPvcUzUu2VDT3OubBHNa6zrCQ70DPvP6wjhhk7E+f+AfGCscanWkdstKlMJ52nInqTysVRmLW8R8VJBC/rEyyoX1h37VoTjusSGkueoOCKsq/wDlQ4JRV0o1ugAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;heatmap_ol&quot;
        title=&quot;heatmap_ol&quot;
        src=&quot;/static/3fe093da35d093d369f9346e750ce230/dbb61/heatmap_ol1.png&quot;
        srcset=&quot;/static/3fe093da35d093d369f9346e750ce230/19bd1/heatmap_ol1.png 163w,
/static/3fe093da35d093d369f9346e750ce230/d3bcb/heatmap_ol1.png 325w,
/static/3fe093da35d093d369f9346e750ce230/dbb61/heatmap_ol1.png 650w,
/static/3fe093da35d093d369f9346e750ce230/74efd/heatmap_ol1.png 735w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Look mom no jQuery !!! Getting all CSS properties of a DOM element in JavaScript]]></title><description><![CDATA[Getting and setting CSS properties is a simple task. We can make it in pure JavaScript:]]></description><link>https://www.acuriousanimal.com/blog/2012/07/09/look-mom-no-jquery-getting-all-css-properties-of-a-dom-element-in-pure-javascript</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/07/09/look-mom-no-jquery-getting-all-css-properties-of-a-dom-element-in-pure-javascript</guid><pubDate>Mon, 09 Jul 2012 20:25:00 GMT</pubDate><content:encoded>&lt;p&gt;Getting and setting CSS properties is a simple task. We can make it in pure JavaScript:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var color = domElem.style.color; Â  Â // Get color
domElem.style.color=&apos;blue&apos;; Â  Â // Set new color&lt;/pre&gt;
&lt;p&gt;Using jQuery it can be done with the &lt;code&gt;$.css()&lt;/code&gt; method:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;var color = $(domElem).css(&apos;color&apos;); Â  Â // Get color
$(domElem).css(&apos;color&apos;, &apos;blue&apos;); Â  Â // Set new color&lt;/pre&gt;
&lt;blockquote&gt;&lt;p&gt;The recent &lt;a href=&quot;http://jquerypp.com/&quot;&gt;jQuery++&lt;/a&gt; project claims to have a &lt;code&gt;$.styles()&lt;/code&gt; method fastest than &lt;code&gt;$.css()&lt;/code&gt; one.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The issue is: &lt;strong&gt;How to get all the styles of a given DOM element?&lt;/strong&gt; Not only those applied directly with the &lt;code&gt;style&lt;/code&gt; attribute but those applied using CSS classes.&lt;/p&gt;
&lt;h2&gt;The solution&lt;/h2&gt;
&lt;p&gt;Next code retrieves an object with all the style properties of a given DOM element, no matter if they were specified in CSS classes or withint the style attribute of the element.&lt;/p&gt;
&lt;p&gt;The idea behind the code is simply: we invoke the browser function that computes the whole element&apos;s style or, if it is not possible, retrieves the CSS properties from the &lt;code&gt;style&lt;/code&gt; attribute.&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;    function getComputedStyle( dom ) {
        var style;
        var returns = {};
        // FireFox and Chrome way
        if(window.getComputedStyle){
            style = window.getComputedStyle(dom, null);
            for(var i = 0, l = style.length; i &amp;lt; l; i++){
                var prop = style[i];
                var val = style.getPropertyValue(prop);
                returns[prop] = val;
            }
            return returns;
        }
        // IE and Opera way
        if(dom.currentStyle){
            style = dom.currentStyle;
            for(var prop in style){
                returns[prop] = style[prop];
            }
            return returns;
        }
        // Style from style attribute
        if(style = dom.style){
            for(var prop in style){
                if(typeof style[prop] != &apos;function&apos;){
                    returns[prop] = style[prop];
                }
            }
            return returns;
        }
        return returns;
    };&lt;/pre&gt;
&lt;p&gt;The code works (or must work) on any browser. For FireFox and Chrome browser the right way to get the computed style is through the window.getComputedStyle() method, while on IE and Opera browsers the dom.currentStyle property is the right place.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Brief introduction to Dojo Widgets creation]]></title><description><![CDATA[In the past, I have been using Dojo Toolkit for relatively little projects. I choose Dojo by its well designed API and its rich and homogeneous set of widgets.jQuery and jQueryUI are great projects, but I found the problem of consistency with jQuery plugins. Each one follow its own rules, each one has its documentation and API, etc.]]></description><link>https://www.acuriousanimal.com/blog/2012/07/08/brief-introduction-to-dojo-widgets-creation</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/07/08/brief-introduction-to-dojo-widgets-creation</guid><pubDate>Sun, 08 Jul 2012 14:46:00 GMT</pubDate><content:encoded>&lt;p&gt;In the past, I have been using &lt;a href=&quot;http://dojotoolkit.org/&quot;&gt;Dojo Toolkit&lt;/a&gt; for relatively little projects. I choose Dojo by its well designed API and its rich and homogeneous set of widgets.jQuery and jQueryUI are great projects, but I found the problem of consistency with jQuery plugins. Each one follow its own rules, each one has its documentation and API, etc.&lt;/p&gt;
&lt;p&gt;Because of this, once I know Dojo I chose it as my preferred framework for RIA applications.&lt;/p&gt;
&lt;p&gt;Here I would like to present you a short introduction on how to create widgets in Dojo. It is a simply summary of things relate to the widgets creation, it is not a step by step tutorial or code sample:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/dojo-intro/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 78.29457364341084%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABWElEQVQoz71Ta0/CUAzl//8MExP/AUrcw8kAudsYW6ISM9nGZLsgbuy9u5dFiKBEgph4cj80aU/be9o2ZrNZHMfRV8Q/YDcmCIJGGIZ1XVdVVf8SZVn+jQwN7JKPz7Iln4AVOU1Tz/Ns24b+sywD/Xw/WKuWpWmR567nEgIeCHPTNAGrKIoNGSxN01iWRQgxDPNwrxq6dt1qCqiHhEGn2+c7PZrlJFlt83fyUKUo2jRNIAOxAZnm87miqPaL3h4seDXXLHI7CHXLxaOmoV5aj/RYvXLG4nTEYV1cegtC8k1lQojjOAgJQJaf8hYqb2RyQdealUcT+u2ZWk54PDzDyrk3ZjyDK7Jg+2eojDFWFEWSpH4fMVSL4bqCpIgiAvc6Lote89T/mEX5XTDf96E4NG+ahq7rjjPF8DA+PLajR7XKUh1akn38y3qeuGGgU5Ik0R4OHOPnSb4DXGaU6e3RIhoAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;dojo intro&quot; title=&quot;dojo_intro&quot; src=&quot;/static/2663309b267c01d9263dc6c32a0b6d95/dbb61/dojo_intro.png&quot; srcset=&quot;/static/2663309b267c01d9263dc6c32a0b6d95/19bd1/dojo_intro.png 163w,
/static/2663309b267c01d9263dc6c32a0b6d95/d3bcb/dojo_intro.png 325w,
/static/2663309b267c01d9263dc6c32a0b6d95/dbb61/dojo_intro.png 650w,
/static/2663309b267c01d9263dc6c32a0b6d95/2f110/dojo_intro.png 903w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;The presentation is built using the &lt;a href=&quot;http://bartaz.github.com/impress.js&quot;&gt;impress.js&lt;/a&gt; tool, so I recommend to visualize it using Chrome browser. You can use a recent version of FireFox too, but I see Chrome is the one which make smoothest visualization.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[OpenLayers Cookbook]]></title><description><![CDATA[I'm near to finish my first experience as the author of a technical book. Titled OpenLayers Cookbook it has been written for PacktPublishing editorial, while the OpenLayers version 2.11 was the stable release.]]></description><link>https://www.acuriousanimal.com/blog/2012/06/28/openlayers-cookbook</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/06/28/openlayers-cookbook</guid><pubDate>Thu, 28 Jun 2012 20:09:00 GMT</pubDate><content:encoded>&lt;p&gt;I&apos;m near to finish my first experience as the author of a technical book. Titled &lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;OpenLayers Cookbook&lt;/a&gt; it has been written for &lt;a href=&quot;http://www.packtpub.com&quot;&gt;PacktPublishing&lt;/a&gt; editorial, while the OpenLayers version 2.11 was the stable release.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 302px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 123.50993377483444%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAgME/9oADAMBAAIQAxAAAAFDsnY00CBWQUymWUVAP//EABwQAAICAgMAAAAAAAAAAAAAAAADAQISExEgI//aAAgBAQABBQJceZyUZWKbKm2hiyDFpK2T0//EABcRAAMBAAAAAAAAAAAAAAAAAAABEhH/2gAIAQMBAT8B1FIstn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARIR/9oACAECAQE/AZeksstn/8QAGxAAAgIDAQAAAAAAAAAAAAAAADEBAhARIDL/2gAIAQEABj8CrmI2MYrCseZ4/8QAIBAAAgEDBAMAAAAAAAAAAAAAAAERIUFxIDFRkWGh8P/aAAgBAQABPyHqCqVVgquMJBpcE279HwQlogjyXvYNpbc6P//aAAwDAQACAAMAAAAQhNAO/8QAGREBAAIDAAAAAAAAAAAAAAAAABFhATFR/9oACAEDAQE/EMRbWp8VP//EABgRAQADAQAAAAAAAAAAAAAAAAEAEBFh/9oACAECAQE/EFE5OM1R/8QAHBABAAMAAwEBAAAAAAAAAAAAAQARITFhgRBB/9oACAEBAAE/ELmweG9zUkAXrmWA28TInbU0xTdNKocoC344JH4BQCG47WbU2qtDH4z/2Q==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;7843OS OpenLayer Cookbook cov 0&quot; title=&quot;7843OS OpenLayer Cookbook cov 0&quot; src=&quot;/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg&quot; srcset=&quot;/static/99c01733248e8e53a81f05020d6d48cc/aca85/7843OS_OpenLayer%20Cookbook_cov_0.jpg 163w,
/static/99c01733248e8e53a81f05020d6d48cc/c2f1e/7843OS_OpenLayer%20Cookbook_cov_0.jpg 302w&quot; sizes=&quot;(max-width: 302px) 100vw, 302px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It follows the PacktPublishing specifications of what they understand a cookbook must be: &lt;strong&gt;&lt;em&gt;practical&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;The cookbook must be also limited to over 300 pages, but I can&apos;t control myself and finally I have written more than 400 pages :) Hopefully I have permission from PacktPublishing to publish some of the book chapters in my blog. So I will try to get some time and write some of the &lt;em&gt;forgotten&lt;/em&gt; recipes here for you.&lt;/p&gt;
&lt;div&gt;
&lt;h2&gt;Who this book is for&lt;/h2&gt;
&lt;/div&gt;
&lt;p&gt;If you are a GIS-related professional with some basic knowledge of web technologies and want to start or gain in-depth knowledge of creating web mapping applications, this book is written for you.&lt;/p&gt;
&lt;h2&gt;The book&lt;/h2&gt;
&lt;p&gt;I like to consider the book an intermediate book where the reader can understand the basic concepts of a web mapping application and learn all the basic usages of OpenLayers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Create maps, understand projection and other important properties&lt;/li&gt;
&lt;li&gt;Add raster and vector layers&lt;/li&gt;
&lt;li&gt;Work with important tile providers&lt;/li&gt;
&lt;li&gt;Work with OGCs WMS and WFS compliant servers&lt;/li&gt;
&lt;li&gt;Read/write features from/to different data sources&lt;/li&gt;
&lt;li&gt;Style features to improve their visualisation&lt;/li&gt;
&lt;li&gt;Understand events and work with the main controls&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have created the chapters in the appropriate order required to learn OpenLayers in a &lt;em&gt;natural&lt;/em&gt; way and, for each chapter, I have written a set or recipes that shows the main and more common things required in a day to day job.&lt;/p&gt;
&lt;h2&gt;The writing&lt;/h2&gt;
&lt;p&gt;It has been a hard task to me to write this book. Think on the appropriate recipes, introduce concepts and code the samples takes me more time than I consider initially.&lt;/p&gt;
&lt;p&gt;As many other libraries, OpenLayers has plenty of classes with lots of properties and methods, so create specific recipes to show their usage and utility was not an easy task. Fortunately I count with a great team of professionals from PacktPublishing and a great group of reviewers ;)&lt;/p&gt;
&lt;p&gt;I can say by my experience writing a book, without to be a best seller author, is a purely vocational tasks. Hope I can repeat the experience.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Jelastic, cloud platform for Java]]></title><description><![CDATA[Some days ago I receive an invitation for testing Jelastic
  product and, today Saturday, I had a while, made my homework and had my first contact with the platform.]]></description><link>https://www.acuriousanimal.com/blog/2012/06/23/jelastic-cloud-platform-for-java</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/06/23/jelastic-cloud-platform-for-java</guid><pubDate>Sat, 23 Jun 2012 19:03:00 GMT</pubDate><content:encoded>&lt;p&gt;Some days ago I receive an invitation for testing &lt;a href=&quot;http://jelastic.com&quot;&gt;Jelastic&lt;/a&gt;
product and, today Saturday, I had a while, made my homework and had my first contact with the platform.&lt;/p&gt;
&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 194px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 24.22680412371134%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABb0lEQVQY02M4cuRI57lz51YdPny4mgEKnq227b+6wkkBxL69yV37znKrKhD7////nFCa9eOlFPFPN7M0T6/199+32kcBKMb072kVJ8OjR4/+3759+/+NGzf+z5g2xRuk4X6HzLTb0w2KTs52XHh7slbXxUbxguk9XjpXFtqtebrAKOXEdNuJOzoM0q9M1tu3rVaj7MZkvcyDvRbT5hXrWjM8ePAAZNiHU6dO/p8yedIGkIFnikV6jpZIXNxepb5sZ674gqP5gnVHmjUiztYr3DlcINy1p0p59uES8YI9abzFZ4oEUw4WiNw6UippA/be3r17/9+6dev/6dOn/icmxPuBxI7m8iycGsyVNz9DdmJrqIj7kgTBziWJQm1Lk0TWTgnnS5iTLDl1VihX4NJU0doZkbwlE/3ZU9fkyc6ZlSFvw1BVVZU3ceLEySXFRYUgw5anCaksjuboALHFGRg4gBQTAypgBGJWJDZMnkUYiAEdu6LDh9ejhwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jelastic logo&quot; title=&quot;jelastic logo&quot; src=&quot;/static/3a962f83badf81cab20c4c92281d3558/d3ffe/jelastic_logo.png&quot; srcset=&quot;/static/3a962f83badf81cab20c4c92281d3558/19bd1/jelastic_logo.png 163w,
/static/3a962f83badf81cab20c4c92281d3558/d3ffe/jelastic_logo.png 194w&quot; sizes=&quot;(max-width: 194px) 100vw, 194px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;
&lt;h2&gt;Who is behind Jelastic?&lt;/h2&gt;
&lt;p&gt;That was my first question so I took a look to the Jelastic web site.&lt;/p&gt;
&lt;p&gt;The best way to answer this is looking at the &lt;a href=&quot;http://jelastic.com/team&quot;&gt;Jelastic Team&lt;/a&gt; section. Founders, advisers, special partners conforms a real professional team. As special partners you will find the MySQL (Michael &amp;quot;Monty&amp;quot; Widenius) and Nginx (Igor Sysoev) authors.&lt;/p&gt;
&lt;p&gt;Special mention too to their evangelists (not mentioned in the web page). In my case,&amp;#xA0;Judah Johns spent their time writing me two personal emails simply to let me know about the Jelastic platform and the possibility to test it for free. That&amp;apos;s a real evangelist ;)&lt;/p&gt;
&lt;h2&gt;Registration&lt;/h2&gt;
&lt;p&gt;Sign up with the service is really easy. Once sent the registration email you will receive a welcome email with an initial password for log in.&lt;/p&gt;
&lt;h2&gt;First impression&lt;/h2&gt;
&lt;p&gt;My first impression with Jelastic, from the web page to the service once logged in, was:&amp;#xA0;Ough!!!&lt;/p&gt;
&lt;p&gt;I know design is something subjective, what you love other can hate, but the first impression is what counts in a 75%.&lt;/p&gt;
&lt;p&gt;Sorry Jelastic but, from my point of view, you need a redesign. That darker theme is absolutely dreadful.&lt;/p&gt;
&lt;h2&gt;Environments&lt;/h2&gt;
&lt;p&gt;After the first impression I start working in something more functional, which is what really matters for a developer.&lt;/p&gt;
&lt;p&gt;An environment is a concrete configuration of servers for load balancing, application logic and storage.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 538px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 71.37546468401487%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACs0lEQVQ4y21Uy2oUURAdyBeIC91JwBgIwUnMMI9+vx/pme50z6RneiadtyHGEESDIQYRFy4SRCS40IC4EEEFV7rQhSv9CTf+yrH69kwyCS6Ky62uOnXqVN0uyHYbwyZZ8fk7sxiC2aJv832Lc38/djin8D+wLEnMAExKNuah2wkMuwVOdFEjE/SI4jo58AUChYFz+COvBeAkB6IdQo9S6HEH6/t7MFtLkByKM5t5wQu5meUMnQ6rmJ2Kk7AkVetg9JGHkc8SpHe3MfM+xcgnCZN3GpAEH5we5Dn9zk4Bs0o1pUFtzLGzItWZZrpBDHpt3FxxIS21UFlqorjuQ47bECWPYuvgKJ7X5vrAOXhB0HyUawrpY6LCa7hVlqG4Caa9dej1FVSNNXD2KnS9A0vvwgzWULRTKJmmko0aGc/A6xCMZl/DAW2qohohSr0nUI5/YXTzLbijHyg+/ACR5LAbXUxtn0A8/o2Z1i5U3YdoRGQhRD1kup6bskz6aWaEifAAE7vfcKX9CuM7XzC2coKqSa0S8+u9lxh/8BUTzhY0i2RxuixPyU4iVBiIKhJdnqrIpOW0s4FLwQuMebu4GhzimrdPktgQVQ83yHc5eI6SSW0bAU08YxeAV/285QFg5uBV0oFWxvASuG4TfrQIt5GA02gfnQVEnQ2Y9QW2DdpswjSs8DqzyakqqnIj1/Cs7XxSYlakfRcC3QUzxnIaIompAytBFMXY6tIe0jBrMk1bnqVJh/miDxZ7mKUgWig1liG+/olych+m4+PPRxnfnwooyj282RPx93AMiWGgrAbUNg2GuhrgnANk75R0UOop3J1n0JobbD2ODlI83myipMTYXp3H8b0QLr2iikIENJ8ROQW8+Lglqw3VacNy6c5+BJkEKSR3ke4x01LyliHTxM9kOnsx/wA3pRGegbMrlgAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jelastic env&quot; title=&quot;jelastic env&quot; src=&quot;/static/ee7d4e04034577ef9499a503995b8464/26dcc/jelastic_env.png&quot; srcset=&quot;/static/ee7d4e04034577ef9499a503995b8464/19bd1/jelastic_env.png 163w,
/static/ee7d4e04034577ef9499a503995b8464/d3bcb/jelastic_env.png 325w,
/static/ee7d4e04034577ef9499a503995b8464/26dcc/jelastic_env.png 538w&quot; sizes=&quot;(max-width: 538px) 100vw, 538px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Load Balancing is achieved with Nginx server.&lt;/p&gt;
&lt;p&gt;Application logic is implemented as a Java server side application and can run on Tomcat6, Tomcat7, Jetty6 or GlasFish3 servers using JDK6 or JDK7.&lt;/p&gt;
&lt;p&gt;For storage we can use SQL or NoSQL solutions. For SQL we have the most known open source projects: PostgreSQL 8.4, MySQL 5.5 and MariaDB 5.2. For NoSQL we can use MongoDB 2.0 or CouchDB 1.1.&lt;/p&gt;
&lt;p&gt;Creating a new environment is incredible easy. We can choose to use a load balancer or not, define the number of application logic server instances, possibility of high availability (which means &lt;a href=&quot;http://jelastic.com/docs/session-replication&quot;&gt;session replication&lt;/a&gt;) and the storage service.&lt;/p&gt;
&lt;p&gt;Once created, the environment&amp;apos;s topology can be modified at any time. At practice this means you can scale your application adding more application server instances or applying the high availability options, which allows to replicate the sessions. In addition you can change or add a new store services.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Be aware if you change your relational or NoSQL server because data lost.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;Deploying applications&lt;/h2&gt;
&lt;p&gt;For testing purposes, Jelastic comes with a &lt;em&gt;HelloWorld.war&lt;/em&gt; sample applications. Deploy it is as easy as selecting and deploying on one of your, previously created and configured, environments.&lt;/p&gt;
&lt;p&gt;To deploy your own application you need to upload it first. After uploaded your application will be shown in the applications list and you could deploy like previously commented.&lt;/p&gt;
&lt;h2&gt;Server configuration&lt;/h2&gt;
&lt;p&gt;Once created the environment, you have access to the configuration files of your servers.&lt;/p&gt;
&lt;p&gt;I played a bit with a simple Tomcat+MySQL configuration and see you:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;have access to modify files like &lt;em&gt;web.xml&lt;/em&gt; or &lt;em&gt;server.xml&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;can change logging preferences&lt;/li&gt;
&lt;li&gt;can upload new JAR files to or remove them from the &lt;em&gt;lib&lt;/em&gt; folder&lt;/li&gt;
&lt;li&gt;have access to the &lt;em&gt;webapps&lt;/em&gt; folder&lt;/li&gt;
&lt;li&gt;have a shortened version of &lt;em&gt;my.cnf&lt;/em&gt; file you can edit.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Log files and monitoring&lt;/h2&gt;
&lt;p&gt;Jelastic monitors the servers of your environments and presents the results in a nice graphical way.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 44.788441692466456%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB4UlEQVQoz21SXYvTQBTNvxDEJmm+k0kmyUzSbNvUKn1YFEXQXVBxXdruttB92NWFfRV/gO8igj/1eCaLIOLDYe69c+8999wZa7O/w3p3i/OLG3zbv8HP3TG+Xx7j1+Elvm7f4vDhCp/Pr/Dp4wHbdztcnm6xP91gd7LG2ckGF/Sv36/x4/oMX9avYGXlEbKyQ1y0CPM5imaFpFrCFz2y+jFENUWuZhB6joS5QaqYO0HVLZHS91MNUSg86wu8WJSwvExjnNZw4gpuUiLIFZvVjJVwkoIoYcclfOa5cc0cxTuNULTweLoJY5HGQ7/BA7+GFZEtEB3GScvElkXNAC+jn/SMTVmkScLinKSigiNKjDI5nMYfqRyjLoWTS1hmMi+dD8VeuqDsJyRY0p7BDp+z+YqYwE4kXM0mhNtIBB1VNFShqaIthphNEsuM7FHymNJ8objDGXd3NKzBzwpOyikSQ6rgxZRLBFkDqUluVJhYpChbwYkqWEaKJyiTBQb2sKcajyh7tRBIZc0YH0JO2NzsT93vnCR/7Ei2HGI63FsmGLFpyIuQdshglLFprPH6aYy6pKyIdwWnanvIZn6Pv+xq0qOk75uG5pXznMn/oODULb9DTTsV5pGa4dv8D7HshtNn3m8wKR7Uw5XoiAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jelastic monit&quot; title=&quot;jelastic monit&quot; src=&quot;/static/7cd1cd63d5d5bcf8e179bdaab7c2590e/dbb61/jelastic_monit.png&quot; srcset=&quot;/static/7cd1cd63d5d5bcf8e179bdaab7c2590e/19bd1/jelastic_monit.png 163w,
/static/7cd1cd63d5d5bcf8e179bdaab7c2590e/d3bcb/jelastic_monit.png 325w,
/static/7cd1cd63d5d5bcf8e179bdaab7c2590e/dbb61/jelastic_monit.png 650w,
/static/7cd1cd63d5d5bcf8e179bdaab7c2590e/7af3e/jelastic_monit.png 969w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;In addition it also allows to see the log files of the servers:&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 26.785714285714285%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKklEQVQY0zWQ6VLCQBCE8yKC/AAJhZIQQZAjAQnkIJtjcweCQKnv/wTtZC1/dPXWbM03PSPttg4GygLdwQQdeYq2PBfqvCywsRN4YQUvKOGHOUJ+Ql5cwXiBvLrB8VJYboI4rem/wHrjQLKPETWlmC8NqJMZhiMNXfkZ/aGKKClR1XfU12/h588v8S7Pd4RxQbAQthfB2Nl4na2hva0g3WIXP2WIi28gM6cIdBXBegSmj8FoEE9P4NkJAc+R5DVcxmFajCAOdgcPFgX6OByxt31sqCZNV3u8GxaG2gKtnoKH3kjosa/CYQkBK0QNtHFK7Ec5nSClYZlI2EC3e5egHpa6CalpbNQiSKP2kyK8I49hOgFBuVjLZTGlLJCVF7FuLFIXcP2/+v8JfgF/lrcE5BRvCwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jelastic log&quot; title=&quot;jelastic log&quot; src=&quot;/static/3f5df510ee65ba01fd84e1b23e47ca11/dbb61/jelastic_log.png&quot; srcset=&quot;/static/3f5df510ee65ba01fd84e1b23e47ca11/19bd1/jelastic_log.png 163w,
/static/3f5df510ee65ba01fd84e1b23e47ca11/d3bcb/jelastic_log.png 325w,
/static/3f5df510ee65ba01fd84e1b23e47ca11/dbb61/jelastic_log.png 650w,
/static/3f5df510ee65ba01fd84e1b23e47ca11/04a72/jelastic_log.png 840w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;Looking log files in the browser is something funny, but &lt;strong&gt;I would like a way (I didn&amp;apos;t find it) to download the log files to my local machine&lt;/strong&gt;. Looking for errors in a production environments with tons of lines isn&amp;apos;t easy to do in that text area.&lt;/p&gt;
&lt;h2 style=&quot;text-align: left;&quot;&gt;Resources&lt;/h2&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;Connect your application to the storage service (relational or NoSQL database) is really easy. The &lt;a href=&quot;http://jelastic.com/docs/general-information&quot;&gt;documentation&lt;/a&gt; contains samples for all the databases the Jelastic has support.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;The application logic servers have access to a home directory where you can create property files or upload whatever you want your application can use later using:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;System.getProperty(&amp;quot;user.home&amp;quot;)&lt;/pre&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;At the opposite of Amazon AWS, Google App Engine or others, Jealastic is completely oriented to Java.&lt;/p&gt;
&lt;p&gt;If you are a Java developer and ever worked with AWS or Google App Engine you will find Jelastic complete different and incredible easy to use, really similar as a usual day to day work.&lt;/p&gt;
&lt;p&gt;While AWS is &lt;em&gt;machine oriented&lt;/em&gt;, where you start as many EC2 instance as you require, with Jelastic you have the concept of &lt;strong&gt;cloudlet&lt;/strong&gt; and you can forget completely to manage machine instances and their resources.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Note: &lt;strong&gt;&lt;/strong&gt;A cloudlet is roughly equivalent to 128 MB RAM and 200Mhz CPU core.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I have written this post before dinner so, as you can see, it is nothing exhaustive but a simple platform presentation.&lt;/p&gt;
&lt;p&gt;A great continuation would require to explain the experiences working with a real application, deploying operations and tweaking the running environment to achieve good performance with lowest cloudlet consume.&lt;/p&gt;
&lt;p&gt;If someone is interested, another great article could compare the cost of the same application running with Amazon AWS and Jelastic: where runs with better performance and which one is cheaper.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Stupid PHP snippet to always download a changing file]]></title><description><![CDATA[It is short, it is easy, it is stupid but... can save you time. If you need to download every few minutes a remote file that changes its contents at regular intervals of time this is for you.]]></description><link>https://www.acuriousanimal.com/blog/2012/05/06/stupid-php-snippet-to-always-download-a-changing-file</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/05/06/stupid-php-snippet-to-always-download-a-changing-file</guid><pubDate>Sun, 06 May 2012 18:02:00 GMT</pubDate><content:encoded>&lt;p&gt;It is short, it is easy, it is stupid but... can save you time. If you need to download every few minutes a remote file that changes its contents at regular intervals of time this is for you.&lt;/p&gt;
&lt;p&gt;Save this on a &lt;code&gt;stupid.php&lt;/code&gt; file (and change the values):&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;lt;?php
$url = &apos;somewhere_in_the_space&apos;;
while(true) {
	$locaFile = &quot;some_local_file_name_&quot;.time().&quot;_with_extension&quot;;
	file_put_contents($locaFile, file_get_contents($url));
	echo &quot;Done... $locaFile \n&quot;;
	sleep(60*5);    // Sleep 5 minutes !!!
}
?&amp;gt;&lt;/pre&gt;
&lt;p&gt;and execute with:&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;&amp;gt; php -f stupid.php&lt;/pre&gt;
&lt;p&gt;Remember it will run forever until you kill the process so don&apos;t expect to finish.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[The dojox.grid widgets family and the strange case of the items modification]]></title><description><![CDATA[So, you are building a web application and decided to use the great Dojo framework. Â Probably, if you need to use grids, you will decide to use some of the available widgets subclass of dojox.grid. Well, my friend, be aware with the data you use to fill the grid's store !!! function(DataGrid, ItemFileWriteStore){ });]]></description><link>https://www.acuriousanimal.com/blog/2012/04/28/the-dojox-grid-widgets-family-and-the-strange-case-of-the-items-modification</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/04/28/the-dojox-grid-widgets-family-and-the-strange-case-of-the-items-modification</guid><pubDate>Sat, 28 Apr 2012 19:52:00 GMT</pubDate><content:encoded>&lt;p&gt;So, you are building a web application and decided to use the great Dojo framework. Â Probably, if you need to use grids, you will decide to use some of the available widgets subclass of &lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html&quot;&gt;dojox.grid&lt;/a&gt;. Well, my friend, be aware with the data you use to fill the grid&apos;s store !!!&lt;/p&gt;
&lt;h2&gt;The scenario&lt;/h2&gt;
&lt;p&gt;Start creating a piece of code to execute when the page is ready. It will use the &lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html&quot;&gt;DataGrid &lt;/a&gt;widget with an &lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html&quot;&gt;ItemFileWriteStore &lt;/a&gt;store:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;require([&apos;dojox/grid/DataGrid&apos;, &apos;dojo/data/ItemFileWriteStore&apos;, &apos;dojo/domReady!&apos;],
&lt;p&gt;function(DataGrid, ItemFileWriteStore){&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Now, create a &lt;em&gt;data&lt;/em&gt; object with a set of random items:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;	// Set up data store
	var data = {
		identifier: &quot;id&quot;,
		items: []
	};
	// Initialize with random elements.
	var rows = 10;&lt;/pre&gt;
&lt;p&gt;Note we have stores our items in a different array:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;	var items = [];
	for(var i = 0; i &amp;lt; rows; i++){
		items.push({ id: i+1, col1: &quot;the first column&quot;, col2: false, col3: &apos;A column with a long description&apos;, col4: Math.random()*50 });
	}
	data.items = items;&lt;/pre&gt;
&lt;p&gt;Now, create the store and set the grid layout:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;	var store = new ItemFileWriteStore({data: data});
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Set up layout
var layout = [[
		{&amp;#39;name&amp;#39;: &amp;#39;Column ID&amp;#39;, &amp;#39;field&amp;#39;: &amp;#39;id&amp;#39;, &amp;#39;width&amp;#39;: &amp;#39;100px&amp;#39;},
		{&amp;#39;name&amp;#39;: &amp;#39;Column 1&amp;#39;, &amp;#39;field&amp;#39;: &amp;#39;col1&amp;#39;, &amp;#39;width&amp;#39;: &amp;#39;100px&amp;#39;},
		{&amp;#39;name&amp;#39;: &amp;#39;Column 2&amp;#39;, &amp;#39;field&amp;#39;: &amp;#39;col2&amp;#39;, &amp;#39;width&amp;#39;: &amp;#39;100px&amp;#39;},
		{&amp;#39;name&amp;#39;: &amp;#39;Column 3&amp;#39;, &amp;#39;field&amp;#39;: &amp;#39;col3&amp;#39;, &amp;#39;width&amp;#39;: &amp;#39;auto&amp;#39;},
		{&amp;#39;name&amp;#39;: &amp;#39;Column 4&amp;#39;, &amp;#39;field&amp;#39;: &amp;#39;col4&amp;#39;, &amp;#39;width&amp;#39;: &amp;#39;150px&amp;#39;}
	]];&amp;lt;/pre&amp;gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, create the grid (remember to startup it):&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;	// Create a new grid
	var grid = new DataGrid({
		id: &apos;grid&apos;,
		store: store,
		structure: layout,
		rowSelector: &apos;20px&apos;
	});
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Append the new grid to the div
grid.placeAt(&amp;quot;gridDiv&amp;quot;);

// Call startup() to render the grid
grid.startup();&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;});&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The grid code needs we have an HTML element in our page:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;div id=&amp;quot;gridDiv&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/pre&gt;
&lt;p&gt;Here is the result of the previous code:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2012/04/table.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 44.268774703557305%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkklEQVQoz11SC8+bMBDr//+B6z7xCCEQEsKz0r4SoPV8KdukIaETvotj+7gp06HQLWyYUTUORW3hhgV51cC4AbafkKkajR/TTMvvjn03rvye8FVoVK3/i9+sDzjOE6/3G+M4olQVwjDCeY/9OLHFDbqu+Rr2FIpS4bltOF9vxD2iaRpiJaxzCf+PcIKqdKq+77ETjzHCGKo1bSKW/rbFNL/vO2pTI8syGBL/+n5+CPfjSKSPxyMRrazzMic8UmEIgaoH9jy876k6pnlRGIaAzjss64rvJwlb91HyBjDwUJaX6AOz69xlOUIxBqU08qKgmoLWLoW8UNcaP+53VFrzguOfwvP1wrIsJOpYV4zTlHDJ0DNPR2Udc5K+XCLzkZa7zqZspSf4zbrATCTkE/M8M4sW0zQni3JACK21SbHkJHlK+MeVryNRbQzdjWmeCj8H5ZEt54VKTdnyedmqNLesP1vOizJZk0dECNn96ydaKpfN3xrrEpFY7LmQjg2pYlPwYRwSJlb/1OGal74olF9Hqjj8DSQvpzZyb9hZAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;table&quot; title=&quot;table&quot; src=&quot;/static/1bf37d5d7aba9c50a1f9092b1e59e251/dbb61/table.png&quot; srcset=&quot;/static/1bf37d5d7aba9c50a1f9092b1e59e251/19bd1/table.png 163w,
/static/1bf37d5d7aba9c50a1f9092b1e59e251/d3bcb/table.png 325w,
/static/1bf37d5d7aba9c50a1f9092b1e59e251/dbb61/table.png 650w,
/static/1bf37d5d7aba9c50a1f9092b1e59e251/b5cf5/table.png 759w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;The issue&lt;/h2&gt;
&lt;p&gt;Our idea behind having the items stored in an array is because trying:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;to serve as input data for the grid&amp;apos;s store&lt;/li&gt;
&lt;li&gt;to store the original array to make other operations: to be used in other stores, to make a simple iteration, ... whatever we want.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The issue is &lt;strong&gt;the array of items used to initialize the data store are modified once the grid&amp;apos;s &lt;em&gt;startup()&lt;/em&gt; method is executed&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Lets go to see it in action. Check the value of the &lt;em&gt;items&lt;/em&gt; array before and after the grid&amp;apos;s &lt;em&gt;startup()&lt;/em&gt; method is executed:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2012/04/shot1.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 33.58348968105066%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQoz3WR127DMBRD/f9/2IUmSOJt2RoeWj69cZo8FCghgoJgUeR1gcDNjrpt2daFlCMxJ/YdZL14R0iRoRrQtcEooTYopVDDQNM0GGMoDsNxpKpLzGyYnGLxVk7zg3sSPvY5eXRjqE41k9zJOROjBEgJHwJJtOimndNZ8/bZ8/mtON8s19JRlpayEu08VRsp2yCPGpZ5YapHTK8IeiZtHnHiqCQoRglzqTTvp0oMNN2w0vYLrWinNtQUD8pdmn7GWYsTVWI6StqwePK6kiXpYfic0NY3pOpGahtCWxP7ltjJ/nZllfPjG5nxpCYu54tU9PzFLimLe9LNe6nimPXE5txRI23bg+tGFN6fDTInqy1fH194718mT/4mBC1G1/O31O2OP/kf7oazneluA1Y0xvAyfeIHX14d4HpoKEsAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;shot1&quot; title=&quot;Before&quot; src=&quot;/static/83daa03bf5472816311d68437f884451/dbb61/shot1.png&quot; srcset=&quot;/static/83daa03bf5472816311d68437f884451/19bd1/shot1.png 163w,
/static/83daa03bf5472816311d68437f884451/d3bcb/shot1.png 325w,
/static/83daa03bf5472816311d68437f884451/dbb61/shot1.png 650w,
/static/83daa03bf5472816311d68437f884451/6b691/shot1.png 975w,
/static/83daa03bf5472816311d68437f884451/d0baa/shot1.png 1066w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2012/04/shot2.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 33.20825515947467%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABD0lEQVQoz22Q4W7DIAyE+/4PuB+TtjXJ2oYSwJCEQALcHKpVmbqTPmGMfDY+gZVKhneEqBU2Y7CSZegB34PWyLkwGUoo0JUw6hGOHDS/aaUgxL3Gp91wHB0GKaC0hA/LnkLBq1JOsNJCNAOIm6aUsG1bZV3XelbD4AOu7QVGKqS4PgxL+cOuvSCGCGLTefb4T9XQzQaDvWN2POFiEfNymLE845w3eO9he4uubRFifGl+kpTx+W3wdu7xdSO0cqoIs3ETYKBSURz3Q4C1FkYY3C7Xan40rBM27wpNN6OXiYsKtENlj4/sOaEWkCZ0TYdpml6mq4ZpXupC05r4NR++edTvDnl/xuL8cYZz7ml41A+2jh/9mVoYTQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;shot2&quot; title=&quot;After&quot; src=&quot;/static/e67e27825e575ae74f3dbe39d7db595a/dbb61/shot2.png&quot; srcset=&quot;/static/e67e27825e575ae74f3dbe39d7db595a/19bd1/shot2.png 163w,
/static/e67e27825e575ae74f3dbe39d7db595a/d3bcb/shot2.png 325w,
/static/e67e27825e575ae74f3dbe39d7db595a/dbb61/shot2.png 650w,
/static/e67e27825e575ae74f3dbe39d7db595a/6b691/shot2.png 975w,
/static/e67e27825e575ae74f3dbe39d7db595a/d0baa/shot2.png 1066w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Yes, the objects within the items array are modified for internal pourposes.&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;This simple issue can have great implications depending on your way to code.&lt;/p&gt;
&lt;p&gt;Suppose you are getting a JSON file with information about employees and for each one the set of companies they have worked. You will store this information in JavaScript object array and may be interested on use to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;search the boss within employees&lt;/li&gt;
&lt;li&gt;initialize a &lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/TreeGrid.html&quot;&gt;TreeGrid&lt;/a&gt; to show the whole list of data.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The problem is you can&amp;apos;t use the same object array for the two tasks because in the moment the TreeGrid will execute its &lt;em&gt;startup()&lt;/em&gt; method the array of items will change its structure.&lt;/p&gt;
&lt;p&gt;How to solve this? Create a new array of objects from your original one or store them in a &lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojo/store/Memory.html&quot;&gt;Memory store&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html&quot;&gt;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html&quot;&gt;http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html&quot;&gt;http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Connecting a Store to a DataGrid -&amp;#xA0;&lt;a href=&quot;http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/&quot;&gt;http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[What Doesn't Stay in Vegas?]]></title><description><![CDATA[Today, and thanks to a colleague, I found this great video about how the Las Vegas city has grown in the past years. When Landsat 5 launched on March 1, 1972, Las Vegas was a smaller city. This image series, done in honor of the satellite's 28th birthday, shows the desert city's massive growth spurt since 1972. The outward expansion of the city is shown in a false-color time lapse of data from all the Landsat satellites.]]></description><link>https://www.acuriousanimal.com/blog/2012/03/13/what-doesnt-stay-in-vegas</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/03/13/what-doesnt-stay-in-vegas</guid><pubDate>Tue, 13 Mar 2012 07:15:00 GMT</pubDate><content:encoded>&lt;p&gt;Today, and thanks to a colleague, I found this great video about how the Las Vegas city has grown in the past years.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When Landsat 5 launched on March 1, 1972, Las Vegas was a smaller city. This image series, done in honor of the satellite&apos;s 28th birthday, shows the desert city&apos;s massive growth spurt since 1972. The outward expansion of the city is shown in a false-color time lapse of data from all the Landsat satellites.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;iframe src=&quot;http://www.youtube.com/embed/xFzdyxwx50M&quot; frameborder=&quot;0&quot; width=&quot;560&quot; height=&quot;315&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;In addition to the video, what takes special attention to me was the two most rated comments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Humans are like a virus on this planet...&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Remove the tumor&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Are we going on the right way?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Scale-adaptative Projection]]></title><description><![CDATA[Take a look to this awesome exercise from the Oregon State University:]]></description><link>https://www.acuriousanimal.com/blog/2012/03/08/scale-adaptative-projection</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/03/08/scale-adaptative-projection</guid><pubDate>Thu, 08 Mar 2012 20:09:00 GMT</pubDate><content:encoded>&lt;p&gt;Take a look to this awesome exercise from the Oregon State University:&lt;/p&gt;
&lt;a href=&quot;http://cartography.oregonstate.edu/temp/AdaptiveCompositeMapProjection/&quot;&gt;
  &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 495px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 75.15151515151516%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVQoz11T7ZKkIAz0/d/y5s+5zvgBJCEQ0OuIu7V1lpMSSCedpmfSLLWoRE5HEiIRas2wqSKfeZ5fr/nPK3z2IopNHJlV5BdWJZ167+d5ttarWnhvHFLVIsy1VhEWTlmIKVAKWRhQSVSoFCm99Qmw3tp1XaiYmQBL+xHWgxOrKCKwkphjitvOgUxrs4Z+6DopKxatOh5biAWsNBetVg14rEpGVCyJCEc3EuGcPDsXgBFxDDLgljkJk6OtohZi87dhM6xrydmTi03n/dy0DR+FvRCFeKw7xbR/thjCtqyZeX+v67JgZsDOfiJ/wm8QPq/79aer5JwVP0imquGIlNIy/2UmJPe7mdMeA0M919ygXvdBHJgh+Lqty9eSCCIewH9La0MznxmAsUAJFMJSoqRwgHzcA9rv7x3kURBD4bRqxQvgBDF+xv6JyIAlILIVt0Q3v07Qwb1envJk+sw1Ox46t/Zc2H12mqGP796uKhCc3SrkuWZ+z343UA+p5amCOFjhA8phvm1ZtuULRzBFJpi0PQ4bBH41vAYFlHMt7VaoVI6RKYI5xYC++IAdJpRHNjKGZr+r/KcFplAfu6l7GEb4OHjA3Ke3SavUYRiQf3Ygb8FEHX8b9zlFxf1T/gfQtWuoHKK3jgAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;adaptative&quot; title=&quot;adaptative&quot; src=&quot;/static/bc32c084adea4852977fec5de40b41cb/fa082/adaptative.png&quot; srcset=&quot;/static/bc32c084adea4852977fec5de40b41cb/19bd1/adaptative.png 163w,
/static/bc32c084adea4852977fec5de40b41cb/d3bcb/adaptative.png 325w,
/static/bc32c084adea4852977fec5de40b41cb/fa082/adaptative.png 495w&quot; sizes=&quot;(max-width: 495px) 100vw, 495px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;</content:encoded></item><item><title><![CDATA[Dojo + OpenLayers = New Challenges]]></title><description><![CDATA[Recently, the new Dojo 1.7 was released with many improvements and important changes.
As a developer, I'm pleased to work with Dojo on RIA application because simple reasons: </html> // Create a map instance
var map = new dojox.geo.openlayers.Map('map');
map.fitTo(-10,30,40,62); // Add to the GFX layer
gfxLayer.addFeature(feature);
gfxLayer.redraw(); };
var graphFeature1 = new dojox.geo.openlayers.WidgetFeature(descr1);
gfxLayer.addFeature(graphFeature1); };
var graphFeature2 = new dojox.geo.openlayers.WidgetFeature(descr2);
gfxLayer.addFeature(graphFeature2);]]></description><link>https://www.acuriousanimal.com/blog/2012/01/23/dojo-openlayers-new-challenges</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/01/23/dojo-openlayers-new-challenges</guid><pubDate>Mon, 23 Jan 2012 22:23:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently, the new Dojo 1.7 was released with many improvements and important changes.
As a developer, I&apos;m pleased to work with Dojo on RIA application because simple reasons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It offers almost all I need: module organization, an extensive set of widgets to create interfaces, manipulation of DOM elements, AJAX communications, etc.&lt;/li&gt;
&lt;li&gt;It is relatively easy to use and learn. Here I found the declarative way to work really useful because helps developers and designers work together but on different things.&lt;/li&gt;
&lt;li&gt;Creating custom widgets, after some relatively easy learning curve, brings you more power and flexibility.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Yes, Dojo is a great project, but as I mentioned at the beginning I like it for RIA projects, that is, for big or complex CRUD applications. For small things, like nice web pages, I prefer jQuery plus some plugins.&lt;/p&gt;
&lt;p&gt;Looking at the new features of Dojo 1.7 I found a new module dojox.geo.openlayers which acts as a wrapper around OpenLayers GIS library and extends with some Dojo capabilities.&lt;/p&gt;
&lt;p&gt;Now, add Dojo GFX shapes or Dojo widgets on top OpenLayers is possible, opining new possibilities. With this merge we can do things like add pie charts to our maps to show to statistics information. It is awesome !!!&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 425px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 64%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQozxWS24oUVxSG693yAHmBXAm5TK6E4IWIFzFoIkKISHCiCWgGkgxqN5kwxFHDnOxu+zA9U9V12se1z7tqV9UEJ7fZc7fW4l+s7/9ZyauD2eh4/upo9tdyrYAEAwpoK6G3ykraaN5bqRDpnQyGa4stZQqhlzu/3bhxOxnPF6Ppcnex+nOxwqSOC8EIi6nDWFMmKmQFc5I5ihpGNEOSVY1hRwf7n3x6LSkIPs02p+l6kqXrzZkTtDfiolG94Z1kXgMw0gXlFYs4QXNrieFcCkJIncSmMQR0OTQ0aBEJW849ZUFCQ6klhGPkNR1a1QDrnZC0ZrjGRR00JL4Bpet8sxr9k23KCEkHJ6NocPBxcBEYUHGhwaLollgNWjBveAQMgiVDMF7Vt+58d/PxdO+kApxJIIxXzgrLq9f777Z20VlasLLSnLurRLgW+HCyJhQlzrFh0C/H4/s/7izTqKgsMAfEaxmz+fKrb+7+Mo1KL7AH1lrwAm39/PzedvriXZFoR9og/+us1dhxainuO/1vIy4b2nl1dHj4+/htXdeDVV5Qp0n08uCHrdvf/7E9WiStBy9Z3HGGDV42SihaHb2fjQ9KXOaXrbrsLEo3VZ47gRXDmtPgVb4pdAwMoVKxunOC0xxY1Tt9Ppt8fv3bh2M+X1WdA4PLJ0+37+/gk1lqWR0Ua6R08upnkvX5Oeb5ZPL60fO/f30jiuw8Th8+frY9OsjyjcC1BXL95r27P+1PVyhCGaBX94GSGiUvZvNZka6mh5998fWzveIsy/oGGiOcZsFyWZQWI4by99MloLI1EKzovTRKkLJMdpene/NlWqSL+ez4+INAOS5SnGUBuCe44aSNBfD4IR870xm4CKZ10hsxWPgfwLGUzDB8o00AAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;openlayers dojo&quot; title=&quot;openlayers dojo&quot; src=&quot;/static/9adb67f4fd90bcc9d098d14b2e8799c5/a67b6/openlayers_dojo.png&quot; srcset=&quot;/static/9adb67f4fd90bcc9d098d14b2e8799c5/19bd1/openlayers_dojo.png 163w,
/static/9adb67f4fd90bcc9d098d14b2e8799c5/d3bcb/openlayers_dojo.png 325w,
/static/9adb67f4fd90bcc9d098d14b2e8799c5/a67b6/openlayers_dojo.png 425w&quot; sizes=&quot;(max-width: 425px) 100vw, 425px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;A very short introdutcion to &lt;em&gt;dojox.geo.openlayers&lt;/em&gt; package&lt;/h2&gt;
&lt;p&gt;Before making a little demo playing with all this new things, we need a short description.&lt;/p&gt;
&lt;p&gt;The main class in the package is &lt;em&gt;dojox.geo.openlayers.Map&lt;/em&gt; which acts as a kind of wrapper around the &lt;em&gt;OpenLayers.Map&lt;/em&gt; class. You can access at any time to the OpenLayers underline object with the &lt;em&gt;getOLMap()&lt;/em&gt; method.&lt;/p&gt;
&lt;p&gt;Next, there is the &lt;em&gt;dojox.geo.openlayers.Layer&lt;/em&gt; class which is a wrapper around the &lt;em&gt;OpenLayers.Layer&lt;/em&gt; class. It allows to attach to the map any Dojo element.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;dojox.geo.openlayers.GfxLayer&lt;/em&gt; is a subclass of the previous class specially designed to work with GFX shapes and render them on top of OpenLayers map.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;dojox.geo.openlayers.Feature&lt;/em&gt; class represents the features we can attach to a &lt;em&gt;dojox.geo.openlayers.Layer&lt;/em&gt;. The subclass &lt;em&gt;dojox.geo.openlayers.GeometryFeature&lt;/em&gt; is designed to render LineString, Points and Collections of geometries.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Because GeometryFeature works with &lt;em&gt;dojox.gfx&lt;/em&gt; package to render the geometries you need to add it always to a&lt;em&gt; dojox.geo.openlayers.GfxLayer&lt;/em&gt; layer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;Hands on code&lt;/h2&gt;
&lt;p&gt;We are going to create a map with three features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a &lt;em&gt;dojox.gfx&lt;/em&gt; shape feature, with an animation attached to it to change it fill color,&lt;/li&gt;
&lt;li&gt;a pie chart and&lt;/li&gt;
&lt;li&gt;a stacked area chart.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can see the demo in action &lt;a href=&quot;http://www.acuriousanimal.com/dojo-openlayers/&quot;&gt;http://www.acuriousanimal.com/dojo-openlayers/&lt;/a&gt;, (source code at &lt;a href=&quot;https://github.com/acanimal/dojo-openlayers&quot;&gt;GitHub&lt;/a&gt;) and it should looks something like:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/dojo-openlayers/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 450px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 69.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACuklEQVQoz02RW08TQRzF+aImfgt9NF6iiUER2m6BUmOUiGwrhRZ6sdAqUi6Fmdnd2ft2Z2dmL91ui2JifHWsmJich0kmv5z/OWdhHyGhOoBfDX2c8oFp7AHQgFCog9AhUrHr/JjGQ8M4APDE0E3fnSV8ErFvk3jhL7wHYFdV05Rd2EYdKR1dP9C0gWN7lA4NK4hYV9ebikZ9P+M8C/ksCWdJ9AduINTHmmJbyLZcOnrbauW3tgqyXKpUavXGu0p1fVsuyfLHdickLHSCcUAnURizYOHvzT4nNPDbV8Bh9mb1w/2nzx4uvnix9KqwkpfyhaIkreXze5XKdRyPKY8CmnI24Wx+NkS67w0M48LSWeTJu/KDxcWXS/lSce11qVReL73ZKJfX1mvVyjQOsyjM4lA8plF4m3keG3zB6oVjlbbeL71clpaLhZy0Wiiu5qViLi+t5A52d28yUQsXvHAe3zrPJertIqSYTrW6I+UKwkpaKZQ3Nl5vlOs7O2efT4jupAET8B/bJEzZf7BQByKPjFr1em55ZV1arcm1c8Uj4XR8/TOd/Zx+/5WEyYRRAY+DYML5LdyYqwZAD+Nuq91sNJRLOGbRp3OvdWLH2c3hmb1/bGbZJEvYNOEBIccavp2qhZS+onWg0kdqQkWekPpByPlmL7rzdPjknXavcHb38SHAwfWYJYyemubOFZhPhWAfaREJKCGB64syILa3B2oP658RlY/s1ind7pnykeV5fMZYFLAmQG1FmcMQ9jUtDqnruiEjOvGev9l99NbsKe6lg7u6ao4c1bds4oic57ppe57jeZSMFg7ESBCeYpxGLE04C8iRilf32rnq8T7UW+J3CI6A+gkpws33fPEAlnWTRt8m/3ZuInRlWrY3EjU0ITrVMLBM1bKG2OgA5auKxZDiwAHWD5Ei5I48QslvIkmXjuUZu8YAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sc01 dojo openlayers1&quot; title=&quot;sc01_dojo_openlayers&quot; src=&quot;/static/a0123b777dc94c42b24429fecbfcfc7d/44727/sc01_dojo_openlayers1.png&quot; srcset=&quot;/static/a0123b777dc94c42b24429fecbfcfc7d/19bd1/sc01_dojo_openlayers1.png 163w,
/static/a0123b777dc94c42b24429fecbfcfc7d/d3bcb/sc01_dojo_openlayers1.png 325w,
/static/a0123b777dc94c42b24429fecbfcfc7d/44727/sc01_dojo_openlayers1.png 450w&quot; sizes=&quot;(max-width: 450px) 100vw, 450px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Lets go. Start creating new HTML page and paste the next code, which correspond to the skeleton of our demo:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;&amp;lt;!DOCTYPE HTML&amp;gt;
&amp;lt;html&amp;gt;
    &amp;lt;head&amp;gt;
		&amp;lt;title&amp;gt;Dojo + OpenLayers = New Challenge&amp;lt;/title&amp;gt;
        &amp;lt;style&amp;gt;
            html, body {
                width: 100%;
                height: 100%;
            }
        &amp;lt;/style&amp;gt;
        &amp;lt;script type=&quot;text/javascript&quot; src=&quot;https://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;https://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/claro.css&quot;/&amp;gt;
        &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;https://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dijit/themes/claro/document.css&quot;/&amp;gt;
        &amp;lt;script type=&quot;text/javascript&quot; src=&quot;http://openlayers.org/api/2.10/OpenLayers.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
        &amp;lt;script type=&quot;text/javascript&quot;&amp;gt;
            require([
                &quot;dojo/ready&quot;,
                &quot;dojo/parser&quot;,
                &quot;dojo/dom-construct&quot;,
                &quot;dojox/geo/openlayers/Map&quot;,
                &quot;dojox/geo/openlayers/GfxLayer&quot;,
                &quot;dojox/geo/openlayers/GeometryFeature&quot;,
                &quot;dojox/geo/openlayers/WidgetFeature&quot;,
                &quot;dojox/gfx/fx&quot;,
                &quot;dojox/charting/widget/Chart2D&quot;,
                &quot;dojox/charting/themes/PlotKit/blue&quot;
            ], function(ready) {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;            ready(function(){
                console.log(dojo.version.major + &amp;quot;.&amp;quot; + dojo.version.minor + &amp;quot;.&amp;quot; + dojo.version.patch);

				// Here put the magic !!!
            })
        });
    &amp;amp;lt;/script&amp;amp;gt;
&amp;amp;lt;/head&amp;amp;gt;

&amp;amp;lt;body class=&amp;quot;claro&amp;quot;&amp;amp;gt;
    &amp;amp;lt;div id=&amp;quot;map&amp;quot; style=&amp;quot;width: 100%; height: 100%;&amp;quot;&amp;amp;gt;&amp;amp;lt;/div&amp;amp;gt;
&amp;amp;lt;/body&amp;amp;gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;#x3C;/html&gt;&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;I&apos;m using Dojo 1.7 and the new way to work using &lt;em&gt;require&lt;/em&gt;. As you can see I&apos;m referencing the modules my code requires from &lt;em&gt;dojo&lt;/em&gt; and &lt;em&gt;dojox&lt;/em&gt; packages&lt;/p&gt;
&lt;p&gt;Once Dojo is loaded the ready is executed showing the Dojo version in the console and executing the code shown next, which really creates the map and the features.&lt;/p&gt;
&lt;p&gt;In the &quot;here put the magic&quot; section we can place the code that creates a new &lt;em&gt;dojox.geo.openlayers.Map&lt;/em&gt;Â instance:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;//
// Define some Map options.
//
// openLayersMapOptions: Options for the underlaying OpenLayers.Map instance
// baseLayerName: Name of the base layer for the map
// baseLayerType: Type of the base layer. See &apos;dojox.geo.openlayers.BaseLayerType&apos;
// baseLayerUrl: Necessary, for example, for WMS.
// accessible: Adds a OpenLayers.Control.KeyboardDefaults control to the map
//     to move it using keyboard.
// touchHandler: Touch support for the map.
//
var options = {
    baseLayerName : &quot;OSM&quot;,
    baseLayerType : dojox.geo.openlayers.BaseLayerType.OSM,
    touchHandler : true,
    accessible : true
};
&lt;p&gt;// Create a map instance
var map = new dojox.geo.openlayers.Map(&apos;map&apos;);
map.fitTo([-10,30,40,62]);&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Next create a GFX layer. On it we can attach geometry features or any other Dojo widget feature.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Remember you only can attach geometry features to a GFX layer.&lt;/p&gt;&lt;/blockquote&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Create a GFX layer
var gfxLayer = new dojox.geo.openlayers.GfxLayer();
map.addLayer(gfxLayer);&lt;/pre&gt;
&lt;p&gt;Now create a geometry feature, defined by a LineString with some points, and add it to the layer:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Create a geometry feature
var line = new dojox.geo.openlayers.LineString([{x:0, y:45},{x:0, y:55},{x:20, y:55},{x:20, y:50},{x:0, y:45}]);
var feature = new dojox.geo.openlayers.GeometryFeature(line);
feature.setStroke({color: &quot;#666&quot;, width: 2});
feature.setFill(&quot;#999&quot;);
&lt;p&gt;// Add to the GFX layer
gfxLayer.addFeature(feature);
gfxLayer.redraw();&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;We want to animate the fill color of the geometry feature so we need to create a couple of animation. The first one will change the fill color from the original color to transparent, while the second will change from transparent to the original color again.&lt;/p&gt;
&lt;p&gt;The trick is once the first animation ends we start the second animation (using the &apos;&lt;em&gt;onEnd&lt;/em&gt;&apos; method) and the same for the second animation. This way we create an infinite animation effect.&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Add an animation to change the color of the feature
var animA = dojox.gfx.fx.animateFill({
    shape : feature,
    duration : 700,
    color : {
        start: &quot;#999&quot;,
        end: &quot;transparent&quot;
    },
    onAnimate: function() {
        // Required to update the layer while feature change it fill color
        gfxLayer.redraw();
    },
    onEnd: function() {
        animB.play();
    }
});
var animB = dojox.gfx.fx.animateFill({
    shape : feature,
    duration : 700,
    color : {
        start: &quot;transparent&quot;,
        end: &quot;#999&quot;
    },
    onAnimate: function() {
        // Required to update the layer while feature change it fill color
        gfxLayer.redraw();
    },
    onEnd: function() {
        animA.play();
    }
});
animA.play();&lt;/pre&gt;
&lt;p&gt;Now, we are going to create a pie chart widget feature. We are going to use theÂ &lt;em&gt;dojox.geo.openlayers.WidgetFeature&lt;/em&gt; class which required an object in the constructor defining the widget to create, the lat/lon where to place the widget and some more parameters. You can find all the available parameters in the source code documentation:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;//	* _createWidget_: Function for widget creation. Must return a `dijit._Widget`.
//	* _dojoType_: The class of a widget to create;
//	* _dijitId_: The digitId of an existing widget.
//	* _widget_: An already created widget.
//	* _width_: The width of the widget.
//	* _height_: The height of the widget.
//	* _longitude_: The longitude, in decimal degrees where to place the widget.
//	* _latitude_: The latitude, in decimal degrees where to place the widget.&lt;/pre&gt;
&lt;p&gt;The pie chart widget have a 100x100 size and will we located at (lon,lat)=(5, 40). The &lt;em&gt;createWidget&lt;/em&gt; property must point to a function responsible to create the appropriate widget:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Add a widget feature
var chartSize1 = 100;
var co1 = [5,40];
var descr1 = {
    // location of the widget
    longitude : co1[0],
    latitude : co1[1],
    // the function which creates the widget
    createWidget : function(){
        var div = dojo.create(&quot;div&quot;, {}, dojo.body());
        var chart = new dojox.charting.widget.Chart({
            margins : {
                l : 0,
                r : 0,
                t : 0,
                b : 0
            }
        }, div);
        var c = chart.chart;
        c.addPlot(&quot;default&quot;, {
            type : &quot;Pie&quot;,
            radius : chartSize1 / 2,
            labelOffset : chartSize1,
            fontColor : &quot;black&quot;
        });
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    var ser = [2, 8, 12, 43, 56, 23, 43, 1, 33];
    c.addSeries(&amp;quot;Series&amp;quot;, ser);
    c.setTheme(dojox.charting.themes.PlotKit.blue);
    c.render();
    c.theme.plotarea.fill = undefined;  // Transparent background
    return chart;
},
width : chartSize1,
height : chartSize1&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};
var graphFeature1 = new dojox.geo.openlayers.WidgetFeature(descr1);
gfxLayer.addFeature(graphFeature1);&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Similarly, we create a second widget feature with a stacked area chart with different dimensions and location:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Add a second plot feature
var chartSize2 = [300,200];
var co2 = [15,45];
var descr2 = {
    // location of the widget
    longitude : co2[0],
    latitude : co2[1],
    // the function which creates the widget
    createWidget : function(){
        var div = dojo.create(&quot;div&quot;, {}, dojo.body());
        var chart = new dojox.charting.widget.Chart({
            margins : {
                l : 0,
                r : 0,
                t : 0,
                b : 0
            }
        }, div);
        var c = chart.chart;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    c.addPlot(&amp;quot;default&amp;quot;, {type: &amp;quot;StackedAreas&amp;quot;, tension:3})
    .addAxis(&amp;quot;x&amp;quot;, {fixLower: &amp;quot;major&amp;quot;, fixUpper: &amp;quot;major&amp;quot;})
    .addAxis(&amp;quot;y&amp;quot;, {vertical: true, fixLower: &amp;quot;major&amp;quot;, fixUpper: &amp;quot;major&amp;quot;, min: 0})
    .addSeries(&amp;quot;Series A&amp;quot;, [1, 2, 0.5, 1.5, 1, 2.8, 0.4])
    .addSeries(&amp;quot;Series B&amp;quot;, [2.6, 1.8, 2, 1, 1.4, 0.7, 2])
    .addSeries(&amp;quot;Series C&amp;quot;, [6.3, 1.8, 3, 0.5, 4.4, 2.7, 2])
    .setTheme(dojox.charting.themes.PlotKit.blue);
    c.render();
    return chart;
},
width : chartSize2[0],
height : chartSize2[1]&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};
var graphFeature2 = new dojox.geo.openlayers.WidgetFeature(descr2);
gfxLayer.addFeature(graphFeature2);&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Once we have all the features in the layer, it is a good idea to refresh it:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;gfxLayer.redraw();&lt;/pre&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;I think the fusion of Dojo with OpenLayers opens new possibilities to create rich content andÂ behavior mapping applications. We can create &lt;em&gt;dojo features&lt;/em&gt;Â and make them really amazing using effects, animation and events (like &lt;a href=&quot;http://dojotoolkit.org/documentation/tutorials/1.6/charting/demo/monthly-sales-moveslice.html&quot;&gt;this&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;I usually work with OpenLayers and, because Dojo simply acts as a wrapper on some OpenLayers classes, we can access them and work directly adding data from WFS server, GML files, etc&lt;/p&gt;
&lt;p&gt;Is it a perfect solution? As always it depends on your needs but for all of us which work in complex RIA applications that needs some GIS features the &lt;em&gt;dojox.geo.openlayers&lt;/em&gt; package offers a new spot light :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Presentation tools in the browser]]></title><description><![CDATA[With the arrival of HTML5+CSS3 the browsers are getting more attention because the new possibilities. One example of the possibilities are the proliferation of frameworks, tools and libraries to create HTML presentations to run in the browser. No need to transform your presentation from PowerPoint or Keynote to any portable format, the content is plain HTML.]]></description><link>https://www.acuriousanimal.com/blog/2012/01/05/presentation-tools-in-the-browser</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2012/01/05/presentation-tools-in-the-browser</guid><pubDate>Thu, 05 Jan 2012 14:35:00 GMT</pubDate><content:encoded>&lt;p&gt;With the arrival of HTML5+CSS3 the browsers are getting more attention because the new possibilities.&lt;/p&gt;
&lt;p&gt;One example of the possibilities are the proliferation of frameworks, tools and libraries to create HTML presentations to run in the browser. No need to transform your presentation from PowerPoint or Keynote to any portable format, the content is plain HTML.&lt;/p&gt;
&lt;h2&gt;First contact&lt;/h2&gt;
&lt;p&gt;The first tool of this kind I listened was the &lt;a href=&quot;http://code.google.com/p/html5slides&quot;&gt;html5slides&lt;/a&gt; project. You can see it in action &lt;a href=&quot;http://html5slides.googlecode.com/svn/trunk/template/index.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some time later, I read a new about a new tool called &lt;a href=&quot;http://imakewebthings.github.com/deck.js&quot;&gt;deck.js&lt;/a&gt;. I think it is awesome, extensible and... see for yourself at the &lt;a href=&quot;http://imakewebthings.github.com/deck.js/introduction&quot;&gt;Getting Started&lt;/a&gt; section.&lt;/p&gt;
&lt;p&gt;Some weeks ago I read a tweet talking about &lt;a href=&quot;http://bartaz.github.com/impress.js&quot;&gt;impress.js&lt;/a&gt;. For the moment it is only compatible with Chrome and Safari (both uses the &lt;a href=&quot;http://en.wikipedia.org/wiki/WebKit&quot;&gt;WebKit&lt;/a&gt; engine) but is looks really impressive.&lt;/p&gt;
&lt;h3&gt;Many more&lt;/h3&gt;
&lt;p&gt;Knowing the previous projects I start looking for other alternatives I &lt;a href=&quot;http://stackoverflow.com/questions/2533908/basic-framework-for-presentations-using-html5-javascript&quot;&gt;found&lt;/a&gt; a great range of projects: &lt;a href=&quot;http://adamzap.com/random/landslide.html&quot;&gt;Landslide&lt;/a&gt;, &lt;a href=&quot;http://www.ravelrumba.com/blog/html5-slideshow&quot;&gt;html5-slideshow&lt;/a&gt; (see a demo &lt;a href=&quot;http://www.ravelrumba.com/code/demos/html-slideshow/example/slideshow.html&quot;&gt;here&lt;/a&gt;), &lt;a href=&quot;https://github.com/chromakode/pow&quot;&gt;pow&lt;/a&gt; (see in action &lt;a href=&quot;http://usepow.com&quot;&gt;here&lt;/a&gt;) or &lt;a href=&quot;https://github.com/paulrouget/dzslides&quot;&gt;DZSlides&lt;/a&gt;, a &lt;em&gt;one-page-template&lt;/em&gt; to build your presentation in HTML5 and CSS3.&lt;/p&gt;
&lt;p&gt;Within this &lt;a href=&quot;http://smsteele.wordpress.com/2007/11/09/maremagnum-word-of-the-day/&quot;&gt;maremagnum&lt;/a&gt; of possibilities the confusion is assured: which tool is better? which is easy to use? which has more effects? which one is more flexible and/or extensible? which want has more followers and/or supporters? which one will survive in the future?&lt;/p&gt;
&lt;h2&gt;Â The future&lt;/h2&gt;
&lt;p&gt;Currently, all these tools are great but they all are oriented to a web developer user with strong knowledge on HTML and CSS.&lt;/p&gt;
&lt;p&gt;The next step is clear, adapt to &lt;em&gt;plain&lt;/em&gt; users (a user without web technologies knowledge). The tools needs an editor to help in the creation of the slides, like PowerPoint or Keynote.&lt;/p&gt;
&lt;p&gt;There are projects working on this direction, like the &lt;a href=&quot;http://www.280slides.com/&quot;&gt;280Slides&lt;/a&gt;. It is implemented in &lt;a href=&quot;http://cappuccino.org/&quot;&gt;Cappuccino&lt;/a&gt; framework and brings the user a Keynote like editor to visually create the slides.&lt;/p&gt;
&lt;h2&gt;More history&lt;/h2&gt;
&lt;p&gt;If you want to know a bit more about the evolution of the presentation tools, I encourage you to read this &lt;a href=&quot;http://luigimontanez.com/2011/web-based-slide-decks-done-right/&quot;&gt;great article&lt;/a&gt; from &lt;a href=&quot;http://luigimontanez.com/&quot;&gt;Luigi Montanez&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Filling Flexigrid with JSON/XML data]]></title><description><![CDATA[Flexigrid is one of the most useful and powerful grid plugins for jQuery. Unfortunately, as the author explains in the project page, there is no much documentation so you must learn how to use it looking at existing code. If anytime you need to fill a Flexigrid with JSON or XML content and you are a little buggy to look at example code, here is the great summary:]]></description><link>https://www.acuriousanimal.com/blog/2011/12/09/filling-flexigrid-with-jsonxml-data</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/12/09/filling-flexigrid-with-jsonxml-data</guid><pubDate>Fri, 09 Dec 2011 21:14:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://flexigrid.info/&quot;&gt;Flexigrid&lt;/a&gt; is one of the most useful and powerful grid plugins for &lt;a href=&quot;http://jquery.com/&quot;&gt;jQuery&lt;/a&gt;. Unfortunately, as the author explains in the project page, there is no much documentation so you must learn how to use it looking at existing code.&lt;/p&gt;
&lt;p&gt;If anytime you need to fill a Flexigrid with JSON or XML content and you are a little buggy to look at example code, here is the great summary:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Remember XML/JSON data must follow the next rules: &lt;em&gt;total&lt;/em&gt;, &lt;em&gt;page&lt;/em&gt;, &lt;em&gt;rows&lt;/em&gt;. And for every row specify and id and a cell structure.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Next steps show you how to make it run step by step.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sample data for both types are:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:js&quot;&gt;{
	page: 1,
	total: 2,
	rows: [
		{id: &apos;reg1&apos;,    cell: [&apos;reg1-cell1&apos;,&apos;reg1-cell2&apos;]},
		{id: &apos;reg2&apos;,    cell: [&apos;reg2-cell1&apos;,&apos;reg2-cell2&apos;]}
	]
}&lt;/pre&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;rows&amp;gt;
	&amp;lt;page&amp;gt;1&amp;lt;/page&amp;gt;
	&amp;lt;total&amp;gt;2&amp;lt;/total&amp;gt;
	&amp;lt;row id=&quot;reg1&quot;&amp;gt;
		&amp;lt;cell&amp;gt;reg1-cell1&amp;lt;/cell&amp;gt;
		&amp;lt;cell&amp;gt;reg1-cell2&amp;lt;/cell&amp;gt;
	&amp;lt;/row&amp;gt;
	&amp;lt;row id=&quot;reg2&quot;&amp;gt;
		&amp;lt;cell&amp;gt;reg2-cell1&amp;lt;/cell&amp;gt;
		&amp;lt;cell&amp;gt;reg2-cell2&amp;lt;/cell&amp;gt;
	&amp;lt;/row&amp;gt;
&amp;lt;/rows&amp;gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Put some element on your HTML document:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;p id=&quot;yourId&quot;&amp;gt;&amp;lt;/p&amp;gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Convert that element into a flexigrid with:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&quot;#yourId&quot;).flexigrid({
	url: &apos;your_file_name.json_or_xml&apos;,
	dataType: &apos;json&apos;,
	...
}&lt;/pre&gt;
&lt;p&gt;Now you know how to build a gorgeous grid from XML or JSON data.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Greedy and Nongreedy Matching in a Regular Expression]]></title><description><![CDATA[This questions has come to me many times so it is time to write a post that acts as a reminder.]]></description><link>https://www.acuriousanimal.com/blog/2011/11/19/greedy-and-nongreedy-matching-in-a-regular-expression</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/11/19/greedy-and-nongreedy-matching-in-a-regular-expression</guid><pubDate>Fri, 18 Nov 2011 23:11:00 GMT</pubDate><content:encoded>&lt;p&gt;This questions has come to me many times so it is time to write a post that acts as a reminder.&lt;/p&gt;
&lt;p&gt;Currently I have a string like&lt;/p&gt;
&lt;pre class=&quot;brush:perl&quot;&gt;ftp://user:password@server/dirA/dirB/file&lt;/pre&gt;
&lt;p&gt;and what i want is parse it to get the user, password, server and path to the file (/dirA/dirB/file). My first try was:&lt;/p&gt;
&lt;pre class=&quot;brush:perl&quot;&gt;ftp://(\S+):(\S+)@(\S+)(/\S+)&lt;/pre&gt;
&lt;p&gt;but that returns me &lt;em&gt;server=server/dirA/dirB&lt;/em&gt;, which isn&apos;t what I want. The idea is that the group after the @ would make a non gready match. This is achieved using the ? char. So the final and right regular expression will becomes:&lt;/p&gt;
&lt;pre class=&quot;brush:perl&quot;&gt;ftp://(\S+):(\S+)@(\S+?)(/\S+)&lt;/pre&gt;
&lt;p&gt;which returns &lt;em&gt;server=server&lt;/em&gt; and &lt;em&gt;file=/dirA/dirB/file&lt;/em&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Open alternatives to Google Maps]]></title><description><![CDATA[Lately there was a not much surprising news about Google products and services. Among other things Google has changed the Google Maps API use policy and will charge to those users that exceed some download limits.]]></description><link>https://www.acuriousanimal.com/blog/2011/11/14/open-alternaties-to-google-maps</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/11/14/open-alternaties-to-google-maps</guid><pubDate>Mon, 14 Nov 2011 19:43:00 GMT</pubDate><content:encoded>&lt;p&gt;Lately there was a not much surprising news about Google products and services. Among other things Google has changed the Google Maps API use policy and will charge to those users that exceed some download limits.&lt;/p&gt;
&lt;p&gt;It is well known that Google Maps is one of the most (or the most) famous mapping service used around the net and it starts the web GIS revolution some years ago but hopefully it is not the only API we can use. Bing and the discontinued Yahoo Maps, are great competitors but this post is related to open source alternatives you can find to create your web mapping applications.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Please, don&apos;t confuse the API with the imagery you are using. Google will charge you by the imagery usage so if you use an alternative API but continues consuming Google tiles you are in a similar situacion.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;OpenLayers&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;www.openlayers.org&quot;&gt;OpenLayers&lt;/a&gt; is probably the most famous open source web mapping project. I want to think so because two factors: first it is the older project presented on this post and second because it is the most complete and, because this, the most complex.&lt;img class=&quot;alignright&quot; src=&quot;./images/OpenLayers.trac.png&quot; alt=&quot;&quot; width=&quot;49&quot; height=&quot;44&quot; /&gt;&lt;/p&gt;
&lt;p&gt;OpenLayers is close to &lt;a href=&quot;http://www.opengeospatial.org/&quot;&gt;OGC&lt;/a&gt; standards, it separates between geometries, features and styles. You can load raster tiles layers from Google, Bing, OpenStreetMaps, etc or vector data from &lt;a href=&quot;http://en.wikipedia.org/wiki/Geography_Markup_Language&quot;&gt;GML&lt;/a&gt;, &lt;a href=&quot;http://en.wikipedia.org/wiki/Keyhole_Markup_Language&quot;&gt;KML&lt;/a&gt; or &lt;a href=&quot;http://en.wikipedia.org/wiki/GeoJSON&quot;&gt;GeoJSON&lt;/a&gt; formats.&lt;/p&gt;
&lt;p&gt;OpenLayers is not only restricted to spherical mercator, you can use almost any projection you know (plus many others), you can load data from &lt;a href=&quot;http://en.wikipedia.org/wiki/Web_Map_Service&quot;&gt;WMS&lt;/a&gt; or &lt;a href=&quot;http://en.wikipedia.org/wiki/Web_Feature_Service&quot;&gt;WFS&lt;/a&gt; servers and most important, you are not limited to visualise data, you can create and edit new features sending them to the WFS server.&lt;/p&gt;
&lt;h2&gt;Polymaps&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://polymaps.org/&quot;&gt;Polymaps&lt;/a&gt; is a project born from &lt;a href=&quot;http://simplegeo.com/&quot;&gt;SimpleGeo&lt;/a&gt; and &lt;a href=&quot;http://stamen.com/&quot;&gt;Stamen&lt;/a&gt; association. The main reason behind P&lt;a href=&quot;./images/2011/11/polymaps.png&quot;&gt;&lt;img class=&quot;alignright size-full wp-image-473&quot; title=&quot;polymaps&quot; src=&quot;./images/polymaps.png&quot; alt=&quot;&quot; width=&quot;269&quot; height=&quot;57&quot; /&gt;&lt;/a&gt;olymaps is the use of vector-tiled layers.&lt;/p&gt;
&lt;p&gt;What we mean by vector-tiled data? Since GoogleMaps everybody knows about raster-tiled layers, where each zoom level contains more tiles with more resolution.&lt;/p&gt;
&lt;p&gt;A vector-tiles layer is similar, in the sense every zoom level has more resolution, but the data of every tile is not an image but vector data is rendered using &lt;a href=&quot;http://en.wikipedia.org/wiki/Scalable_Vector_Graphics&quot;&gt;SVG&lt;/a&gt;. This means you need a SVG compliant browser to use Polymaps.&lt;/p&gt;
&lt;h2&gt;Leaflet&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://leaflet.cloudmade.com/&quot;&gt;Leaflet&lt;/a&gt; is a lightweight library specially oriented to make tile-based maps for desktop and mobile web browser. &lt;img class=&quot;alignright&quot; src=&quot;./images/logo.png&quot; alt=&quot;&quot; width=&quot;187&quot; height=&quot;65&quot; /&gt;&lt;/p&gt;
&lt;p&gt;It is really easy to use and offers the basic things everybody needs for a typical web mapping application: access to tile-based imagery, markers, popups, polygons, points, etc. Believe me, put an eye on this project, it has many more to say.&lt;/p&gt;
&lt;p&gt;As a note, I would like to say Leaflet is a project from CloudMade and it is close to their Web Map API (&lt;a href=&quot;http://cloudmade.com/products/web-maps-api&quot;&gt;http://cloudmade.com/&lt;wbr&gt;products/web-maps-api&lt;/wbr&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;h2&gt;And what about imagery?&lt;/h2&gt;
&lt;p&gt;Google Maps is not the unique imagery provider and there are other alternatives like Bing or Yahoo imagery, but the question is: &lt;em&gt;where can I found real open imagery I can use for commercial applications and not limited by their usage&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;I think the most famous open source alternative is &lt;a href=&quot;http://www.openstreetmap.org&quot;&gt;OpenStreetMap&lt;/a&gt;. &lt;img class=&quot;alignright&quot; src=&quot;./images/osm_logo-b8bb9ce023c2e1fb1ef4f5e7eae204e1.png&quot; alt=&quot;&quot; /&gt;Their data is maintained by the community, anybody can add data or improve it. It demonstrates its quality and usefulness in the Haiti disaster because their information was more accurate than any other provider.&lt;/p&gt;
&lt;p&gt;In addition, some time ago there was a similar project called &lt;a href=&quot;http://www.openaerialmap.org&quot;&gt;OpenAerialMap&lt;/a&gt;, currently discontinued, that tries to create something similar than OpenStreetMap but with aerial images. The problem in this case is that obtain aerial data isn&apos;t as easy as get vector data with a GPS. If you have a plane and a good camera and want to share your imagery then contact with OpenAerialMap author.&lt;/p&gt;
&lt;p&gt;Finally, I would like to mention one more service provider. Yes it is not completely open source, but it is close. &lt;a href=&quot;http://cloudmade.com/&quot;&gt;CloudMade&lt;/a&gt; (yes the creators of Leaflet and other free tools) is a company based on OpenStreetMap data. Among other great tools they allow to configure the style of the tiles you can later add to your map in a similar way Google Style Maps doesn but they do some year before Google.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using YouTube API to embed videos dinamically on your web site]]></title><description><![CDATA[It is easy to embed a given YouTube video on a web site, simply use the wizard to get code required code, but what about to do the some automatically using JavaScript? Yes, suppose you have a preferred user you follow all his videos and would like to put his/her latest video in your web site.]]></description><link>https://www.acuriousanimal.com/blog/2011/11/02/using-youtube-api-to-embed-videos-on-your-web-site</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/11/02/using-youtube-api-to-embed-videos-on-your-web-site</guid><pubDate>Wed, 02 Nov 2011 21:22:00 GMT</pubDate><content:encoded>&lt;p&gt;It is easy to embed a given YouTube video on a web site, simply use the wizard to get code required code, but what about to do the some automatically using JavaScript? Yes, suppose you have a preferred user you follow all his videos and would like to put his/her latest video in your web site.&lt;/p&gt;
&lt;p&gt;Every YouTube video has a unique identifier so the challenge is how to get the id if the latest uploaded (or updated if you prefer) video.&lt;/p&gt;
&lt;h2&gt;Searching for videos&lt;/h2&gt;
&lt;p&gt;YouTube has a very rich API and you have lot of parameters available to use, but, probably most important are the ways to search. Mainly you have two options to search videos for a given user:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Search video feeds:
&lt;pre class=&quot;brush:applescript&quot;&gt;http://gdata.youtube.com/feeds/api/videos?author=SOME_USER&amp;amp;more_parameters&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;Search videos uploaded for specific user:
&lt;pre class=&quot;brush:applescript&quot;&gt;https://gdata.youtube.com/feeds/api/users/USERNAME/uploads?more_parameters&lt;/pre&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;First way is more flexible than second, because you can use lot of parameters to chose and author, limit results number, order by, etc, while the second is like setting the author parameter in the first one.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;IMPORTANT !!!&lt;/strong&gt; Read careful the YouTube API documentacion, concretely the sentence:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Requests using other parameters, such as&amp;#xA0;orderby, will return cached results.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;That makes me (on other folks) spent lot of time trying to find way searched doesn&amp;apos;t get really updated results.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;The requests&lt;/h2&gt;
&lt;p&gt;What will be our test request? Yeah !!! We are going to check for the lastest video of the user... &lt;em&gt;ironmaiden&lt;/em&gt; !!!&lt;/p&gt;
&lt;p&gt;We want to get maximum one videos from ironmaiden user and ordered by date of publication. In addition, we want the response be in JSON format (not in XML) so we use the &amp;apos;&lt;em&gt;alt&lt;/em&gt;&amp;apos; parameter too:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://gdata.youtube.com/feeds/api/videos?author=ironmaiden&amp;amp;max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&quot;&gt;http://gdata.youtube.com/feeds/api/videos?author=ironmaiden&amp;amp;max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gdata.youtube.com/feeds/api/users/ironmaiden/uploads?max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&quot;&gt;https://gdata.youtube.com/feeds/api/users/ironmaiden/uploads?max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;The response&lt;/h2&gt;
&lt;p&gt;By default, the returning data is specified in XML format (&lt;a href=&quot;http://code.google.com/apis/youtube/2.0/developers_guide_protocol_understanding_video_feeds.html&quot;&gt;see here&lt;/a&gt;) but with the help of &lt;em&gt;alt=jsonc&lt;/em&gt; parameter it is returned in JSON notation (&lt;a href=&quot;http://code.google.com/apis/youtube/2.0/developers_guide_jsonc.html&quot;&gt;see here&lt;/a&gt;). For the previous first request the response is:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;{
    &amp;quot;apiVersion&amp;quot;:&amp;quot;2.1&amp;quot;,
    &amp;quot;data&amp;quot;:{
        &amp;quot;updated&amp;quot;:&amp;quot;2011-10-31T19:24:09.441Z&amp;quot;,
        &amp;quot;totalItems&amp;quot;:14,
        &amp;quot;startIndex&amp;quot;:1,
        &amp;quot;itemsPerPage&amp;quot;:1,
        &amp;quot;items&amp;quot;:[{
            &amp;quot;id&amp;quot;:&amp;quot;O9f1bBeYpqA&amp;quot;,
            &amp;quot;uploaded&amp;quot;:&amp;quot;2011-10-19T13:07:28.000Z&amp;quot;,
            &amp;quot;updated&amp;quot;:&amp;quot;2011-10-31T16:57:34.000Z&amp;quot;,
            &amp;quot;uploader&amp;quot;:&amp;quot;ironmaiden&amp;quot;,
            &amp;quot;category&amp;quot;:&amp;quot;Music&amp;quot;,
            &amp;quot;title&amp;quot;:&amp;quot;IMTV London&amp;quot;,
            &amp;quot;description&amp;quot;:&amp;quot;A quick IMTV from the O2. The full IMTV UK episode will be available to fanclub members soon!&amp;quot;,
            &amp;quot;tags&amp;quot;:[&amp;quot;iron&amp;quot;,&amp;quot;maiden&amp;quot;,&amp;quot;imtv&amp;quot;,&amp;quot;on&amp;quot;,&amp;quot;board&amp;quot;,&amp;quot;flight&amp;quot;,&amp;quot;666&amp;quot;,&amp;quot;Iron Maiden&amp;quot;,&amp;quot;United Kingdom&amp;quot;,&amp;quot;Metal&amp;quot;],
            &amp;quot;thumbnail&amp;quot;:{
                &amp;quot;sqDefault&amp;quot;:&amp;quot;http://i.ytimg.com/vi/O9f1bBeYpqA/default.jpg&amp;quot;,
                &amp;quot;hqDefault&amp;quot;:&amp;quot;http://i.ytimg.com/vi/O9f1bBeYpqA/hqdefault.jpg&amp;quot;
            },
            &amp;quot;player&amp;quot;:{
                &amp;quot;default&amp;quot;:&amp;quot;http://www.youtube.com/watch?v=O9f1bBeYpqA&amp;amp;feature=youtube_gdata_player&amp;quot;,
                &amp;quot;mobile&amp;quot;:&amp;quot;http://m.youtube.com/details?v=O9f1bBeYpqA&amp;quot;
            },
            &amp;quot;content&amp;quot;:{
                &amp;quot;5&amp;quot;:&amp;quot;http://www.youtube.com/v/O9f1bBeYpqA?version=3&amp;amp;f=videos&amp;amp;app=youtube_gdata&amp;quot;,
                &amp;quot;1&amp;quot;:&amp;quot;rtsp://v3.cache5.c.youtube.com/CiILENy73wIaGQmgppgXbPXXOxMYDSANFEgGUgZ2aWRlb3MM/0/0/0/video.3gp&amp;quot;,
                &amp;quot;6&amp;quot;:&amp;quot;rtsp://v2.cache8.c.youtube.com/CiILENy73wIaGQmgppgXbPXXOxMYESARFEgGUgZ2aWRlb3MM/0/0/0/video.3gp&amp;quot;
            },
            &amp;quot;duration&amp;quot;:316,
            &amp;quot;aspectRatio&amp;quot;:&amp;quot;widescreen&amp;quot;,
            &amp;quot;rating&amp;quot;:4.9898734,
            &amp;quot;likeCount&amp;quot;:&amp;quot;394&amp;quot;,
            &amp;quot;ratingCount&amp;quot;:395,
            &amp;quot;viewCount&amp;quot;:47086,
            &amp;quot;favoriteCount&amp;quot;:110,
            &amp;quot;commentCount&amp;quot;:105,
            &amp;quot;accessControl&amp;quot;:{
                &amp;quot;comment&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;commentVote&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;videoRespond&amp;quot;:&amp;quot;moderated&amp;quot;,
                &amp;quot;rate&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;embed&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;list&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;autoPlay&amp;quot;:&amp;quot;allowed&amp;quot;,
                &amp;quot;syndicate&amp;quot;:&amp;quot;allowed&amp;quot;
            }
        }]
    }&lt;/pre&gt;
&lt;p&gt;As you can see the ID of the video is at:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;data.items[0].id&lt;/pre&gt;
&lt;h2&gt;Embeding a video&lt;/h2&gt;
&lt;p&gt;Embeding a video by hand is easy, you simply click on &amp;quot;share&amp;quot; button, then on &amp;quot;embed&amp;quot;, copy and paste the code and that&amp;apos;s all:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2011/10/youtube_embed.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 251px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 119.52191235059762%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAFO0lEQVQ4y42VaWyUVRSGP7bpbLQznRk6LUs7XelMd6BgQVplK6AJSBCQEIVSCp2WGhQiIQpYIyqLkbUQCBWjGCWi/jLG6B8TY6I/lMREgdCdrjPTztJlZvp479dCicHoTd7c/T3nnnPyXuXWnTt0Xmggun8/0dZWvIEAPd3dhMPDMBoGwoxGw4yMjDwW4XCYwcFBOjra8XgHUO7cu8vt77/j9s2bdNy9S5vY6Orqotc7TMv9IH81+ensCTEyPEz4X0iHhobo7+8nGAyhtLb7aO0ZxCcW7wkP29s76Ovz0tI5TFsX3G6H+z7+d1PONXzE0bfe5+zJE1w8fozGi6c5f/oE7719lI9vXOKbr67wdeNFblw+x6cXPuDDs6e42nCaa2LeKHHlLA3nz3DylFi/ehXFkTIHRVHQCTgNCumWyTjMkzBME+OFFhZkaSjUaSjQKexYMYvrn+xjTakduzhr1itYjQr6KYrKYbNZUVwulzpJitWy0mViSbqR4jkGMh1mivKsbK5fSrnLyprZRp59KZ3LxxaxuzaNzBwjizLjKC9NIMmqVTlSU1NRsrOzx9h1WnLsRrKeSFSJnILArp3Kmhfz2XZlBWXLk8l62sLWEh3Fiy2s3ZvKhjILRQ49hulTVY6UlOQJQpNWx1zhclqWjbSZZjItsRQkGliaZ6Pq2+0cunWAwz+8wrYaF5kiFPO2pJBboCE/TcOy2frHEMboyU9MIjtRkMVaSIszU2C3kJFopNxdwpMbXSzfupTDJ1exujaXGHMMuxp2Uu8uYp19ssrhSElBcY4TzrPreKPUwqp8C5udJtYLrJ1rYlGCjpNfHOJK2yW2b8ij8ZdNbDxYyCRxZ3ntc+w7uIyFWdoJQtc4YemsGN58xkyZK451RbE8P99MxXwL7yTrWVfiYG3FYk5dX8lr10oxGqZgjDdgEPcyZurIzzGPP1kSOscItyww8uXrDjaVJvLuC6kcr3RyYGUyWxxxnPl8HSXrM3EKY/E2LRqNBr1VT3KGWWTWhDVOOxFDl8upTlYvS+T6hcWk2PW4ipKorspjV/lsljoMFC9JwFU+h+ScGej0GrSxOvQWPfGJemaKErNZ9BMeOsc9LCm08ur2LEyidKxFdhZV5lC2oZCnCkW5pOmYbpqGNV6HyWJAazZgnhVLRr4Nh6hFm+0RwrzcXHWSlWxmSZ4dc3oC8eKZpjRxITOXMq2RlQvSyC/OxhY/Ha0xBo1Wg0E8Mzs7nqyCGSIMsSpHeno6Sn19PXv27MZdU0tNbR017hqqKqvGsLMC965KXq7ZS11dHW63m+rqatzVsneLM7up2LFTXdtZUcGRI0dRpOz4fD5CoSABoYVen1eVpAH/gJCj4H+qy10heXeEpjY3N+P3B1D8fr+Qqz4Vciy1TQqmxIOx7B+FFNVwJELkH5DOKb29Pdy71yR0sJ1WoYcSLS0tNDU10SwgPRgYGFBJhsdFNjQUweuPEBiMql6Ojo4KQDQaRZEH5UBakP3ISJih4RExFlbl+vheJBJV96MP5xHxNUQFUUQFoxH1jiLj19bWhsfjIRjo58dfm7jw2c/89Gc77V3dwoshBoLCUHj0oTeytbQ089vvf9DR2U9zWy9NAn3yTwmFQmpSZPwCAT+9ngFa7/fR4+lXk/RoLB+NbUCeDw4SEs8OhMICEfEy4aHX66Vb/HIyKb09PXg7O/F1d+H1evCJPWlQGpO9NPDAyNiPNzKe6wfeR8cIewSRp89Dn6cPjyDsFQkKBIIPCSShLKEHczmWJSI9nUjKqBrfvwE3GvU2wCCgWQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;youtube embed 251x300&quot; title=&quot;youtube_embed&quot; src=&quot;/static/ac1d070839e7e526fe443735a66a82a8/5b62d/youtube_embed-251x300.png&quot; srcset=&quot;/static/ac1d070839e7e526fe443735a66a82a8/19bd1/youtube_embed-251x300.png 163w,
/static/ac1d070839e7e526fe443735a66a82a8/5b62d/youtube_embed-251x300.png 251w&quot; sizes=&quot;(max-width: 251px) 100vw, 251px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;del&gt;But hey !!! We are bad boys, worst if it is possible, we are programmers and we live to programming, so we are going to do the same than any other mortal but programming, so &lt;em&gt;program once run forever&lt;/em&gt; !!! (mmm... that slogan sounds me like a island name programming language).&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;The intention is to make the code necessary to get the latest video identifier and inject the code to embed video on page, like this:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;iframe width=&amp;quot;420&amp;quot; height=&amp;quot;315&amp;quot; src=&amp;quot;http://www.youtube.com/embed/PieS0zG228A&amp;quot;
frameborder=&amp;quot;0&amp;quot; allowfullscreen&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/pre&gt;
&lt;h2&gt;Automatically embedding the latest video&lt;/h2&gt;
&lt;p&gt;Finally arrive to the most interesting section. As you can imagine we can do it in the AJAX way, making an asynchronous request and injecting the code but in addition I will put a more &amp;quot;static&amp;quot; way to do, thanks to the &lt;em&gt;callback&lt;/em&gt; parameter in the request.&lt;/p&gt;
&lt;h3&gt;The AJAX way&lt;/h3&gt;
&lt;p&gt;First, create div elements to contain the video frame and a button to start the loading process:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;div id=&amp;quot;ajax_video&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;button id=&amp;quot;ajaxbutton&amp;quot;&amp;gt;AJAX way&amp;lt;/button&amp;gt;&lt;/pre&gt;
&lt;p&gt;In the head section of the document Ihave added the required JavaScript code (I&amp;apos;m using jQuery to do it):&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;
    $(document).ready(function(){
        $(&amp;apos;#ajaxbutton&amp;apos;).click(function(event){
            $.get(&amp;apos;https://gdata.youtube.com/feeds/api/users/ironmaiden/uploads?max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&amp;apos;,
            function(response) {
                if(response.data &amp;amp;&amp;amp; response.data.items) {
                    var items = response.data.items;
                    if(items.length&amp;gt;0) {
                        var item = items[0];
                        var videoid = &amp;quot;http://www.youtube.com/embed/&amp;quot;+item.id;
                        console.log(&amp;quot;Latest ID: &amp;apos;&amp;quot;+videoid+&amp;quot;&amp;apos;&amp;quot;);
                        var video = &amp;quot;&amp;lt;iframe width=&amp;apos;420&amp;apos; height=&amp;apos;315&amp;apos; src=&amp;apos;&amp;quot;+videoid+&amp;quot;&amp;apos; frameborder=&amp;apos;0&amp;apos; allowfullscreen&amp;gt;&amp;lt;/iframe&amp;gt;&amp;quot;;
                        $(&amp;apos;#ajax_video&amp;apos;).html(video);
                    }
                }
            });
        });
    });
&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;p&gt;As we mention, the request get the latest video from &lt;em&gt;ironmaiden&lt;/em&gt; user, creates an iframe element containing it and add it to the previously created div element.&lt;/p&gt;
&lt;h3&gt;Using callback parameter&lt;/h3&gt;
&lt;p&gt;This version differs from previous one because the request is made when page is loaded. What I&amp;apos;m saying? Exactly this, the request is made including JavaScript code:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;https://gdata.youtube.com/feeds/api/users/ironmaiden/uploads?max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&amp;amp;callback=showVideo&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;p&gt;The url includes the &lt;em&gt;callback&lt;/em&gt; parameter which is responsible to call the specified function once the code is loaded.&lt;/p&gt;
&lt;p&gt;Putting it all together, in the same way that previous case you need a div element that contains the video iframe and a JavaScript code to add the iframe from the response:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;div id=&amp;quot;static_video&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
&amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;
    function showVideo(response) {
        if(response.data &amp;amp;&amp;amp; response.data.items) {
            var items = response.data.items;
            if(items.length&amp;gt;0) {
                var item = items[0];
                var videoid = &amp;quot;http://www.youtube.com/embed/&amp;quot;+item.id;
                console.log(&amp;quot;Latest ID: &amp;apos;&amp;quot;+videoid+&amp;quot;&amp;apos;&amp;quot;);
                var video = &amp;quot;&amp;lt;iframe width=&amp;apos;420&amp;apos; height=&amp;apos;315&amp;apos; src=&amp;apos;&amp;quot;+videoid+&amp;quot;&amp;apos; frameborder=&amp;apos;0&amp;apos; allowfullscreen&amp;gt;&amp;lt;/iframe&amp;gt;&amp;quot;;
                $(&amp;apos;#static_video&amp;apos;).html(video);
            }
        }
    }
&amp;lt;/script&amp;gt;
&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;https://gdata.youtube.com/feeds/api/users/ironmaiden/uploads?max-results=1&amp;amp;orderby=published&amp;amp;v=2&amp;amp;alt=jsonc&amp;amp;callback=showVideo&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;p&gt;The browser load the elements in the order it encounters, so it is important to put the code in the right place so browser finds first the &amp;apos;showVideo&amp;apos; function before loading the YouTube code request.&lt;/p&gt;
&lt;h3&gt;Demo&lt;/h3&gt;
&lt;p&gt;You can see a demo working &lt;a href=&quot;http://www.acuriousanimal.com/code/youtube_embed/index.html&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/apis/youtube/2.0/reference.html#Searching_for_videos&quot;&gt;http://code.google.com/apis/youtube/2.0/reference.html#Searching_for_videos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#Retrieving_and_searching_for_videos&quot;&gt;http://code.google.com/apis/youtube/2.0/developers_guide_protocol.html#Retrieving_and_searching_for_videos&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/apis/youtube/2.0/developers_guide_json.html&quot;&gt;http://code.google.com/apis/youtube/2.0/developers_guide_json.html&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Sending emails with Java]]></title><description><![CDATA[Update: This article is a bit outdated ðŸ˜… You can find a nice read at the blog post Guide to Send Emails in Java from the mailtrap.io team. I start writing this post as a simple "how to send an email" using Java, but later I found I need to briefly explain more things. So, here is this kind of all in one summary about sending emails with Java. Outside the Java SE platform, but included in JavaEE one, the JavaMail package provides a platform to build mail and messaging applications. Lets go with an example. Sending a simple text message Alternatively, instead using: you can use next to set the message content: Multipart messages That's fine, but usually you don't send simple text messages. Instead you send nice HTML body messages with bold or italic text, images, and so on. NOTE: See below at references section to see about MIME format which extends the data you can attach to an email to allow multiparts, attachments, etc. When you write a multipart message the content is composed of different parts, for example one part is the message written as simple text and a second part with the same message written in an enhanced way using HTML. Then the client that reads the message is responsible to render the appropriate part depending on its capabilities. Â  Sending attachments Terrific, we know how to send a plain text email and something more incredible like a multipart message with HTML content. Next step is to send an email attaching too some files. Create an email with attached file is similar to create a multipart message where one part can be the text of the message and another part is the attached file. The secret is in the next lines: Â  HTML messages Create a message o multipart message with HTML content is really easy, simply specify the MIME type in the setContent method: The idea is as follow: first you need to attach the image file and set an identifier and second you need to write your HTML code and reference the image identifier in the 'img' tag. Anything more to say? Arrived to this point you are almost a master of sending emails. You know how to send simple emails, multipart emails with richest HTML content and attach files and images on your message. What more can a programmer desire? Probably, a more easy to use API and that is what Apache Commons Email project offer you. See the 'user guide' section http://commons.apache.org/email/userguide.html to understand what I say. It offers a more abstract API more close to humans than to protocols. References JavaMail - JavaMail project home page. Apache Commons Email - Apache Commons subproject to simplify the way to work with JavaMail API. See the 'user guide' section http://commons.apache.org/email/userguide.html. MIME (Multipurpose Internet Mail Extensions) - Description of MIME format for multipart emails.]]></description><link>https://www.acuriousanimal.com/blog/2011/10/08/sending-emails-with-java</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/10/08/sending-emails-with-java</guid><pubDate>Sat, 08 Oct 2011 11:41:00 GMT</pubDate><content:encoded>&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Update&lt;/em&gt;: This article is a bit outdated ðŸ˜… You can find a nice read at the blog post &lt;strong&gt;&lt;a href=&quot;https://blog.mailtrap.io/sending-email-using-java&quot;&gt;Guide to Send Emails in Java&lt;/a&gt;&lt;/strong&gt; from the mailtrap.io team.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I start writing this post as a simple &quot;how to send an email&quot; using Java, but later I found I need to briefly explain more things. So, here is this kind of &lt;em&gt;all in one summary about sending emails with Java&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Outside the Java SE platform, but included in JavaEE one, the &lt;a href=&quot;http://www.oracle.com/technetwork/java/javamail/index.html&quot;&gt;JavaMail&lt;/a&gt; package provides a platform to build mail and messaging applications. Lets go with an example.&lt;/p&gt;
&lt;h2&gt;Sending a simple text message&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Common variables&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; host &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;your_smtp_server&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;from_address&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;to_address&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Set properties&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Properties&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Properties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;mail.smtp.host&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; host&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;mail.debug&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Get session&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Session&lt;/span&gt; session &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Instantiate a message&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Message&lt;/span&gt; msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;session&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set the FROM message&lt;/span&gt;
    msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setFrom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InternetAddress&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;from&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// The recipients can be more than one so we use an array but you can&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// use &apos;new InternetAddress(to)&apos; for only one address.&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;InternetAddress&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; address &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InternetAddress&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setRecipients&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RecipientType&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TO&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; address&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set the message subject and date we sent it.&lt;/span&gt;
    msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSubject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Email from JavaMail test&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setSentDate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Set message content&lt;/span&gt;
    msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;This is the text for this simple demo using JavaMail.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// Send the message&lt;/span&gt;
    &lt;span class=&quot;token class-name&quot;&gt;Transport&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MessagingException&lt;/span&gt; mex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    mex&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alternatively, instead using:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;This is the text for this simple demo using JavaMail.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;you can use next to set the message content:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;This is the text for this simple demo using JavaMail.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Checking an email address&lt;/h3&gt;
Here is a little trick to check, using a regular expression, if an email address is well formed:
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token class-name&quot;&gt;Pattern&lt;/span&gt; rfc2822 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;^[a-z0-9!#$%&amp;amp;amp;&apos;*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;amp;amp;&apos;*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rfc2822&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;matcher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;EMAIL_ADDRESS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Well formed email&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Multipart messages&lt;/h2&gt;
&lt;p&gt;That&apos;s fine, but usually you don&apos;t send simple text messages. Instead you send nice HTML body messages with bold or italic text, images, and so on.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;NOTE: See below at &lt;em&gt;references&lt;/em&gt; section to see about MIME format which extends the data you can attach to an email to allow multiparts, attachments, etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;When you write a multipart message the content is composed of different parts, for example one part is the message written as simple text and a second part with the same message written in an enhanced way using HTML. Then the client that reads the message is responsible to render the appropriate part depending on its capabilities.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Here create two parts and set as message contect&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Create and fill first part&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; part1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
part1&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;This is part one of this multipart message.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Create and fill second part&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; part2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
part2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;This is part two of this multipart message.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Create the Multipart.&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;Multipart&lt;/span&gt; mp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeMultipart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
mp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;part1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
mp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;part2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Set the message&apos;s content&lt;/span&gt;
msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;h2&gt;Sending attachments&lt;/h2&gt;
&lt;p&gt;Terrific, we know how to send a plain text email and something more incredible like a multipart message with HTML content. Next step is to send an email attaching too some files.&lt;/p&gt;
&lt;p&gt;Create an email with attached file is similar to create a multipart message where one part can be the text of the message and another part is the attached file. The secret is in the next lines:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Create a new part for the attached file&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; part3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Put a file in the second part&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;FileDataSource&lt;/span&gt; fds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FileDataSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;THE_FILE_NAME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
part3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDataHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fds&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
part3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setFileName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fds&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// &apos;mp&apos; is the previously created &apos;MimeMultipart&apos; object&lt;/span&gt;
mp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;part3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// &apos;msg&apos; is the previously created &apos;Message&apos; object&lt;/span&gt;
msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;h2&gt;HTML messages&lt;/h2&gt;
&lt;p&gt;Create a message o multipart message with HTML content is really easy, simply specify the MIME type in the setContent method:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; htmlPart &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
htmlPart&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&amp;amp;lt;h1&amp;amp;gt;Sample&amp;amp;lt;/h1&amp;amp;gt;&amp;amp;lt;p&amp;amp;gt;This is a sample HTML part&amp;amp;lt;/p&amp;amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Attaching images within the HTML code&lt;/h3&gt;
If you write a rich message using HTML you can, of course, add images using the &apos;&lt;em&gt;img&lt;/em&gt;&apos; tag. If the image is referenced from an external server there is no problem, but: how to attach an image to the message and render within the HTML message body?
&lt;p&gt;The idea is as follow:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;first you need to attach the image file and set an identifier and&lt;/li&gt;
&lt;li&gt;second you need to write your HTML code and reference the image identifier in the &apos;&lt;em&gt;img&lt;/em&gt;&apos; tag.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;java&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-java line-numbers&quot;&gt;&lt;code class=&quot;language-java&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Create and fill html part&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; htmlPart &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
htmlPart&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&amp;amp;lt;h1&amp;amp;gt;Sample&amp;amp;lt;/h1&amp;amp;gt;&amp;amp;lt;p&amp;amp;gt;This is a sample HTML part with an attached image&amp;amp;lt;/p&amp;amp;gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&quot;&amp;amp;lt;img src=&apos;cid:some_image_id&apos;&amp;amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text/html&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Create a new part for the attached image and set the CID image identifier&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt; imagePart &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MimeBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token class-name&quot;&gt;FileDataSource&lt;/span&gt; fds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FileDataSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;THE_IMAGE_FILE_NAME&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
imagePart&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setDataHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DataHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;fds&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
imagePart&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Content-ID&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;some_image_id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

mp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;htmlPart&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
mp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addBodyPart&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;imagePart&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Anything more to say?&lt;/h2&gt;
&lt;p&gt;Arrived to this point you are almost a master of sending emails. You know how to send simple emails, multipart emails with richest HTML content and attach files and images on your message.&lt;/p&gt;
&lt;p&gt;What more can a programmer desire?&lt;/p&gt;
&lt;p&gt;Probably, a more easy to use API and that is what &lt;a href=&quot;http://commons.apache.org/email/index.html&quot;&gt;Apache Commons Email&lt;/a&gt; project offer you. See the &apos;&lt;em&gt;user guide&lt;/em&gt;&apos; section &lt;a href=&quot;http://commons.apache.org/email/userguide.html&quot;&gt;http://commons.apache.org/email/userguide.html&lt;/a&gt; to understand what I say. It offers a more abstract API more close to humans than to protocols.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.oracle.com/technetwork/java/javamail-138606.html&quot;&gt;JavaMail&lt;/a&gt; - JavaMail project home page.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://commons.apache.org/email/&quot;&gt;Apache Commons Email&lt;/a&gt; - Apache Commons subproject to simplify the way to work with JavaMail API. See the &apos;&lt;em&gt;user guide&lt;/em&gt;&apos; section &lt;a href=&quot;http://commons.apache.org/email/userguide.html&quot;&gt;http://commons.apache.org/email/userguide.html&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/MIME&quot;&gt;MIME (Multipurpose Internet Mail Extensions)&lt;/a&gt; - Description of MIME format for multipart emails.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Clinker, a software development ecosystem]]></title><description><![CDATA[Recently I discovered Clinker, a so called Software Development Ecosystem. Mysteriously there is no definition for Development Ecosystem on Wikipedia yet but a close definition could be:]]></description><link>https://www.acuriousanimal.com/blog/2011/09/27/clinker-an-software-development-ecosystem</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/09/27/clinker-an-software-development-ecosystem</guid><pubDate>Tue, 27 Sep 2011 18:48:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I discovered &lt;a href=&quot;http://clinkerhq.com/&quot;&gt;Clinker&lt;/a&gt;, a so called Software Development Ecosystem. Mysteriously there is no definition for Development Ecosystem on Wikipedia yet but a close definition could be:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;A set of tools that tries to offer, simplify and improve software development. Typically it contains tools for &lt;a href=&quot;http://en.wikipedia.org/wiki/Continuous_integration&quot;&gt;Continuous Integration&lt;/a&gt; or &lt;a href=&quot;http://en.wikipedia.org/wiki/Build_automation&quot;&gt;Build Automation&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In this case, Clinker is a VMWare virtual machine containing:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Debian 6 (amd64) with LVM support&lt;/li&gt;
&lt;li&gt;JDK 1.6.0_27-b07 (64bits)&lt;/li&gt;
&lt;li&gt;OpenSSH Server 5.5&lt;/li&gt;
&lt;li&gt;rsync 3.0.7&lt;/li&gt;
&lt;li&gt;MySQL Server 5.1.49&lt;/li&gt;
&lt;li&gt;Apache Web Server 2.2.16&lt;/li&gt;
&lt;li&gt;Apache Maven 2.2.1&lt;/li&gt;
&lt;li&gt;Apache Tomcat 6.0.32&lt;/li&gt;
&lt;li&gt;Jenkins v1.427&lt;/li&gt;
&lt;li&gt;Sonar 2.5&lt;/li&gt;
&lt;li&gt;Nexus Community 1.9.1.1&lt;/li&gt;
&lt;li&gt;Alfresco Community 3.4.0 (d 3370)&lt;/li&gt;
&lt;li&gt;Lambda Probe 1.7b&lt;/li&gt;
&lt;li&gt;Redmine 1.1.3&lt;/li&gt;
&lt;li&gt;Subversion 1.6.17&lt;/li&gt;
&lt;li&gt;Trac 0.11.7&lt;/li&gt;
&lt;li&gt;Clinker SSO Gateway 1.2-SNAPSHOT&lt;/li&gt;
&lt;li&gt;CMIS Trac Plugin 1.0.1&lt;/li&gt;
&lt;li&gt;Stractistics Trac Plugin 0.4.2&lt;/li&gt;
&lt;li&gt;Clinker Auth Redmine Plugin 1.0.0&lt;/li&gt;
&lt;li&gt;Clinker Auth Jenkins Plugin 1.1.1&lt;/li&gt;
&lt;li&gt;Clinker Auth Sonar Plugin 1.1.0&lt;/li&gt;
&lt;li&gt;Clinker Authnz Apache Module 1.0.1&lt;/li&gt;
&lt;li&gt;Clinker Authz Subversion Apache Module 1.0.0&lt;/li&gt;
&lt;li&gt;Awstats 7.0&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;More information on &lt;a href=&quot;http://clinkerhq.com&quot;&gt;http://clinkerhq.com&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Do you know any other similar projects or alternatives? Please put a comment.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Crop image on the client side with JCrop and HTML5 canvas element]]></title><description><![CDATA[Suppose you are working on a nice web application where the user can upload images to, for example, a shop catalogue (mmm... that makes me think on something :p ) but wait... you don't the catalogue uses the whole image you upload instead a piece of it. So, we need to crop the image. function updatePreview(c) {
	if(parseInt(c.w) > 0) {
		// Show image preview
		var imageObj = $("#target")0;
		var canvas = $("#preview")0;
		var context = canvas.getContext("2d");
		context.drawImage(imageObj, c.x, c.y, c.w, c.h, 0, 0, canvas.width, canvas.height);
	}
};]]></description><link>https://www.acuriousanimal.com/blog/2011/09/26/crop-image-on-the-client-side-with-jcrop-and-html5-canvas-element</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/09/26/crop-image-on-the-client-side-with-jcrop-and-html5-canvas-element</guid><pubDate>Mon, 26 Sep 2011 13:29:00 GMT</pubDate><content:encoded>&lt;p&gt;Suppose you are working on a nice web application where the user can upload images to, for example, a shop catalogue (mmm... that makes me think on something :p ) but wait... you don&apos;t the catalogue uses the whole image you upload instead a piece of it. So, we need to crop the image.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://acuriousanimal.com/code/jcrop_html5canvas/&quot; rel=&quot;http://acuriousanimal.com/code/jcrop_html5canvas/&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 74.6234067207416%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAADQElEQVQoz2P4+PHj8+fPX7169fTp02fPnn389PHJkyevXr0Ecp+/eP7ixYuXL189efL47du3f//+/fXr128Y+PHjB8PLly8PHTx0/vz5w4cO7t+///DhwydOnLh44eLBgwdPnzp16vTpgwcOHDxw8M2bt//////3799/GPjz5w/Du3dv7969c/fO7fv37wHBHSDj3t2Hjx48eHj/yeNHT589efjw/rMXT//9A1r85z8SAGn++PHTw0fPHzx4dv/Os7t3njy4//ze3RcP77998/Lrx3c/3r/98fHdn6+f/v7HACDNL54/3LS+d9+2iYe2LTm0c92h7as3Le9et7Rw7qzC+XMbVi5tXLwgf+a87KVLcs/snwG0/h/YDUASpPn27ZNFeQqnN+a/Pjfl4fnFT6+sProyJDmHwSWYMTFeIiNVMCSGIT9LpDZduL/J8s+fn0A7gYH1BwyAmk+VFmjf2FP8/+myP78f////btX8AJ9kjrZmg+BIQc8w9sBYluhYCStHjswCs99///z9Bw02kOabN44VZ0kUVvMnF4u0TgnYvaPUJYGtpFa8vl7N2IVJ1YpRwYRZyZSZX5khPUXz/6dz//+/3Lm15NSFDUD9DBcuHQsKZaqs5y+o4A5IYIjN447I50kp4XIIY5M1YJTSYRZRZdS2ZnP0EEhJU5oz22n7zorkfPb9hyaCND+5f7uxyG//0pTDa4JK84Ti48WCM6UTSzgNvFlkdFnkdVik1Zi1TNn9/KRaKtyn9Rv4hTO4xzGs3dED0nzn1sWkJJ3tq6P2rg0L9BV0cBL0TZGIKxRxCOSUVGPRMuA0NxM0NhM2N+WvLfTev6UqN8c5t9bmwIkVYGdfORKRIN3QYBERI2VlJmBmyW/lIegXK+HgxyOpyaJpyBniqxwdrOtoK1SS4/Pz9y94OgMF2N3b58Ii5OU0GLQ02Yx1OWVkGSQUGZT1mLVMGJW0GSzMWVwceLzdRX2dBZvLQ/7++QOJ4b///oI0P3p4PTbF3i/IprU2tignMCLULTzKJTbVIzHDKSLBtjjXqbLYPTvPPSPdcf6sKqCtKDZ/+fL1+/efv36AUw1y8vsHQuBYhadHUK6CAEiuAgDExzvvWhRfjQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jcrop&quot; title=&quot;jcrop&quot; src=&quot;/static/1261e5b72d3734ffdb7015a4c7cbc424/dbb61/jcrop.png&quot; srcset=&quot;/static/1261e5b72d3734ffdb7015a4c7cbc424/19bd1/jcrop.png 163w,
/static/1261e5b72d3734ffdb7015a4c7cbc424/d3bcb/jcrop.png 325w,
/static/1261e5b72d3734ffdb7015a4c7cbc424/dbb61/jcrop.png 650w,
/static/1261e5b72d3734ffdb7015a4c7cbc424/0eed5/jcrop.png 863w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I won&amp;apos;t go in depth on how to create the whole process, in summary:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;User choose an images and app upload to server.&lt;/li&gt;
&lt;li&gt;Wep app shows the images to user and allows him/her to crop the desired piece of image.&lt;/li&gt;
&lt;li&gt;Crop parameters (x, y, widht, height) are sent to server which responsible to really crop the image.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Here we talk about the step 2: the web page that allows to crop (or choose some image area) and send the parameters to the serve to make the real crop (for example using GD or ImageMagick).&lt;/p&gt;
&lt;p&gt;The real magic comes from &lt;a href=&quot;http://deepliquid.com/content/Jcrop.html&quot;&gt;JCrop&lt;/a&gt;, a jQuery plugin to select areas within an image. As I note in the demo, in the JCrop project page there is a demo that makes a preview of the selection using two &amp;lt;img&amp;gt; elements.&lt;/p&gt;
&lt;p&gt;Here the we are going to make something very similar but using the HTML5 canvas element (to practice a bit :p).&lt;/p&gt;
&lt;p&gt;The first step is to add one img element pointing to the image and one canvas element which will act as the previous:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;img src=&amp;quot;./sago.jpg&amp;quot; id=&amp;quot;target&amp;quot; alt=&amp;quot;Flowers&amp;quot; /&amp;gt;
&amp;lt;canvas id=&amp;quot;preview&amp;quot; style=&amp;quot;width:150px;height:150px;overflow:hidden;&amp;quot;&amp;gt;&amp;lt;/canvas&amp;gt;&lt;/pre&gt;
&lt;p&gt;Now the code that preview the selected cropped image every time the user updates the selected area:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&amp;apos;#target&amp;apos;).Jcrop({
	onChange : updatePreview,
	onSelect : updatePreview,
	aspectRatio : 1
});&lt;/pre&gt;
&lt;p&gt;function updatePreview(c) {
if(parseInt(c.w) &gt; 0) {
// Show image preview
var imageObj = $(&quot;#target&quot;)[0];
var canvas = $(&quot;#preview&quot;)[0];
var context = canvas.getContext(&quot;2d&quot;);
context.drawImage(imageObj, c.x, c.y, c.w, c.h, 0, 0, canvas.width, canvas.height);
}
};&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;As you can see the main parameters are the coordinate fields (variable &apos;c&apos;). One way to send it to server is to store in four hidden input filed in a form, and send them on submit.&lt;/p&gt;
&lt;p&gt;Looking again to the post I think there are too much words to simply show an easy HTML5 canvas example :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A word about LESS]]></title><description><![CDATA[Woow!!! That is the word that best defines Less.]]></description><link>https://www.acuriousanimal.com/blog/2011/08/29/a-word-about-less</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/08/29/a-word-about-less</guid><pubDate>Mon, 29 Aug 2011 06:32:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;strong&gt;Woow!!!&lt;/strong&gt; That is the word that best defines &lt;a href=&quot;http://lesscss.org/&quot;&gt;Less&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From time to time someone creates something really useful with a touch of magic. John Resig creates jQuery, not the only one neither the first one, but it is the most famous JavaScript library.&lt;/p&gt;
&lt;p&gt;Now, &lt;a href=&quot;http://cloudhead.io/&quot;&gt;Alexis Sellier&lt;/a&gt; (alias cloudhead) has created the amazing Less tool which can be defined as &quot;The dynamic stylesheet language&quot;.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;LESS extends CSS with dynamic behavior such as variables, mixins, operations and functions&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3&gt;&lt;/h3&gt;
&lt;h3&gt;A brief sample&lt;/h3&gt;
&lt;p&gt;Imagine a web project with many lines of CSS defining your nice styles about buttons, borders, backgrounds, etc. Image you have a nice #aaaaaa color shared among many elements (borders, text color, ...). What happends if you decide to change that color? you need to rewrite the color code on every place you put it.&lt;/p&gt;
&lt;p&gt;The magic of Less allows you to define a color variable and use it around. Later if you decide to change the color, simply change the variable value.&lt;/p&gt;
&lt;h3&gt;How it works?&lt;/h3&gt;
&lt;p&gt;Instead create CSS files you need to create LESS files, they are similar to CSS bit more &quot;powerful&quot; (you can use variables, functions, ...).&lt;/p&gt;
&lt;p&gt;Less library is responsible to read the LESS file and create a CSS file for you.&lt;/p&gt;
&lt;h3&gt;How to use&lt;/h3&gt;
&lt;p&gt;You can use LessCSS in different ways. Developing it is best to use the &quot;dynamic&quot; way, that is, include the Less JavaScript code in your page a LESS file and let Less code to create and &quot;inject&quot; the generated CSS in your page.&lt;/p&gt;
&lt;p&gt;In a production environment, once set the LESS file, it is better to compile it to a CSS and incluthe this last.&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Customizing jQuery UI Dialog: hiding close button and changing opacity]]></title><description><![CDATA[Sometimes when you are programming small things are the hard things, little details becomes difficult to solve and you need to spend lot of time to solve them. This is logically :) because you spent the major part of your time thinking and designing the big or complex things, leaving in a second plane the small things and because this they became the new "big" things. Ok, stop talking with buggy sentences and talk about this post. Recently I was working in a web page using jQuery UI dialogs that have a couple of special requirements that takes me some time and because this I want to share here with you:]]></description><link>https://www.acuriousanimal.com/blog/2011/08/16/customizing-jquery-ui-dialog-hiding-close-button-and-changing-opacity</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/08/16/customizing-jquery-ui-dialog-hiding-close-button-and-changing-opacity</guid><pubDate>Tue, 16 Aug 2011 12:02:00 GMT</pubDate><content:encoded>&lt;p&gt;Sometimes when you are programming small things are the hard things, little details becomes difficult to solve and you need to spend lot of time to solve them. This is logically :) because you spent the major part of your time thinking and designing the big or complex things, leaving in a second plane the small things and because this they became the new &quot;big&quot; things. Ok, stop talking with buggy sentences and talk about this post. Recently I was working in a web page using jQuery UI dialogs that have a couple of special requirements that takes me some time and because this I want to share here with you:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Some dialogs must not have a close button. There are dialogs that must be always visible floating at some part with some controls.&lt;/li&gt;
&lt;li&gt;Some dialogs must have a degree of opacity allowing view the underlaying content and becomes more opaque when the cursor enters in the dialog.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next are samples about how customize minimally the dialog to achieve the previous requirements. You can see them in action in &lt;a href=&quot;http://acuriousanimal.com/code/jquery_custom_dialog/&quot;&gt;the next sample page&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Creating a default dialog&lt;/h3&gt;
&lt;p&gt;Create a default jQuery UI dialog is easy, given a &apos;&lt;em&gt;div&lt;/em&gt;&apos; element identified by &lt;em&gt;d1&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&quot;#d1&quot;).dialog({
	position: &apos;left&apos;
});&lt;/pre&gt;
&lt;h3&gt;Creating a dialog without close button&lt;/h3&gt;
&lt;p&gt;To creating a dialog without a close button, the key is the &apos;&lt;a href=&quot;http://jqueryui.com/demos/dialog/#event-open&quot;&gt;open&lt;/a&gt;&apos; method. We need to reference the &apos;.ui-dialog-titlebar-close&apos; element and hide it:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&quot;#d2&quot;).dialog({
	position: &apos;center&apos;,
	closeOnEscape: false,
	open: function(event, ui) {
		// Hide close button
		$(this).parent().children().children(&quot;.ui-dialog-titlebar-close&quot;).hide();
	}
});&lt;/pre&gt;
&lt;h3&gt;Creating a dialog that changes opacity&lt;/h3&gt;
&lt;p&gt;Finally to create a fashion dialog that changes its opacity with the mouse hover event:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;
$(&quot;#d3&quot;).dialog({
	position: &apos;right&apos;,
	closeOnEscape: false,
	open: function(event, ui) {
		// Set opacity
		$(this).parent().css(&apos;opacity&apos;, 0.6);
		// Hide close button
		$(this).parent().children().children(&quot;.ui-dialog-titlebar-close&quot;).hide();
		// Handle opacity
		$(this).parent().hover( function () {
			$(this).css(&apos;opacity&apos;, 0.9);
		}, function (event) {
			$(this).css(&apos;opacity&apos;, 0.6);
		});
	}
});
&lt;/pre&gt;
&lt;p&gt;Do yo know how to create more stunning dialogs?&lt;br /&gt;
Comments are welcome. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[Local storage: Storing sticky notes on your machine with HTML5]]></title><description><![CDATA[Every history has a beginning and for this post it starts when some time ago I saw this good post from tutorialzine.com. Really I love the tutorials at tutorialzine.com, they are great quality examples to learn.]]></description><link>https://www.acuriousanimal.com/blog/2011/08/12/local-storage-storing-sticky-notes-on-your-machine-with-html5</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/08/12/local-storage-storing-sticky-notes-on-your-machine-with-html5</guid><pubDate>Fri, 12 Aug 2011 09:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Every history has a beginning and for this post it starts when some time ago I saw &lt;a href=&quot;http://tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery/&quot;&gt;this good post from tutorialzine.com&lt;/a&gt;. Really I love the tutorials at tutorialzine.com, they are great quality examples to learn.&lt;/p&gt;&lt;/p&gt;
&lt;p&gt;Looking for similar things, it seems I was not the first trying to do something similar :)Â &lt;a href=&quot;http://rqru.com/sticky&quot;&gt;http://rqru.com/sticky&lt;/a&gt;. but what I wanted too was to learn a bit more about HTML5 features, concretely about local storage.
&lt;h2&gt;Client-Side Storage&lt;/h2&gt;
&lt;p&gt;HTML5 comes with different solutions for client-side storage: WebStorage, Web SQL Database and IndexedDB.&lt;/p&gt;
&lt;p&gt;At this moment one of the main issues is HTML5 is great specification but big and complex to implement by browsers. Because this you need to check if a desired feature is supported/implemented by the browser you are going to use.&lt;/p&gt;
&lt;p&gt;As a summary, &lt;a href=&quot;http://www.w3.org/TR/webstorage/&quot;&gt;WebStorage&lt;/a&gt; is a key-value mechanism, &lt;a href=&quot;http://www.w3.org/TR/webdatabase/&quot;&gt;WebSQLDatabase&lt;/a&gt; is,&amp;#xA0;unfortunately, a not really good idea (because this it was abandoned), and finally IndexedDB can be understood as a perfect mix between WebStorage and WebSQLDatabase.&lt;/p&gt;
&lt;p&gt;WebSQLDatabase, like Google Gears, was mainly though around SQLite, because this many HTML5 implementations were based too on SQLite,&amp;#xA0;inheriting&amp;#xA0;its limitations too. Mozilla never agree with WebDatabase standard and because this never implement it on their bowser. They prefer to work in the IndexedDB.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: A sample about local storage using IndexedDB can be found at &lt;a href=&quot;//2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb.html&quot;&gt;SimplyWrite, a free web distraction writing tool based on IndexedDB&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;The user interface&lt;/h2&gt;
&lt;p&gt;I base the code on the previously commented tutorialzine.com tutorial. I use most of CSS and pieces of HTML but code from scratch the JavaScript.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 65.12667660208643%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACi0lEQVQoz1VQW08aQRTef9qkT/bB1gdTa2KLWhPTm6htsbU2wYd6wWrrJbq4iiywsMtNFhCsVNEit0Vbdhf3Mjuz0wFqUr/58mXOyZxz5nyU17tD0zsM411dXVleXvR4lrqcmpx0OiecTuf09HQnT7hwl4tULBaLRPh4PB4MBvxtsAcHLNH9fR/D7DEMs+/zsaw/EOCCQeGWPFGWDVAQQoRQR23bRhhrGN90VMM2ueidJDb0lKquK/K2qmwp8lZL3bTtBmX9AwCANFFq1Ynz4tD5maNyOQrNcVOfAeAGItyouwv5e7nMg0y69zj3qFbts0DuTrFtKyfHDj7ckxH7EvGHUv0xBE7TbJHJjSZNRz/6U261OYKhA6Ehw8hT3ToATBNAGynZ9DDr6znK9p/9HLiSBiGYMoEulG88qWNX6HQ2fLpXykekvNzatcxqu9iGNu7ui7XL0lgu01vI90t1h6EPA30SQLCcKo9vCC5/ZiaQexs89xSRrGPiU9uwhExv1z54625WmuGyc5vcIi3MXf8eQWDQ1F4By9zISe8OsrOhwme+6D4sf7vQFd1AEFBk5Gbp/Qv+/nz1yfyvfrr8hi67CjXB0GKmwRl6wkLWUro5tlt5uVd57Zc8F+h7Cco6QNCiiMW71XmXOLBQGv1SGVlqPlszn8qwjiEGlm1ZmOx1pRqVP1q1qVebWl01Gi3DBIDkKRsZ60XvVPrTqjq8ooyuaWNflecN/RIBaAINAJ2YCS0yB0BoQYuwHXbR/nbLkpuku32tomsFXqlQQggQC/H/ICGx9DZpd0CJoniUOUrGk5EQL4SjUSHOJU4CyR+BRJ4LRwQ+Em4fLhI/ZJMnoajIceQdL4qpdFr8C+LVjs/tHDjoAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;stickies&quot; title=&quot;stickies&quot; src=&quot;/static/d418fe783db3ea3ac9b595047993343a/dbb61/stickies.png&quot; srcset=&quot;/static/d418fe783db3ea3ac9b595047993343a/19bd1/stickies.png 163w,
/static/d418fe783db3ea3ac9b595047993343a/d3bcb/stickies.png 325w,
/static/d418fe783db3ea3ac9b595047993343a/dbb61/stickies.png 650w,
/static/d418fe783db3ea3ac9b595047993343a/ef3f5/stickies.png 671w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This is only a personal exercise and many things need to be improves like remove notes, clean the whole board or put some nice message with the total number of notes in the &amp;quot;&lt;em&gt;Here put some info&lt;/em&gt;&amp;quot; label.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;SOURCE&lt;/strong&gt;: Code is open source so fell free to contribute at: &lt;a href=&quot;https://github.com/acanimal/stickies&quot;&gt;https://github.com/acanimal/stickies&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;DEMO&lt;/strong&gt;: Please feel free to test the demo and check code at: &lt;a href=&quot;http://www.acuriousanimal.com/stickies&quot;&gt;http://www.acuriousanimal.com/stickies&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2&gt;The implementation&lt;/h2&gt;
&lt;p&gt;I rewrite almost all the JavaScript code in this&amp;#xA0;stickies&amp;#xA0;post but I continue using the same libraries and plugins as in the original, that is, &lt;a href=&quot;http://jquery.com/&quot;&gt;jQuery&lt;/a&gt;,&amp;#xA0;jQuery-UI and &lt;a href=&quot;http://fancybox.net/&quot;&gt;Fancybox&lt;/a&gt;&amp;#xA0;with a couple of addition:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.jstorage.info/&quot;&gt;jStorage&lt;/a&gt;: A nice wrapper plugin for Prototype, MooTools and jQuery to cache data (string, numbers, objects, even XML nodes) on browser side. It helps a lot because make transparent for you the initialization of the storage engine and is compatible with many browsers.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 42.176870748299315%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAB80lEQVQY0wHoARf+AHWkdk+MU0aIS0eITUeIS1OQVl+WY1yUYE6MT1iSXHKidWGWY02MT2CXY3Ggc1eRWkmKTF+WY1eRW2OaZQDG1MG+0L3K3cjN38zD2r9xsWZrr2Fsr2JorVxkqlpsr2Jmq1xmq1pmq1xsr2Jkq1pmrFpzsmtysWl6tm8A4+Le6ejo///+////9frzhsR5e75ufcBvfsBvfL9vf8ByfL9vfsBvfL9vf8Byfb9ve79th8R9isV/i8eAAOHk3PDz7fr89vz9+vD364PBdnm8bHu9bXu9bHm8bHy9b3m8bHy8bHq6a327bnq6a3q9aYfDeovFfIvFfADu8Oj+//v7/vb9/vnx+OqDx3d3wm56w3B6wm13u2d5vGp2u2d3wGlywmp2wmtuv2zS6yXZ4xDP2w7q9TMA3t/Z5OXi9fbz////8/buj6luhqFkiKFkiKtqi8SCk8iIjcyHpJlzu29nvHpuu3JsvclavtxivNVhzOZxAOTm3ejq5Pj58/3/+/Pz6aSFY5x5Vp12VaGSarDXqbfarbbbrbTMorvGo7/LqL/Kp6bLp7HZu7bcvbXauwDi5Nzl5+L2+PL+//zy9euSp22Jn2OKnmKNq2yTyoiXy4uUyoiTy4eRzImVz42SzYqTyYSfzpGgzpKj0ZSIZTDozw0LVgAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;jstorage compat&quot; title=&quot;jstorage_compat&quot; src=&quot;/static/c719723b5ea34744f47ff663582edfca/dbb61/jstorage_compat.png&quot; srcset=&quot;/static/c719723b5ea34744f47ff663582edfca/19bd1/jstorage_compat.png 163w,
/static/c719723b5ea34744f47ff663582edfca/d3bcb/jstorage_compat.png 325w,
/static/c719723b5ea34744f47ff663582edfca/dbb61/jstorage_compat.png 650w,
/static/c719723b5ea34744f47ff663582edfca/74efd/jstorage_compat.png 735w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/jquery-json/&quot;&gt;jquery-json&lt;/a&gt;: This plugin makes it simple to convert to and from JSON.&lt;/p&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery&quot;&gt;http://tutorialzine.com/2010/01/sticky-notes-ajax-php-jquery&lt;/a&gt; - Stickies demo tutorial at tutorialzine&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.html5rocks.com/tutorials/#storage&quot;&gt;http://www.html5rocks.com/tutorials/#storage&lt;/a&gt; - HTML5 Storage&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://mikewest.org/2010/12/intro-to-indexeddb&quot;&gt;http://mikewest.org/2010/12/intro-to-indexeddb&lt;/a&gt; - Intro to IndexedDB with good slides.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/scriptjunkie/gg679063&quot;&gt;http://msdn.microsoft.com/en-us/scriptjunkie/gg679063&lt;/a&gt; - Another great IndexedDB description&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/webstorage&quot;&gt;http://www.w3.org/TR/webstorage&lt;/a&gt; - WebStore specification.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.w3.org/TR/IndexedDB/&quot;&gt;http://www.w3.org/TR/IndexedDB&lt;/a&gt; - IndexedDB specification.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://caniuse.com/indexeddb&quot;&gt;http://caniuse.com/indexeddb&lt;/a&gt; - IndexedDB compatibility.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.jstorage.info&quot;&gt;http://www.jstorage.info&lt;/a&gt; - Wrapper for Prototype, MooTools and jQuery to cache data (string, numbers, objects, even XML nodes) on browser side.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A geek joke]]></title><description><![CDATA[It makes me smile: A man walks into a Doctorâ€™s and says â€œDoctor, I think Iâ€™m addicted to Twitter.â€ Doctor looks at him and says â€œSorry, I donâ€™t follow you.â€]]></description><link>https://www.acuriousanimal.com/blog/2011/07/29/a-geek-joke</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/07/29/a-geek-joke</guid><pubDate>Fri, 29 Jul 2011 13:12:00 GMT</pubDate><content:encoded>&lt;p&gt;It makes me smile:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A man walks into a Doctorâ€™s and says â€œDoctor, I think Iâ€™m addicted to Twitter.â€ Doctor looks at him and says â€œSorry, I donâ€™t follow you.â€&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://twitter.com/opencontent&quot;&gt;@opencontent&lt;/a&gt; - &lt;em&gt;David Wiley&lt;/em&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Generating map tiles without a map server. GeoTools the GIS swissknife.]]></title><description><![CDATA[Recently I was playing with latest version of GeoServer. It includes the GeoWebCache, something which can improve your server performance greatly. GeoServer solves and helps lots of problems to work and visualize geospatial data but as you know map servers lakes from scalability. // Get lightning store
DataStore dataStore = DataStoreFinder.getDataStore(params);
SimpleFeatureSource sfs = dataStore.getFeatureSource("lightnings"); // Style for Positivos
Graphic grP = styleFactory.createDefaultGraphic();
Mark markP = styleFactory.getCircleMark();
markP.setStroke(styleFactory.createStroke(filterFactory.literal(Color.BLUE), filterFactory.literal(1)));
markP.setFill(styleFactory.createFill(filterFactory.literal(Color.CYAN)));
grP.graphicalSymbols().clear();
grP.graphicalSymbols().add(markP);
grP.setSize(filterFactory.literal(5)); // Style for Negativos
Graphic grN = styleFactory.createDefaultGraphic();
Mark markN = styleFactory.getCircleMark();
markN.setStroke(styleFactory.createStroke(filterFactory.literal(Color.RED), filterFactory.literal(1)));
markN.setFill(styleFactory.createFill(filterFactory.literal(Color.ORANGE)));
grN.graphicalSymbols().clear();
grN.graphicalSymbols().add(markN);
grN.setSize(filterFactory.literal(5)); Filter filterPositiveValor = ff.and(filter, CQL.toFilter("value >= 0"));
Filter filterNegativeValor = ff.and(filter, CQL.toFilter("value < 0")); // Create symbols and rules to render every feature
PointSymbolizer symPositivos = styleFactory.createPointSymbolizer(grP, null);
PointSymbolizer symNegativos = styleFactory.createPointSymbolizer(grN, null); Rule ruleP = styleFactory.createRule();
ruleP.symbolizers().add(symPositivos);
ruleP.setFilter(filterPositiveValor);
FeatureTypeStyle ftsP = styleFactory.createFeatureTypeStyle(new Rule[]{ruleP}); Rule ruleN = styleFactory.createRule();
ruleN.symbolizers().add(symNegativos);
ruleN.setFilter(filterNegativeValor);
FeatureTypeStyle ftsN = styleFactory.createFeatureTypeStyle(new Rule[]{ruleN}); // Finally create out style
Style style = styleFactory.createStyle();
style.featureTypeStyles().add(ftsP);
style.featureTypeStyles().add(ftsN); }]]></description><link>https://www.acuriousanimal.com/blog/2011/07/23/generating-map-tiles-without-a-map-server-geotools-the-gis-swissknife</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/07/23/generating-map-tiles-without-a-map-server-geotools-the-gis-swissknife</guid><pubDate>Sat, 23 Jul 2011 20:14:00 GMT</pubDate><content:encoded>&lt;p&gt;Recently I was playing with latest version of &lt;a href=&quot;http://geoserver.org/&quot;&gt;GeoServer&lt;/a&gt;. It includes the &lt;a href=&quot;http://geowebcache.org/&quot;&gt;GeoWebCache&lt;/a&gt;, something which can improve your server performance greatly. GeoServer solves and helps lots of problems to work and visualize geospatial data but as you know map servers lakes from scalability.&lt;/p&gt;
&lt;p&gt;Because this GeoWebCache is a great tool. Basically, each map request is processed and the result image is stored to be directly returned on subsequent requests. The processed images are stored as a pyramid of tiles depending on the bounding box or zoom level of the request.&lt;/p&gt;
&lt;p&gt;Another way to solve scalability problems is directly pre-generate the pyramid of tiles, something that makes Google, Bing, Yahoo, OpenStreetMaps, etc.&lt;/p&gt;
&lt;h3&gt;What I need?&lt;/h3&gt;
&lt;p&gt;I have a lightnings database with thousands of lightnings for a period of some months. I need to show lightnings in my maps but only those corresponding to a period or interval of time. For example, render the lightnings from 00:00h to 00:30h and allow the user to go forward or backward in time.&lt;/p&gt;
&lt;p&gt;One important thing is I only need an &amp;quot;image&amp;quot; with the information in that period. I don&amp;apos;t need to render each lightning as a feature in the map -this will degrade the performance rendering in a storm with thousands of lightnings per period.&lt;/p&gt;
&lt;h3&gt;The problem&lt;/h3&gt;
&lt;p&gt;So why don&amp;apos;t use GeoServer+GeoWebCache for this? I can configure a layer pointing to my lightning database, make requests and rest assured subsequent call will get the previously created map.&lt;/p&gt;
&lt;p&gt;The problem is at this moment -while I write this post- GeoServer lakes from TIME support in requests. That means if I define a layer from my lightnings table on DB, every GeoServer request will work against all data while I only need a subset of my data -determined by an interval- to be rendered in the requested maps.&lt;/p&gt;
&lt;h3&gt;Adopted solution&lt;/h3&gt;
&lt;p&gt;Ok, be quiet. GeoServer is build on top of &lt;a href=&quot;http://geotools.org/&quot;&gt;GeoTools&lt;/a&gt;, an op&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 476px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 26.260504201680675%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVQY02NgYAhgYfCT9WWp5MsWKmePkSuTNmGgCFQL+jLESvcz+shkMVT7mctXM/hJN7NpMNhr6TJ4qsYzeKiyMXjrczHoM7AypNYIMzReTmKoPxPM0HCOB6y/4SwbEJsBsTYQszKwNfPkM0ziM2eQZJBmqJ8ylWHiymusOUqpDK4qSxk81Y4CDdwBxFsZPNW3M7jKzgMaNhto2C6G+rM7gAasAGIQfRCIzwDxZAauDIkUmXrBRJ0NDNLs3WLJjNnudxn8VX0Y3FQcgQZ1AnEpEBczeGqWMTjwxTM0XbUEGhoENLAZaEA2ELcBcS4Qg/hVDAwmuvw8UXLVfEkyS1jjpVYx+PJlUhKCANtcUhOqzVXJAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;geotools logo&quot; title=&quot;geotools logo&quot; src=&quot;/static/c80ab8ff88c588985357e3b39d58d8ad/c6717/geotools-logo.png&quot; srcset=&quot;/static/c80ab8ff88c588985357e3b39d58d8ad/19bd1/geotools-logo.png 163w,
/static/c80ab8ff88c588985357e3b39d58d8ad/d3bcb/geotools-logo.png 325w,
/static/c80ab8ff88c588985357e3b39d58d8ad/c6717/geotools-logo.png 476w&quot; sizes=&quot;(max-width: 476px) 100vw, 476px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;en source Java library which provides standards compliant methods for the manipulation of geospatial data and, more important, GeoTools library implements &lt;a href=&quot;http://www.opengeospatial.org&quot;&gt;Open Geospatial Consortium&lt;/a&gt; (OGC) specifications as they are developed.&lt;/p&gt;
&lt;p&gt;With all this the solution seems easy: code a program to query the desired period of lightning data and generate a pyramid of tiles (for the desired levels).&lt;/p&gt;
&lt;h2&gt;&amp;#xA0;A brief description of the implementation&lt;/h2&gt;
&lt;p&gt;Next is a brief summary of things to do, or take into account, to generate your own pyramid of tiles programmatically with Geotools.&lt;/p&gt;
&lt;p&gt;All the lightnings information is stored on a PostgreSQL/PostGIS table called &amp;apos;lightnings&amp;apos;. Data related with a lightning are: date (the UTC instant in which the lightning occurs, represented as a long number in &lt;a href=&quot;http://en.wikipedia.org/wiki/Unix_time&quot;&gt;Unix time&lt;/a&gt;), position (latitude/longitude/altitude), value and sign (the electric charge).&lt;/p&gt;
&lt;h3&gt;Set the DataSource connection&lt;/h3&gt;
&lt;p&gt;GeoTools tries to simplify thing and because this it tries to abstracts as much as possible. Features can be provided from many source: files (shapefiles, GML, ...) or a database (PostgreSQL/PostGIS, Oracle, ...).&lt;/p&gt;
&lt;p&gt;The first step then is to set a DataSource instance pointing to our database:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;Map&amp;lt;String, Object&amp;gt; params = new HashMap&amp;lt;String, Object&amp;gt;();
params.put(PostgisNGDataStoreFactory.DBTYPE.key, dbconn.getType());
params.put(PostgisNGDataStoreFactory.HOST.key, dbconn.getHost());
params.put(PostgisNGDataStoreFactory.PORT.key, dbconn.getPort());
params.put(PostgisNGDataStoreFactory.SCHEMA.key, &amp;quot;public&amp;quot;);
params.put(PostgisNGDataStoreFactory.DATABASE.key, dbconn.getDatabase());
params.put(PostgisNGDataStoreFactory.USER.key, dbconn.getUser());
params.put(PostgisNGDataStoreFactory.PASSWD.key, dbconn.getPassword());
params.put(PostgisNGDataStoreFactory.EXPOSE_PK.key, true);&lt;/pre&gt;
&lt;p&gt;// Get lightning store
DataStore dataStore = DataStoreFinder.getDataStore(params);
SimpleFeatureSource sfs = dataStore.getFeatureSource(&quot;lightnings&quot;);&lt;/pre&gt;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Note: &apos;dbconn&apos; is an object which stores my DB connection parameters.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3&gt;Filtering data&lt;/h3&gt;
&lt;p&gt;We don&apos;t want to get all the lightnings in the database but only those withing a period of tim, so what we need is to filter the data using Filter classes. Given a period of time represented by values &apos;long start_date&apos; and &apos;long end_date&apos; we can define the desired filter as:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;FilterFactory2 filterFactory = CommonFactoryFinder.getFilterFactory2(null);
// Create filter for specified initial and end dates
Filter filterStart = filterFactory.greaterOrEqual(filterFactory.property(&quot;date&quot;), filterFactory.literal(start_date));
Filter filterEnd = filterFactory.less(filterFactory.property(&quot;date&quot;), filterFactory.literal(end_date));
Filter filterTime = filterFactory.and(filterStart, filterEnd);&lt;/pre&gt;
&lt;h3&gt;Create styles before rendering for features&lt;/h3&gt;
&lt;p&gt;There are some ways to create styles for our features. One is to use a SLD document and the other is doing programmatically.&lt;/p&gt;
&lt;p&gt;In my case, I chose to use the second form so here is a bit of cumbersome code (I ommited the try/catch section) which create the desired style to identify positive and negative lightnings.&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;// Create style
StyleBuilder styleBuilder = new StyleBuilder();
StyleFactory styleFactory = styleBuilder.getStyleFactory();
FilterFactory2 filterFactory = styleBuilder.getFilterFactory();
&lt;p&gt;// Style for Positivos
Graphic grP = styleFactory.createDefaultGraphic();
Mark markP = styleFactory.getCircleMark();
markP.setStroke(styleFactory.createStroke(filterFactory.literal(Color.BLUE), filterFactory.literal(1)));
markP.setFill(styleFactory.createFill(filterFactory.literal(Color.CYAN)));
grP.graphicalSymbols().clear();
grP.graphicalSymbols().add(markP);
grP.setSize(filterFactory.literal(5));&lt;/p&gt;
&lt;p&gt;// Style for Negativos
Graphic grN = styleFactory.createDefaultGraphic();
Mark markN = styleFactory.getCircleMark();
markN.setStroke(styleFactory.createStroke(filterFactory.literal(Color.RED), filterFactory.literal(1)));
markN.setFill(styleFactory.createFill(filterFactory.literal(Color.ORANGE)));
grN.graphicalSymbols().clear();
grN.graphicalSymbols().add(markN);
grN.setSize(filterFactory.literal(5));&lt;/p&gt;
&lt;p&gt;Filter filterPositiveValor = ff.and(filter, CQL.toFilter(&quot;value &gt;= 0&quot;));
Filter filterNegativeValor = ff.and(filter, CQL.toFilter(&quot;value &amp;#x3C; 0&quot;));&lt;/p&gt;
&lt;p&gt;// Create symbols and rules to render every feature
PointSymbolizer symPositivos = styleFactory.createPointSymbolizer(grP, null);
PointSymbolizer symNegativos = styleFactory.createPointSymbolizer(grN, null);&lt;/p&gt;
&lt;p&gt;Rule ruleP = styleFactory.createRule();
ruleP.symbolizers().add(symPositivos);
ruleP.setFilter(filterPositiveValor);
FeatureTypeStyle ftsP = styleFactory.createFeatureTypeStyle(new Rule[]{ruleP});&lt;/p&gt;
&lt;p&gt;Rule ruleN = styleFactory.createRule();
ruleN.symbolizers().add(symNegativos);
ruleN.setFilter(filterNegativeValor);
FeatureTypeStyle ftsN = styleFactory.createFeatureTypeStyle(new Rule[]{ruleN});&lt;/p&gt;
&lt;p&gt;// Finally create out style
Style style = styleFactory.createStyle();
style.featureTypeStyles().add(ftsP);
style.featureTypeStyles().add(ftsN);&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;Create the map and render to a file&lt;/h3&gt;
&lt;p&gt;The map creating is straightforward:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;MapContext map = new DefaultMapContext();
CoordinateReferenceSystem crs = CRS.decode(&quot;EPSG:3785&quot;);
map.setCoordinateReferenceSystem(crs);&lt;/pre&gt;
&lt;p&gt;and then render it to a file. I will paste here the code on theÂ &lt;a href=&quot;http://docs.geotools.org/latest/userguide/library/render/gtrenderer.html&quot;&gt;GTRenderer tutorial&lt;/a&gt;. You can play a bit with the code and change some values: area of interest, size of the output image, etc.&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;public void saveImage(final MapContent map, final String file, final int imageWidth) {
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;GTRenderer renderer = new StreamingRenderer();
renderer.setMapContent(map);

Rectangle imageBounds = null;
ReferencedEnvelope mapBounds = null;
try {
    mapBounds = map.getMaxBounds();
    double heightToWidth = mapBounds.getSpan(1) / mapBounds.getSpan(0);
    imageBounds = new Rectangle(
            0, 0, imageWidth, (int) Math.round(imageWidth * heightToWidth));

} catch (Exception e) {
    // failed to access map layers
    throw new RuntimeException(e);
}

BufferedImage image = new BufferedImage(imageBounds.width, imageBounds.height, BufferedImage.TYPE_INT_RGB);

Graphics2D gr = image.createGraphics();
gr.setPaint(Color.WHITE);
gr.fill(imageBounds);

try {
    renderer.paint(gr, imageBounds, mapBounds);
    File fileToSave = new File(file);
    ImageIO.write(image, &amp;quot;jpeg&amp;quot;, fileToSave);

} catch (IOException e) {
    throw new RuntimeException(e);
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h1&gt;Conclusions&lt;/h1&gt;
&lt;p&gt;Every tool is designed and built with a goal in mind, because this normally the use of a map server is always the proper selection. But sometimes you have specific needs that general tools doesn&apos;t solve and here is when open source project like GeoTools can help you.&lt;/p&gt;
&lt;p&gt;I would to note that programing this way the image generation is much more faster than use of GeoServer because we are avoiding lots of intermediate steps a map server does: get request, parse, check and validate parameters and once query is executed, image composed it must be returned to the client via HTTP protocol.&lt;/p&gt;
&lt;h1&gt;References&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.geotools.org&quot;&gt;http://docs.geotools.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.geotools.org/latest/userguide/library/render/gtrenderer.html&quot;&gt;http://docs.geotools.org/latest/userguide/library/render/gtrenderer.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.geotools.org/stable/tutorials/filter/query.html&quot;&gt;http://docs.geotools.org/stable/tutorials/filter/query.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A heatmaps layer for OpenLayers]]></title><description><![CDATA[As I commented on a previous post I know about heatmaps.js project some time ago and interest me a lot by its possibilities with OpenLayers. Of course it is not the only solution, see here and here but it has a great performance.]]></description><link>https://www.acuriousanimal.com/blog/2011/06/09/a-heatmaps-layer-for-openlayers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/06/09/a-heatmaps-layer-for-openlayers</guid><pubDate>Thu, 09 Jun 2011 17:20:00 GMT</pubDate><content:encoded>&lt;p&gt;As I commented on a previous post I know about &lt;a href=&quot;http://www.patrick-wied.at/static/heatmapjs&quot;&gt;heatmaps.js&lt;/a&gt; project some time ago and interest me a lot by its possibilities with OpenLayers. Of course it is not the only solution, see &lt;a href=&quot;http://www.websitedev.de/temp/openlayers-heatmap-layer.html&quot;&gt;here&lt;/a&gt; and &lt;a href=&quot;http://dev.openlayers.org/sandbox/camptocamp/canvas/openlayers/examples/heatMap.html&quot;&gt;here&lt;/a&gt; but it has a great performance.&lt;/p&gt;
&lt;h2&gt;Some &amp;apos;auto-bombo&amp;apos;&lt;/h2&gt;
&lt;p&gt;I put the creation of an OpenLayers layer in my maybe/something task list but seems the moment never arrives. Luckily for all of us, Patrick the author of the project, created too an initial heatmaps layer for OpenLayers and Google Maps.&lt;/p&gt;
&lt;p&gt;The heatmap-openlayer code is a wrapper around the heatmap.js code and the initial version has some issues I have tried to improve. In concrete I have added:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Heatmaps as independent map layer. On the initial version the heatmap-layer depends on another layer to make some position to pixel transformations.&lt;/li&gt;
&lt;li&gt;Points based on OpenLayers.LonLat. Now you can specify the points in any coordinate system and layer transforms it to the one used by the map.&lt;/li&gt;
&lt;li&gt;Possibility to pass the data set in layer constructor in addition to the method &amp;apos;setDataset&amp;apos;.&lt;/li&gt;
&lt;li&gt;Improved &amp;apos;addDataPoint&amp;apos; method to add new lonlat based points.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;[caption id=&amp;quot;attachment_304&amp;quot; align=&amp;quot;aligncenter&amp;quot; width=&amp;quot;588&amp;quot; caption=&amp;quot;Click for the demo&amp;quot;]&lt;a href=&quot;http://www.acuriousanimal.com/heatmap-openlayers&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 41.904761904761905%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACDElEQVQozxWS20/aABTG+18vS3w1Ghd1m9u84UQBRUVALlJsKVBoaaG0tFwrCnIZccu2h2Xvv3WPJ/nO9/tyzieUtQnGuMvk54BMaUm6OkHueRwqIzItH9npctlJs5ONo5pn9KYzUp6LM/f48+s3TjB3Zznmkx/48zFCSqlQM7/TGKw4bycxnAZPqwVf62myTYuw4XGqONyoNu2ug/WUR59lWC7+UlpcEO/JFEdFpLHOeLFESKj31PVvDP0pzXmZ1eqFgf9KrSSTVk1ClS57sonvz3idTnB9jyvboGW2gx2bxqPGTW0RJM5SbVYQssoh8ksBw3VZTl/oBsbbOYc1N8ZeSeNa7ZFwmowmz4huAskbE6o9kmjGqQ+cALQg6T7woFlo+jVCVAlxNTzFGz5TsEXCosVOtcDb3nu+FG1iFYeWN6Iz8yi0RA4MkVtzFGhbiJ0gZXDLnGZzWe1w354ibEoKMVln18xwYqmE7RTp0oCjtM1mUWG7aOL0+8henrteDmmgkhh+JtLIEDVc4t0Ebzon7PZP2JSSCO+UDLFaiA/1s4DiklR0RM1gS7vmWG1wXLEQvQafWjfUfBPvcUzUu2VDT3OubBHNa6zrCQ70DPvP6wjhhk7E+f+AfGCscanWkdstKlMJ52nInqTysVRmLW8R8VJBC/rEyyoX1h37VoTjusSGkueoOCKsq/wDlQ4JRV0o1ugAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;heatmap ol1&quot; title=&quot;heatmap_ol&quot; src=&quot;/static/3fe093da35d093d369f9346e750ce230/dbb61/heatmap_ol1.png&quot; srcset=&quot;/static/3fe093da35d093d369f9346e750ce230/19bd1/heatmap_ol1.png 163w,
/static/3fe093da35d093d369f9346e750ce230/d3bcb/heatmap_ol1.png 325w,
/static/3fe093da35d093d369f9346e750ce230/dbb61/heatmap_ol1.png 650w,
/static/3fe093da35d093d369f9346e750ce230/74efd/heatmap_ol1.png 735w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;[/caption]&lt;/p&gt;
&lt;h2&gt;How to use heatmap-openlayers&lt;/h2&gt;
&lt;p&gt;The first step is to create the data set. The important things to remember about a dataset are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A dataset is an object with two attributes: a &amp;apos;max&amp;apos; value used to colorize the points and an array with the data.&lt;/li&gt;
&lt;li&gt;Every point in the data array has two parts: an OpenLayers.LonLat object and an integer indicating the value.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next code generate a random set of points:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Generate some random data for test
var testData = {
	max: 50,
	data: []
};
var lon, lat, c;
for(var i=0; i&amp;lt;500; i++) {
	lon = Math.floor(Math.random()*(-180-180)+180);
	lat = Math.floor(Math.random()*(-85-85)+85);
	c = Math.floor(Math.random()*50);
	testData.data.push({lonlat: new OpenLayers.LonLat(lon, lat), count: c});
}&lt;/pre&gt;
&lt;p&gt;Now we can create our layer indicating its projection (the projection in which points are expressed) and necessary to transform points to map projection:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;heatmap = new OpenLayers.Layer.Heatmap(&amp;quot;Heatmap Layer&amp;quot;, map, testData,
{visible: true, radius: 15},
{isBaseLayer: false, opacity: 0.3, projection: new OpenLayers.Projection(&amp;quot;EPSG:4326&amp;quot;)});&lt;/pre&gt;
&lt;p&gt;If you don&amp;apos;t want to pass the dataset in the constructor simply pass a null value and set it later with the &amp;apos;setDataset&amp;apos; method.&lt;/p&gt;
&lt;p&gt;Finally, you can add more points later using the &amp;apos;addDataPoint&amp;apos; method:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Add more points
for(var i=0; i&amp;lt;100; i++) {
	lon = Math.floor(Math.random()*(-180-180)+180);
	lat = Math.floor(Math.random()*(-85-85)+85);
	c = Math.floor(Math.random()*50);
	heatmap.addDataPoint(new OpenLayers.LonLat(lon, lat), c);
}&lt;/pre&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;This is only a little step to create a good layer for OpenLayers based on a nice and good performance project.&lt;/p&gt;
&lt;p&gt;Much more work can be done so if you want to contribute simply get the from &lt;a href=&quot;https://github.com/acanimal&quot;&gt;github&lt;/a&gt; and start working.&lt;/p&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Heatmaps in OpenLayers]]></title><description><![CDATA[Some month ago I found nice post on how to create heatmaps using HTML5 canvas element. Its author, Patrick Wied, created a nice JavaScript code responsible to create a heatmap over an image depending on the mouse click or mouse move events.]]></description><link>https://www.acuriousanimal.com/blog/2011/06/06/heatmaps-in-openlayers</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/06/06/heatmaps-in-openlayers</guid><pubDate>Mon, 06 Jun 2011 05:30:00 GMT</pubDate><content:encoded>&lt;p&gt;Some month ago I found nice post on how to create &lt;a href=&quot;http://www.patrick-wied.at/static/heatmapjs/&quot;&gt;heatmaps &lt;/a&gt;using HTML5 canvas element. Its author, &lt;a href=&quot;http://www.patrick-wied.at/&quot;&gt;Patrick Wied&lt;/a&gt;, created a nice JavaScript code responsible to create a heatmap over an image depending on the mouse click or mouse move events.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 304px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.48684210526315%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADrUlEQVQ4yw2TS0wTBgCGe9hlO+yRuOyyg8my0w5LZuIObpM4A5NEHjoeAXQTYYNNqDB5RZHSKlBglALCoBQoBTrEAYXSYlkLyFpegrZQCgWEvnjqsEPNnMu+cf0P33f5foEtoGXM+QD3sgf7nJexpVke/93AnO8e6+s7TM1usbC4gXt9iyGflYGXXRhtfpyzfzKxN4DzRSsWh5cd3y5evxuB3Csl2axErbGhqF+hSGmlae8sYk8rnb895cxaOdLZYXQjfmq2E2h8eZqEu1Zymp6SPX+b8mex5M60YpheYHV1FUHz0Brxr1IIaSnhy2MVREXUcuR8OWESBSPmFfIsetLVJppnlBj2wri2XE/Ps2Sqd0WEO0dJfZxK/6vPuO4QMWCYRjA9tUCdzcbpSxm89fphPjpcyodvComLjMTnd2AwPqRMcwaX5RO6bDGITVpeuELpXsvl0KkbvJMUzJHMz/kg6BgngqIROJfmCWzuomr6heSkHC5ITJz6SUGdTIWp10Nu2wOKLZ+idx0lxWKgdqEN17/BlJgHOXFUSGJcKt+dzyc+6jKJhQkIZmcW6TFv0dTtoqi3CqU3hB8ffU1qnZy0nhWik2y8FnKWt2/GcOhkGu+9f5yLlSI0ul0KReWI8qu4XC4hr15MmjoWQY/WQ8ZoO1cWM0gY/QL5eCTRHaEkzrxBhlVJV7uT/Os9RMY6iMlqIKLye27K9PT3rWHU28jTtTA+dpwJQwjSXtMB0LSCbOQcVue7RMiz+CqihYSUauJuFXNVUkaVSkGN/gJRt2qJNgqpfvIx5yoKkBbJ0HT0EtWZxpWxUIRiKVrtEAK9cQOZVUPffgxFnWMoKn0UtThIr1uhuek5jRO/sj8YhM7+A1d/t3Ft8yK583IG9F7umV30mzcpHbChnmzFfH8KQZu/DkmvBUmDG2WzC03fEu3dEuyaKGr/UKByZfOfOISxyW9Q9O2QeSD4dqmUstIniOoW6TY3YnIJWfjnJCpLN4KWdSk5Kgs5uXsH3XlYCwSYGy2ASxHsK8LR7iQzMlyI3JOF2C2m3bjM9NRfjJsD1I5Y8HSHs+0I4/ZzIV2jTgTqTh/xkyMkN09RKxukX6slTWZAZUyFn4MZHC9maGafioNkRLuJ1Bjs6JxqdA49WoMfaVMXJZZMClej6Ry9j2Bodhv5wQfvTNjJzshCmJ5BXKwKeX8bgQ0p004dc/Z1Bk1ueoY93LW6WA4c7N42dEOPqCjroKBCyY3mNiYmH/I/D/vvJoMrmP4AAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;heatmap&quot; title=&quot;heatmap&quot; src=&quot;/static/c88d04c4bb0f2bc305acfb14591ba220/55a47/heatmap.png&quot; srcset=&quot;/static/c88d04c4bb0f2bc305acfb14591ba220/19bd1/heatmap.png 163w,
/static/c88d04c4bb0f2bc305acfb14591ba220/55a47/heatmap.png 304w&quot; sizes=&quot;(max-width: 304px) 100vw, 304px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Instantly, I though to take a look and try to create an OpenLayers heatmap layer. Unfortunately I was very busy and have no time to work on. But... fortunately the project author has enough time to continue improving it and he has created the desired heatmap OpenLayers layer (and also one more for Google Maps), which you can test &lt;a href=&quot;http://www.patrick-wied.at/static/heatmapjs/demo/maps_heatmap_layer/openlayers.php&quot;&gt;here&lt;/a&gt; and looks like:&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 237px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 65.40084388185655%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACz0lEQVQ4y42T21NTVxTGzz/ZF9+cqc5UphO0xVZnHDq21SkBImBqrRSRqZp7kFuMASVCgHIpCIKJIYnkkHNyTs4tATJeWn/uBMZxRh94WLPW7Nn72+v7vrWkoSGV7S2DbEZhdvEFvw5M8G1XgO96wpy7FhY5dJSPF1I04FBI25TlMjXDpF6t4ptYwNUd4Hxf5Ag4dHzAXbmIVlKwNJ19y8HRdWIjFicvJmjpvP/x4nFBpf7IUzoGE+S3ZdSiilI0WF108PtVBiIpzvV8DvSpBJ9+9H2vALzgHeab33zcCCZR0hV6nsl45/MomzVeO1Xujc9zpsMn6Ec/AznMhxqfFXWL24/k9T/mcv8onsF5ZiYdxqbKRMY1puMWcs6gUqpwZSDGqat3cXkCXwRrsPjRG+ZWeBppdf0lpZ1doV2N/MsqmTWT5VmbJwkTTTao6TbJhQ3C8RW67yQ/Ot+kKMLl8eO+Pcmd6DIT02uHHeqlMvVaFX3XYTTiMDRQYyllUS7qlAo6r22L97U6O1mL9ptjtHqCtPWKCegNcubnUS6P+enL9BF/pCLpShlbOGxrlniwx1SsyvamjVY0SW8Y/JMym/XWpsxf4blmV43uWjp9tHmitAce8lWulZ9WbrGVEYA9f082Kc3M5YhPmKwvOWg7Ns9XHIYDB/x+fY+Nfw0Wl15x0ZPk9BW/cDOE516C5Nwz1tMZ7q+m6N/uYC3zAim5mmFHVtnaUEjNlFEKJtNTBvOzGuOxAonHOdafZ3kwtYx7cJKFlTTZdI5SVm3qu2/twcF/YiH+p1JUkL5ectOVekDnn0/5wRvll/4YLvcIF66PiG0J4epqjIOPE+2D3Ag9gTd13u3vob7S2c2XhHFlqpbJ24Mab8S5dKpTCNsVpLU72BS7Ed1341z6Y4Szom5odnt4Ruz5Jrqqc2A7VCsm+7ZN3RGbpVUo5QvYqoohK3wARGYr77y2ZygAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;heatmap ol&quot; title=&quot;heatmap-ol&quot; src=&quot;/static/05c629034268b613e747a000c703a8bf/a1ad1/heatmap-ol.png&quot; srcset=&quot;/static/05c629034268b613e747a000c703a8bf/19bd1/heatmap-ol.png 163w,
/static/05c629034268b613e747a000c703a8bf/a1ad1/heatmap-ol.png 237w&quot; sizes=&quot;(max-width: 237px) 100vw, 237px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The big issue at this moment is the &lt;strong&gt;heatmap isn&amp;apos;t a layer by itself&lt;/strong&gt; and it needs a reference to a &amp;quot;real&amp;quot; layer (like a WMS layer) to render it. If we look at code we need three things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Some data for the hetmap.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var testData={
	max: 46,
	data: [{lat: 33.5363, lon:-117.044, count: 1}, ... ,{lat: 35.8278, lon:-78.6421, count: 1}]
};&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;A &amp;quot;real&amp;quot; OpenLayers layer.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:js&quot;&gt;layer = new OpenLayers.Layer.MapServer( &amp;quot;OpenLayers WMS&amp;quot;,
	&amp;quot;http://labs.metacarta.com/wms/vmap0&amp;quot;, {layers: &amp;apos;basic&amp;apos;}
);&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Create the heatmap layer based on previous data and layer.&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class=&quot;brush:js&quot;&gt;heatmap = new OpenLayers.Layer.Heatmap( &amp;quot;Heatmap Layer&amp;quot;, map, layer,
	{visible: true, radius:10}, {isBaseLayer: false, opacity: 0.3}
);
heatmap.setDataSet(testData);
map.addLayers([layer, heatmap]);&lt;/pre&gt;
&lt;p&gt;Although it is not perfect really it is a great job. Thanks Patrick.&lt;/p&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[XCode4 and the mystery with Route-Me code sense]]></title><description><![CDATA[If you follow this blog you will know I prefer to write "long" posts with nice content :) form time to time than write lots of short posts without much substance. For that I use Twitter :p]]></description><link>https://www.acuriousanimal.com/blog/2011/05/06/xcode4-and-the-mystery-with-route-me-code-sense</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/05/06/xcode4-and-the-mystery-with-route-me-code-sense</guid><pubDate>Fri, 06 May 2011 15:08:59 GMT</pubDate><content:encoded>&lt;p&gt;If you follow this blog you will know I prefer to write &quot;long&quot; posts with nice content :) form time to time than write lots of short posts without much substance. For that I use Twitter :p&lt;/p&gt;
&lt;p&gt;But always there an exception... and here is mine.&lt;/p&gt;
&lt;p&gt;Recently I start coding with Objective-C programming for iPhone(iOS) andÂ usingÂ XCode4.&lt;/p&gt;
&lt;p&gt;As a GIS lover I look for a native map library to make a native program and found the &lt;a href=&quot;https://github.com/route-me/route-me&quot;&gt;route-me&lt;/a&gt; project. Ok, that is nice. I download source code and follow the &lt;a href=&quot;https://github.com/route-me/route-me/wiki/Embedding-Guide&quot;&gt;Embedding Guide&lt;/a&gt; to start coding. First time it goes fine. I make little sample without problem. Then I start a more serious project. I create a new project, follow the same steps to add the route-me dependencies but... ta-da !!! XCode doesn&apos;t completes my code !!! Yes, if I wrote &quot;&lt;em&gt;RMMa&lt;/em&gt;&quot; but I never get &quot;&lt;em&gt;RMMapView&lt;/em&gt;&quot;. What the hell!!! How is it possible?Â I created a new project and attach route-me again, but... again the code completion didn&apos;t work. This is a nightmare.&lt;/p&gt;
&lt;p&gt;The I look for some help. On &lt;a href=&quot;http://stackoverflow.com/questions/5862312/xcode-header-files-scanning-issue&quot;&gt;stackoverflow &lt;/a&gt;I found a very similar issue but it didn&apos;t help my too much.&lt;/p&gt;
&lt;p&gt;After a couple of very obfuscated days I found XCode4 indexes and stores code information in folder:&lt;/p&gt;
&lt;pre&gt;/Users/your_home_directoy/Library/Developer/Xcode/DerivedData&lt;/pre&gt;
&lt;p&gt;I think on delete that data and force XCode to recreate it. To do so you can go to the Organizer &amp;gt; Projects, select your project and remove the derived data. I do it many times clean and build my project but... ta-da !!! Nothing changes, code completing didn&apos;t work.&lt;/p&gt;
&lt;p&gt;Finally I opt to close XCode and remove the whole DerivedData directory. Then Â start XCode again, create a new project and attach route-me and... ta-da-da !!! oh my God, this time code completion works. Don&apos;t ask my way. It simply works and that is enough for the moment.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[SimplyWrite, a free web distraction writing tool based on IndexedDB]]></title><description><![CDATA[SimplyWrite is a free web distraction writing tool. It is based in the IndexedDB HTML5 so you need a browser compliant. Because the use of IndexedDB all the content is stored locally on your machine, no data is transferred or stored in a remote server. };
writeRequest.onsuccess = function ( e ) {
};]]></description><link>https://www.acuriousanimal.com/blog/2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb</guid><pubDate>Sun, 17 Apr 2011 17:26:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;SimplyWrite &lt;/a&gt;is a free web distraction writing tool. It is based in the IndexedDB HTML5 so you need a browser compliant. Because the use of IndexedDB &lt;strong&gt;all the content is stored locally on your machine&lt;/strong&gt;, no data is transferred or stored in a remote server.&lt;/p&gt;
&lt;p&gt;There are many other solutions,Â likeÂ &lt;a href=&quot;http://www.hogbaysoftware.com/products/writeroom&quot;&gt;WriteRoom&lt;/a&gt;,Â &lt;a href=&quot;http://www.ommwriter.com/&quot;&gt;OmmWriter&lt;/a&gt; orÂ &lt;a href=&quot;http://gottcode.org/focuswriter/&quot;&gt;FocusWritter&lt;/a&gt;, but SimplyWrite benefits from the fact it is a web tool clone.&lt;/p&gt;
&lt;blockquote&gt;&lt;strong&gt;NOTE: This post is obsolete see &lt;a href=&quot;//2013/04/29/simplywrite-a-free-web-distraction-writing-tool.html&quot;&gt;SimplyWrite, a free web distraction writing tool&lt;/a&gt;.&lt;/strong&gt;&lt;/blockquote&gt;
&lt;p&gt;You can download the source from &lt;a href=&quot;https://github.com/acanimal/SimplyWrite&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Please take a look and let me know your suggestions.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;For the moment SimplyWrite has only been tested on Chromium 9 because the requirement of a IndexedDB browser implementarion.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;http://www.acuriousanimal.com/SimplyWrite&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 57.284768211920536%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwElEQVQoz+2S3Q6CMAyF91zAUNxgG7yV/G3ghb/PeyzIjBoNxHjpxZez9nRdk5UJKbERApJ0FceIogic81mGujAM7/iY8QfDNxt0jk8PsZimWjLRUpif6N/w+4Y//5TwZZ+CiJM+595C98baSQO/h4UxMErBaILOuVhDpxJKa+gJRb4if9AxHvKpGGuNSFCIFXKZIMsysEtX4exKnHYW+8MRfVPCNjWsdYSFczf1OGdHzzUVunoLV5foSTvStm1xBbgAi+3+OBVLAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;simplywrite&quot; title=&quot;simplywrite&quot; src=&quot;/static/fb6555342820391ac3f4c8c0b57b97f7/dbb61/simplywrite.png&quot; srcset=&quot;/static/fb6555342820391ac3f4c8c0b57b97f7/19bd1/simplywrite.png 163w,
/static/fb6555342820391ac3f4c8c0b57b97f7/d3bcb/simplywrite.png 325w,
/static/fb6555342820391ac3f4c8c0b57b97f7/dbb61/simplywrite.png 650w,
/static/fb6555342820391ac3f4c8c0b57b97f7/5ee4b/simplywrite.png 906w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Beyond the amazing announce&lt;/h2&gt;
&lt;p&gt;All right, SimplyWrite is&amp;#xA0;awesome and this announce will change the world but... the truth is all these is because I need a target to work with IndexedDB.&lt;/p&gt;
&lt;p&gt;HTML5 is out since a long time (almost a year is like 100 hundreds at internet) and it comes will lot of new features browser will implement in&amp;#xA0;successive&amp;#xA0;releases (at least I hope it).&lt;/p&gt;
&lt;h2&gt;Client-Side Storage&lt;/h2&gt;
&lt;p&gt;HTML5 comes with different solutions for client-side storage: WebStorage, Web SQL Database and IndexedDB.&lt;/p&gt;
&lt;p&gt;At this moment one of the main issues is HTML5 is great specification but big and complex to implement by browsers. Because this you need to check if a desired feature is supported/implemented by the browser you are going to use.&lt;/p&gt;
&lt;p&gt;As a summary,&amp;#xA0;&lt;a href=&quot;http://www.w3.org/TR/webstorage/&quot;&gt;WebStorage&lt;/a&gt; is a key-value mechanism,&amp;#xA0;&lt;a href=&quot;http://www.w3.org/TR/webdatabase/&quot;&gt;WebSQLDatabase&lt;/a&gt; is,&amp;#xA0;unfortunately, a not really good idea (because this it was abandoned), and finally IndexedDB can be understood as a perfect mix between WebStorage and WebSQLDatabase.&lt;/p&gt;
&lt;p&gt;WebSQLDatabase, like Google Gears, was mainly though around SQLite, because this many HTML5 implementations were based too on SQLite,&amp;#xA0;inheriting&amp;#xA0;its limitations too. Mozilla never agree with WebDatabase standard and because this never implement it on their bowser. They prefer to work in the IndexedDB.&lt;/p&gt;
&lt;p&gt;An important consideration is IndexedDB defines two &amp;quot;working modes&amp;quot;: asynchronous and synchronous, but at this moment only asynchronous seems to be supported.&lt;/p&gt;
&lt;h2&gt;Working with IndexedDB&lt;/h2&gt;
&lt;p&gt;Here are&amp;#xA0;pieces&amp;#xA0;of source code for the common action.&lt;/p&gt;
&lt;h3&gt;Getting reference to IndexedDB&lt;/h3&gt;
&lt;p&gt;To work with IndexedDB you need to get a reference. Currently there is no common way to achieve it. On Chromium you need to access to&amp;#xA0;&lt;span style=&quot;font-family: Consolas, Monaco, &amp;apos;Courier New&amp;apos;, Courier, monospace; font-size: 12px; line-height: 18px; white-space: pre;&quot;&gt;window.webkitIndexedDB&lt;/span&gt; while on Firefox you need to use &lt;span style=&quot;font-family: Consolas, Monaco, &amp;apos;Courier New&amp;apos;, Courier, monospace; font-size: 12px; line-height: 18px; white-space: pre;&quot;&gt;window.mozIndexedDB&lt;/span&gt;.&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;if ( &amp;quot;webkitIndexedDB&amp;quot; in window ) {
	window.indexedDB      = window.webkitIndexedDB;
	window.IDBTransaction = window.webkitIDBTransaction;
	window.IDBTransaction = window.webkitIDBTransaction;
	window.IDBKeyRange    = window.webkitIDBKeyRange;
} else if ( &amp;quot;moz_indexedDB&amp;quot; in window ) {
	window.indexedDB = window.moz_indexedDB;
}
if ( !window.indexedDB ) {
	// Browser doesn&amp;#x2019;t support indexedDB, do something
	// clever, and then exit early.
	alert(&amp;quot;IndexedDB not supported !!!&amp;quot;);
}&lt;/pre&gt;
&lt;h3&gt;Creating/Opening the database&lt;/h3&gt;
&lt;p&gt;Once you have access to IndexedDB reference the next step is create or open the database:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var dbRequest = window.indexedDB.open(
	&amp;quot;SimplyWriteDB&amp;quot;,        // Database ID
	&amp;quot;All my SimplyWrities&amp;quot; // Database Description
);&lt;/pre&gt;
&lt;p&gt;Every command is executed asynchronously and generates a request object where you can execute code on events &amp;apos;onsuccess&amp;apos; or &amp;apos;onerror&amp;apos;.&lt;/p&gt;
&lt;h3&gt;Initializing the database for the first time&lt;/h3&gt;
&lt;p&gt;Using the request object returned by the previous command we execute next code on success:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;dbRequest.onsuccess = function ( e ) {
	var db = e.result;
	if ( db.version === &amp;quot;&amp;quot; ) {
		// Empty string means the database hasn&amp;#x2019;t been versioned.
		var versionRequest = db.setVersion( &amp;quot;1.0&amp;quot; );
		versionRequest.onsuccess = function ( e ) {
			var store = db.createObjectStore(
			&amp;quot;written&amp;quot;,	// The Object Store&amp;#x2019;s name
			&amp;quot;title&amp;quot;,  				// The name of the property to use as a key
			false         		// Is the key auto-incrementing?
			);
		};
	}
};&lt;/pre&gt;
&lt;p&gt;IndexedDB databases can have different versions. You can use version to initialize the DB for the first time or to update the structure of the database. For example, you have a database with some structure in version 1.0 and want to update it creating a new object store up and increasing the version number to 2.0.&lt;/p&gt;
&lt;h3&gt;Adding, getting and removing content&lt;/h3&gt;
&lt;p&gt;At this point we have a database created with one object store, that uses &amp;apos;title&amp;apos; as the key. Now we can add and get content to it.&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var writeTransaction = dbase.transaction(
  [&amp;quot;simplywriteOS&amp;quot;],           // The Object Stores to lock
  IDBTransaction.READ_WRITE,  // Lock type (READ_ONLY, READ_WRITE)
  0
);
// Open a store and generate a write request:
var store = writeTransaction.objectStore(&amp;quot;written&amp;quot;);
var writeRequest = store.add( {
    &amp;quot;title&amp;quot;:  this_is_the_title,
    &amp;quot;text&amp;quot;: this_is_the_text
} );
writeRequest.onerror = function ( e ) {&lt;/pre&gt;
&lt;p&gt;};
writeRequest.onsuccess = function ( e ) {
};&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Basically, we need to create a database transaction, specify the object store to use in the transaction and make the action like add, get or remove.&lt;/p&gt;
&lt;p&gt;One important action is to iterate over all the elements in an object store. You can do that using a cursor:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var readCursor = store.openCursor();
readCursor.onsuccess = function ( e ) {
  if ( e.result ) {
    console.log(e.result.value.title);
    e.result.continue();
  } else {
    // If the `success` eventâ€™s `result` is null, youâ€™ve reached
    // the end of the cursorâ€™s list.
  }
};&lt;/pre&gt;
&lt;h2&gt;Final words about SimplyWrite&lt;/h2&gt;
&lt;p&gt;SimplyWrite is written using HTML and JavaScript (of course) and I make use of a couple of other projects. I would like to note the use, in addition to jQuery and jQueryUI, two projects:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://css3buttons.michaelhenriksen.dk/&quot;&gt;css3buttons&lt;/a&gt;, nice set of CSS3 for buttons.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://html5boilerplate.com/&quot;&gt;html5boilerplate&lt;/a&gt; the Swiss knife of HTML5.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.html5rocks.com/tutorials/#storage&quot;&gt;http://www.html5rocks.com/tutorials/#storage&lt;/a&gt; - HTML5 Storage&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://mikewest.org/2010/12/intro-to-indexeddb&quot;&gt;http://mikewest.org/2010/12/intro-to-indexeddb&lt;/a&gt; - Intro to IndexedDB with good slides.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/scriptjunkie/gg679063&quot;&gt;http://msdn.microsoft.com/en-us/scriptjunkie/gg679063&lt;/a&gt; - Another great IndexedDB description&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.w3.org/TR/webstorage&quot;&gt;http://www.w3.org/TR/webstorage&lt;/a&gt; - WebStore specification.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.w3.org/TR/IndexedDB/&quot;&gt;http://www.w3.org/TR/IndexedDB&lt;/a&gt; - IndexedDB specification.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://caniuse.com/indexeddb&quot;&gt;http://caniuse.com/indexeddb&lt;/a&gt; - IndexedDB compatibility.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[acanimal is using github to share code !!!]]></title><description><![CDATA[After some time as a pending task, finally I have Â created a github account to share code and any other things with you.]]></description><link>https://www.acuriousanimal.com/blog/2011/04/15/acanimal-is-using-github-to-share-code</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/04/15/acanimal-is-using-github-to-share-code</guid><pubDate>Fri, 15 Apr 2011 16:33:00 GMT</pubDate><content:encoded>&lt;p&gt;After some time as a pending task, finally I have Â created a &lt;a href=&quot;https://github.com/&quot;&gt;github &lt;/a&gt;account to share code and any other things with you.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;https://github.com/acanimal&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 488px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 99.18032786885246%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACiElEQVQ4y5VUWVLbQBDVRbkCZyBHILfIZ05A8WNwgh0IqYqJMTEytrVY+zIa2ZqX7hayKRuoMFWvetY3/bp7xgIMHMfB+fk5bm5uBL7vg9tms/kwLD54evoZx8fHODn5hKOjI5ydnQmhUhXquv4QLK0r3I//4GEyxvxphtHoNzzPRVUpFEWBsiyIuPxvWLVOYUwCpROxQEUoCCkha62JyMaEaAcTwjTBAUiyxmj8gC9f+5jNycO7H7j+NcC3QQ9X1330Bxfwgyc4vg3Ha7FwHxHGCyKNiSQW24EI11i6HvrDMeI0wmI5xdSeEPlf2E8PgrwIESU+kiyQfpyuUComKA5gGdOASRnG1GR5bLBrZru+w0Zs09QHkCxXVSWQ48ZI+leeB5fKqdYa+433vAUhLIocaZoK1mu6mRZmXoL5KkOQaYTFGn5aYZVqGVfrZku831oPlUIcx1J33JhwuXQxny+xdDzMZnNoIllvDKGR9bc8bT3Mc4RhKLJ5siHJk/sJglUAVSrx+kA2Xm9CqImoLEsBH2ZSviAMKKNRcuDNe3HcSuaXoZ6TU9campIh8WwaSVJ3YEOSeZ7n2Hb93VumTaO7P7i8uMDt7U/0ej30Ly/x/WqA4XCI6XRKsVVbr/i9cvKyLCObSZ9jr3UtTlgswGgXYeTDTVluI14xutvfKxPew6o6RW0MS5++LAeLVSpx5E9BP9dfJ/k18Bp7rCRk7c8khFlWUGnMYD9OYds2WRsuPUeWw+R8oEvaPnitA5NanDQe5FQ6DC5y8ZL6SZLIGt/MHu9j/y9sY/gc6O6GvKQS4j6BN7wnt3pRbnlOf6eqWkKe4JfCCOMEURRtx/uyXoIVdXvZcnj+ARijB/d8xDDWAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;github&quot; title=&quot;github&quot; src=&quot;/static/ff4f28635a7de150208491147a833631/2d6e0/github.png&quot; srcset=&quot;/static/ff4f28635a7de150208491147a833631/19bd1/github.png 163w,
/static/ff4f28635a7de150208491147a833631/d3bcb/github.png 325w,
/static/ff4f28635a7de150208491147a833631/2d6e0/github.png 488w&quot; sizes=&quot;(max-width: 488px) 100vw, 488px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I&apos;m feel lucky because from time to time some people write me asking about code they found in some of my old blogs (many often about the dicontinued &lt;a href=&quot;http://theballoonproject.blogspot.com/&quot;&gt;theballoonproject&lt;/a&gt; blog).&lt;/p&gt;
&lt;p&gt;Long time ago I used Google Pages to store my zipped code but google discontinued the project. Some people looking for WWJ info found the blog but can&apos;t download the code and they request to me.&lt;/p&gt;
&lt;p&gt;Now using github you are free to download that code, and any other I publish from time to time.&lt;/p&gt;
&lt;p&gt;Of course, feel free to contact with me for any help orÂ suggestionsÂ you have.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to Create a Cross-Platform Application with NASA WorldWind & NetBeans Platform]]></title><description><![CDATA[This post is a mini tutorial on how to create an application based on NetBeans Platform that uses the WorldWind Java virtual globe. Before to continue, you need to have some knowledge about NetBeans Platform, WWJ and JOGL. setLayout(new BorderLayout());
add(wwj, BorderLayout.CENTER);]]></description><link>https://www.acuriousanimal.com/blog/2011/03/10/how-to-create-a-cross-platform-application-with-nasa-worldwind-netbeans-platform</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/03/10/how-to-create-a-cross-platform-application-with-nasa-worldwind-netbeans-platform</guid><pubDate>Thu, 10 Mar 2011 21:46:00 GMT</pubDate><content:encoded>&lt;p&gt;This post is a mini tutorial on how to create an application based on NetBeans Platform that uses the WorldWind Java virtual globe. Before to continue, you need to have some knowledge about NetBeans Platform, WWJ and JOGL.&lt;/p&gt;
&lt;h2&gt;About NetBeans Platform&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://platform.netbeans.org/&quot;&gt;NetBeans Platform&lt;/a&gt;, similar to Eclipse RCP, is a platform which offers a set of basic functions and functionallities that are common in almost all project. The most clear examples of applications developed with these platforms are NetBeans IDE and Eclipse IDE themselves.&lt;/p&gt;
&lt;p&gt;In the case of NetBeans Platform some features that likes me are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;100% Swing.&lt;/li&gt;
&lt;li&gt;Modular runtime container.&lt;/li&gt;
&lt;li&gt;Plugin support.&lt;/li&gt;
&lt;li&gt;Window system.&lt;/li&gt;
&lt;li&gt;Support handling actions, files and many other things typical in applications.&lt;/li&gt;
&lt;li&gt;Active project, decent documentation and great forum activity.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;#xA0;&lt;/p&gt;
&lt;h2&gt;About WorldWind Java&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://worldwind.arc.nasa.gov/java/&quot;&gt;WordlWind Java&lt;/a&gt; is a Java API to create and work with a virtual globe, something common on these days and not so easy to implement.&lt;/p&gt;
&lt;p&gt;In contrast to WorldWind .NET which is a desktop application, WWJ is only an API, a set of classes you can use to create your own based application.&lt;/p&gt;
&lt;p&gt;One impotant thing is WWJ works thanks to&amp;#xA0;&lt;a href=&quot;http://kenai.com/projects/jogl/pages/Home&quot;&gt;JOGL&lt;/a&gt; (Java binding for OpenGL API), which is a Java API to work with OpenGL and that uses a native library implementation depending on your system.&lt;/p&gt;
&lt;h2&gt;...and what is the problem?&lt;/h2&gt;
&lt;p&gt;Nice question. Ok, if we can say there is any problem it will be:&amp;#xA0;&lt;strong&gt;how to create a NetBeans module which includes the JOGL JAR files and also the native libraries so my application will be portable?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Follow the next steps and you will see there is not problem to achieve that.&lt;/p&gt;
&lt;h2&gt;Environment and requisites&lt;/h2&gt;
&lt;p&gt;Here is the list of software and versions I&amp;apos;m using for this example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;NetBeans IDE 6.7.&lt;/li&gt;
&lt;li&gt;WorldWind Java 0.6 (&lt;a href=&quot;http://builds.worldwind.arc.nasa.gov/releases/worldwind-0.6.263.12713.zip&quot;&gt;build 263.12713&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;JOGL (&lt;a href=&quot;http://download.java.net/media/jogl/builds/archive/jsr-231-1.1.1a/&quot;&gt;version 1.1.1a&lt;/a&gt;). I downloaded versions for Linux and Windows to test the application on two platforms.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Install NetBeans if you don&amp;apos;t have installed. Download WWJ and JOGL and uncompress it at some place.&lt;/p&gt;
&lt;h2&gt;How to create the application&lt;/h2&gt;
&lt;p&gt;Ok next is the important part of this article. The basic idea is to create a new NetBeans Platform application with two library modules, containing required JAR files for JOGL and WorldWindJava:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Step 1&lt;/strong&gt;: Create a NetBeans Platform Application:&amp;#xA0;&lt;a href=&quot;./images/2011/03/sshot01.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 68.12585499316005%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA3XAAANiQFmEOuiAAACwklEQVQ4y22U60/aYBTG+58vGVsiGBOdgpnRxcXNZBpa7lBb7iigYtHKTQFhXBVh4l3APjttwWGyD7+c55y379PT9j1l8vkMSsWCUiwWoJKWjuD3+xEMBiEIApxOJ2w2G3ieRzQaRSQSIcLjqKFMIu0ZMPVaSbm77aDXbWI4uEWlco719W/Y3Pyh4XI54HY7tWi328BxVjgdNtIc7DaWUCOnqNHtdoHpXjdx3akrl+0qGd6hXr+Aw0WduQXsxg8RTx5p7CVT8Hh58GIIiQMJp7kiMvkSTvNFRc6dg1AE0a8wwDP+8YJm8zfi+1mEYxLiBzIKpSbOyi1kClTfS0DOVyFlK8iWWijVe6i0+mh2n9HoPiEQCoN5HT1AZTS810wbjSrEcApefxKRpIyUXMbhSQkJqYBYLAYxfgoueAwuIIH1S3BGZLh3c2CDMhweHozy+oiJqdphtVrGT1sEv9xxsMI+vDEZLtq05UvgIJ1Bpz9Aq/uIdu/pjeb1g4bW4XtDvcN8sYGLehflWgf1y1s0O/eUd3CcOSOzJy2fmEzzX8NWq4Zq6wa9BwVXNwO0/7zgqj9E7bKPk2xRr/WeqT5mSgenDUdD/ZFrtTJC0bj2JY+OM5BOskjLOaTSMvYS+5pOU00ak9bWVZ3Rzu1Uh+pHGeCiXMDC/DwWF7/AYjFjedmCpaVFWMykLRaKSzATan2Cur6y8pUGgAOjdjYaPWIwIFMyPKdpMRg+4aPBgJmZGczOzsJoNMJkMo21iepGTauYTHptbm4O29vbYNptOmeFPA5iIfAbq7CvrsHKsbS4BZa1EixNBzvWeq7zPrdardqYMl5vAFubHL5b1mD58BkbC2YEwyGaZ/EdgYBfY1q/5X5d7+zQOfT5POB3fBBEAWIwAIEu8Ho9hFeLPp8eRVpXX/rkxyGKIkTKQyG6OWm1xvM+/AWKPa1VYDaJUQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot01&quot; title=&quot;sshot01&quot; src=&quot;/static/147c5ec4d4d4a9a9b2afb2b6290fdf71/dbb61/sshot01.png&quot; srcset=&quot;/static/147c5ec4d4d4a9a9b2afb2b6290fdf71/19bd1/sshot01.png 163w,
/static/147c5ec4d4d4a9a9b2afb2b6290fdf71/d3bcb/sshot01.png 325w,
/static/147c5ec4d4d4a9a9b2afb2b6290fdf71/dbb61/sshot01.png 650w,
/static/147c5ec4d4d4a9a9b2afb2b6290fdf71/af110/sshot01.png 731w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step 2&lt;/strong&gt;: Create a library wrapper module for WWJ:&amp;#xA0;&lt;a href=&quot;./images/2011/03/sshot02.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 68.74135546334716%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA3XAAANiQFmEOuiAAAC9klEQVQ4y2WU61PaQBTF+dM7g/hBZ2qphU6147SKgPKmIiaFhKeIYBCQp4AoMZEiWPENuKe7sba1fvjNuXvvzcnNY1dXrZbQbNRIo1EDY39fQjgchiiK4HgOfr8fPp8PPM8jHo8jFotRor9VgzBYzeVy9XRyp0muhj0M+grGoyFOjhv48mUJVquFsoqNDT8CgW+a+nxeeNwuehMvfF4PvF73H3w+D2H9uv65gvOeTM7UY4wfhjg9bcO/8Z3CI5HKYDstIUVJ7mSp8RbCYhy72RzK1QYqtSaDVA+PSKlSh91uJzrgHn95gKqeILVbRjSRQypTQK2poN5SUay0kUwkEZeaCCZLiEgtpEoKEsUOovkOxL0mVm126B4nN2BMxteaqaKcIELNtoQ0YjsF7BVbkA5ayObrSNL3lM43EMlUEMtWEdurIZQqIpqtI11sw8oMyeMtnk3ZhLLcxgafhiO4A9f3XQRiRfDbZYQSeewXqxhcTdAd3OLHxR3lXtP+cAS1N8Ta2vr/hk8TVg5lHMl9tDo9yN0hlN41msdd5Et1dC8ecErXp+c3VG+0WOnfoq0MYF9be22oqh0cqz8xuCH48XOEMzpF73JMcxcolBs4Hz5CHdzhbHCv1Zh2aV+ne/lywsn4yVCWjxCJbWNnV8LefhG5fAm5QgkZKY/tVJo+dhlS/kDLS6ym1cvI5gqw2Wz/Tsg+ygjtozrm5t7CaHwHk+kD5uffw0yVxR/NZpjNJg3Th3kt99yzsPAJlpUV6Nhkk8ktRiNqSkZoNOuYnp7WMBgM0Ov1mJoyUKa0NYPFev0UZmZmMDs7q2E0vsfy8jJ06hn9z6pVkolHwC0vwrv4GW6PB06HA06nk24np6ZOp+O3PscOuOmucbvdhCoDFouF6IJBgaxbPfhqXoL5jQErRhPEqEj3c+gFoiBAEMJazFQUhRd1QRCIzWYFNQyA44KED/EI0SaeFjc3A68IhUL0gODYhdrh8bTmEYlECMdxJBqNYnXVMv4F73GpCvJ4jQsAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot02&quot; title=&quot;sshot02&quot; src=&quot;/static/91a0c901f703a70204e4391d2b0bbba7/dbb61/sshot02.png&quot; srcset=&quot;/static/91a0c901f703a70204e4391d2b0bbba7/19bd1/sshot02.png 163w,
/static/91a0c901f703a70204e4391d2b0bbba7/d3bcb/sshot02.png 325w,
/static/91a0c901f703a70204e4391d2b0bbba7/dbb61/sshot02.png 650w,
/static/91a0c901f703a70204e4391d2b0bbba7/2979c/sshot02.png 723w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;Select the worlwind.jar file from WWJ folder. This will create a module into your NB platform application with the next folder structure:&lt;a href=&quot;./images/2011/03/sshot03.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 192px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 98.95833333333333%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAA3XAAANiQFmEOuiAAACoUlEQVQ4y3VUCXLaQBD0//+QxBU7wRjMJSyJS+i+0Wp1n4ADPvKLtIxNUrZSNbWq3VVrenp6dMGwS4ek97x+9VMI0521SRBrxZG0jenGhh3aXpqWxzh7iPNfH+KCX0gkLEU5vLoWSJj3RxzDCiNm3u0zWO9GvGr6WfUYtYJNh2bVk2qSvD5wM8/2Kockrp+vFdsLimL7jJdakQ1YNTw8RNUlQdm5kXQrXYoGcv7oDnUryOsncG5ot4I100uKg2bRMN2yvGO6xYbmgmzbXoKCTTfClUMyvPNfMBQKkno8cZFZs/zb/vRuxHFzqT9k78a8YpC0rWyACR6GE7p+dvl9JqrUjypFJ0iLE5wDg6+3CwYwLgTJ8sPy6+VcNSLDITe9yXDM9wb3yO/Roti9tNOGYOhEtfutmjRIS25m3tzKaXmA4KCAmmVto5nUD+vP+Kbmk5ivPFNhTaG5F6RTfj2eLpC52592eww887nbDfj1dI+uBMkOavlRcd0RTCenca3bAQ6L7cup2//Ge+b3T9J4C2G9oPzybano4UJQUTy2cBESnANMsaKKM3h/YgJL6RaK31FHcJRpXD6hbGi+kkxF9ww7QNsROESmN8FOZWfVIa8fG7eFtah7M8nBkEBzdiYNmXmnN5mwK2iB5vcH9w34ZBJJ8+CwMaNrZkLjytrEmJYw3ePqzPPMGTVifaMdN2CXRHWnZxl2thJ1pAIyr59PMJDCttHpdT2Pyru37QBWcmTWT/b2Joa9l6IJzug2SsXaarI3ey5Fi9JI4KYWKeYrdTDiMVWLtc4t5MFk5tK8bEwGXR5aHJZVxzA7spvEoCWhheXGGGZRcdA5jBcJK0wORP7gk7+tivJj17Jlv5RVF8ZCMJyA/8lgzMu6NxjPYMEP4D9nZcvyTMn+/wAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot03&quot; title=&quot;sshot03&quot; src=&quot;/static/4d4e5db8acc61cfed8ec3c41aef951eb/72cd8/sshot03.png&quot; srcset=&quot;/static/4d4e5db8acc61cfed8ec3c41aef951eb/19bd1/sshot03.png 163w,
/static/4d4e5db8acc61cfed8ec3c41aef951eb/72cd8/sshot03.png 192w&quot; sizes=&quot;(max-width: 192px) 100vw, 192px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step 3&lt;/strong&gt;: Create a library wrapper module JOGL:Select the jogl.jar and gluegen.jar files from JOGL folder. In addition to the previous step, here we need to include the native libraries JOGL needs to run. To do that you must to create a folder called release/modules/lib and copy the native libraries.&lt;a href=&quot;./images/2011/03/sshot04.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 203px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 148.76847290640393%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAA3XAAANiQFmEOuiAAADw0lEQVQ4y4VVaZOiSBT0/3/fI+bDzu5Gu+NMe6MIInLLTQEFyCFqH7YT+ys2Fben74koK0qsx3uZL1/aEpYrl6x/+33CsJbt0wkniYqdbw5JfpMWtx+vlh+VUbpdKqFuRpoZINhyk3J3xG8/jW+V2++K7gc0l5S413cMm/CiMWDms7n68+CsvAviimY7w0pkNQzicqnYukksl+abh7S4o+v9u8GAh8weyZZK3O1ZLsl6I64/4kTZ6g1nOKirYF29TcElc5xtFZ3MBAv4DSuSVMePCoStnDhM6o8yayZZOaQ30D994oM4A+DO9Xgw5q/7rB8WRX1M3wHfwgfJk+LGD0uUMOVty8ucIHNJbjoUO4p6D/YlGLUJ0gq3f/mVt71UUs0RI3SHbKfLfO0yQFHUD69htx5P5faInsfZZjpzRJkm+c720yAqk/X+o8yNHpBf0lw3zK7awmhsmi7pXDOmm2z2/66re1CDvVk44/KzzIivdt/BtumlCY0shcFDsI38Xpg7foYdFKA6PME1xLeelnFqW1Qim+UnM0H0oqrd6Y+ni2+9yVWnzy00UbFmc+3qSw+8oIRXwXGp2zQMibHsgUXdChXDg9rRzvXmgIJxrYHwrGwsUIoAl6Q2yeaqS5Ia3e4NWIZdMrNlVt43hGNvDj+C8TJZ8xD5x5+zwdhSDWfKyWV9RDkNSZeY896s1tOaoSdIgpv7kkYxnqJsIwzlNHuxPTbnHOf6Ia8OLzCfkNT7Y1zcetkeL/rybQS1sLzC8jLDiqgF/HMLfSGZiuG3nvf9hCQrbm2Sa6At2SxVhxM0dUUWsoWDrHtOsEY8BhFyfBF8mwB8eWeHleplhFbtr0N+oU05aS4a/EIndHOm+u5U9ubwXnChu0mc7eBwhhVKmqOtiOWdngBa07BnhP1ADsC0NiMMWQk9ACcaNhd1XtT7Qw6vm8yWmPaLws5NA/UXx8NTO8h1h2IeFrJ59gZXWwWGHUGYtp8Bc3welVbT4cdmngRUHfx0a0UVZPz5rw5IhhnNeAXGMmZFfDVd2kzoxYYgdFzVzZSud/jaDAB+xgGuDnkCMA5gGFiaqfjfAA0/iPIp71/9o/lhNmSElR3XN6dJxJzBQ/Ozqh8Hs4l8NMAyoDVxjCCI3LD0YEAuxWqcCCU8+QO4ecMADYc6mqxppmqGo4kwZOagFO3FPMDPkP+U7U0byiDd6l6nNe+lUbK14X4nGVHIC3qCMHSLgGcU/MLGLq0qynvBT9q6a9rJcCr83e7CA+AE8EB2rsCM8a7X/37/AQv2u+OaaFiBAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot04&quot; title=&quot;sshot04&quot; src=&quot;/static/7891f8703deee6eb21cdf5f9f6c50c89/65fcc/sshot04.png&quot; srcset=&quot;/static/7891f8703deee6eb21cdf5f9f6c50c89/19bd1/sshot04.png 163w,
/static/7891f8703deee6eb21cdf5f9f6c50c89/65fcc/sshot04.png 203w&quot; sizes=&quot;(max-width: 203px) 100vw, 203px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;br&gt;
In the above image you can se the *.so files which corresponds only to the Linux native libraries. To make your application portable to other systems you must need to copy here the required *.dll or any other files.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step 4&lt;/strong&gt;: Create a normal module.This module will contain the code to create a TopComponent window which will show the WWJ virtual globe:
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;./images/2011/03/sshot05.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 68.74135546334716%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA3XAAANiQFmEOuiAAAC0UlEQVQ4y22U2VvaQBTF+dP70veyiH6losgmFlT2JkLYQaTsiGEVEAOUTXGpAs7pJFTFr334fefeyeTMTWbuyHj+HI16hdTrFYjkchn4/X4EAgEwLAOHwwG73Q6WZRGJRBAOhxEKhdYhQYo4brNZh7LuVYPczYaYjAUs5jN02nXs7mphMhkoRrhcDrjdTknt9mM47Ifwepwr3I53PE5iNpkgG48EjIZd0u+1sXie4fq6BYfrhMIimkghnswgQYmf/oTT6YH+kMGOjYXWymL30E9jH9FaT4jOdgK9wUhkwBPeeUav10HirIxQNItEqoBKQ0C12UPxooV4LI4c30EsW8PPcgeFeh/l1gh14Q7lyyHM+xbIXpYPEFku7iVTQeggSM1+cEmETwtIF5vIlJpI5aqIR6Pga9ToookSf4nzSotqC21hguvBLSwWakheHvFqKlbY7bbgYpP47j2F7eQM7nARbLwMXzSPXJHH8HYOYfSA3vhRQowFqu3eFPv/Gq4qvKh1cdkdo3k1RHcwgzC8R6M9QP68isHNM65pLhn9RTRuC9P/VfhE/+EVXe0GkweCXzdzDKbPtKoFOrSCQrmO0ewF/clv9KdPKyZP0rwrurDFcvBuuFy8fvIlAuEY3ZgM0rkiMvkSsvlzpNI5xBJJZAtlaTydK70hzkll8jCbzesVipsyR7tVhVz+BUqlApubamxtbWJjQ/UWazRfsaPdhnad7W16dneg1+9BJla2XD5iPqemZI5GswaFQkkNlVQVEnK5nLJScVylUn1AqVRBrVZDp9NB1uvTc8bzJBUJgtnT4FjzDUfHx2IbUWxrWN/UaqVIuQShORGfGQwGIvN6OXJgOoJOrYX602fo5RsIhAK0n30f4Di/xHq8ngc4jpjNtPW8XjcYxktYHwtfgANLJ3g8borng/p8PnpBMPRlTro8VjmLYDBIGIYh4kVhNBoWfwClHasdzv0biAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot05&quot; title=&quot;sshot05&quot; src=&quot;/static/1dc6a3bf2f6311ef26917aea4dd79b33/dbb61/sshot05.png&quot; srcset=&quot;/static/1dc6a3bf2f6311ef26917aea4dd79b33/19bd1/sshot05.png 163w,
/static/1dc6a3bf2f6311ef26917aea4dd79b33/d3bcb/sshot05.png 325w,
/static/1dc6a3bf2f6311ef26917aea4dd79b33/dbb61/sshot05.png 650w,
/static/1dc6a3bf2f6311ef26917aea4dd79b33/2979c/sshot05.png 723w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step 5&lt;/strong&gt;: Set modules dependencies.What you need to do now is to set the dependecies among the modules. WWJ module depends on JOGL one and your previous normal module will depend on WWJ and JOGL, because it will show a window with the virtual globe.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Step 6&lt;/strong&gt;: In the previous module create a new TopComponent Window using the wizard:&amp;#xA0;&lt;a href=&quot;./images/2011/03/sshot05.png&quot;&gt;&lt;br&gt;
&lt;/a&gt;Right-click on the module name and select New &amp;gt; Window Component. In the next wizard step select for&amp;#xA0;&lt;em&gt;Position&lt;/em&gt; the value&amp;#xA0;&lt;em&gt;editor&lt;/em&gt;. Press next and select a name for your TopComponent class (and an icon if desired).&amp;#xA0;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Open the code of your TopComponent and in the&amp;#xA0;&lt;em&gt;init()&lt;/em&gt; method add the next lines:&lt;/p&gt;
&lt;div id=&quot;highlighter_491206&quot;&gt;
&lt;div&gt;
&lt;div&gt;
&lt;pre class=&quot;brush:java&quot;&gt;Model model = (Model)WorldWind.createConfigurationComponent(AVKey.MODEL_CLASS_NAME);
WorldWindowGLCanvas wwj = new WorldWindowGLCanvas();
wwj.setModel(model);&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ol&gt;
&lt;p&gt;setLayout(new BorderLayout());
add(wwj, BorderLayout.CENTER);&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;You will need to import the required packages from WWJ module, which you must set as a dependency previously.

&lt;/p&gt;&lt;p&gt;If you have followed the above steps the result you must get must be something similar to:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;./images/2011/03/sshot06.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 89.63254593175853%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA3XAAANiQFmEOuiAAAD4klEQVQ4y22U/U+bVRTHn5a3Fkpxg5a+l7ZA32gHpZQWeXMwYUwmssUs6iCOZCMQJDMwlcywzETjEmMWw7KYGZ2bUFooHSRMqgIu+sP+p6Uf7/MUxoj74Ztz7nPu/Z7vPc+5R/pj9fGLre0kv+dy+Vwux/b2Njs7Oxz6y8vLCtbW1tjY2CCbzSqx/f19dnd32dvbU3DoSyl5YyqVz6SSpDNZ0qmUcvgQ2ewTQZRlc3OLra0tYTcVUvmbbGU8yR750g+pZ/nvUv9wL72XX1mRlaTF5sxLNaurKyLJCutrq8Im2cisK7GMsIdYSSaVc5lMBin21iBtfUOE4z309/fR0tKCy+XCbrdiNpuJtncQ7ejDH2onEGrFbLFisZipr/fgdrtwezzEo1GagkGcdU4km8WE3WomHosyPDxMdU0NkiTxRo2Vsemb3P/tKS1nr6Nt+piLs0v8/PARdqdH2SPjhNFIi8GI32ZHUqmRGhoaRFYLQZEhHA4LVSZsHj+d733K4JU7hM8t4O+5TN/7E8ws3GJ9/TGTU+NCnROVIAgEAgqxRdzGZDIhWa3Wl9lkFJfpqG58m+LaTsrqz+PoGaepd4BAax3hZj1tkVreOeNjfnqUOocNvb4Kr9cnEnhQq9VHhCqVSkBCW1WHxtJN2clmjL4uYgOttPW6iPU4CXc2MTTSzY2ZUe4sXuHKR8MFEcVFR6JeVVhUXIbWcIqS6ggqnY9YVwee+DC2tjN4EzG6BwYYvXSWz2Y/4N7tMWYnz6OpKC+cV72GsLhMT6nOhVTq4PTABR4sXuanr6c4/e5VEgPjjI2Pkb17lS/nJ7h5Y5KJ8RH0NbaD86r/E5Zq9UgaD+HYIP8+WuCvHz8htzTNnw/meJ5aZOnbOb5fnCL38BbRnouYgoOcMBz/B8cJNeUUnwjRGErw8JsPeXp/hr9//Zxngvz5L9fZuDvFtWsTLM5PUWVNoKltL4h4PWFBcqWxXtSvEXfIzYXRGF/MDPHV3Ai3Z4eYHevg2qU45/r6kMp96IxhVK+SvUoo/2WljiVatCebUFWK/qr0YvSHcAS1mHw6TsVNnO2PoDcEKbeJTqioOV4/GTZboahyD8mNKvtafS16+5uoS+1U1DaLmjppDFQRaa2hrrkDnaUdXbVLabNDskLbCd9gMOQP2PPHpKu1qDVmiqqCnO7tYqjXi90bQGcOifbSHLtmSUnJ0TqRSOBwOPIej/zY3Qfw4BIPXR4ADYIk3NxOW1ucBl9Yicsx98F++clGIhH8fp+ylsTMe1GYfem8PIJeYn2tYNOrpMTYSq6KeZlOHo8JpNMpERejLV1Y/wcdnpLUczabLAAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;sshot06&quot; title=&quot;sshot06&quot; src=&quot;/static/06898fdca3dd52d24f41b6b37e8b8518/dbb61/sshot06.png&quot; srcset=&quot;/static/06898fdca3dd52d24f41b6b37e8b8518/19bd1/sshot06.png 163w,
/static/06898fdca3dd52d24f41b6b37e8b8518/d3bcb/sshot06.png 325w,
/static/06898fdca3dd52d24f41b6b37e8b8518/dbb61/sshot06.png 650w,
/static/06898fdca3dd52d24f41b6b37e8b8518/3658a/sshot06.png 762w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In addition, the benefit of using this approach is your application, once you build a ZIP distribution, will run on different machines thanks to the native libraries attached in the &amp;apos;lib&amp;apos; folder.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Downloading files from AEMET FTP server with Java and Apache Commons Net]]></title><description><![CDATA[Some time ago the AEMET, the Spanish governmentÂ meteorological agency, release many of its data publicly: weather radar, weather stations, lightnings, ...  The way they do is simple andÂ effective:Â public the contents on a FTP server and update on regular intervals of time.  Talking with a colleague we decide to create (on our very few free time) a simple web page that allows people to see the current values of the weather stations. A map of Spain with some dots representing weather stations and a graph with showing data from the selected station. Update: This service was stopped in 2012 by Spanish government ðŸ˜” File localFolderObservacions = new File(localFolder, "observaciones_diezminutales");
localFolderObservacions.mkdir(); } // Connect to server
ftpclient.connect(server);
ftpclient.setFileTransferMode(FTPClient.BINARYFILETYPE); // Loggin
if (!ftpclient.login("anonymous", null)) {
    logger.severe("Can't log into FTP");
    return;
}
// Change directory
if (!ftpclient.changeWorkingDirectory(folder)) {
    logger.log(Level.SEVERE, "Can''t change to folder ''{0}''.", folder);
    return;
}
// Change to day directory
String remoteDayFolder = Utils.getStringFromDate(this.date) + "_diezminutales";
if (!ftpclient.changeWorkingDirectory(remoteDayFolder)) {
    logger.log(Level.SEVERE, "Can''t change to day folder ''{0}''.", remoteDayFolder);
    return;
} } fos = new FileOutputStream(localfile);
ftpclient.retrieveFile(ftpfile.getName(), fos); logger.log(Level.INFO, "Downloaded finished at ''{0}'' , size:''{1} ''bytes , timestamp: ''{2}''.",
        new Object[]{Utils.getCurrentFormattedDate(), ftpfile.getSize(), ftpfile.getTimestamp().getTime()}); // Uncompress file
String targetName = localfile.getName().replaceAll(".gz", "");
File targetlocalfile = new File(localfile.getParentFile(), targetName);
if (Utils.uncompressGzFile(localfile, targetlocalfile)) {
    //
    // TODO - Here you can handle the file.
} else {
    // If there is any error uncompressing file then remove files to
    // ensure it will be downloaded again.
    localfile.delete();
    targetlocalfile.delete();
}]]></description><link>https://www.acuriousanimal.com/blog/2011/03/06/downloading-files-from-aemet-ftp-server-with-java-and-apache-commons-net</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/03/06/downloading-files-from-aemet-ftp-server-with-java-and-apache-commons-net</guid><pubDate>Sun, 06 Mar 2011 18:57:00 GMT</pubDate><content:encoded>&lt;p&gt;Some time ago the &lt;a href=&quot;http://www.aemet.es&quot;&gt;AEMET&lt;/a&gt;, the Spanish governmentÂ meteorological agency, release many of its data publicly: weather radar, weather stations, lightnings, ...  The way they do is simple andÂ effective:Â public the contents on a FTP server and update on regular intervals of time.  Talking with a colleague we decide to create (on our very few free time) a simple web page that allows people to see the current values of the weather stations. A map of Spain with some dots representing weather stations and a graph with showing data from the selected station.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Update: This service was stopped in 2012 by Spanish government ðŸ˜”&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;The data&lt;/h2&gt;
&lt;p&gt;The kind of data we are looking for is stored in the &apos;&lt;em&gt;/datos_observacion/observaciones_diezminutales&lt;/em&gt;&apos; folder of the FTP sever. Within it we can found two types of folders, ended with &apos;&lt;em&gt;diezminutales&lt;/em&gt;&apos; or &apos;&lt;em&gt;estaciones&lt;/em&gt;&apos;. We will work with the first one.  For every day we will found a &apos;&lt;em&gt;YYYYMMDD_diezminutales&lt;/em&gt;&apos; folder which contains the day data specify by &lt;em&gt;YYYYMMDD&lt;/em&gt;. Inside it new files are created names &apos;&lt;em&gt;YYYYMMDDHHmm_datos.csv.gz&lt;/em&gt;&apos; which contains all the weather stations data for the 10minutes interval.  We also need to take into account one more consideration. A file is not immutable, that means you can read a file with some data (or file Â size) and in 1 hour it can have more new data (bigger file size) because some new data has recovery and corresponds to that interval.&lt;/p&gt;
&lt;h2&gt;The design&lt;/h2&gt;
&lt;p&gt;The idea is to create some simple program that given a date (YYYYMMDD) synchronizes the corresponding remote Â &apos;&lt;em&gt;YYYYMMDD_diezminutales&lt;/em&gt;&apos; folder with a local one. This way we can maintain locally and update copy of the files.  Once files are locally stored a different process, that means a different post :), is responsible to handle data in the right way to be used by the web application.  The summary of steps are:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Given a YYYYMMDD check if theÂ remote Â &apos;&lt;em&gt;YYYYMMDD_diezminutales&lt;/em&gt;&apos; folder exists.Â If so, then synchronize it locally:
&lt;ol&gt;
&lt;li&gt;Create a local &apos;&lt;em&gt;YYYYMMDD_diezminutales&lt;/em&gt;&apos;Â folder if not exists.&lt;/li&gt;
&lt;li&gt;For every file on remote folder:
&lt;ol&gt;
&lt;li&gt;Download if it doesn&apos;t exists or his size has changes.&lt;/li&gt;
&lt;li&gt;Otherwise, ignore if it.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;The implementation&lt;/h2&gt;
&lt;p&gt;Because I&apos;m more experienced with Java I have used it to code a little program to do the previously commented synchronization. To make FTP request I have used the &lt;a href=&quot;http://commons.apache.org/net/&quot;&gt;Apache Commons Net&lt;/a&gt; project. From its web page we can read:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Apache Commons Net implements the client side of many basic Internet protocols.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3&gt;The Main class&lt;/h3&gt;
&lt;p&gt;This is the starter point. User must execute the program specifying a year-month-day to check YYYY-MM-DD, something like:&lt;/p&gt;
&lt;pre class=&quot;brush:shell&quot;&gt;java -jar &quot;aemet_v1.jar&quot; 2011-01-25&lt;/pre&gt;
&lt;p&gt;Lets talk a bit about the main program. The first to do is to ensure user has specified a valid date:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;if (args.length != 1) {
    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, &quot;You must supply once argument like YYYY-MM-DD.&quot;);
    System.exit(1);
}
SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
Date date = sdf.parse(args[0]);&lt;/pre&gt;
&lt;p&gt;Second, we create the folder structure which will hold the local files copy:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;File localFolder = new File(&quot;./localDownloads&quot;);
localFolder.mkdir();
&lt;p&gt;File localFolderObservacions = new File(localFolder, &quot;observaciones_diezminutales&quot;);
localFolderObservacions.mkdir();&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Finally, we get the files through the use of Â &apos;&lt;em&gt;AdquisicioObservaciones&lt;/em&gt;&apos; class:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;AdquisicioObservaciones adq = new AdquisicioObservaciones(localFolderObservacions);
adq.get(date);&lt;/pre&gt;
&lt;p&gt;Putting all together:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;public static void main(String[] args) {
    try {
        if (args.length != 1) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, &quot;You must supply once argument like YYYY-MM-DD.&quot;);
            System.exit(1);
        }
        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
        Date date = sdf.parse(args[0]);
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    File localFolder = new File(&amp;quot;./localDownloads&amp;quot;);
    localFolder.mkdir();

    File localFolderObservacions = new File(localFolder, &amp;quot;observaciones_diezminutales&amp;quot;);
    localFolderObservacions.mkdir();

    Calendar c = Utils.getCurrentCalendarUTC();
    c.setTime(date);

    AdquisicioObservaciones adq = new AdquisicioObservaciones(localFolderObservacions);
    adq.get(date);

} catch (ParseException ex) {
    Logger.getLogger(Main.class.getName()).log(Level.SEVERE, ex.getMessage());
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;The Utils class&lt;/h3&gt;
&lt;p&gt;This is a helper class with some methods used around the code. Mainly it helps creating and setting dates in UTC (because this is the format used by AEMET) and also contains a method that uncompress GZIP files:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;public static boolean uncompressGzFile(File localfile, File targetlocalfile) {
    GZIPInputStream in = null;
    OutputStream out = null;
    try {
        in = new GZIPInputStream(new FileInputStream(localfile));
        out = new FileOutputStream(targetlocalfile);
        // Transfer bytes from the compressed file to the output file
        byte[] buf = new byte[1024];
        int len;
        while ((len = in.read(buf)) &amp;gt; 0) {
            out.write(buf, 0, len);
        }
        return true;
    } catch (IOException ex) {
        logger.severe(ex.getMessage());
        logger.log(Level.SEVERE, &quot;There was a problem while uncompressing file &apos;&apos;{0}&apos;&apos; to &apos;&apos;{1}&apos;&apos;. Exception message &apos;&apos;{2}&apos;&apos;.&quot;,
                new Object[]{localfile.getName(), targetlocalfile.getName(), ex.getMessage()});
        return false;
    } finally {
        // Close the file and stream
        if (in != null) {
            try {
                in.close();
            } catch (IOException ex) {
            }
        }
        if (out != null) {
            try {
                out.close();
            } catch (IOException ex) {
            }
        }
    }
}&lt;/pre&gt;
&lt;h3&gt;TheÂ AdquisicioObservaciones class&lt;/h3&gt;
&lt;p&gt;In class constructor we must specify the local folder were files must be synchronized. Later, we can execute the &apos;&lt;em&gt;get&lt;/em&gt;&apos; method as many times we want and for any day we desire.  The &apos;&lt;em&gt;get&lt;/em&gt;&apos; method, as we commented, Â needs a date to work:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;public void get(Date date) {
    this.date = date;
    logger.log(Level.INFO, &quot;{0} - Start: {1}&quot;, new Object[]{AdquisicioObservaciones.class.getName(), Utils.getCurrentFormattedDate()});
    handleFiles();
    logger.log(Level.INFO, &quot;{0} - End: {1}&quot;, new Object[]{AdquisicioObservaciones.class.getName(), Utils.getCurrentFormattedDate()});
}&lt;/pre&gt;
&lt;p&gt;Mainly it stores the date on a class attribute, prints some log information and delegates the hard work to the &apos;&lt;em&gt;handleFiles&lt;/em&gt;&apos; method. First thing this method does is to create a FTP connection and change the remote working directory to &apos;&lt;em&gt;datos_observacion/observaciones_diezminutales&lt;/em&gt;&apos; and within it change to the desired day:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;ftpclient = new FTPClient();
&lt;p&gt;// Connect to server
ftpclient.connect(server);
ftpclient.setFileTransferMode(FTPClient.BINARY&lt;em&gt;FILE&lt;/em&gt;TYPE);&lt;/p&gt;
&lt;p&gt;// Loggin
if (!ftpclient.login(&quot;anonymous&quot;, null)) {
logger.severe(&quot;Can&apos;t log into FTP&quot;);
return;
}
// Change directory
if (!ftpclient.changeWorkingDirectory(folder)) {
logger.log(Level.SEVERE, &quot;Can&apos;&apos;t change to folder &apos;&apos;{0}&apos;&apos;.&quot;, folder);
return;
}
// Change to day directory
String remoteDayFolder = Utils.getStringFromDate(this.date) + &quot;_diezminutales&quot;;
if (!ftpclient.changeWorkingDirectory(remoteDayFolder)) {
logger.log(Level.SEVERE, &quot;Can&apos;&apos;t change to day folder &apos;&apos;{0}&apos;&apos;.&quot;, remoteDayFolder);
return;
}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Note we set the transfer mode to binary with:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;ftpclient.setFileTransferMode(FTPClient.BINARY_FILE_TYPE);&lt;/pre&gt;
&lt;p&gt;which is important because files are GZIP compressed. Then if local folder for the specified day doesn&apos;t exists it creates one:&lt;/p&gt;
&lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;// Create local directori for the day.
String dayFolder = Utils.getStringFromDate(this.date);
File folderDay = new File(this.localFolder, dayFolder);
if (!folderDay.exists()) {
    if (!folderDay.mkdir()) {
        logger.log(Level.SEVERE, &quot;Can&apos;&apos;t create the daily folder &apos;&apos;{0}&apos;&apos;&quot;, folderDay.getAbsolutePath());
        return;
    }
}&lt;/pre&gt;
&lt;p&gt;Finally the big part comes here. The code gets the list of remote files and check which one doesn&apos;t exist locally or has changed it size:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;FTPFile[] files = ftpclient.listFiles();
for (int i = 0; i &amp;lt; files.length; i++) {
    FTPFile ftpfile = files[i];
    long size = ftpfile.getSize();
    File localfile = new File(folderDay, ftpfile.getName());
    boolean mustBeRead = false;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Check if file is a real data file
if (!ftpfile.getName().contains(&amp;quot;_datos&amp;quot;)) {
    continue;
}

totalFiles++;
if (!localfile.exists()) {
    logger.log(Level.INFO, &amp;quot;File &amp;#39;&amp;#39;{0}&amp;#39;&amp;#39; doesn&amp;#39;t exist locally&amp;quot;,
            new Object[]{ftpfile.getName()});
    mustBeRead = true;
} else if (Math.abs(localfile.length() - size) &amp;amp;gt; 1) {
    // Ha vegades la diferencia del fitxer remot i el local difereixen en 1 byte pero son iguals.
    logger.log(Level.INFO, &amp;quot;File &amp;#39;&amp;#39;{0}&amp;#39;&amp;#39; size changed (before: {1}b, after: {2}b)&amp;quot;,
            new Object[]{ftpfile.getName(), localfile.length(), size});
    mustBeRead = true;
} else {
    logger.log(Level.INFO, &amp;quot;Ignored file &amp;#39;&amp;#39;{0}&amp;#39;&amp;#39;&amp;quot;, ftpfile.getName());
    totalIgnored++;
}

// If we need to read the file then control if any error occurs.
if (mustBeRead) {
    try {
        downloadFile(ftpfile, localfile);
        totalDownloaded++;
    } catch (IOException ex) {
        totalErrors++;
    } finally {
        mustBeRead = false;
    }
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The next important method is &apos;&lt;em&gt;downloadFile&lt;/em&gt;&apos;, which requires two parameters the remote FTP file and the local file name where we want to store data. The remote files is retrieved using the FTPClient&apos;s &apos;&lt;em&gt;retrieveFile&lt;/em&gt;&apos; method and uncompressed with the helper method &lt;em&gt;Utils.uncompressGzFile()&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;brush:java&quot;&gt;logger.log(Level.INFO, &quot;Downloading file &apos;&apos;{0}&apos;&apos; at &apos;&apos;{1}&apos;&apos;&quot;,
        new Object[]{ftpfile.getName(), Utils.getCurrentFormattedDate()});
&lt;p&gt;fos = new FileOutputStream(localfile);
ftpclient.retrieveFile(ftpfile.getName(), fos);&lt;/p&gt;
&lt;p&gt;logger.log(Level.INFO, &quot;Downloaded finished at &apos;&apos;{0}&apos;&apos; , size:&apos;&apos;{1} &apos;&apos;bytes , timestamp: &apos;&apos;{2}&apos;&apos;.&quot;,
new Object[]{Utils.getCurrentFormattedDate(), ftpfile.getSize(), ftpfile.getTimestamp().getTime()});&lt;/p&gt;
&lt;p&gt;// Uncompress file
String targetName = localfile.getName().replaceAll(&quot;.gz&quot;, &quot;&quot;);
File targetlocalfile = new File(localfile.getParentFile(), targetName);
if (Utils.uncompressGzFile(localfile, targetlocalfile)) {
//
// TODO - Here you can handle the file.
} else {
// If there is any error uncompressing file then remove files to
// ensure it will be downloaded again.
localfile.delete();
targetlocalfile.delete();
}&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;Conclusions&lt;/h2&gt;
&lt;p&gt;The program is far beyond to be a serious program to maintain a database with all the weather stations data, but can you on how to download files from FTP server using Java.&lt;/p&gt;
&lt;p&gt;More work must be done to get also the metadata information from the weather stations (name, location, etc) and merge together with the observations.Â Hope that will be shown in a next post.&lt;/p&gt;
&lt;p&gt;Finally, simply to say the code is plenty of log messages which can make code cumbersome but gives lot of information about the synchronization process. A typicall output is something like:&lt;/p&gt;
&lt;pre class=&quot;brush:plain&quot;&gt;06-mar-2011 20:46:28 org.aemetaquisition.AdquisicioObservaciones get
INFO: org.aemetaquisition.AdquisicioObservaciones - Start: 2011-03-06 20:46:28
06-mar-2011 20:46:29 org.aemetaquisition.AdquisicioObservaciones handleFiles
INFO: File &apos;201103040000_datos.csv.gz&apos; doesnt exist locally
06-mar-2011 20:46:29 org.aemetaquisition.AdquisicioObservaciones downloadFile
INFO: Downloading file &apos;201103040000_datos.csv.gz&apos; at &apos;2011-03-06 20:46:29&apos;
06-mar-2011 20:46:29 org.aemetaquisition.AdquisicioObservaciones downloadFile
INFO: Downloaded finished at &apos;2011-03-06 20:46:29&apos; , size:&apos;13.322 &apos;bytes , timestamp: &apos;5/03/11 0:36&apos;.
06-mar-2011 20:46:29 org.aemetaquisition.AdquisicioObservaciones handleFiles
...
...
...
INFO: Downloaded finished at &apos;2011-03-06 20:47:51&apos; , size:&apos;13.596 &apos;bytes , timestamp: &apos;5/03/11 12:36&apos;.
06-mar-2011 20:47:51 org.aemetaquisition.AdquisicioObservaciones handleFiles
INFO: Total files 144, Total downloaded 144, Total ignored 0, Total errors: 0
06-mar-2011 20:47:51 org.aemetaquisition.AdquisicioObservaciones get
INFO: org.aemetaquisition.AdquisicioObservaciones - End: 2011-03-06 20:47:51&lt;/pre&gt;
&lt;h2&gt;Download&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Source code: &lt;a href=&quot;http://www.acuriousanimal.com/code/aemet_v1/aemet_v1.rar&quot;&gt;here&lt;/a&gt;. It is bundled as a NetBeans project but can you open with any text editor.&lt;/li&gt;
&lt;li&gt;Binaries: &lt;a href=&quot;http://www.acuriousanimal.com/code/aemet_v1/aemet_v1_jar.rar&quot;&gt;here&lt;/a&gt;.Â Remember to execute the code you must set the day to check, like:
&lt;pre class=&quot;brush:shell&quot;&gt;java -jar &quot;aemet_v1.jar&quot; 2011-01-25&lt;/pre&gt;
&lt;p&gt;If you execute the program for the same day, only the new files or those with size modified will be processed again.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://commons.apache.org/net/&quot;&gt;http://commons.apache.org/net/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://commons.apache.org/net/&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://www.aemet.es/&quot;&gt;http://www.aemet.es&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[notemarklet: Transform selected element into a sticky note]]></title><description><![CDATA[Bookmarklets are nothing new but I never created one. There are tons of available bookmarklets to make tons of useful little things but here is my little but nice bookmarklet :) called notemarklet that helps reading marking the element under the mouse and changing its looks as a sticky note. Next there are a couple of samples: })();]]></description><link>https://www.acuriousanimal.com/blog/2011/02/09/notemarklet-transform-selected-element-into-a-sticky-note</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/02/09/notemarklet-transform-selected-element-into-a-sticky-note</guid><pubDate>Wed, 09 Feb 2011 21:59:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://en.wikipedia.org/wiki/Bookmarklet&quot;&gt;Bookmarklets&lt;/a&gt; are nothing new but I never created one. There are tons of available bookmarklets to make tons of useful little things but here is my little but nice bookmarklet :) called &lt;strong&gt;&lt;em&gt;&lt;a href=&quot;javascript:(function() {       if (!window.notemarkletDiv) {         window.notemarkletDiv = {};     }       var notemarklet = window.notemarklet;     var notemarkletDiv = null;       function createnotemarkletDiv() {         notemarkletDiv = document.createElement(&apos;div&apos;);         notemarkletDiv.style.position = &apos;absolute&apos;;         notemarkletDiv.style.display = &apos;none&apos;;         notemarkletDiv.style.border = &apos;1px solid #DEE184&apos;;         notemarkletDiv.style.borderRadius = &apos;1px&apos;;         notemarkletDiv.style.padding = &apos;0px&apos;;         notemarkletDiv.style.margin = &apos;0px&apos;;         notemarkletDiv.style.backgroundColor = &apos;#F4F39E&apos;;         notemarkletDiv.style.opacity = &apos;0.4&apos;;         notemarkletDiv.style.zIndex = 9999;         notemarkletDiv.style.boxShadow = &apos;3px 3px 6px #000&apos;;         notemarkletDiv.style.webkitBoxShadow = &apos;3px 3px 6px #000&apos;;         notemarkletDiv.style.mozBoxShadow = &apos;3px 3px 6px #000&apos;;         notemarkletDiv.style.background = &apos;-webkit-gradient(linear, 0% 0%, 0% 100%, from(#EBEB00), to(#C5C500))&apos;;         document.getElementsByTagName(&apos;body&apos;)[0].appendChild(notemarkletDiv);     };       var previousTarget = null;     function notemarkElement(event) {         if(!notemarkletDiv) {             createnotemarkletDiv();         }         setTimeout(function(){             previousTarget = target;             notemarkletDiv.style.display = &apos;none&apos;;               var target = event.target;             var targetRect = target.getBoundingClientRect();             notemarkletDiv.style.top = (window.pageYOffset+targetRect.top-5)+&apos;px&apos;;             notemarkletDiv.style.left = (window.pageXOffset+targetRect.left-5)+&apos;px&apos;;             notemarkletDiv.style.width = (targetRect.right-targetRect.left+10)+&apos;px&apos;;             notemarkletDiv.style.height = (targetRect.bottom-targetRect.top+10)+&apos;px&apos;;         }, 200);         setTimeout(function(){             notemarkletDiv.style.display = &apos;block&apos;;         }, 500);     };       document.addEventListener(&apos;mousemove&apos;, notemarkElement, false); })();&quot;&gt;notemarklet&lt;/a&gt;&lt;/em&gt;&lt;/strong&gt; that helps reading marking the element under the mouse and changing its looks as a sticky note. Next there are a couple of samples:&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 17.400204708290687%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVQI153MMQ6CQBAFUI6tBlT0BJ7AyoIYFKgsvYGgrsiuNCgEmDUYCgopvssewUl+XmZ+MkZ84whPDFHIQPRB3+Pv6bovDKIDsmyDsnKR5w7K0lGPXVTVVlvTDvIdgKSv9JUBpNxrSXramjy0rY+mOcK4ixXC8wiMjXFlFqLLBHFsQggLSWIi4TOIh632wSFzcD5Fmtqqs/SdiwWeryWKYo0fvknULPBAw5YAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;notemarker1&quot; title=&quot;notemarker1&quot; src=&quot;/static/d40eddcf600f46a000326506bc6f15c5/dbb61/notemarker1.png&quot; srcset=&quot;/static/d40eddcf600f46a000326506bc6f15c5/19bd1/notemarker1.png 163w,
/static/d40eddcf600f46a000326506bc6f15c5/d3bcb/notemarker1.png 325w,
/static/d40eddcf600f46a000326506bc6f15c5/dbb61/notemarker1.png 650w,
/static/d40eddcf600f46a000326506bc6f15c5/6b691/notemarker1.png 975w,
/static/d40eddcf600f46a000326506bc6f15c5/6fc51/notemarker1.png 977w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;a href=&quot;./images/2011/02/notemarker2.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;As you can see notemarker can help you reading text pages. It is a pure JavaScript code without the need of external libraries. So not expect great effects.&lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;&lt;a href=&quot;./images/2011/02/notemarker2.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 43.58974358974359%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVQoz22S30/TUBTH+wdrwjRmGQyNgr8S44NR4GEP8jCfTEx8NEi7QnTMsQkJ28rarV1bRowCIWsL69av33vGiA82+eR77rnfc+65udVs20apVEK5XEaSJMiyKcbjMdSXZRkmk4mQpqnklSqm06l4lCrfXLXT4Qm2tr7ANHXU6zXUalXs7//A4eEBGo06dkwD1ep32dN1HXvVPRj6V+zuVoiJg59NGMY2ms2GDKNF0RXC4A+C8DcGg1+IYzUVcH1NrmaqBuZQt6i1yiuvWvNiuLkUG45sNvwI3/+E4fAzosgQ4rhyS5KYszjSEY10iZVH5ec6Gm0TE9rlZYWTLZACycO2c+j17sNx7qHbzcHz8hL3+8wNiuj2lWcBXfpc9wHa7TtwxJ/jUA+hXVx8Y6Fq9pw8Y7MnbPKUDVYE110Ver3HLFyFR597k1c+pb7/groCP3gF7fx8hw9wlyctsnERx8dLPH1ZYsd5hE6nwHhZtN3Kc78Iy1qif5a3rEVZW1aBjV9COztrotV6TcM7mtdxdPSG8VuhY62xaIPmNbLOgk0EwSb1vfBvrAhPPkCL45hX63Mah49yyg0fnutJzrYdhGEosecN5P+b/5f/I00n+As9g3dzwToCzwAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;notemarker2&quot; title=&quot;notemarker2&quot; src=&quot;/static/5c65ed1ef4d47912b9867d420a0429d1/dbb61/notemarker2.png&quot; srcset=&quot;/static/5c65ed1ef4d47912b9867d420a0429d1/19bd1/notemarker2.png 163w,
/static/5c65ed1ef4d47912b9867d420a0429d1/d3bcb/notemarker2.png 325w,
/static/5c65ed1ef4d47912b9867d420a0429d1/dbb61/notemarker2.png 650w,
/static/5c65ed1ef4d47912b9867d420a0429d1/2f3b2/notemarker2.png 663w&quot; sizes=&quot;(max-width: 650px) 100vw, 650px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;&lt;a href=&quot;./images/2011/02/notemarker2.png&quot;&gt;&lt;/a&gt;Next is the source code.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;To use this bookmarlet simply create a new bookmark on your broser and paste the next code as URL. Looking at source code, you can learn how to get the current target element under the mouse, its position, dimensions, etc.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;
&lt;/p&gt;&lt;pre class=&quot;brush:js&quot;&gt;javascript:(function() {&lt;/pre&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;if (!window.notemarkletDiv) {
    window.notemarkletDiv = {};
}

var notemarklet = window.notemarklet;
var notemarkletDiv = null;

function createnotemarkletDiv() {
    notemarkletDiv = document.createElement(&amp;#39;div&amp;#39;);
    notemarkletDiv.style.position = &amp;#39;absolute&amp;#39;;
    notemarkletDiv.style.display = &amp;#39;none&amp;#39;;
    notemarkletDiv.style.border = &amp;#39;1px solid #DEE184&amp;#39;;
    notemarkletDiv.style.borderRadius = &amp;#39;1px&amp;#39;;
    notemarkletDiv.style.padding = &amp;#39;0px&amp;#39;;
    notemarkletDiv.style.margin = &amp;#39;0px&amp;#39;;
    notemarkletDiv.style.backgroundColor = &amp;#39;#F4F39E&amp;#39;;
    notemarkletDiv.style.opacity = &amp;#39;0.4&amp;#39;;
    notemarkletDiv.style.zIndex = 9999;
	notemarkletDiv.style.boxShadow = &amp;#39;3px 3px 6px #000&amp;#39;;
	notemarkletDiv.style.webkitBoxShadow = &amp;#39;3px 3px 6px #000&amp;#39;;
	notemarkletDiv.style.mozBoxShadow = &amp;#39;3px 3px 6px #000&amp;#39;;
	notemarkletDiv.style.background = &amp;#39;-webkit-gradient(linear, 0% 0%, 0% 100%, from(#EBEB00), to(#C5C500))&amp;#39;;
	document.getElementsByTagName(&amp;#39;body&amp;#39;)[0].appendChild(notemarkletDiv);
};

var previousTarget = null;
function notemarkElement(event) {
	if(!notemarkletDiv) {
    	createnotemarkletDiv();
	}
	setTimeout(function(){
		previousTarget = target;
		notemarkletDiv.style.display = &amp;#39;none&amp;#39;;

		var target = event.target;
		var targetRect = target.getBoundingClientRect();
        notemarkletDiv.style.top = (window.pageYOffset+targetRect.top-5)+&amp;#39;px&amp;#39;;
        notemarkletDiv.style.left = (window.pageXOffset+targetRect.left-5)+&amp;#39;px&amp;#39;;
        notemarkletDiv.style.width = (targetRect.right-targetRect.left+10)+&amp;#39;px&amp;#39;;
        notemarkletDiv.style.height = (targetRect.bottom-targetRect.top+10)+&amp;#39;px&amp;#39;;
	}, 200);
	setTimeout(function(){
		notemarkletDiv.style.display = &amp;#39;block&amp;#39;;
	}, 500);
};

document.addEventListener(&amp;#39;mousemove&amp;#39;, notemarkElement, false);&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;})();&lt;/pre&gt;&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;I think code is really simple and self explanatory. Only note the use of Â &lt;em&gt;getBoundingClientRect&lt;/em&gt; function to get target position and dimension. Also, take into account, to avoid modifying the target element we create a new div element that overlaps the target.&lt;/p&gt;
&lt;p style=&quot;text-align: left;&quot;&gt;Simple, easy and useful... anything more?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Working with the JavaScript XMLHttpRequest object]]></title><description><![CDATA[In the last years JavaScript has become one of the most important programming languages. Probably one of the most famous words related to JavaScript is AJAX (Asynchronous JavaScript and XML).  Request from JavaScript are made through the XmlHttpRequest JavaScript object which lets you open connections, send the request and handle data returned by the server.  This post is about XMLHttpRequest object, how to use it and how to handle data in a synchronous or asynchronous way. function createXHRObject() {
	var xhrobject = null;
	for ( var i = 0; i < XMLHttpFactories.length; i++) {
		try {
			xhrobject = XMLHttpFactoriesi;
		} catch (e) {
			continue;
		}
		break;
	}
	return xhrobject;
}; var req = createXHRObject();]]></description><link>https://www.acuriousanimal.com/blog/2011/01/27/working-with-the-javascript-xmlhttprequest-object</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2011/01/27/working-with-the-javascript-xmlhttprequest-object</guid><pubDate>Thu, 27 Jan 2011 22:07:00 GMT</pubDate><content:encoded>&lt;p&gt;In the last years JavaScript has become one of the most important programming languages. Probably one of the most famous words related to JavaScript is &lt;a href=&quot;http://en.wikipedia.org/wiki/Ajax_(programming)&quot;&gt;AJAX&lt;/a&gt; (Asynchronous JavaScript and XML).  Request from JavaScript are made through the XmlHttpRequest JavaScript object which lets you open connections, send the request and handle data returned by the server.  This post is about XMLHttpRequest object, how to use it and how to handle data in a synchronous or asynchronous way.&lt;/p&gt;
&lt;h3&gt;Creating a XMLHttpRequest instance&lt;/h3&gt;
&lt;p&gt;Usually the way to create a XMLHttpRequest instance is simply using:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var req = new XMLHttpRequest();&lt;/pre&gt;
&lt;p&gt;butÂ unfortunatelyÂ this can&apos;t work in old versions of Internet Explorer. In IE6 and earlier, XMLHTTP was implemented as an ActiveX object provided by Microsoft XML (MSXML). Beginning with IE7 XMLHTTP is also exposed as a native scripting object. As simple code to solve this:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;XMLHttpFactories = [ function() {
	return new XMLHttpRequest();
}, function() {
	return new ActiveXObject(&quot;Msxml2.XMLHTTP&quot;);
}, function() {
	return new ActiveXObject(&quot;Msxml3.XMLHTTP&quot;);
}, function() {
	return new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
} ];
&lt;p&gt;function createXHRObject() {
var xhrobject = null;
for ( var i = 0; i &amp;#x3C; XMLHttpFactories.length; i++) {
try {
xhrobject = XMLHttpFactories&lt;a href=&quot;&quot;&gt;i&lt;/a&gt;;
} catch (e) {
continue;
}
break;
}
return xhrobject;
};&lt;/p&gt;
&lt;p&gt;var req = createXHRObject();&lt;/pre&gt;&lt;/p&gt;
&lt;h3&gt;The XMLHttpRequest methods&lt;/h3&gt;
&lt;p&gt;Now we know how to get a fresh instance we need to know a bit more about it, how to make requests and how to handle responses.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Note: Visit the W3C page, referenced below at references section, for a more in depth detail explanation.&lt;/p&gt;&lt;/blockquote&gt;
&lt;h4&gt;Controlling request metadata variables&lt;/h4&gt;
&lt;p&gt;When making request we could be interested to control things like: target url, the http method used to make the request, set any http header parameter, set the data to be sent, etc Next is a brief description of the methods that allows us to do that.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;open(&lt;var&gt;method&lt;/var&gt;,&amp;#xA0;&lt;var&gt;url&lt;/var&gt;,&amp;#xA0;&lt;var&gt;async&lt;/var&gt;,&amp;#xA0;&lt;var&gt;user&lt;/var&gt;,&amp;#xA0;&lt;var&gt;password&lt;/var&gt;)&lt;/strong&gt;: opens a HTTP connection using any available http &lt;em&gt;method&lt;/em&gt; (GET, POST, PUT, DELETE, ...) to the specified &lt;em&gt;url&lt;/em&gt;. The flag &lt;em&gt;async&lt;/em&gt; specifies if the request must be done asynchronously or synchronously.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;setRequestHeader(&lt;var&gt;header&lt;/var&gt;,&amp;#xA0;&lt;var&gt;value&lt;/var&gt;)&lt;/strong&gt;: allows us to set any desired HTTP header in the request.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;send(&lt;var&gt;data&lt;/var&gt;)&lt;/strong&gt;: while &lt;em&gt;open&lt;/em&gt; sets the connection to a server, the &lt;em&gt;send&lt;/em&gt; method is which really initiate the request (&lt;em&gt;read the W3C document patiently, the send method is the key and has lot of thing to be known&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;abort()&lt;/strong&gt;: allows to cancel the request.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Handling response data&lt;/h4&gt;
&lt;p&gt;Once a request is sent we get a response object (don&amp;apos;t worry you&amp;apos;ll some samples in a while). This object has the next important methods and attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;status&lt;/strong&gt;: if the request is done it returns the HTTP status code (&lt;em&gt;read&amp;#xA0;carefully&amp;#xA0;the documentation at W3C, there is more than I&amp;apos;m talking here&lt;/em&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;statusText&lt;/strong&gt;: similar to the previous attribute, it returns the status textual representation.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getResponseHeader(header)&lt;/strong&gt;: allows to get the specified HTTP response header.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;getAllResponseHeaders()&lt;/strong&gt;: similarly this get all headers.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;responseText/&lt;strong&gt;responseXML&lt;/strong&gt;&lt;/strong&gt;: contains the response.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Examples: lets play&lt;/h3&gt;
&lt;p&gt;The most used http methods in AJAX are by far GET and POST, so lets go to take a look on how to use them.&lt;/p&gt;
&lt;h4&gt;Synchronous request using GET&lt;/h4&gt;
&lt;p&gt;Next code shows a synchronous request to get content via GET method. It is important to note the &amp;apos;send&amp;apos; method blocks until the request is done. After that you can get the response data.&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// The &amp;apos;false&amp;apos; flag means it is a synchronous request
req.open(&amp;apos;GET&amp;apos;, &amp;apos;some_url&amp;apos;, false);
// This is blocked until request is done and a response is ready
req.send(null);
// If things goes fine then get result
if (req.readyState == 4 &amp;amp;&amp;amp; req.status == 200) {
    alert(req.responseText);
}&lt;/pre&gt;
&lt;p&gt;To ensure request was done&amp;#xA0;successfully&amp;#xA0;you need to check the &lt;em&gt;readyState &lt;/em&gt;and &lt;em&gt;status &lt;/em&gt;attributes. In addition, if you need to pass any arguments you can do attaching it to the URL (like a GET request on your browser):&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;req.open(&amp;apos;GET&amp;apos;, &amp;apos;some_url?param1=value1&amp;amp;m2=value2&amp;apos;, false);&lt;/pre&gt;
&lt;h4&gt;Asynchronous request using POST&lt;/h4&gt;
&lt;p&gt;Now we are going to see the opposite sample. Next is an asynchronous request using POST method:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// The &amp;apos;true&amp;apos; flag means it is an asynchronous request
req.open(&amp;apos;POST&amp;apos;, some_url, true);
// This is called once the request is done
req.onreadystatechange = function() {
  // If things goes fine then get result
  if (req.readyState == 4 &amp;amp;&amp;amp; req.status == 200) {
    alert(req.responseText);
  }
};
// You must set the content type of the request.
req.setRequestHeader(&amp;apos;Content-Type&amp;apos;, &amp;apos;application/x-www-form-urlencoded&amp;apos;);
// In a POST request data must go here
req.send(&amp;apos;param1=value1&amp;amp;m2=value2&amp;apos;);&lt;/pre&gt;
&lt;p&gt;The code has some important differences. First, in the &amp;apos;&lt;em&gt;open&lt;/em&gt;&amp;apos; method the flag is set to &lt;em&gt;true&lt;/em&gt; to make it an asynchronous request. Second, in a POST request the data must be set in the &amp;apos;&lt;em&gt;send&lt;/em&gt;&amp;apos; method and you must explicitly specify the &lt;em&gt;Content-Type&lt;/em&gt; of the data the request is sent. Finally, and the most important, the &amp;apos;&lt;em&gt;send&lt;/em&gt;&amp;apos; method doesn&amp;apos;t block the execution. The request is sent and code continues executing so we need to attach an event handler to the &amp;apos;&lt;em&gt;onreadystatechange&lt;/em&gt;&amp;apos;, this way once the request is done our handler function is executed. Again we need to check the response &lt;em&gt;readyState &lt;/em&gt;and &lt;em&gt;status &lt;/em&gt;attributes before to getting the results.&lt;/p&gt;
&lt;h3&gt;Cross Domain Request&lt;/h3&gt;
&lt;p&gt;Maybe you are thinking XMLHttpRequest object is the solution to create a really rich internet application requesting data from any place and merging it all together in your own web page but... there are restrictions and cross site request(XSR) are one of them. These restrictions are based in the &lt;a href=&quot;http://en.wikipedia.org/wiki/Same_origin_policy&quot;&gt;same origin policy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Basically, when you load a web page from a domain A and supposing that web page contains your JavaScript code, that code is restricted to make requests on the domain A:&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;./images/proxy1.gif&quot; alt width=&quot;336&quot; height=&quot;189&quot;&gt;&lt;/p&gt;
&lt;p&gt;You can&amp;apos;t make request from a page loaded on domain A to a domain B (your browser avoids it for security reasons):&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;./images/proxy2.gif&quot; alt width=&quot;347&quot; height=&quot;284&quot;&gt;&lt;/p&gt;
&lt;p&gt;One way to solve it is using your web server (from where you load the web page) as a proxy server. You make the AJAX request to some place on your server and this makes the real request out and returns the results:&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter&quot; src=&quot;./images/proxy3.gif&quot; alt width=&quot;525&quot; height=&quot;201&quot;&gt;&lt;/p&gt;
&lt;p&gt;Next is a possible message you can get when doing cross domain request. Here I load a test page from my local server that tries to load a resource from &lt;em&gt;acuriousanimal &lt;/em&gt;domain:&lt;/p&gt;
&lt;pre class=&quot;brush:plain&quot;&gt;XMLHttpRequest cannot load http://www.acuriousanimal.com/. Origin http://localhost:8080 is not allowed by Access-Control-Allow-Origin.
Uncaught Error: NETWORK_ERR: XMLHttpRequest Exception 101&lt;/pre&gt;
&lt;h3&gt;Cross Origin Resource Sharing and Access-Control-Allow-* headers&lt;/h3&gt;
&lt;p&gt;To allow cross domain request the so called &lt;a href=&quot;http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing&quot;&gt;Cross Origin Resource Sharing&lt;/a&gt; (CORS) specification was developed. To use it you need a compatible browser (at least IE8, Chrome 3, FireFox 3.5, Safari 4), otherwise any request to a different domain will simply throw an exception.&lt;/p&gt;
&lt;p&gt;How does CORS work? CORS needs client/server cooperations. Before a request is sent the client (browser) adds the &amp;apos;&lt;em&gt;origin&lt;/em&gt;&amp;apos; HTTP header to the request with the url of the client. The server response must contain some &lt;em&gt;Access-Control-Allow-*&lt;/em&gt; HTTP headers indicating which urls, methods or headers the client is allowed to user.&lt;/p&gt;
&lt;p&gt;In the previous section sample error we have make a request to a server but our url isn&amp;apos;t listed in the &lt;em&gt;Access-Control-Allow-Origin&lt;/em&gt; header. Take a look to the &lt;a href=&quot;https://developer.mozilla.org/En/HTTP_Access_Control#The_HTTP_response_headers&quot;&gt;different headers&lt;/a&gt; you can use at server side to control which clients are allowed to use your services. Here I would like to point the two most used by me:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Access-Control-Allow-Origin&lt;/em&gt;: can contain a list of client domains allows to make requests on your server.&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Access-Control-Allow-Methods&lt;/em&gt;: here you can specify which HTTP methods can be used (for example only allow GET).&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en/AJAX/Getting_Started&quot; target=&quot;_self&quot;&gt;https://developer.mozilla.org/en/AJAX/Getting_Started&lt;/a&gt; - Mozilla&amp;apos;s &amp;quot;&lt;em&gt;Getting started&lt;/em&gt;&amp;quot; tutorial.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.w3.org/TR/XMLHttpRequest&quot; target=&quot;_self&quot;&gt;http://www.w3.org/TR/XMLHttpRequest&lt;/a&gt; - W3C XMLHttpRequest specification.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx&quot; target=&quot;_self&quot;&gt;http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx&lt;/a&gt; - XDomainRequest object available on IE8.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx&quot;&gt;http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx&lt;/a&gt; - About native XMLHttp implementation on IE.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/En/HTTP_Access_Control&quot;&gt;https://developer.mozilla.org/En/HTTP_Access_Control&lt;/a&gt; - HTTP access control. Very important for cross-site HTTP request.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://developer.yahoo.com/javascript/howto-proxy.html&quot;&gt;http://developer.yahoo.com/javascript/howto-proxy.html&lt;/a&gt; - Cross Domain Request using a proxy.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[JavaScript animations (tweening): Why maths are important?]]></title><description><![CDATA[In a previous post I show how to make a simple scrolling animation using jQuery. jQuery library has lots of effects, many more added in jQuery UI and much more as plugins.Â Of course it is fine to use existing libraries to not reinvent the wheel, but there are times you need to do an animation by your hand without the help of existing libraries and because this one needs to know the basics to implement JavaScript animations.Â Right, so how we can make animations in JavaScript and how we can make it smooth? Let's go. } } }]]></description><link>https://www.acuriousanimal.com/blog/2010/12/18/javascript-animations-why-maths-are-important</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2010/12/18/javascript-animations-why-maths-are-important</guid><pubDate>Sat, 18 Dec 2010 18:50:00 GMT</pubDate><content:encoded>&lt;p&gt;In a &lt;a href=&quot;//2010/11/23/animated-scrolling-to-dom-element.html&quot;&gt;previous post&lt;/a&gt; I show how to make a simple scrolling animation using jQuery. jQuery library has lots of effects, many more added in jQuery UI and much more as plugins.Â Of course it is fine to use existing libraries to not reinvent the wheel, but there are times you need to do an animation by your hand without the help of existing libraries and because this one needs to know the basics to implement JavaScript animations.Â Right, so how we can make animations in JavaScript and how we can make it smooth? Let&apos;s go.&lt;/p&gt;
&lt;p&gt;Unlike other languages, &lt;a href=&quot;http://www.javascriptkata.com/2007/06/04/ajax-and-javascript-dont-use-threads/&quot;&gt;JavaScript doesn&apos;t have the concept of threads&lt;/a&gt; so we need to use anotherÂ approachesÂ to make different things at the same time. This can be achieved with the use of &lt;a href=&quot;https://developer.mozilla.org/en/window.setTimeout&quot;&gt;setTimeout&lt;/a&gt; and &lt;a href=&quot;https://developer.mozilla.org/en/DOM/window.setInterval&quot;&gt;setInterval&lt;/a&gt; functions:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;setTimeout &lt;/em&gt;executes a code snippet or a function after specified delay&lt;/p&gt;
&lt;p&gt;&lt;em&gt;setInterval &lt;/em&gt;calls a function repeatedly, with a fixed time delay between each call to that function.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Both functions returns an identifier which allows us to remove the timeout or interval using &lt;a href=&quot;https://developer.mozilla.org/en/DOM/window.clearTimeout&quot;&gt;clearTimeout &lt;/a&gt;or &lt;a href=&quot;https://developer.mozilla.org/en/DOM/window.clearInterval&quot;&gt;clearInterval&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ok, we are able to execute some code asynchronously but the question is: How we can smoothly scroll to an element?&lt;/p&gt;
&lt;p&gt;The answer requires a decent explanation so lets start with a couple of basic samples:&lt;/p&gt;
&lt;h3&gt;Step 1: Scrolling to an element without animation&lt;/h3&gt;
&lt;p&gt;On this sample we put a button on our page which execute the &lt;em&gt;pageScroll &lt;/em&gt;function:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;button id=&quot;scroll&quot; onclick=&quot;pageScroll();&quot;&amp;gt;Scroll&amp;lt;/button&amp;gt;&lt;/pre&gt;
&lt;p&gt;This function scrolls the browser viewport till our desired element, which we have identified as &lt;em&gt;target&lt;/em&gt;:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;function pageScroll() {
	// Get a reference to the target element and its top offset.
	var target = document.getElementById(&apos;target&apos;);
	var scroll = target.offsetTop;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Scroll viewport to the target element.
window.scrollBy(0,scroll);&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;Simply get the vertical offset till our desired target element and use the &lt;em&gt;scrollBy &lt;/em&gt;method to scroll the viewport.&lt;/p&gt;
&lt;h3&gt;Step 2: Scrolling to an element with basic animation&lt;/h3&gt;
&lt;p&gt;The previous sample isn&apos;t much impressive, the page simply moves to the target element, it isn&apos;t a nice smooth animation.&lt;/p&gt;
&lt;p&gt;This second sample introduces the previously commented &lt;em&gt;setTimeout &lt;/em&gt;functions:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;function pageScroll() {
	// Get a reference to the target element and its top offset.
	var target = document.getElementById(&apos;target&apos;);
	var scroll = target.offsetTop;
	var viewScroll = window.pageYOffset;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Scroll viewport only a step and call this function again in 10 miliseconds
if(viewScroll&amp;amp;lt;scroll) {
	window.scrollBy(0,10);
	setTimeout(&amp;#39;pageScroll()&amp;#39;, 10);
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;The idea is to move the window scroll step by step until arrive the target element.Â Again the code gets the offset till our target element and also the current offset of the browser. Next we check if the current window offset has arrived to the target element. If so the code finish, otherwise move the window scroll 10 pixels and create a timeout to invoke the function again in 10ms.&lt;/p&gt;
&lt;h3&gt;Improving animation&lt;/h3&gt;
&lt;p&gt;The second sample is nicer than the first once but we want a really fashion animation with smooth movements decelerating when we are near the target element.&lt;/p&gt;
&lt;p&gt;If you look at the code you can see that animation we have done is linear, in the sense we are stepping a fixed amount of pixels. Next figure represents a linear movement:&lt;/p&gt;
&lt;p&gt;&lt;object width=&quot;330&quot; height=&quot;165&quot; classid=&quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&quot;&gt;&lt;param name=&quot;FlashVars&quot; value=&quot;mode=linear&quot; /&gt;&lt;param name=&quot;quality&quot; value=&quot;high&quot; /&gt;&lt;param name=&quot;src&quot; value=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; /&gt;&lt;param name=&quot;flashvars&quot; value=&quot;mode=linear&quot; /&gt;&lt;embed width=&quot;330&quot; height=&quot;165&quot; type=&quot;application/x-shockwave-flash&quot; src=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; flashvars=&quot;mode=linear&quot; quality=&quot;high&quot; /&gt;&lt;/object&gt;&lt;/p&gt;
&lt;p&gt;We would like something smoother like (called &lt;em&gt;easeinquad&lt;/em&gt;):&lt;/p&gt;
&lt;p&gt;&lt;object width=&quot;330&quot; height=&quot;165&quot; classid=&quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&quot;&gt;&lt;param name=&quot;FlashVars&quot; value=&quot;mode=easeinquad&quot; /&gt;&lt;param name=&quot;quality&quot; value=&quot;high&quot; /&gt;&lt;param name=&quot;src&quot; value=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; /&gt;&lt;param name=&quot;flashvars&quot; value=&quot;mode=easeinquad&quot; /&gt;&lt;embed width=&quot;330&quot; height=&quot;165&quot; type=&quot;application/x-shockwave-flash&quot; src=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; flashvars=&quot;mode=easeinquad&quot; quality=&quot;high&quot; /&gt;&lt;/object&gt;&lt;/p&gt;
&lt;p&gt;which starts at zero velocity then accelerates,Â or this (called &lt;em&gt;easeInOutSine&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;&lt;object width=&quot;330&quot; height=&quot;165&quot; classid=&quot;clsid:d27cdb6e-ae6d-11cf-96b8-444553540000&quot; codebase=&quot;http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0&quot;&gt;&lt;param name=&quot;FlashVars&quot; value=&quot;mode=easeInOutSine&quot; /&gt;&lt;param name=&quot;quality&quot; value=&quot;high&quot; /&gt;&lt;param name=&quot;src&quot; value=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; /&gt;&lt;param name=&quot;flashvars&quot; value=&quot;mode=easeInOutSine&quot; /&gt;&lt;embed width=&quot;330&quot; height=&quot;165&quot; type=&quot;application/x-shockwave-flash&quot; src=&quot;http://hosted.zeh.com.br/mctween/examples/tracer.swf&quot; flashvars=&quot;mode=easeInOutSine&quot; quality=&quot;high&quot; /&gt;&lt;/object&gt;&lt;/p&gt;
&lt;p&gt;which starts at zero velocity, accelerates until halfway, then deaccelerates to zero velocity again.&lt;/p&gt;
&lt;h3&gt;Here comes the maths !!!&lt;/h3&gt;
&lt;p&gt;Yes, this is incredible but truth :). Maths are the key to create these and many other good animations and the star actor is &lt;a href=&quot;http://en.wikipedia.org/wiki/Inbetweening&quot;&gt;tweening&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We need a tweening function that given a start and end values, a total duration and a relative time computes a position. For example, for values &lt;em&gt;start=0,Â end=10&lt;/em&gt;, &lt;em&gt;duration=5secs&lt;/em&gt; what would be the position if &lt;em&gt;time=1.5secs&lt;/em&gt; ?&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var tweenPosition = function (time, begin, final, duration) {
    // calculate position here
    return position;
};&lt;/pre&gt;
&lt;p&gt;So the secret is found the formula to compute the position in the desired way. For example, Â we can obtain a linear movement using the next function:&lt;/p&gt;
&lt;pre&gt;var tweenLinearPosition = function (t, b, c, d) {
    return c*t/d + b;
};&lt;/pre&gt;
&lt;blockquote&gt;&lt;p&gt;If you remember your maths in school this is the linear &lt;a href=&quot;http://en.wikipedia.org/wiki/Linear_equation#Slope.E2.80.93intercept_form&quot;&gt;slope-intercept&lt;/a&gt; form of a line.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;For the &lt;em&gt;easyInQuad &lt;/em&gt;animation the formula would be:&lt;/p&gt;
&lt;pre&gt;var tweenEaseInQuadPosition = function (t, b, c, d) {
    return c*(t/=d)*t + b;
};&lt;/pre&gt;
&lt;h3&gt;Using tweening function for animation&lt;/h3&gt;
&lt;p&gt;Now we know a bit about tweening functions needed to create a nice animation and now we need to put it all together in our JavaScript code.&lt;/p&gt;
&lt;p&gt;First, using &lt;a href=&quot;http://www.robertpenner.com/easing/penner_chapter7_tweening.pdf&quot;&gt;one &lt;/a&gt;of the functions you can found in the bottom references, we have created a nice bounce tweening function:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var tweenEeaseOutBouncePosition = function (t, b, c, d) {
	if ((t/=d) &amp;lt; (1/2.75)) {
		return c*(7.5625*t*t) + b;
	} else if (t &amp;lt; (2/2.75)) {
		return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
	} else if (t &amp;lt; (2.5/2.75)) {
		return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
	} else {
		return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
	}
};&lt;/pre&gt;
&lt;p&gt;Now, define some needed parameters:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;// Compute the initial and final offset
var target = document.getElementById(&apos;target&apos;);
var endOffset = target.offsetTop;
var beginOffset = window.pageYOffset;
var total = endOffset - beginOffset;
var time = 0;
var duration = 3000;	// The aproximate duration of animation in miliseconds
var interval = 10;		// The interval of every step&lt;/pre&gt;
&lt;p&gt;Similarly than previous samples we need to get the initial and final vertical offset and define the duration of our animation.&lt;/p&gt;
&lt;p&gt;Finally the animation function, responsibly to use tweening function, results in:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;function pageScroll() {
	var currentOffset = window.pageYOffset;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Scroll viewport only a step and call this function again in &amp;#39;interval&amp;#39; miliseconds
if(time &amp;amp;lt; duration &amp;amp;amp;&amp;amp;amp; currentOffset &amp;amp;lt; endOffset) {
	var p = tweenEeaseOutBouncePosition(time, beginOffset, total, duration);
	window.scroll(0,p);	// Scroll viewport
	time+=interval;
	setTimeout(&amp;#39;pageScroll()&amp;#39;, interval);
} else {
	time = 0;
}&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;}&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;While we are not over animation duration and the current page offset is less than the target one, we scroll the page computing the position using the tweening function. Take care of this considerations in this sample:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The JavaScript code has moved to the end of the page. This way we are sure all body content (and also the target element) has been loaded before execute our code.&lt;/li&gt;
&lt;li&gt;We scroll the page using &lt;em&gt;window.scroll()&lt;/em&gt; instead &lt;em&gt;window.scrollBy()&lt;/em&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Considerations&lt;/h3&gt;
&lt;p&gt;This third and final sample is a really simple demonstration using a tweening function. A more powerful implementation must allow to start/stop animation, forward/rewind one frame, etc.&lt;/p&gt;
&lt;p&gt;This is simply a tutorial post with a simple introduction to animations. As I commented early there are times when you need to do things without the help of a library, or simply you one create a new library (an amazing alternative to jQuery, MooTools, Prototype, ...) and need to do the things by hand.&lt;/p&gt;
&lt;p&gt;Hope it can help you.&lt;/p&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mediacollege.com/internet/javascript/page/scroll.html&quot;&gt;http://www.mediacollege.com/internet/javascript/page/scroll.html&lt;/a&gt; - A basic animation.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://hosted.zeh.com.br/mctween/animationtypes.html&quot;&gt;http://hosted.zeh.com.br/mctween/animationtypes.html&lt;/a&gt; - Tweet functions and samples.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.robertpenner.com/easing/penner_chapter7_tweening.pdf&quot;&gt;http://www.robertpenner.com/easing/penner_chapter7_tweening.pdf&lt;/a&gt; - A great PDF chapter about tweening in ActionScript from Robert Penner.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://sixrevisions.com/javascript/10-impressive-javascript-animation-frameworks&quot;&gt;http://sixrevisions.com/javascript/10-impressive-javascript-animation-frameworks&lt;/a&gt; - A list of animation JavaScript libraries.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://berniesumption.com/software/animator&quot;&gt;http://berniesumption.com/software/animator&lt;/a&gt; - A light, powerful and pure JavaScript animator library.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[How to create a preloader in Dojo]]></title><description><![CDATA[Dojo is a great framework to create RIA applications. Dojo isn't only a bunch of utility functions to select DOM nodes, change styles, make some effects, etc in contrast it is a whole framework with a great set of UI widgets. };]]></description><link>https://www.acuriousanimal.com/blog/2010/12/05/how-to-create-a-preloader-in-dojo</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2010/12/05/how-to-create-a-preloader-in-dojo</guid><pubDate>Sun, 05 Dec 2010 10:22:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;http://www.dojotoolkit.org/&quot;&gt;Dojo&lt;/a&gt; is a great framework to create &lt;a href=&quot;http://en.wikipedia.org/wiki/Rich_Internet_application&quot;&gt;RIA &lt;/a&gt;applications. Dojo isn&apos;t only a bunch of utility functions to select DOM nodes, change styles, make some effects, etc in contrast it is a whole framework with a great set of UI widgets.&lt;/p&gt;
&lt;h3&gt;Working in a declarative way&lt;/h3&gt;
&lt;p&gt;Like other JavaScript libraries and frameworks Dojo allows us to create widgets directly from JavaScript code but, and this is one of its key values, Dojo allows to work in a declarative way. If you know HTML then you are allowed to create a Dojo UI. For example:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;button dojoType=&amp;quot;dijit.form.Button&amp;quot; type=&amp;quot;button&amp;quot;&amp;gt;Click Me&amp;lt;/button&amp;gt;&lt;/pre&gt;
&lt;p&gt;In the declarative way we only need to add the &lt;em&gt;dojoType&lt;/em&gt; attribute to a HTML element we to create Dojo components. But, &lt;strong&gt;how the declarative way works?&lt;/strong&gt; Well, as a short answer you need to understand &lt;strong&gt;once Dojo is loaded by the browser, the JavaScript code parses the DOM structure of the page and &amp;quot;&lt;em&gt;tansforms&lt;/em&gt;&amp;quot; any element with the &lt;em&gt;dojoType &lt;/em&gt;to the appropriate Dojo component&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;What&amp;apos;s the problem with the declarative way?&lt;/h3&gt;
&lt;p&gt;Unfortunately, using this way, while Dojo is going to be loaded you will see a normal button in the browser and some seconds later, once Dojo is loaded and has parsed the page, you will see how your normal button &lt;a href=&quot;./images/2010/12/normal_button.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 81px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 39.50617283950617%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABgklEQVQoz62Sz08aQRzF+Y+JhzZp4qWnHggS0xBjYtK0agANUWjcpeVXdSUWiViM6P6Y/eECTVVsaQTxAHycRdOUO9/LvHnJvDfz3oSY00wmk+kaGo1GWJaFbdv4rTaddgvP83DkPuADbNsC23FotXxc18P3r7BMU/IOhmHQ7/f/iYYGgwH1ep1e7w/ftTLF8iH6xQV+5xf3938xDZ2bm1uuf7apVmt4tkWt1mDwOOT3XVcauDjSLJjxeEzoQQqalsAzzkhnv1CrHJFcT/Bt/xBNq7C9tYmSy3Pd7rAcibKbTrMSX0NR9zjTXe66t7OCw+EDpz8anFRKrH1KUlByrCxFefX6LTvZz8SXI0Ri7zlvXPIhHuXN4jtWY0uEwwukM0WuPGca13+CQ0qlEqf1E7YS63zcSJHP5VAVhUQiRaFQQFVVDvY1vko+m8mSzxfJ7O6gydccV6uzNwxK0XV9Gq4jA/dkJkKIqav7goWwMWUJAQ4OC/FcYlBMs9mcLWXe3+YJy2492vXOkCkAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;normal button&quot; title=&quot;normal_button&quot; src=&quot;/static/d8b2982d058b80865d85014270da4e74/8a8d0/normal_button.png&quot; srcset=&quot;/static/d8b2982d058b80865d85014270da4e74/8a8d0/normal_button.png 81w&quot; sizes=&quot;(max-width: 81px) 100vw, 81px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt; becomes a Dojo button &lt;a href=&quot;./images/2010/12/dojo_button.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 78px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 44.87179487179487%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjUlEQVQoz62Sz0/iUBDH+Z+9eF6zB10PxmCMbNaLMV4AD/5AD6zsLqAg1BU0kdIWURBtq61QpUTox9cCitnjOsn3ve+befPNzHsTQpjnefyvjTVCY/LS7+N0ezjP7gg9nrr/4i0+Pgv4uWPRkE/aIjlb0ckrJlK9zd/rDsVLi1zV4FizKNQs8uo9uVHcR0F7CO77yFTusJ/cYYX+cnlrkygbSA2XWLLA93iK9d0iyTOTdMUgniqTqtgcaTaxVInoQYn90xaHWof81TN7ZRO1Zb0LXuk2vxWHw/Ma4bV9MvIdS5Eoiz82icSSzC+s8G01QanlMjsXZnomzNf5CFNfFvgj8tJVOyjqTbCuP5KrdVCMLvHELzYSWbZ+nrC5lxU8TdT37WQpNRwO8jKZ8jXR7STL69uc3rgU6w61ScGm2eZIsVDuBwEubnsoDx6iQ2S9hyq60Sxv6BfxqoB4WhRzgGr2yak2DaP9LjgYCJG6jiQ3OfFRvQm4JDcEH+7SB/9krBnk9kc/HfqMGZycxVdV2pXffBLTZgAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;dojo button&quot; title=&quot;dojo_button&quot; src=&quot;/static/b22c7bce1946ef46a4bf1a6f944029d9/6bb52/dojo_button.png&quot; srcset=&quot;/static/b22c7bce1946ef46a4bf1a6f944029d9/6bb52/dojo_button.png 78w&quot; sizes=&quot;(max-width: 78px) 100vw, 78px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So, I want to use Dojo but don&amp;apos;t want that ugly effect on my pages? That what we are going to talk in the next lines.&lt;/p&gt;
&lt;h3&gt;Creating a preloader&lt;/h3&gt;
&lt;p&gt;The basic idea is to hide the page content until Dojo has parsed the content and created all the Dijit widgets. This way when users access our pages they will see a nice preloader page and once the content is prepared it will appear in an smooth way. That is from:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2010/12/dojo_preloader.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 63.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAAAXElEQVQ4y+2SOxLAIAgFvf9NEBWi3O9FnDFFujixs9jhUyyvIBAR/iQc4T4hM6OUgpzzqBNVHbvPwpQSRAS1VrTWYGa9vx5xjHEtoUsnPvuhpYSOp3Dxm/M2e4U35VEHxUd5GnYAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;dojo preloader 300x191&quot; title=&quot;dojo_preloader&quot; src=&quot;/static/1e3e788035fb09fb0d37e546035dfbb3/135ae/dojo_preloader-300x191.png&quot; srcset=&quot;/static/1e3e788035fb09fb0d37e546035dfbb3/19bd1/dojo_preloader-300x191.png 163w,
/static/1e3e788035fb09fb0d37e546035dfbb3/135ae/dojo_preloader-300x191.png 300w&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;to:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;./images/2010/12/dojo_content.png&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 300px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 65.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQ4y5WSz2sTQRTH5yAFD96FIl4Eiy0iopcabUsPRVNNa4u2jW1BSgNCxQpC6UGv/QNLQRpqfmyybvZXNm52Z3Y2+/XNxhQS0zZ97Gdn5vvefN/ssOzrjyN83D9E4dt3vC/sY3pxDdOv16/BGp69WcfThVW82/0CtrrzGRkSsxs7eLGUx617j3Fj/AHG7kxdwmTf+ubdh2C372NyJgu2tXeQnmpuZQu57U94ld/FzPImZt9u4nkun46Z3AZmlbbc1VS+V/NkYQWP5pcwkXmJ7IcCmFb/jZ+nRZyVKihVNJSrNVRrehdNUU/npZqBYllHpd5AmeoqpCvUvjKNltOE67XATMvBafEsTdokmrbbj+XCdj14ngfLsuDYDnRdh2EY6dz3fYQhh4pOJwGrWj6Ofxk4KTVQdcUFcLQDDsE5bQ4hhACneRRJ9CJJknTNmoFEQkJML0kdBqEHPo/Bow6GhTJSqJAyBmsFqktPHOBfYRjFCEV8XjeMc0MvkH2dhhUGomeIUQ3Vp11UmHQNoxENW6HEVcGjUU6YdA3tPwJtHtHFSxr/JxASzbZITa8KGZOhaTfp59Sg6Q2YjocGrQcxbQ9cROkGdYqhUI5T878kKHVhvMS+gQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;dojo content 300x197&quot; title=&quot;dojo_content&quot; src=&quot;/static/3eb672bdc5a99d8647ac7b60d28018ef/135ae/dojo_content-300x197.png&quot; srcset=&quot;/static/3eb672bdc5a99d8647ac7b60d28018ef/19bd1/dojo_content-300x197.png 163w,
/static/3eb672bdc5a99d8647ac7b60d28018ef/135ae/dojo_content-300x197.png 300w&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Considerations:&amp;#xA0;Please, what I&amp;apos;m going to explain here is all related to Dojo 1.5. I have test on FF3.5, Chrome 8 and IE8.&lt;/em&gt;&lt;/p&gt;
&lt;h4&gt;Avoid parse on load&lt;/h4&gt;
&lt;p&gt;The first step is to tell Dojo don&amp;apos;t parse the page automatically, we want to control when to do that, so when including Dojo library we need to explicitly tell that using &amp;apos;&lt;em&gt;parseOnLoad&lt;/em&gt;&amp;apos; property:&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojo/dojo.xd.js&amp;quot;
    djConfig=&amp;quot;parseOnLoad: false, isDebug: false, locale: &amp;apos;en-us&amp;apos;&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;p&gt;and then include the parser code. Note it is always necessary this line, including when setting &lt;em&gt;parseOnLoad &lt;/em&gt;to true.&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;script type=&amp;quot;text/javascript&amp;quot;&amp;gt;
    dojo.require(&amp;quot;dojo.parser&amp;quot;);
    ...
&amp;lt;/script&amp;gt;&lt;/pre&gt;
&lt;h4&gt;Put a div in the body to act as the preloader layer&lt;/h4&gt;
&lt;p&gt;In the body of your page you need to add a div element to be used as the preloader. This will be initially visible and will hide the real content of your page until it was ready for the user.&lt;/p&gt;
&lt;pre class=&quot;brush:xml&quot;&gt;&amp;lt;div id=&amp;quot;preloader&amp;quot;&amp;gt;
    &amp;lt;div id=&amp;quot;preloaderContent&amp;quot; style=&amp;quot;visibility: hidden;&amp;quot;&amp;gt;
        &amp;lt;strong&amp;gt;This is your preloader... &amp;lt;/strong&amp;gt;
        &amp;lt;img width=&amp;quot;20px&amp;quot; height=&amp;quot;20px&amp;quot; src=&amp;quot;http://ajax.googleapis.com/ajax/libs/dojo/1.5/dojox/image/resources/images/loading.gif&amp;quot;&amp;gt;&amp;lt;br&amp;gt;
        Put someting nice here !!!
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/pre&gt;
&lt;h4&gt;Style the preloader&lt;/h4&gt;
&lt;p&gt;As we say, the preloader needs to hide the real content of our page, so it needs some styling.&lt;/p&gt;
&lt;p&gt;The &lt;em&gt;preloader &lt;/em&gt;section is responsible to cover the whole viewport, while the preloaderContent contains our preloader message. (Later you will we center the message by code).&lt;/p&gt;
&lt;pre class=&quot;brush:css&quot;&gt;#preloader {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	margin:0;
	padding:0;
	background:#aaa;
	z-index:999;
}
#preloaderContent {
	position: absolute;
	border: 2px solid #fff;
	color: #fff;
	padding: 25px;
	-moz-border-radius: 15px;
	border-radius: 15px;
}&lt;/pre&gt;
&lt;h4&gt;Hide the preloader once the content is ready&lt;/h4&gt;
&lt;p&gt;We have the preloader div section and we have styled it a bit. Now we need to add the code that hides it once the content was parsed by Dojo and ready for the user.&lt;/p&gt;
&lt;p&gt;To do that we need to add next code in the &lt;em&gt;dojo.addOnLoad&lt;/em&gt; function:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;dojo.addOnLoad(function(){
	showPreloader();
	dojo.parser.parse();
	hidePreloader();
});&lt;/pre&gt;
&lt;p&gt;The &lt;em&gt;addOnLoad &lt;/em&gt;function is executed once the Dojo code is loaded by the browser. Meanwhile the user will see the preloader on the screen. Once Dojo is loaded what we want is to parse the content&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;dojo.parser.parse();&lt;/pre&gt;
&lt;p&gt;and then hide the preloader&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;var hidePreloader = function(){
	// This really hides the preloader
	var hide = function(){
		dojo.fadeOut({
				node:&amp;quot;preloader&amp;quot;,
				duration:700,
				onEnd: function(){
					dojo.style(&amp;quot;preloader&amp;quot;, &amp;quot;display&amp;quot;, &amp;quot;none&amp;quot;);
				}
		}).play();
	};&lt;/pre&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre style=&quot;counter-reset: linenumber NaN&quot; class=&quot;language-text line-numbers&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Set a timeout to ensure the preloader is visible.
// This is only for testing !!!
setTimeout(hide, 5000);&lt;/code&gt;&lt;span aria-hidden=&quot;true&quot; class=&quot;line-numbers-rows&quot; style=&quot;white-space: normal; width: auto; left: 0;&quot;&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;};&lt;/pre&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Please, note to force you can see the preloader in the screen I have added a 5secs timeout. Probably you don&apos;t want that on your site&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;To make preloader a bit moreÂ beautifulÂ I have created the &lt;em&gt;showPreloader &lt;/em&gt;function which computes the viewport size and centers the preloader message.&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;function showPreloader() {
	// Show the preloader centered in the viewport
	var ps = dojo.position(&apos;preloaderContent&apos;);
	var ws = dojo.window.getBox();
	dojo.style(&quot;preloaderContent&quot;, &quot;top&quot; , (ws.h/2-ps.h/2)+&quot;px&quot;);
	dojo.style(&quot;preloaderContent&quot;, &quot;left&quot;, (ws.w/2-ps.w/2)+&quot;px&quot;);
	dojo.style(&quot;preloaderContent&quot;, &quot;visibility&quot; , &quot;visible&quot;);
};&lt;/pre&gt;
&lt;h3&gt;Demo&lt;/h3&gt;
&lt;p&gt;You can see the demo &lt;a href=&quot;http://www.acuriousanimal.com/dojo-preloader/&quot;&gt;here&lt;/a&gt;. Source code is available at Github repository &lt;a href=&quot;https://github.com/acanimal/dojo-preloader&quot;&gt;dojo-preloader&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.preloaders.net/&quot;&gt;http://www.preloaders.net&lt;/a&gt; - To create nice preloader images.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.sitepen.com/blog/2008/10/06/implementing-a-web-application-preloading-overlay/&quot;&gt;http://www.sitepen.com/blog/2008/10/06/implementing-a-web-application-preloading-overlay/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.sitepen.com/blog/2008/10/06/implementing-a-web-application-preloading-overlay/&quot;&gt;&lt;/a&gt;&lt;a href=&quot;http://dojocampus.org/content/2008/03/08/the-dojo-parser/&quot;&gt;http://dojocampus.org/content/2008/03/08/the-dojo-parser/&lt;/a&gt; - Better understand of the Dojo parser.&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Animated scrolling to a DOM element]]></title><description><![CDATA[Creating my web page I have wanted to create a smooth movement to a given page element, for example from top to about section. One possibility, of course, is to code it yourself, but we are lucky to have tons of JavaScript libraries and frameworks to help us on that tasks. On of them areÂ jQuery, one of the most used libraries.]]></description><link>https://www.acuriousanimal.com/blog/2010/11/23/animated-scrolling-to-dom-element</link><guid isPermaLink="false">https://www.acuriousanimal.com/blog/2010/11/23/animated-scrolling-to-dom-element</guid><pubDate>Tue, 23 Nov 2010 19:05:00 GMT</pubDate><content:encoded>&lt;p&gt;Creating my &lt;a href=&quot;http://www.acuriousanimal.com&quot;&gt;web page&lt;/a&gt; I have wanted to create a smooth movement to a given page element, for example from top to about section. One possibility, of course, is to code it yourself, but we are lucky to have tons of JavaScript libraries and frameworks to help us on that tasks. On of them areÂ &lt;a href=&quot;http://www.jquery.com&quot;&gt;jQuery&lt;/a&gt;, one of the most used libraries.&lt;/p&gt;
&lt;p&gt;Ok, lets go to see the required code:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&apos;html,body&apos;).animate({ scrollTop: $(element).offset().top },
        { duration: &apos;slow&apos;, easing: &apos;swing&apos;});&lt;/pre&gt;
&lt;p&gt;What the sentence is doing? First we are selecting the HTML body section:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&apos;html,body&apos;).animate()&lt;/pre&gt;
&lt;p&gt;apply an animation. The animation must scroll the browser view until the desired DOM element. So the next step is get the desired element top offset:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(element).offset().top&lt;/pre&gt;
&lt;p&gt;For example, given an HTML element identified by:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;id=&quot;my_id&quot;&lt;/pre&gt;
&lt;p&gt;we can get its top offset writting:&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;$(&apos;#my_id&apos;).offset().top&lt;/pre&gt;
&lt;p&gt;Finally, the &lt;a href=&quot;http://api.jquery.com/animate/&quot;&gt;animate &lt;/a&gt;function is responsible to perform a custom animation of a set of CSS properties.&lt;/p&gt;
&lt;p&gt;To avoid code duplication, it is a good practice to wrap the call on a function, this way we can call it passing an string with the identifier of the element we want to scroll to (really we need to pass the string with desired the jQuery selector):&lt;/p&gt;
&lt;pre class=&quot;brush:js&quot;&gt;function scrollTo(element) {
	$(&apos;html,body&apos;).animate({ scrollTop: $(element).offset().top },
		{ duration: &apos;slow&apos;, easing: &apos;swing&apos;});
};&lt;/pre&gt;
&lt;p&gt;You can see a demo of this at &lt;a href=&quot;http://www.acuriousanimal.com&quot;&gt;acuriousanimal&lt;/a&gt;.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[About]]></title><description><![CDATA[A Curious Animal is a blog maintained by Antonio Santiago, a citizen of the world living at Barcelona (Spain).  Antonio is a Software Engineer as profession and hobby, who has been working for years as employee and as freelance building information systems and web applications. He is a firm believer of agile methodologies (and much more about common sense). There is no ring to rule them all, every place needs to forge its own master ring. He is mainly experienced in the Java and JavaScript ecosystems (Spring, Hibernate, JPA, NodeJS, Express, React, Redux, ...) but also has some knowledge about other programming languages in addition to devops. This is what he says: I'm a passionate programmer and a acceptableÂ guitar player and this is what job mates says: He's incredibly motivated and an awesome developer but as guitar player he must improve a lot his skills. You can know a bit more of him: Reading his website http://acuriousanimal.com Following his Twitter account @acanimal Visiting his LinkedIn profile]]></description><link>https://www.acuriousanimal.comnull</link><guid isPermaLink="false">https://www.acuriousanimal.comnull</guid><pubDate>Tue, 23 Nov 2010 13:48:00 GMT</pubDate><content:encoded>&lt;p&gt;A Curious Animal is a blog maintained by &lt;a href=&quot;http://acuriousanimal.com/&quot;&gt;Antonio Santiago&lt;/a&gt;, a citizen of the world living at Barcelona (Spain).&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 150px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD60lEQVQ4yz1Uxy+vURD99BJd9BIJCdFr9N676CI6EUTvorfoNVhI9G6DSLCwYaNEJFiJ/+W8d+bFW0x+vmvuuWfOnBmltrYWjK6uLjQ0NKCqqgotLS3o7u5GR0eHRHt7u5w1Njairq4O9fX1aGtrQ19fH3p7e+V/jKamJigeHh7w9fVFYmIigoODERYWhszMTBQUFKC0tBSpqanIycmR4FlxcTGqq6tRWVkp0dzcLGf5+fnIy8uDMjw8jNnZWSwsLGBmZgaDg4PIyMhAbm4usrKyJAoLC5GUlISQkBBMTU3h9vYW19fXODw8xMnJCa6urnBxcSG/CksbGxuTckg7OzsbQUFB8PPzg7GxMSoqKqRENzc3mJqaIjAwEAMDAxgZGRF5WCb/7uzslPuKi4sL/P39ERAQgOjoaDg6OsLBwUHYrKys4OnpCV9fX9jb2xMwa2trRERECGvKk5KSIlLwLiVTenp6MDQ0JKVQJwsLC+jo6Ih+BPv4+MD7+zteXl6EjYaGBuzs7ITV7u4uDg4OcHl5KaUfHR1BmZycBGN8fByxsbEwNDSEvr4+5ubm8Pr6ire3NwG7v7/H5uYmrKysoCgKEhISsL+/LyBnZ2c4Pj7G1tYWFG9vb3h6eiI0NBT29vaSzJL7+/tB9rxA25B9TU0NnJ2dJYdMeZflR0ZGyn3KpFAXakj7aGpqSrKNjY1oysawIfQnm0VblJWVSRXMMzIykgYSjMDEUlpbW0VUPT09qKmpSaKrq6uc0fBsDBuytraGnZ0drK+v/2PyN8/AwACLi4ui3/b2tkiiTE9Py+sEU1VVlUSyGx0dxerqqgh/enqKjY0NuUDf0qPq6uqiJ327tLQkE0MvK9TPy8sLurq6AsiwtbUVT9HoaWlpCA8PR3l5Ofg43cAzPmxpaSlTRg0ZwpwaREVFiWlVVFSkDGpJ25SUlIi29FxcXJzoNzExIYC/j5NQenq6jC69qNBb9CEP+Kq2trb8khUXAZkWFRVJaZwogjo5OUlFzI2PjxdHEIfTpiwvL4vQnFky/O00x45LgqAxMTGiM799fHykgWRHv/KcjaMXaXKFCWw3dSMgg6/TZ+7u7gLAyaBe/Kb5mcum0D60GG33X0POIz9Yorm5uTBkaGlpSbeTk5Nl0/CX5uZC+AUkS55zanifW0ohZZbEZJZkZmYmgGRJQFqEu4460pf0LRcEKzExMcH8/DweHh5kdLkoFApNwTmH9BMtRA2pD0vhEuXIcVq41bml+RBz2BCanrP+8/ODm5sbKHd3d/j8/MTz87MsSe4/MmCTaBs2hVuZwT3Ix6kpO03jn5+f4/HxUbbS9/c3/gC5Yx/DRVmC+AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;antonio_b&amp;amp;w&quot;
        title=&quot;antonio_b&amp;amp;w&quot;
        src=&quot;/static/0f8e324ecbc44119116d6eba652eb36f/d4214/antonio_bw-150x150.png&quot;
        srcset=&quot;/static/0f8e324ecbc44119116d6eba652eb36f/d4214/antonio_bw-150x150.png 150w&quot;
        sizes=&quot;(max-width: 150px) 100vw, 150px&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Antonio is a Software Engineer as profession and hobby, who has been working for years as employee and as freelance building information systems and web applications.&lt;/p&gt;
&lt;p&gt;He is a firm believer of agile methodologies (and much more about common sense). There is no ring to rule them all, every place needs to forge its own master ring.&lt;/p&gt;
&lt;p&gt;He is mainly experienced in the Java and JavaScript ecosystems (Spring, Hibernate, JPA, NodeJS, Express, React, Redux, ...) but also has some knowledge about other programming languages in addition to devops.&lt;/p&gt;
&lt;p&gt;This is what he says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&apos;m a passionate programmer and a acceptableÂ guitar player&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;and this is what job mates says:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;He&apos;s incredibly motivated and an awesome developer but as guitar player he must improve a lot his skills.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can know a bit more of him:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Reading his website &lt;a href=&quot;http://acuriousanimal.com/&quot;&gt;http://acuriousanimal.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Following his Twitter account &lt;a href=&quot;https://twitter.com/acanimal&quot;&gt;@acanimal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Visiting his &lt;a href=&quot;https://www.linkedin.com/in/acanimal/&quot;&gt;LinkedIn&lt;/a&gt; profile&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>