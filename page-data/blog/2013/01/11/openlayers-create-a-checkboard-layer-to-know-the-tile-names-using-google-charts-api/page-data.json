{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2013/01/11/openlayers-create-a-checkboard-layer-to-know-the-tile-names-using-google-charts-api/","webpackCompilationHash":"94830e9bd36aba932e6a","result":{"data":{"markdownRemark":{"html":"<p>Pyramid tiles are used by many providers as a more efficient way (than WMS server) to provide images. The idea is simple, we have zoom levels and on every level we have NxN tiles of a specific size (typically 256x256 pixels). Google, Yahoo, Bing or OpenStreetMaps are samples of tile providers.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.32555425904317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAb/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAbKYLo6QxBr/xAAZEAADAQEBAAAAAAAAAAAAAAABAgMAEiH/2gAIAQEAAQUCpQIEsCcxLMnugx4//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BGf/EABcRAAMBAAAAAAAAAAAAAAAAAAABEQL/2gAIAQIBAT8B0oU//8QAGxAAAgEFAAAAAAAAAAAAAAAAAAEhEBESMWH/2gAIAQEABj8C6WdMm5JNn//EABwQAAICAgMAAAAAAAAAAAAAAAERACEQMUFRYf/aAAgBAQABPyEa7aDjyi/RhjRLlytWht2RQn//2gAMAwEAAgADAAAAED8P/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EAXGTL//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QQaRq/8QAHRABAAICAgMAAAAAAAAAAAAAAREhADFBcRCBkf/aAAgBAQABPxAkUeOHbbrCBbQeb0+ECutKdvzWGGnHPWKxpclwVWf/2Q==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"pyramid\" title=\"pyramid\" src=\"/static/b059065f3b10b7264b4e25c0f9689e0f/a111b/pyramid.jpg\" srcset=\"/static/b059065f3b10b7264b4e25c0f9689e0f/aca85/pyramid.jpg 163w,\n/static/b059065f3b10b7264b4e25c0f9689e0f/0954f/pyramid.jpg 325w,\n/static/b059065f3b10b7264b4e25c0f9689e0f/a111b/pyramid.jpg 650w,\n/static/b059065f3b10b7264b4e25c0f9689e0f/82b3b/pyramid.jpg 857w\" sizes=\"(max-width: 650px) 100vw, 650px\" loading=\"lazy\">\n    </span></p>\n<p>Here, we are going to create a new OpenLayers layer that will show a checkboard with the name of the tile, all this with the help of&#xA0;the Google Charts API.</p>\n<p>We need to take into account every provider uses a different pyramid tile notation, that means the same tile can be named [level=1,x=0,y=0] by one provider and named [level=1,x=0,y=1] by another.</p>\n<p>Next code is based on OpenLayers.TMS layer, which follow the&#xA0;<a href=\"http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification\">OSGeo TMS</a>&#xA0;specification.</p>\n<p><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 541px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 103.88170055452865%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAA9hAAAPYQGoP6dpAAACAklEQVQ4y2WUR47CQBBFff8TIcQZWCAhEEnkHE3GGObZD5oZphbmd1f8VdVEz19yv9+TJHn+k9Vq1Wg0Wq1Ws9lst9v1ev12uz0ejwgdP2maApbLJWoAx8dbVOFfKBTK5XKxWCQKN9PpNEJ3vV5JiN16vR4OhyiSXI7Ho4CKdrudR4wx63a7o9EowieUGsfxYrEwM9/T6WRdyOVyCVWAS6US+bPMBCbqdrvFmco5UhJG5/MZzA3RccCS0GBApVLpdDrfmefzudlCZoVAluA9mWlblnm/33OGDJ79fp9OnnKBGz5i6qI6ADfbXLDMMmMdMs9ms8ATU1PxxUfCiHPKRiVndHEucjaEDpvNJnBWixgoy+wBEDhbi5zNI2exPXs5QwYdVwRmeuZBIHZ5C3O2L+BAJyvbGXLAwiE50sPhYAa+JKBAqZo/c5aD/XRJnKdlo2IxsZYz2HXk/lV2+hZmRuUuuVvlqsozbIQlZM68kl6vR5+ICq5Wq4DBYAB5JknbUfEFTyaTeS7sP7tJCRGbwDBsBka1Wg3AEf5EcUMgDKYFYWGc2WtUdj8sCSRthG+OLzd8Zfsp2yUxJM50G2uATxIfMAbw54amoP2zJJyN5JKEFlKnfXJUAX9GZT9dKTz5u/HFOl43V1Jf/y0v5yC+J8B4PObFOm2ELtJhZsElmHDe/wD1v7ob6RbYdQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Tms\" title=\"Tms\" src=\"/static/14c073366a4b28425bc34d1daba41bbd/50336/Tms.png\" srcset=\"/static/14c073366a4b28425bc34d1daba41bbd/19bd1/Tms.png 163w,\n/static/14c073366a4b28425bc34d1daba41bbd/d3bcb/Tms.png 325w,\n/static/14c073366a4b28425bc34d1daba41bbd/50336/Tms.png 541w\" sizes=\"(max-width: 541px) 100vw, 541px\" loading=\"lazy\">\n    </span></p>\n<p>I have divided the code in two TMS subclasses. The first one is responsible to draw the&#xA0;<em>checkboard</em>&#xA0;and the second one to&#xA0;draw the tile name on top every tile. The checkboard layer makes use of Google Chart API to generate black tiles.</p>\n<div id=\"highlighter_552708\">\n<pre class=\"lang:js decode:true\">OpenLayers.Layer.Checkboard = OpenLayers.Class(OpenLayers.Layer.TMS, {</pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">getURL: function (bounds) {\n\tvar res = this.map.getResolution();\n\tvar z = this.map.getZoom();\n\tvar limit = Math.pow(2, z);\n\tvar x = Math.round((bounds.left - this.maxExtent.left) / (res *this.tileSize.w));\n\tvar y = Math.round((this.maxExtent.top - bounds.top) / (res *this.tileSize.h));\n\n\tif (y &amp;lt; 0 || y &amp;gt;= limit) {\n\treturn &quot;&quot;;\n\t} else {\n\t\tx = ((x % limit) + limit) % limit;\n\t\tvar tilename = &quot;&quot;;\n\t\tif( (x+y)%2==0 ) {\n\t\t\ttilename = &quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;;chs=256x256&amp;amp;chf=bg,s,ffffffff&amp;amp;chld=FFFFFF|12|h|000000|b||&quot;;\n\t\t} else {\n\t\t\t// no tile\n\t\t}\n\t\treturn tilename;\n\t}\n},\n\nCLASS_NAME: &quot;OpenLayers.Layer.Checkboard&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>});</pre></p>\n<p>Next is the code that return the tile names:</p>\n</div>\n<div id=\"highlighter_917884\">\n<pre class=\"lang:js decode:true \">OpenLayers.Layer.Tilenames = OpenLayers.Class(OpenLayers.Layer.TMS, {\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">getURL: function (bounds) {\n\tvar res = this.map.getResolution();\n\tvar z = this.map.getZoom();\n\tvar limit = Math.pow(2, z);\n\tvar x = Math.round((bounds.left - this.maxExtent.left) / (res *this.tileSize.w));\n\tvar y = Math.round((this.maxExtent.top - bounds.top) / (res *this.tileSize.h));\n\n\tif (y &amp;lt; 0 || y &amp;gt;= limit) {\n\treturn &quot;&quot;;\n\t} else {\n\t\tx = ((x % limit) + limit) % limit;\n\n\t\tvar tilename = &quot;&quot;;\n\t\tif( (x+y)%2==0 ) {\n\t\t\ttilename = &quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;;chs=256x256&amp;amp;chld=FFFFFF|12|h|000000|b||&quot;;\n\t\t} else {\n\t\t\ttilename = &quot;http://chart.apis.google.com/chart?chst=d_text_outline&amp;amp;;chs=256x256&amp;amp;chld=000000|12|h|FFFFFF|b||&quot;;\n\t\t}\n\t\ttilename = tilename + &quot;(&quot;+z+&quot;/&quot;+x+&quot;/&quot;+y+&quot;)&quot;;\n\t\treturn tilename;\n\t}\n},\n\nCLASS_NAME: &quot;OpenLayers.Layer.Tilenames&quot;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>});</pre></p>\n<p>&nbsp;</p>\n</div>","excerpt":"Pyramid tiles are used by many providers as a more efficient way (than WMS server) to provide images. The idea is simple, we have zoom levels and on every level we have NxN tiles of a specific size (typically 256x256 pixels). Google, Yahoo, Bing or OpenStreetMaps are samples of tile providers. }); });","frontmatter":{"date":"11 January, 2013","title":"OpenLayers, create a checkboard layer to know the tile names using Google Charts API"},"fields":{"slug":"/blog/2013/01/11/openlayers-create-a-checkboard-layer-to-know-the-tile-names-using-google-charts-api/","readingTime":{"text":"2 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2013/01/11/openlayers-create-a-checkboard-layer-to-know-the-tile-names-using-google-charts-api/"}}}