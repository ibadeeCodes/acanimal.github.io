{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2014/12/30/why-openlayers3-does-not-render-my-geojson","webpackCompilationHash":"024410ebbb7cbeb2ff5b","result":{"data":{"markdownRemark":{"html":"<p>OpenLayers3 offers the <code class=\"language-text\">ol.source.GeoJSON</code> class that allows to read data from a GeoJSON source (an URL, a JavaScript object or a text string).</p>\n<p>Maybe you, like me, has spent some time trying to understand why your GeoJSON data is not rendering properly: projection is fine, your GeoJSON is well formed and validated but OpenLayers3 doesn't return any features and so nothing is rendered in the map.</p>\n<h2>What is the problem?</h2>\n<p>The <code class=\"language-text\">ol.source.GeoJSON</code> class is a subclass of <code class=\"language-text\">ol.source.StaticVector</code> that uses an <code class=\"language-text\">ol.format.GeoJSON</code> instance to read content:<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 313px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 145.04792332268372%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsSAAALEgHS3X78AAAEYklEQVRIx6VVWUijVxjNv2gSnUzHUmomow+l074UrFbmSWiRClNoS8cXKd2sIq20UnHiQEFbLC6oqA8qUcTWFdwXXCsalbivcY0xatxFaVHUvkSE2/PdGpiGTjJML4Tvev/vnvvd8517VChcxtramkhxfHz8++3t7d93dnaq7XZ7ucViKVxdXc1H/G12drYmKSnpFcrLyckRFO7GxcWFRPHg4MDAMJaWlhgOYQBm8/PzPB4dHbGCgoL7lFdbW+secGtriwOiCsP19TU7OTlhAGeolq2vrzObzcYWFxdP09PTX6O8kpIS94BdXV08NjQ03Ovs7Hy/p6fnPVTxqKio6EvQ8FZfX9/b9fX1b4aHh/OD4+LiFB5Hb2/vfy17uS5ERkZ6BhsdHXVWKgwNDUmgUQgNDVUHBgZqMFdUVVWJOFCMiYnheSkpKe4BZ2ZmeKyrqxPKysp4xwMCAlR+fn4amqelpQk1NTVCdnY2z8vNzfVc5eTkpOsSAatcF9EYz2C4Jo+FhYWB1dXVb6ApOjREl5mZqcWVb6G6u6jqfnJyMj8A0T3g6ekp7x5kUo8529jYOIMOz6HBP+fm5v6gOb791dra+oDycKDoFtDhcHDAvb29ARI2iZq0R4KGRtnu7i47Oztj7e3t794owj0gMHjC9PT0zwCdAcgCnpsVoEZEI2L3xMREq8FgeJ3yKisrBY88kjyeGlpBEHQ3c5+nP1RUVCieG4yiXq/39vHxue38FhUVpQ4JCfGjb7GxsbyypqamfwNgA//RkGX5H42IojO+rNPpZAJQKpXOLXdcX41zP4/EGX4yTEAGX/LIyAgBCGFhYbeDg4Pv0HxwcFAqLi7mueXl5cqgoKBX6RBwKi8vL8sLCwsSrE2GC0mK/zG8n/Uq4mFPBehoGqTxEzT2BPb0BJp7jApiMdebTKZvExISNKjil8PDwyxoM72tre1X3Ogx5j8g75uVlZUf0f3vyEhNpDer1cp1Rpozm80MV2FIYMfHxyRue2Ji4t3z83PH5eUlN12scY3iYAaaGK2jmA0FTNN0dXXF9vf3GU7nkcRLEdbP4OAEsAxXuQeOLuhvcmw6CLfiOZubm1zsqHSFLPwdkP4BbOsjGOjHjY2NCc3NzamYf0FXxdvWw2wfqlQqqaOjIwJrn01NTcUTVdjzNb5/OjAw8Ki7u/tDvP0HzyLc64VbhVNE8CbCB7mZRkREKOF/L9EcJivBFCSj0ShGR0crIA8RvEm4GslEAhUS+JbAo4g8cXh4WFTANShRaGlp4crXarXevr6+/HWkpqYKIFygHBr4H/NCRdNzueW6mJ+f/3y78/LyvEpLSzUgVT02Nubl7++vpueFzkuwKDW+azIyMriIs7KyPAOCn08gl3O03g5+rOAGWl40gxMLog1rDnQy/oZv2SMgNn5OwibdkahJV1A9/TPn4qaBhqXcuLhnwP7+/odQ/QrEbMYGCwBR7OYOfsC3mdFJG2z+K8rFI5Aw3OL9DUd4Ff7QrRKoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"0d1aff07\"\n        title=\"0d1aff07\"\n        src=\"/static/bba2241c04fe2eb7fa94bee425a35aba/10448/0d1aff07.png\"\n        srcset=\"/static/bba2241c04fe2eb7fa94bee425a35aba/19bd1/0d1aff07.png 163w,\n/static/bba2241c04fe2eb7fa94bee425a35aba/10448/0d1aff07.png 313w\"\n        sizes=\"(max-width: 313px) 100vw, 313px\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>A source class, by definition, acts as a source of features for a vector layers, that is, it is like a container of features. Because of this, the <code class=\"language-text\">ol.source.GeoJSON</code> source is limited to read GeoJSON features and not geometries. So next GeoJSON will be ignored by OpenLayers3 (really if you use de debug version you will see an assertion message):</p>\n<p>{% highlight javascript %}\n{\n\"type\": \"Point\",\n\"coordinates\": [\n-105.01621,\n39.57422\n]\n}\n{% endhighlight %}</p>\n<p>While the next is a valid GeoJSON suitable to be read by the source:</p>\n<p>{% highlight javascript %}\n{\n\"type\": \"Feature\",\n\"geometry\": {\n\"type\": \"Point\",\n\"coordinates\": [\n-105.01621,\n39.57422\n]\n},\n\"properties\": {\n\"name\": \"Some feature property\"\n}\n}\n{% endhighlight %}</p>\n<h2> That means we can't read GeoJSON geometries?</h2>\n<p>Absolutely no, simply means source classes follows the source concept, and that means, work with features.</p>\n<p>The <code class=\"language-text\">ol.format.GeoJSON</code> format class allows to read and write features and geometries. To read a GeoJSON file composed of geometries we need to read the geometries and, manually, create a feature for each one. For example:</p>\n<p>{% highlight javascript %}\nvar point = {\n\"type\": \"Point\",\n\"coordinates\": [\n-105.01621,\n39.57422\n]\n};</p>\n<p>// Read the GeoJSON geometries using the format class\nvar format = new ol.format.GeoJSON();\nvar geometry = format.readGeometry(point);</p>\n<p>// Create a feature using the geometry\nvar feature = new ol.Feature({\ngeometry: geometry,\npropA: 'Some feature property'\n});</p>\n<p>// Add feature to the source of some vector layer\nvectorLayer.getSource().addFeature(feature);\n{% endhighlight %}</p>","excerpt":"OpenLayers3 offers the  class that allows to read data from a GeoJSON source (an URL, a JavaScript object or a text string). Maybe you, like me, has spent some time trying to understand why your GeoJSON data is not rendering properly: projection is fine, your GeoJSON is well formed and validated but OpenLayers3 doesn't return any features and so nothing is rendered in the map. What is the problem? The  class is a subclass of  that uses an  instance to read content: A source class, by definition, acts as a source of features for a vector layers, that is, it is like a container of features. Because of this, the  source is limited to read GeoJSON features and not geometries. So next GeoJSON will be ignored by OpenLayers3 (really if you use de debug version you will see an assertion message): {% highlight javascript %}\n{\n    \"type\": \"Point\",\n    \"coordinates\": \n        -105.01621,\n        39.57422\n    \n}\n{% endhighlight %} While the next is a valid GeoJSON suitable to be read by the source: {% highlight javascript %}\n{\n    \"type\": \"Feature\",\n    \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": \n            -105.01621,\n            39.57422\n        \n    },\n    \"properties\": {\n        \"name\": \"Some feature property\"\n    }\n}\n{% endhighlight %}  That means we can't read GeoJSON geometries? Absolutely no, simply means source classes follows the source concept, and that means, work with features. The  format class allows to read and write features and geometries. To read a GeoJSON file composed of geometries we need to read the geometries and, manually, create a feature for each one. For example: {% highlight javascript %}\nvar point = {\n    \"type\": \"Point\",\n    \"coordinates\": \n        -105.01621,\n        39.57422\n    \n}; // Read the GeoJSON geometries using the format class\nvar format = new ol.format.GeoJSON();\nvar geometry = format.readGeometry(point); // Create a feature using the geometry\nvar feature = new ol.Feature({\n  geometry: geometry,\n  propA: 'Some feature property'\n}); // Add feature to the source of some vector layer\nvectorLayer.getSource().addFeature(feature);\n{% endhighlight %}","frontmatter":{"date":"30 December, 2014","title":"Why OpenLayers3 does not render my GeoJSON?"},"fields":{"slug":"/blog/2014/12/30/why-openlayers3-does-not-render-my-geojson","readingTime":{"text":"2 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2014/12/30/why-openlayers3-does-not-render-my-geojson"}}}