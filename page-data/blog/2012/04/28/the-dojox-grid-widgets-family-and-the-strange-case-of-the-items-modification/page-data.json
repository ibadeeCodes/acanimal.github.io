{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2012/04/28/the-dojox-grid-widgets-family-and-the-strange-case-of-the-items-modification/","webpackCompilationHash":"79efcce55e01ed481a07","result":{"data":{"markdownRemark":{"html":"<p>So, you are building a web application and decided to use the great Dojo framework. Â Probably, if you need to use grids, you will decide to use some of the available widgets subclass of <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html\">dojox.grid</a>. Well, my friend, be aware with the data you use to fill the grid's store !!!</p>\n<h2>The scenario</h2>\n<p>Start creating a piece of code to execute when the page is ready. It will use the <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html\">DataGrid </a>widget with an <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html\">ItemFileWriteStore </a>store:</p>\n<pre class=\"brush:js\">require(['dojox/grid/DataGrid', 'dojo/data/ItemFileWriteStore', 'dojo/domReady!'],\n<p>function(DataGrid, ItemFileWriteStore){</pre></p>\n<p>Now, create a <em>data</em> object with a set of random items:</p>\n<pre class=\"brush:js\">\t// Set up data store\n\tvar data = {\n\t\tidentifier: \"id\",\n\t\titems: []\n\t};\n\t// Initialize with random elements.\n\tvar rows = 10;</pre>\n<p>Note we have stores our items in a different array:</p>\n<pre class=\"brush:js\">\tvar items = [];\n\tfor(var i = 0; i &lt; rows; i++){\n\t\titems.push({ id: i+1, col1: \"the first column\", col2: false, col3: 'A column with a long description', col4: Math.random()*50 });\n\t}\n\tdata.items = items;</pre>\n<p>Now, create the store and set the grid layout:</p>\n<pre class=\"brush:js\">\tvar store = new ItemFileWriteStore({data: data});\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// Set up layout\nvar layout = [[\n\t\t{&#39;name&#39;: &#39;Column ID&#39;, &#39;field&#39;: &#39;id&#39;, &#39;width&#39;: &#39;100px&#39;},\n\t\t{&#39;name&#39;: &#39;Column 1&#39;, &#39;field&#39;: &#39;col1&#39;, &#39;width&#39;: &#39;100px&#39;},\n\t\t{&#39;name&#39;: &#39;Column 2&#39;, &#39;field&#39;: &#39;col2&#39;, &#39;width&#39;: &#39;100px&#39;},\n\t\t{&#39;name&#39;: &#39;Column 3&#39;, &#39;field&#39;: &#39;col3&#39;, &#39;width&#39;: &#39;auto&#39;},\n\t\t{&#39;name&#39;: &#39;Column 4&#39;, &#39;field&#39;: &#39;col4&#39;, &#39;width&#39;: &#39;150px&#39;}\n\t]];&lt;/pre&gt;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Finally, create the grid (remember to startup it):</p>\n<pre class=\"brush:js\">\t// Create a new grid\n\tvar grid = new DataGrid({\n\t\tid: 'grid',\n\t\tstore: store,\n\t\tstructure: layout,\n\t\trowSelector: '20px'\n\t});\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// Append the new grid to the div\ngrid.placeAt(&quot;gridDiv&quot;);\n\n// Call startup() to render the grid\ngrid.startup();</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>});</pre></p>\n<p>The grid code needs we have an HTML element in our page:</p>\n<pre class=\"brush:xml\">&lt;div id=&quot;gridDiv&quot;&gt;&lt;/div&gt;</pre>\n<p>Here is the result of the previous code:</p>\n<p><a href=\"./images/2012/04/table.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 44.268774703557305%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkklEQVQoz11SC8+bMBDr//+B6z7xCCEQEsKz0r4SoPV8KdukIaETvotj+7gp06HQLWyYUTUORW3hhgV51cC4AbafkKkajR/TTMvvjn03rvye8FVoVK3/i9+sDzjOE6/3G+M4olQVwjDCeY/9OLHFDbqu+Rr2FIpS4bltOF9vxD2iaRpiJaxzCf+PcIKqdKq+77ETjzHCGKo1bSKW/rbFNL/vO2pTI8syGBL/+n5+CPfjSKSPxyMRrazzMic8UmEIgaoH9jy876k6pnlRGIaAzjss64rvJwlb91HyBjDwUJaX6AOz69xlOUIxBqU08qKgmoLWLoW8UNcaP+53VFrzguOfwvP1wrIsJOpYV4zTlHDJ0DNPR2Udc5K+XCLzkZa7zqZspSf4zbrATCTkE/M8M4sW0zQni3JACK21SbHkJHlK+MeVryNRbQzdjWmeCj8H5ZEt54VKTdnyedmqNLesP1vOizJZk0dECNn96ydaKpfN3xrrEpFY7LmQjg2pYlPwYRwSJlb/1OGal74olF9Hqjj8DSQvpzZyb9hZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"table\" title=\"table\" src=\"/static/1bf37d5d7aba9c50a1f9092b1e59e251/dbb61/table.png\" srcset=\"/static/1bf37d5d7aba9c50a1f9092b1e59e251/19bd1/table.png 163w,\n/static/1bf37d5d7aba9c50a1f9092b1e59e251/d3bcb/table.png 325w,\n/static/1bf37d5d7aba9c50a1f9092b1e59e251/dbb61/table.png 650w,\n/static/1bf37d5d7aba9c50a1f9092b1e59e251/b5cf5/table.png 759w\" sizes=\"(max-width: 650px) 100vw, 650px\" loading=\"lazy\">\n    </span></a></p>\n<h2>The issue</h2>\n<p>Our idea behind having the items stored in an array is because trying:</p>\n<ul>\n<li>to serve as input data for the grid&apos;s store</li>\n<li>to store the original array to make other operations: to be used in other stores, to make a simple iteration, ... whatever we want.</li>\n</ul>\n<p>The issue is <strong>the array of items used to initialize the data store are modified once the grid&apos;s <em>startup()</em> method is executed</strong>.</p>\n<p>Lets go to see it in action. Check the value of the <em>items</em> array before and after the grid&apos;s <em>startup()</em> method is executed:</p>\n<p><a href=\"./images/2012/04/shot1.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.58348968105066%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABN0lEQVQoz3WR127DMBRD/f9/2IUmSOJt2RoeWj69cZo8FCghgoJgUeR1gcDNjrpt2daFlCMxJ/YdZL14R0iRoRrQtcEooTYopVDDQNM0GGMoDsNxpKpLzGyYnGLxVk7zg3sSPvY5eXRjqE41k9zJOROjBEgJHwJJtOimndNZ8/bZ8/mtON8s19JRlpayEu08VRsp2yCPGpZ5YapHTK8IeiZtHnHiqCQoRglzqTTvp0oMNN2w0vYLrWinNtQUD8pdmn7GWYsTVWI6StqwePK6kiXpYfic0NY3pOpGahtCWxP7ltjJ/nZllfPjG5nxpCYu54tU9PzFLimLe9LNe6nimPXE5txRI23bg+tGFN6fDTInqy1fH194718mT/4mBC1G1/O31O2OP/kf7oazneluA1Y0xvAyfeIHX14d4HpoKEsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"shot1\" title=\"Before\" src=\"/static/83daa03bf5472816311d68437f884451/dbb61/shot1.png\" srcset=\"/static/83daa03bf5472816311d68437f884451/19bd1/shot1.png 163w,\n/static/83daa03bf5472816311d68437f884451/d3bcb/shot1.png 325w,\n/static/83daa03bf5472816311d68437f884451/dbb61/shot1.png 650w,\n/static/83daa03bf5472816311d68437f884451/6b691/shot1.png 975w,\n/static/83daa03bf5472816311d68437f884451/d0baa/shot1.png 1066w\" sizes=\"(max-width: 650px) 100vw, 650px\" loading=\"lazy\">\n    </span></a></p>\n<p>&#xA0;</p>\n<p>&#xA0;</p>\n<p><a href=\"./images/2012/04/shot2.png\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 33.20825515947467%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABD0lEQVQoz22Q4W7DIAyE+/4PuB+TtjXJ2oYSwJCEQALcHKpVmbqTPmGMfDY+gZVKhneEqBU2Y7CSZegB34PWyLkwGUoo0JUw6hGOHDS/aaUgxL3Gp91wHB0GKaC0hA/LnkLBq1JOsNJCNAOIm6aUsG1bZV3XelbD4AOu7QVGKqS4PgxL+cOuvSCGCGLTefb4T9XQzQaDvWN2POFiEfNymLE845w3eO9he4uubRFifGl+kpTx+W3wdu7xdSO0cqoIs3ETYKBSURz3Q4C1FkYY3C7Xan40rBM27wpNN6OXiYsKtENlj4/sOaEWkCZ0TYdpml6mq4ZpXupC05r4NR++edTvDnl/xuL8cYZz7ml41A+2jh/9mVoYTQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"shot2\" title=\"After\" src=\"/static/e67e27825e575ae74f3dbe39d7db595a/dbb61/shot2.png\" srcset=\"/static/e67e27825e575ae74f3dbe39d7db595a/19bd1/shot2.png 163w,\n/static/e67e27825e575ae74f3dbe39d7db595a/d3bcb/shot2.png 325w,\n/static/e67e27825e575ae74f3dbe39d7db595a/dbb61/shot2.png 650w,\n/static/e67e27825e575ae74f3dbe39d7db595a/6b691/shot2.png 975w,\n/static/e67e27825e575ae74f3dbe39d7db595a/d0baa/shot2.png 1066w\" sizes=\"(max-width: 650px) 100vw, 650px\" loading=\"lazy\">\n    </span></a></p>\n<p>Yes, the objects within the items array are modified for internal pourposes.</p>\n<h2>Conclusions</h2>\n<p>This simple issue can have great implications depending on your way to code.</p>\n<p>Suppose you are getting a JSON file with information about employees and for each one the set of companies they have worked. You will store this information in JavaScript object array and may be interested on use to:</p>\n<ul>\n<li>search the boss within employees</li>\n<li>initialize a <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojox/grid/TreeGrid.html\">TreeGrid</a> to show the whole list of data.</li>\n</ul>\n<p>The problem is you can&apos;t use the same object array for the two tasks because in the moment the TreeGrid will execute its <em>startup()</em> method the array of items will change its structure.</p>\n<p>How to solve this? Create a new array of objects from your original one or store them in a <a href=\"http://dojotoolkit.org/reference-guide/1.7/dojo/store/Memory.html\">Memory store</a>.</p>\n<h2>References</h2>\n<p><a href=\"http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html\">http://dojotoolkit.org/reference-guide/1.7/dojox/grid/index.html</a></p>\n<p><a href=\"http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html\">http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html</a></p>\n<p><a href=\"http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html\">http://dojotoolkit.org/reference-guide/1.7/dojo/data/ItemFileWriteStore.html</a></p>\n<p>Connecting a Store to a DataGrid -&#xA0;<a href=\"http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/\">http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/</a></p>","excerpt":"So, you are building a web application and decided to use the great Dojo framework. Â Probably, if you need to use grids, you will decide to use some of the available widgets subclass of dojox.grid. Well, my friend, be aware with the data you use to fill the grid's store !!! function(DataGrid, ItemFileWriteStore){ });","frontmatter":{"date":"28 April, 2012","title":"The dojox.grid widgets family and the strange case of the items modification"},"fields":{"slug":"/blog/2012/04/28/the-dojox-grid-widgets-family-and-the-strange-case-of-the-items-modification/","readingTime":{"text":"3 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2012/04/28/the-dojox-grid-widgets-family-and-the-strange-case-of-the-items-modification/"}}}