{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb","webpackCompilationHash":"024410ebbb7cbeb2ff5b","result":{"data":{"markdownRemark":{"html":"<p><a href=\"http://www.acuriousanimal.com/SimplyWrite\">SimplyWrite </a>is a free web distraction writing tool. It is based in the IndexedDB HTML5 so you need a browser compliant. Because the use of IndexedDB <strong>all the content is stored locally on your machine</strong>, no data is transferred or stored in a remote server.</p>\n<p>There are many other solutions, like <a href=\"http://www.hogbaysoftware.com/products/writeroom\">WriteRoom</a>, <a href=\"http://www.ommwriter.com/\">OmmWriter</a> or <a href=\"http://gottcode.org/focuswriter/\">FocusWritter</a>, but SimplyWrite benefits from the fact it is a web tool clone.</p>\n<blockquote><strong>NOTE: This post is obsolete see <a href=\"//2013/04/29/simplywrite-a-free-web-distraction-writing-tool.html\">SimplyWrite, a free web distraction writing tool</a>.</strong></blockquote>\n<p>You can download the source from <a href=\"https://github.com/acanimal/SimplyWrite\">github</a>.</p>\n<p>Please take a look and let me know your suggestions.</p>\n<blockquote><p>For the moment SimplyWrite has only been tested on Chromium 9 because the requirement of a IndexedDB browser implementarion.</p></blockquote>\n<p style=\"text-align: center;\"><a href=\"http://www.acuriousanimal.com/SimplyWrite\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 57.284768211920536%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAwElEQVQoz+2S3Q6CMAyF91zAUNxgG7yV/G3ghb/PeyzIjBoNxHjpxZez9nRdk5UJKbERApJ0FceIogic81mGujAM7/iY8QfDNxt0jk8PsZimWjLRUpif6N/w+4Y//5TwZZ+CiJM+595C98baSQO/h4UxMErBaILOuVhDpxJKa+gJRb4if9AxHvKpGGuNSFCIFXKZIMsysEtX4exKnHYW+8MRfVPCNjWsdYSFczf1OGdHzzUVunoLV5foSTvStm1xBbgAi+3+OBVLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"simplywrite\" title=\"simplywrite\" src=\"/static/fb6555342820391ac3f4c8c0b57b97f7/dbb61/simplywrite.png\" srcset=\"/static/fb6555342820391ac3f4c8c0b57b97f7/19bd1/simplywrite.png 163w,\n/static/fb6555342820391ac3f4c8c0b57b97f7/d3bcb/simplywrite.png 325w,\n/static/fb6555342820391ac3f4c8c0b57b97f7/dbb61/simplywrite.png 650w,\n/static/fb6555342820391ac3f4c8c0b57b97f7/5ee4b/simplywrite.png 906w\" sizes=\"(max-width: 650px) 100vw, 650px\" loading=\"lazy\">\n    </span></a></p>\n<h2>Beyond the amazing announce</h2>\n<p>All right, SimplyWrite is&#xA0;awesome and this announce will change the world but... the truth is all these is because I need a target to work with IndexedDB.</p>\n<p>HTML5 is out since a long time (almost a year is like 100 hundreds at internet) and it comes will lot of new features browser will implement in&#xA0;successive&#xA0;releases (at least I hope it).</p>\n<h2>Client-Side Storage</h2>\n<p>HTML5 comes with different solutions for client-side storage: WebStorage, Web SQL Database and IndexedDB.</p>\n<p>At this moment one of the main issues is HTML5 is great specification but big and complex to implement by browsers. Because this you need to check if a desired feature is supported/implemented by the browser you are going to use.</p>\n<p>As a summary,&#xA0;<a href=\"http://www.w3.org/TR/webstorage/\">WebStorage</a> is a key-value mechanism,&#xA0;<a href=\"http://www.w3.org/TR/webdatabase/\">WebSQLDatabase</a> is,&#xA0;unfortunately, a not really good idea (because this it was abandoned), and finally IndexedDB can be understood as a perfect mix between WebStorage and WebSQLDatabase.</p>\n<p>WebSQLDatabase, like Google Gears, was mainly though around SQLite, because this many HTML5 implementations were based too on SQLite,&#xA0;inheriting&#xA0;its limitations too. Mozilla never agree with WebDatabase standard and because this never implement it on their bowser. They prefer to work in the IndexedDB.</p>\n<p>An important consideration is IndexedDB defines two &quot;working modes&quot;: asynchronous and synchronous, but at this moment only asynchronous seems to be supported.</p>\n<h2>Working with IndexedDB</h2>\n<p>Here are&#xA0;pieces&#xA0;of source code for the common action.</p>\n<h3>Getting reference to IndexedDB</h3>\n<p>To work with IndexedDB you need to get a reference. Currently there is no common way to achieve it. On Chromium you need to access to&#xA0;<span style=\"font-family: Consolas, Monaco, &apos;Courier New&apos;, Courier, monospace; font-size: 12px; line-height: 18px; white-space: pre;\">window.webkitIndexedDB</span> while on Firefox you need to use <span style=\"font-family: Consolas, Monaco, &apos;Courier New&apos;, Courier, monospace; font-size: 12px; line-height: 18px; white-space: pre;\">window.mozIndexedDB</span>.</p>\n<pre class=\"brush:js\">if ( &quot;webkitIndexedDB&quot; in window ) {\n\twindow.indexedDB      = window.webkitIndexedDB;\n\twindow.IDBTransaction = window.webkitIDBTransaction;\n\twindow.IDBTransaction = window.webkitIDBTransaction;\n\twindow.IDBKeyRange    = window.webkitIDBKeyRange;\n} else if ( &quot;moz_indexedDB&quot; in window ) {\n\twindow.indexedDB = window.moz_indexedDB;\n}\nif ( !window.indexedDB ) {\n\t// Browser doesn&#x2019;t support indexedDB, do something\n\t// clever, and then exit early.\n\talert(&quot;IndexedDB not supported !!!&quot;);\n}</pre>\n<h3>Creating/Opening the database</h3>\n<p>Once you have access to IndexedDB reference the next step is create or open the database:</p>\n<pre class=\"brush:js\">var dbRequest = window.indexedDB.open(\n\t&quot;SimplyWriteDB&quot;,        // Database ID\n\t&quot;All my SimplyWrities&quot; // Database Description\n);</pre>\n<p>Every command is executed asynchronously and generates a request object where you can execute code on events &apos;onsuccess&apos; or &apos;onerror&apos;.</p>\n<h3>Initializing the database for the first time</h3>\n<p>Using the request object returned by the previous command we execute next code on success:</p>\n<pre class=\"brush:js\">dbRequest.onsuccess = function ( e ) {\n\tvar db = e.result;\n\tif ( db.version === &quot;&quot; ) {\n\t\t// Empty string means the database hasn&#x2019;t been versioned.\n\t\tvar versionRequest = db.setVersion( &quot;1.0&quot; );\n\t\tversionRequest.onsuccess = function ( e ) {\n\t\t\tvar store = db.createObjectStore(\n\t\t\t&quot;written&quot;,\t// The Object Store&#x2019;s name\n\t\t\t&quot;title&quot;,  \t\t\t\t// The name of the property to use as a key\n\t\t\tfalse         \t\t// Is the key auto-incrementing?\n\t\t\t);\n\t\t};\n\t}\n};</pre>\n<p>IndexedDB databases can have different versions. You can use version to initialize the DB for the first time or to update the structure of the database. For example, you have a database with some structure in version 1.0 and want to update it creating a new object store up and increasing the version number to 2.0.</p>\n<h3>Adding, getting and removing content</h3>\n<p>At this point we have a database created with one object store, that uses &apos;title&apos; as the key. Now we can add and get content to it.</p>\n<pre class=\"brush:js\">var writeTransaction = dbase.transaction(\n  [&quot;simplywriteOS&quot;],           // The Object Stores to lock\n  IDBTransaction.READ_WRITE,  // Lock type (READ_ONLY, READ_WRITE)\n  0\n);\n// Open a store and generate a write request:\nvar store = writeTransaction.objectStore(&quot;written&quot;);\nvar writeRequest = store.add( {\n    &quot;title&quot;:  this_is_the_title,\n    &quot;text&quot;: this_is_the_text\n} );\nwriteRequest.onerror = function ( e ) {</pre>\n<p>};\nwriteRequest.onsuccess = function ( e ) {\n};</pre></p>\n<p>Basically, we need to create a database transaction, specify the object store to use in the transaction and make the action like add, get or remove.</p>\n<p>One important action is to iterate over all the elements in an object store. You can do that using a cursor:</p>\n<pre class=\"brush:js\">var readCursor = store.openCursor();\nreadCursor.onsuccess = function ( e ) {\n  if ( e.result ) {\n    console.log(e.result.value.title);\n    e.result.continue();\n  } else {\n    // If the `success` event’s `result` is null, you’ve reached\n    // the end of the cursor’s list.\n  }\n};</pre>\n<h2>Final words about SimplyWrite</h2>\n<p>SimplyWrite is written using HTML and JavaScript (of course) and I make use of a couple of other projects. I would like to note the use, in addition to jQuery and jQueryUI, two projects:</p>\n<ul>\n<li><a href=\"http://css3buttons.michaelhenriksen.dk/\">css3buttons</a>, nice set of CSS3 for buttons.</li>\n<li><a href=\"http://html5boilerplate.com/\">html5boilerplate</a> the Swiss knife of HTML5.</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li><a href=\"http://www.html5rocks.com/tutorials/#storage\">http://www.html5rocks.com/tutorials/#storage</a> - HTML5 Storage</li>\n<li><a href=\"http://mikewest.org/2010/12/intro-to-indexeddb\">http://mikewest.org/2010/12/intro-to-indexeddb</a> - Intro to IndexedDB with good slides.</li>\n<li><a href=\"http://msdn.microsoft.com/en-us/scriptjunkie/gg679063\">http://msdn.microsoft.com/en-us/scriptjunkie/gg679063</a> - Another great IndexedDB description</li>\n<li><a href=\"http://www.w3.org/TR/webstorage\">http://www.w3.org/TR/webstorage</a> - WebStore specification.</li>\n<li><a href=\"http://www.w3.org/TR/IndexedDB/\">http://www.w3.org/TR/IndexedDB</a> - IndexedDB specification.</li>\n<li><a href=\"http://caniuse.com/indexeddb\">http://caniuse.com/indexeddb</a> - IndexedDB compatibility.</li>\n</ul>","excerpt":"SimplyWrite is a free web distraction writing tool. It is based in the IndexedDB HTML5 so you need a browser compliant. Because the use of IndexedDB all the content is stored locally on your machine, no data is transferred or stored in a remote server. };\nwriteRequest.onsuccess = function ( e ) {\n};","frontmatter":{"date":"17 April, 2011","title":"SimplyWrite, a free web distraction writing tool based on IndexedDB"},"fields":{"slug":"/blog/2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb","readingTime":{"text":"5 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/2011/04/17/simplywrite-a-free-web-distraction-writing-tool-based-on-indexeddb"}}}